[{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2669,2672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2669,2672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'inferredMode' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":68,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect } from 'react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { RouterProvider } from 'react-router-dom';\r\nimport { router } from './router';\r\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\r\nimport { doc, getDoc, setDoc, onSnapshot } from 'firebase/firestore';\r\nimport { auth, db } from './lib/firebase';\r\nimport { useAppStore } from './hooks/useAppStore';\r\nimport { usersService } from './services/modules/users';\r\n\r\n// Initialize Query Client\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n});\r\n\r\nconst App: React.FC = () => {\r\n  const { actions } = useAppStore();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n\r\n      if (firebaseUser) {\r\n        try {\r\n          const userDocRef = doc(db, 'users', firebaseUser.uid);\r\n\r\n          // 1. Initial Check & Creation\r\n          // We use centralized service to avoid race conditions with AuthView\r\n          await usersService.initializeUserProfile(firebaseUser);\r\n\r\n          // 2. Real-time Listener for Updates & Session Validation\r\n          const unsubscribeSnapshot = onSnapshot(userDocRef, (userDocSnap) => {\r\n            if (userDocSnap.exists()) {\r\n              const userData = userDocSnap.data();\r\n              const userRole = userData.role || 'Creative Member';\r\n              const userLocation = userData.location || 'Latam';\r\n              const isAdminFromStore = userData.isAdmin || false;\r\n              const isAdmin = firebaseUser.email === 'admin@latamcreativa.com';\r\n\r\n              const appUser = {\r\n                ...userData,\r\n                id: firebaseUser.uid,\r\n                name: userData.name || firebaseUser.displayName || 'Usuario',\r\n                avatar: userData.avatar || firebaseUser.photoURL || 'https://ui-avatars.com/api/?name=' + (firebaseUser.displayName || 'U'),\r\n                role: isAdmin ? 'Administrator' : userRole,\r\n                location: userLocation,\r\n                email: firebaseUser.email || '',\r\n                isAdmin: isAdminFromStore || isAdmin,\r\n                createdAt: userData.createdAt || (firebaseUser.metadata.creationTime || new Date().toISOString()),\r\n                availableForWork: userData.availableForWork || false,\r\n                isProfileComplete: userData.isProfileComplete ?? false,\r\n                username: userData.username || '',\r\n                country: userData.country || '',\r\n                city: userData.city || ''\r\n              };\r\n\r\n              actions.setUser(appUser as any);\r\n\r\n              // Restore Content Mode Logic\r\n              const devKeywords = ['developer', 'desarrollador', 'engineer', 'ingeniero', 'coder', 'programmer', 'programador', 'software', 'tech', 'web', 'app', 'mobile', 'backend', 'frontend', 'fullstack', 'devops', 'data', 'ai'];\r\n              const userRoleName = (appUser.role || '').toLowerCase();\r\n              const isDevRole = devKeywords.some(k => userRoleName.includes(k));\r\n              const inferredMode = isDevRole ? 'dev' : 'creative';\r\n              // actions.setContentMode(inferredMode); // Let store persistence handle this, or set if needed.\r\n\r\n            } else {\r\n              // Document deleted -> Invalidate Session\r\n              console.warn(\"User document deleted. Logging out.\");\r\n              signOut(auth);\r\n              actions.setUser(null);\r\n            }\r\n          });\r\n\r\n          return () => unsubscribeSnapshot();\r\n\r\n        } catch (error) {\r\n          console.error(\"Error fetching/creating user profile:\", error);\r\n        }\r\n      } else {\r\n        actions.setUser(null);\r\n        actions.setLoadingAuth(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <RouterProvider router={router} />\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\CommentsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authorUsername' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":51,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5940,5943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5940,5943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6786,6789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6786,6789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Heart, MessageSquare, Trash2, Send, Reply } from 'lucide-react';\r\nimport { useAppStore } from '../hooks/useAppStore';\r\nimport { timeAgo } from '../utils/helpers';\r\nimport { useAuthorInfo } from '../hooks/useAuthorInfo';\r\n\r\n/**\r\n * Interfaz unificada de comentario que funciona con comentarios de Portfolio y Blog.\r\n * Maneja diferencias de nombres de campos entre los dos sistemas.\r\n */\r\ninterface Comment {\r\n    id: string;\r\n    authorId: string;\r\n    authorName?: string;\r\n    author?: string;\r\n    authorUsername?: string;\r\n    authorAvatar?: string;\r\n    avatar?: string;\r\n    text?: string;\r\n    content?: string;\r\n    createdAt?: string;\r\n    date?: string;\r\n    likes?: number;\r\n    parentId?: string;\r\n}\r\n\r\n/**\r\n * Componente para mostrar info del autor con lookup en vivo\r\n */\r\ninterface AuthorDisplayProps {\r\n    comment: Comment;\r\n    onClick?: () => void;\r\n    className?: string;\r\n    avatarClassName?: string;\r\n    nameClassName?: string;\r\n    showAvatar?: boolean;\r\n    showName?: boolean;\r\n}\r\n\r\nconst AuthorDisplay: React.FC<AuthorDisplayProps> = ({\r\n    comment,\r\n    onClick,\r\n    className = '',\r\n    avatarClassName = 'h-10 w-10 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-amber-500 transition-all',\r\n    nameClassName = 'font-bold text-slate-900 dark:text-white text-sm hover:text-amber-500 cursor-pointer',\r\n    showAvatar = true,\r\n    showName = true\r\n}) => {\r\n    // Live author lookup - fetches current name/avatar from user profile\r\n    const { authorName, authorAvatar, authorUsername } = useAuthorInfo(\r\n        comment.authorId,\r\n        comment.authorName || comment.author,\r\n        comment.authorAvatar || comment.avatar\r\n    );\r\n\r\n    const handleClick = () => {\r\n        if (onClick) {\r\n            onClick();\r\n        }\r\n    };\r\n\r\n    if (showAvatar && !showName) {\r\n        return (\r\n            <img\r\n                src={authorAvatar || '/default-avatar.png'}\r\n                alt={authorName || 'Usuario'}\r\n                className={avatarClassName}\r\n                onClick={handleClick}\r\n            />\r\n        );\r\n    }\r\n\r\n    if (showName && !showAvatar) {\r\n        return (\r\n            <span className={nameClassName} onClick={handleClick}>\r\n                {authorName || 'Usuario'}\r\n            </span>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`flex items-center gap-2 ${className}`}>\r\n            {showAvatar && (\r\n                <img\r\n                    src={authorAvatar || '/default-avatar.png'}\r\n                    alt={authorName || 'Usuario'}\r\n                    className={avatarClassName}\r\n                    onClick={handleClick}\r\n                />\r\n            )}\r\n            {showName && (\r\n                <span className={nameClassName} onClick={handleClick}>\r\n                    {authorName || 'Usuario'}\r\n                </span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Props para el componente CommentsSection\r\n */\r\ninterface CommentsSectionProps {\r\n    /** Array de comentarios a mostrar */\r\n    comments: Comment[];\r\n    /** Si los comentarios est├ín cargando */\r\n    isLoading?: boolean;\r\n    /** ID del autor del contenido (para permisos de eliminaci├│n) */\r\n    contentAuthorId?: string;\r\n    /** Callback para agregar un nuevo comentario */\r\n    onAddComment: (text: string) => Promise<void>;\r\n    /** Callback para eliminar un comentario */\r\n    onDeleteComment: (commentId: string) => Promise<void>;\r\n    /** Callback para alternar like en un comentario */\r\n    onLikeComment: (commentId: string) => Promise<void>;\r\n    /** Callback para agregar respuesta a un comentario */\r\n    onAddReply: (parentId: string, text: string) => Promise<void>;\r\n    /** Mapa de IDs de comentarios a estado de like */\r\n    commentLikes: Record<string, boolean>;\r\n}\r\n\r\n/**\r\n * Componente reutilizable de secci├│n de comentarios para publicaciones de Portfolio y Blog.\r\n * Incluye input, lista, likes, respuestas y funcionalidad de eliminaci├│n.\r\n */\r\nexport const CommentsSection: React.FC<CommentsSectionProps> = ({\r\n    comments,\r\n    isLoading = false,\r\n    contentAuthorId,\r\n    onAddComment,\r\n    onDeleteComment,\r\n    onLikeComment,\r\n    onAddReply,\r\n    commentLikes,\r\n}) => {\r\n    const navigate = useNavigate();\r\n    const { state, actions } = useAppStore();\r\n\r\n    const [newComment, setNewComment] = useState('');\r\n    const [isAddingComment, setIsAddingComment] = useState(false);\r\n    const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n    const [replyText, setReplyText] = useState('');\r\n    const [isAddingReply, setIsAddingReply] = useState(false);\r\n\r\n    // Separate root comments and replies\r\n    const rootComments = useMemo(() =>\r\n        comments\r\n            .filter(c => !c.parentId)\r\n            .sort((a, b) =>\r\n                new Date(b.createdAt || b.date || 0).getTime() -\r\n                new Date(a.createdAt || a.date || 0).getTime()\r\n            ),\r\n        [comments]\r\n    );\r\n\r\n    const getReplies = (parentId: string) =>\r\n        comments\r\n            .filter(c => c.parentId === parentId)\r\n            .sort((a, b) =>\r\n                new Date(a.createdAt || a.date || 0).getTime() -\r\n                new Date(b.createdAt || b.date || 0).getTime()\r\n            );\r\n\r\n    // Helpers to get text and date (keep these simple, author is handled by AuthorDisplay)\r\n    const getText = (c: Comment) => c.text || c.content || '';\r\n    const getDate = (c: Comment) => c.createdAt || c.date || '';\r\n\r\n    const handleAddComment = async () => {\r\n        if (!newComment.trim() || !state.user) {\r\n            if (!state.user) actions.showToast('Inicia sesi├│n para comentar', 'info');\r\n            return;\r\n        }\r\n        setIsAddingComment(true);\r\n        try {\r\n            await onAddComment(newComment.trim());\r\n            setNewComment('');\r\n        } catch (error: any) {\r\n            actions.showToast(error.message || 'Error al comentar', 'error');\r\n        } finally {\r\n            setIsAddingComment(false);\r\n        }\r\n    };\r\n\r\n    const handleStartReply = (commentId: string) => {\r\n        if (!state.user) {\r\n            actions.showToast('Inicia sesi├│n para responder', 'info');\r\n            return;\r\n        }\r\n        setReplyingTo(commentId);\r\n        setReplyText('');\r\n    };\r\n\r\n    const handleCancelReply = () => {\r\n        setReplyingTo(null);\r\n        setReplyText('');\r\n    };\r\n\r\n    const handleSubmitReply = async (parentId: string) => {\r\n        if (!replyText.trim() || !state.user) return;\r\n        setIsAddingReply(true);\r\n        try {\r\n            await onAddReply(parentId, replyText.trim());\r\n            setReplyingTo(null);\r\n            setReplyText('');\r\n        } catch (error: any) {\r\n            actions.showToast(error.message || 'Error al responder', 'error');\r\n        } finally {\r\n            setIsAddingReply(false);\r\n        }\r\n    };\r\n\r\n    const canDelete = (commentAuthorId: string) =>\r\n        state.user?.id === commentAuthorId || state.user?.id === contentAuthorId;\r\n\r\n    return (\r\n        <div className=\"pt-8 border-t border-slate-200 dark:border-white/10\">\r\n            {/* Header */}\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                <MessageSquare className=\"h-5 w-5 text-amber-500\" />\r\n                Comentarios\r\n                <span className=\"text-slate-400 dark:text-slate-500 text-sm font-normal\">\r\n                    ({comments.length})\r\n                </span>\r\n            </h3>\r\n\r\n            {/* Comment Input */}\r\n            {state.user ? (\r\n                <div className=\"flex gap-4 mb-8 bg-slate-50 dark:bg-[#18181b] p-4 rounded-xl border border-slate-200 dark:border-white/5\">\r\n                    <img\r\n                        src={state.user.avatar}\r\n                        alt=\"Tu avatar\"\r\n                        className=\"h-10 w-10 rounded-full object-cover ring-2 ring-amber-500/20\"\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                        <textarea\r\n                            value={newComment}\r\n                            onChange={(e) => setNewComment(e.target.value)}\r\n                            placeholder=\"Escribe un comentario...\"\r\n                            rows={2}\r\n                            disabled={isAddingComment}\r\n                            className=\"w-full bg-transparent text-slate-700 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 text-sm focus:outline-none resize-none\"\r\n                        />\r\n                        <div className=\"flex justify-end mt-2\">\r\n                            <button\r\n                                onClick={handleAddComment}\r\n                                disabled={isAddingComment || !newComment.trim()}\r\n                                className=\"px-4 py-2 bg-amber-500 text-white rounded-lg text-sm font-bold hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                            >\r\n                                <Send className=\"h-4 w-4\" />\r\n                                {isAddingComment ? 'Publicando...' : 'Comentar'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center py-6 bg-slate-50 dark:bg-white/5 rounded-xl mb-8 border border-slate-200 dark:border-white/10\">\r\n                    <p className=\"text-slate-500 dark:text-slate-400 text-sm\">\r\n                        <button onClick={() => navigate('/login')} className=\"text-amber-500 hover:underline font-bold\">\r\n                            Inicia sesi├│n\r\n                        </button>{' '}\r\n                        para comentar\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Comments List */}\r\n            <div className=\"space-y-6\">\r\n                {isLoading ? (\r\n                    <div className=\"text-center text-slate-400 py-8\">Cargando comentarios...</div>\r\n                ) : rootComments.length > 0 ? (\r\n                    rootComments.map((comment) => (\r\n                        <div key={comment.id} className=\"border-b border-slate-100 dark:border-white/5 pb-6 last:border-0\">\r\n                            <div className=\"flex gap-4\">\r\n                                <AuthorDisplay\r\n                                    comment={comment}\r\n                                    onClick={() => comment.authorUsername && navigate(`/user/${comment.authorUsername}`)}\r\n                                    showName={false}\r\n                                    avatarClassName=\"h-10 w-10 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-amber-500 transition-all\"\r\n                                />\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <AuthorDisplay\r\n                                            comment={comment}\r\n                                            onClick={() => comment.authorUsername && navigate(`/user/${comment.authorUsername}`)}\r\n                                            showAvatar={false}\r\n                                            nameClassName=\"font-bold text-slate-900 dark:text-white text-sm hover:text-amber-500 cursor-pointer\"\r\n                                        />\r\n                                        <span className=\"text-xs text-slate-400\">{timeAgo(getDate(comment))}</span>\r\n                                    </div>\r\n                                    <p className=\"text-slate-600 dark:text-slate-300 text-sm whitespace-pre-wrap mb-2\">\r\n                                        {getText(comment)}\r\n                                    </p>\r\n\r\n                                    {/* Actions */}\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <button\r\n                                            onClick={() => onLikeComment(comment.id)}\r\n                                            className={`text-xs flex items-center gap-1 transition-colors ${commentLikes[comment.id]\r\n                                                ? 'text-red-500'\r\n                                                : 'text-slate-400 hover:text-red-500'\r\n                                                }`}\r\n                                        >\r\n                                            <Heart className={`h-3.5 w-3.5 ${commentLikes[comment.id] ? 'fill-current' : ''}`} />\r\n                                            {comment.likes || 0}\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleStartReply(comment.id)}\r\n                                            className=\"text-xs text-slate-400 hover:text-amber-500 flex items-center gap-1\"\r\n                                        >\r\n                                            <Reply className=\"h-3.5 w-3.5\" />\r\n                                            Responder\r\n                                        </button>\r\n                                        {canDelete(comment.authorId) && (\r\n                                            <button\r\n                                                onClick={() => onDeleteComment(comment.id)}\r\n                                                className=\"text-xs text-slate-400 hover:text-red-500\"\r\n                                            >\r\n                                                <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Reply Form */}\r\n                                    {replyingTo === comment.id && (\r\n                                        <div className=\"mt-4 flex gap-3 bg-slate-50 dark:bg-white/5 p-3 rounded-lg\">\r\n                                            <img src={state.user?.avatar} alt=\"\" className=\"h-8 w-8 rounded-full\" />\r\n                                            <div className=\"flex-1\">\r\n                                                <textarea\r\n                                                    value={replyText}\r\n                                                    onChange={(e) => setReplyText(e.target.value)}\r\n                                                    placeholder=\"Escribe tu respuesta...\"\r\n                                                    rows={2}\r\n                                                    disabled={isAddingReply}\r\n                                                    className=\"w-full bg-transparent text-slate-700 dark:text-slate-300 placeholder-slate-400 text-xs focus:outline-none resize-none\"\r\n                                                    autoFocus\r\n                                                />\r\n                                                <div className=\"flex justify-end gap-2 mt-2\">\r\n                                                    <button onClick={handleCancelReply} className=\"text-xs text-slate-400 hover:text-slate-600\">\r\n                                                        Cancelar\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleSubmitReply(comment.id)}\r\n                                                        disabled={isAddingReply || !replyText.trim()}\r\n                                                        className=\"px-3 py-1 bg-amber-500 text-white rounded text-xs font-bold hover:bg-amber-600 disabled:opacity-50\"\r\n                                                    >\r\n                                                        {isAddingReply ? 'Enviando...' : 'Responder'}\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Replies */}\r\n                                    {getReplies(comment.id).length > 0 && (\r\n                                        <div className=\"mt-4 ml-4 border-l-2 border-slate-100 dark:border-white/10 pl-4 space-y-4\">\r\n                                            {getReplies(comment.id).map((reply) => (\r\n                                                <div key={reply.id} className=\"flex gap-3\">\r\n                                                    <AuthorDisplay\r\n                                                        comment={reply}\r\n                                                        onClick={() => reply.authorUsername && navigate(`/user/${reply.authorUsername}`)}\r\n                                                        showName={false}\r\n                                                        avatarClassName=\"h-8 w-8 rounded-full object-cover cursor-pointer\"\r\n                                                    />\r\n                                                    <div className=\"flex-1\">\r\n                                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                                            <AuthorDisplay\r\n                                                                comment={reply}\r\n                                                                onClick={() => reply.authorUsername && navigate(`/user/${reply.authorUsername}`)}\r\n                                                                showAvatar={false}\r\n                                                                nameClassName=\"font-bold text-slate-900 dark:text-white text-xs hover:text-amber-500 cursor-pointer\"\r\n                                                            />\r\n                                                            <span className=\"text-[10px] text-slate-400\">{timeAgo(getDate(reply))}</span>\r\n                                                            {canDelete(reply.authorId) && (\r\n                                                                <button\r\n                                                                    onClick={() => onDeleteComment(reply.id)}\r\n                                                                    className=\"text-slate-400 hover:text-red-500\"\r\n                                                                >\r\n                                                                    <Trash2 className=\"h-3 w-3\" />\r\n                                                                </button>\r\n                                                            )}\r\n                                                        </div>\r\n                                                        <p className=\"text-slate-600 dark:text-slate-300 text-xs whitespace-pre-wrap\">\r\n                                                            {getText(reply)}\r\n                                                        </p>\r\n                                                        <button\r\n                                                            onClick={() => onLikeComment(reply.id)}\r\n                                                            className={`text-[10px] flex items-center gap-1 mt-1 ${commentLikes[reply.id]\r\n                                                                ? 'text-red-500'\r\n                                                                : 'text-slate-400 hover:text-red-500'\r\n                                                                }`}\r\n                                                        >\r\n                                                            <Heart className={`h-2.5 w-2.5 ${commentLikes[reply.id] ? 'fill-current' : ''}`} />\r\n                                                            {reply.likes || 0}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"text-center text-slate-400 dark:text-slate-500 py-8\">\r\n                        S├® el primero en comentar.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\SEOHead.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\cards\\ArtistCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserPlus' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { MapPin, Users, Briefcase, UserPlus, CheckCircle2, MessageSquare } from 'lucide-react';\r\nimport { ArtistProfile } from '../../types';\r\n\r\ninterface ArtistCardProps {\r\n    artist: ArtistProfile;\r\n    onClick?: () => void;\r\n}\r\n\r\nexport const ArtistCard: React.FC<ArtistCardProps> = ({ artist, onClick }) => {\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n\r\n    // Helper to determine frame style based on level\r\n    const getLevelFrameClass = (level?: string) => {\r\n        switch (level) {\r\n            case 'Master': return 'bg-gradient-to-tr from-cyan-400 via-blue-500 to-purple-600 shadow-lg shadow-cyan-500/20';\r\n            case 'Expert': return 'bg-gradient-to-tr from-purple-500 to-pink-500 shadow-lg shadow-purple-500/20';\r\n            case 'Pro': return 'bg-gradient-to-tr from-amber-400 to-orange-600 shadow-lg shadow-amber-500/20';\r\n            case 'Novice': return 'bg-slate-200 dark:bg-slate-700';\r\n            default: return 'bg-slate-200 dark:bg-slate-700';\r\n        }\r\n    };\r\n\r\n    const levelFrameClass = getLevelFrameClass(artist.level);\r\n\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"group relative flex flex-col bg-white dark:bg-white/[0.02] rounded-2xl overflow-hidden ring-1 ring-slate-200 dark:ring-white/10 hover:ring-amber-500/50 transition-all duration-300 cursor-pointer hover:shadow-xl hover:shadow-amber-500/5 hover:-translate-y-2 h-full\"\r\n        >\r\n            {/* Cover Image */}\r\n            <div className=\"h-24 bg-slate-200 dark:bg-slate-800 overflow-hidden\">\r\n                <img\r\n                    src={artist.coverImage}\r\n                    alt=\"Cover\"\r\n                    loading=\"lazy\"\r\n                    className=\"w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-500\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"px-5 pb-5 flex flex-col flex-1 relative\">\r\n                {/* Avatar with Dynamic Level Frame */}\r\n                <div className=\"-mt-10 mb-3 flex justify-between items-end\">\r\n                    <div className={`h-20 w-20 rounded-2xl p-[3px] ${levelFrameClass} group-hover:scale-105 transition-transform duration-300`}>\r\n                        <div className=\"h-full w-full rounded-xl overflow-hidden border-2 border-white dark:border-[#18181b] bg-slate-100 dark:bg-slate-800\">\r\n                            <img src={artist.avatar} alt={artist.name} loading=\"lazy\" className=\"w-full h-full object-cover\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {artist.availableForWork && (\r\n                        <span className=\"px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 border border-green-500/20 text-[10px] font-bold uppercase rounded-lg mb-1 animate-pulse\">\r\n                            Open to Work\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Info */}\r\n                <div className=\"mb-4\">\r\n                    <div className=\"flex items-center gap-1.5 mb-1\">\r\n                        <h3 className=\"font-bold text-slate-900 dark:text-white text-lg line-clamp-1 group-hover:text-amber-500 transition-colors\">\r\n                            {artist.name}\r\n                        </h3>\r\n                        {artist.isPro && <CheckCircle2 className=\"h-4 w-4 text-amber-500 fill-amber-500/20\" />}\r\n                    </div>\r\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400 font-medium mb-2\">{artist.role}</p>\r\n\r\n                    <div className=\"flex items-center gap-1 text-xs text-slate-400 mb-3\">\r\n                        <MapPin className=\"h-3 w-3\" />\r\n                        <span className=\"truncate\">{artist.location}</span>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"flex items-center gap-4 text-xs font-semibold text-slate-600 dark:text-slate-300\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <Users className=\"h-3.5 w-3.5\" /> {artist.followers}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <Briefcase className=\"h-3.5 w-3.5\" /> {artist.projects} Proyectos\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Skills Tags */}\r\n                <div className=\"flex flex-wrap gap-1.5 mb-5 mt-auto\">\r\n                    {artist.skills.slice(0, 3).map((skill, i) => (\r\n                        <span key={i} className=\"px-2 py-1 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/5 rounded text-[10px] text-slate-600 dark:text-slate-400 font-medium group-hover:bg-slate-200 dark:group-hover:bg-white/10 transition-colors\">\r\n                            {skill}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"grid grid-cols-2 gap-2 pt-4 border-t border-slate-100 dark:border-white/5\">\r\n                    <button\r\n                        onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setIsFollowing(!isFollowing);\r\n                        }}\r\n                        className={`flex items-center justify-center gap-2 py-2 rounded-xl text-xs font-bold transition-all active:scale-95 ${isFollowing\r\n                                ? 'bg-slate-100 dark:bg-white/10 text-slate-900 dark:text-white'\r\n                                : 'bg-amber-500 text-white hover:bg-amber-600 shadow-md shadow-amber-500/20'\r\n                            }`}\r\n                    >\r\n                        {isFollowing ? 'Siguiendo' : 'Seguir'}\r\n                    </button>\r\n                    <button\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        className=\"flex items-center justify-center gap-2 py-2 rounded-xl border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-white/5 text-xs font-bold transition-colors active:scale-95\"\r\n                    >\r\n                        <MessageSquare className=\"h-3.5 w-3.5\" /> Mensaje\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\cards\\BlogCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { Calendar, Clock, MessageSquare, Heart, Lock, Bookmark } from 'lucide-react';\r\nimport { ArticleItem } from '../../types';\r\nimport { useAuthorInfo } from '../../hooks/useAuthorInfo';\r\n\r\ninterface BlogCardProps {\r\n  article: ArticleItem;\r\n  onClick?: () => void;\r\n  onSave?: (id: string, image: string) => void;\r\n}\r\n\r\nexport const BlogCard: React.FC<BlogCardProps> = ({ article, onClick, onSave }) => {\r\n  // Live author lookup - fetches current name/avatar from user profile\r\n  const { authorName, authorAvatar } = useAuthorInfo(\r\n    article.authorId,\r\n    article.author,\r\n    article.authorAvatar\r\n  );\r\n\r\n  return (\r\n    <article\r\n      onClick={onClick}\r\n      className=\"group flex flex-col h-full bg-[#1a1a1e] rounded-2xl overflow-hidden ring-1 ring-white/10 hover:ring-rose-500/50 transition-all hover:shadow-xl hover:shadow-rose-500/10 hover:-translate-y-1 cursor-pointer relative\"\r\n    >\r\n      {/* Image */}\r\n      <div className=\"relative aspect-[4/3] overflow-hidden\">\r\n        <img\r\n          src={article.image}\r\n          alt={article.title}\r\n          loading=\"lazy\"\r\n          className=\"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-105\"\r\n        />\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-[#1a1a1e] to-transparent opacity-80\"></div>\r\n\r\n        <div className=\"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-[-10px] group-hover:translate-y-0\">\r\n          <button\r\n            onClick={(e) => { e.stopPropagation(); onSave?.(article.id, article.image); }}\r\n            className=\"p-2 rounded-full bg-black/60 backdrop-blur-md text-white hover:bg-white hover:text-black transition-colors border border-white/10 scale-90\"\r\n          >\r\n            <Bookmark className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"absolute top-3 left-3 bg-rose-600/90 backdrop-blur-md px-2.5 py-1 rounded-lg text-[10px] font-bold text-white uppercase tracking-wider shadow-lg\">\r\n          {article.category}\r\n        </div>\r\n\r\n        {/* Status Badges */}\r\n        {article.status === 'draft' && (\r\n          <div className=\"absolute bottom-3 left-3 bg-amber-500 px-2.5 py-1 rounded-lg text-[10px] font-bold text-white uppercase tracking-wider shadow-lg\">\r\n            Borrador\r\n          </div>\r\n        )}\r\n        {article.status === 'scheduled' && (\r\n          <div className=\"absolute bottom-3 left-3 bg-blue-500 px-2.5 py-1 rounded-lg text-[10px] font-bold text-white uppercase tracking-wider shadow-lg\">\r\n            Programado\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex flex-col flex-1 p-5 -mt-6 relative z-10\">\r\n        <div className=\"flex items-center gap-2 mb-3 text-xs font-medium text-slate-400\">\r\n          <img src={authorAvatar} alt={authorName} loading=\"lazy\" className=\"w-5 h-5 rounded-full ring-1 ring-white/20\" />\r\n          <span className=\"text-slate-300\">{authorName}</span>\r\n        </div>\r\n\r\n        <h3 className=\"font-bold text-lg text-white mb-2 leading-tight group-hover:text-rose-400 transition-colors line-clamp-2\">\r\n          {article.title}\r\n        </h3>\r\n\r\n        <p className=\"text-sm text-slate-400 line-clamp-3 mb-4 flex-1\">\r\n          {article.excerpt}\r\n        </p>\r\n\r\n        <div className=\"flex items-center justify-between pt-4 border-t border-white/5\">\r\n          <div className=\"flex items-center gap-1.5 text-xs font-medium text-rose-400 bg-rose-500/10 px-2 py-1 rounded\">\r\n            {new Date(article.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' })}\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4 text-xs text-slate-500\">\r\n            <div className=\"flex items-center gap-1 group-hover:text-rose-400 transition-colors\">\r\n              <Heart className=\"h-3.5 w-3.5\" /> {article.likes}\r\n            </div>\r\n            <div className=\"flex items-center gap-1 group-hover:text-rose-400 transition-colors\">\r\n              <MessageSquare className=\"h-3.5 w-3.5\" /> {article.comments}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\cards\\PortfolioCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Lock, Bookmark } from 'lucide-react';\r\nimport { PortfolioItem } from '../../types';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useAuthorInfo } from '../../hooks/useAuthorInfo';\r\n\r\n/**\r\n * Props para el componente PortfolioCard\r\n */\r\ninterface PortfolioCardProps {\r\n  /** El item de portafolio a mostrar */\r\n  item: PortfolioItem;\r\n  /** Se llama cuando se hace clic en la tarjeta */\r\n  onClick?: () => void;\r\n  /** Se llama cuando se hace clic en el bot├│n guardar/bookmark */\r\n  onSave?: (id: string, image: string, type: 'project' | 'article') => void;\r\n  /** Tipo de item para el callback de guardar */\r\n  itemType?: 'project' | 'article';\r\n  /** Mostrar badge de tipo (Portafolio/Blog) - ├║til en colecciones */\r\n  showTypeBadge?: boolean;\r\n  /** Ocultar bot├│n de guardar - ├║til cuando ya est├í en una colecci├│n */\r\n  hideSaveButton?: boolean;\r\n  /** Elemento de acci├│n adicional (ej. bot├│n eliminar) renderizado en la esquina */\r\n  extraAction?: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Componente de tarjeta para mostrar proyectos de portafolio en grids y feeds.\r\n * Muestra imagen de portada, t├¡tulo, info del autor y acciones interactivas (guardar, ver).\r\n * Obtiene datos del perfil del autor en tiempo real para mantener nombre actualizado.\r\n * \r\n * @example\r\n * ```tsx\r\n * <PortfolioCard\r\n *   item={portfolioItem}\r\n *   onClick={() => navigate(`/portfolio/${item.id}`)}\r\n *   onSave={(id, img, type) => handleSave(id, img, type)}\r\n * />\r\n * ```\r\n */\r\nexport const PortfolioCard: React.FC<PortfolioCardProps> = ({\r\n  item,\r\n  onClick,\r\n  onSave,\r\n  itemType = 'project',\r\n  showTypeBadge = false,\r\n  hideSaveButton = false,\r\n  extraAction\r\n}) => {\r\n  const { state } = useAppStore();\r\n\r\n  // Live author lookup - fetches current name/avatar from user profile\r\n  const { authorName, authorAvatar } = useAuthorInfo(\r\n    item.authorId,\r\n    item.artist,\r\n    item.artistAvatar\r\n  );\r\n\r\n  // Use live author profile data\r\n  const displayName = authorName || 'Unknown';\r\n  const displayAvatar = authorAvatar || '';\r\n\r\n  const handleSave = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    onSave?.(item.id, item.image, itemType);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"group relative flex flex-col gap-3 cursor-pointer\"\r\n    >\r\n      {/* Image Container */}\r\n      <div className=\"relative aspect-square w-full overflow-hidden rounded-2xl bg-[#1a1a1e] ring-1 ring-white/10 group-hover:ring-white/30 transition-all shadow-lg group-hover:shadow-2xl hover:shadow-pink-500/10 dark:hover:shadow-pink-500/10\">\r\n        <img\r\n          src={item.image}\r\n          alt={item.title}\r\n          className=\"h-full w-full object-cover transition-transform duration-700 ease-out group-hover:scale-110\"\r\n          loading=\"lazy\"\r\n        />\r\n\r\n        {/* Gradient Overlay for Text Readability */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-80 group-hover:opacity-100 transition-opacity duration-300\"></div>\r\n\r\n        {/* Top Badges & Actions */}\r\n        <div className=\"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-[-10px] group-hover:translate-y-0 z-20 pointer-events-none\">\r\n          {!hideSaveButton && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSave}\r\n              className=\"pointer-events-auto p-2 rounded-full bg-black/50 backdrop-blur-md text-white hover:bg-white hover:text-black transition-colors border border-white/10 hover:border-white\"\r\n              title=\"Guardar en colecci├│n\"\r\n            >\r\n              <Bookmark className=\"h-4 w-4\" />\r\n            </button>\r\n          )}\r\n\r\n          {/* Render extra actions (like Delete) here */}\r\n          {extraAction}\r\n        </div>\r\n\r\n        {item.isPrivate && (\r\n          <div className=\"absolute top-3 left-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-md border border-white/10 z-20\">\r\n            <Lock className=\"h-3 w-3 text-slate-300\" />\r\n          </div>\r\n        )}\r\n\r\n        {/* Status Badge - Draft or Scheduled */}\r\n        {item.status && item.status !== 'published' && (\r\n          <div className={`absolute top-3 ${item.isPrivate ? 'left-12' : 'left-3'} backdrop-blur-md px-2 py-1 rounded-md border z-20 text-[10px] font-bold uppercase tracking-wide ${item.status === 'draft'\r\n            ? 'bg-blue-500/20 border-blue-500/30 text-blue-400'\r\n            : 'bg-amber-500/20 border-amber-500/30 text-amber-400'\r\n            }`}>\r\n            {item.status === 'draft' ? 'Borrador' : 'Programado'}\r\n          </div>\r\n        )}\r\n\r\n        {/* Info Overlay (Inside Image) */}\r\n        <div className=\"absolute bottom-0 left-0 w-full p-4 flex flex-col justify-end z-10\">\r\n          <h3 className=\"font-bold text-white text-base leading-tight mb-2 line-clamp-2 group-hover:text-amber-400 transition-colors\">\r\n            {item.title}\r\n          </h3>\r\n          <div className=\"flex items-center gap-2\">\r\n            <img\r\n              src={displayAvatar}\r\n              alt={displayName}\r\n              className=\"h-5 w-5 rounded-full object-cover ring-1 ring-white/30\"\r\n            />\r\n            <span className=\"text-xs text-slate-300 font-medium truncate\">{displayName}</span>\r\n            {/* Type Badge - only show when showTypeBadge is true */}\r\n            {showTypeBadge && (\r\n              <span className={`ml-auto px-2 py-0.5 text-[10px] font-bold uppercase rounded ${itemType === 'article'\r\n                ? 'bg-rose-500/80 text-white'\r\n                : 'bg-amber-500/80 text-white'\r\n                }`}>\r\n                {itemType === 'article' ? 'Blog' : 'Portafolio'}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\cards\\VideoCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\FilterPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\LazyImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\Loader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\ServiceComingSoon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\common\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\ForumCategoryCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\ForumEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\ForumStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\ReplyCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'codeLanguage' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":103,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ReplyCard Component\r\n * \r\n * Card para mostrar una respuesta dentro de un hilo del foro.\r\n * Incluye contenido, autor, likes, y acciones (editar, eliminar, reportar).\r\n */\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Heart,\r\n    MoreVertical,\r\n    Edit2,\r\n    Trash2,\r\n    Flag,\r\n    Award,\r\n    Reply as ReplyIcon,\r\n    Check\r\n} from 'lucide-react';\r\nimport { ForumReply } from '../../types/forum';\r\nimport { useReplyLike } from '../../hooks/useForumHooks';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\n\r\ninterface ReplyCardProps {\r\n    reply: ForumReply;\r\n    threadAuthorId: string;\r\n    isThreadAuthor: boolean;\r\n    onEdit?: (replyId: string) => void;\r\n    onDelete?: (replyId: string) => void;\r\n    onReport?: (replyId: string) => void;\r\n    onMarkBestAnswer?: (replyId: string, isBest: boolean) => void;\r\n    onReply?: (replyId: string) => void;\r\n}\r\n\r\n/**\r\n * Calcula el tiempo transcurrido desde una fecha\r\n */\r\nfunction getTimeAgo(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return 'ahora';\r\n    if (diffMins < 60) return `hace ${diffMins}m`;\r\n    if (diffHours < 24) return `hace ${diffHours}h`;\r\n    if (diffDays < 30) return `hace ${diffDays}d`;\r\n    return new Date(dateString).toLocaleDateString('es-ES', {\r\n        day: 'numeric',\r\n        month: 'short'\r\n    });\r\n}\r\n\r\n/**\r\n * Detecta si el contenido es HTML (del editor WYSIWYG)\r\n */\r\nfunction isHtmlContent(content: string): boolean {\r\n    const trimmed = content.trim();\r\n    return trimmed.startsWith('<') && (\r\n        trimmed.includes('<p>') ||\r\n        trimmed.includes('<div>') ||\r\n        trimmed.includes('<h1>') ||\r\n        trimmed.includes('<h2>') ||\r\n        trimmed.includes('<h3>') ||\r\n        trimmed.includes('<ul>') ||\r\n        trimmed.includes('<ol>') ||\r\n        trimmed.includes('<blockquote>') ||\r\n        trimmed.includes('<pre>')\r\n    );\r\n}\r\n\r\n/**\r\n * Renderiza contenido HTML (del editor WYSIWYG)\r\n */\r\nfunction renderHtmlContent(content: string): React.ReactNode {\r\n    return (\r\n        <div\r\n            className=\"prose prose-invert prose-sm max-w-none\r\n                       prose-p:text-gray-300 prose-p:my-2\r\n                       prose-strong:text-white prose-strong:font-semibold\r\n                       prose-em:text-gray-300 prose-em:italic\r\n                       prose-a:text-purple-400 prose-a:no-underline hover:prose-a:underline\r\n                       prose-code:bg-black/30 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-purple-400 prose-code:text-sm prose-code:font-mono\r\n                       prose-pre:bg-black/40 prose-pre:rounded-lg prose-pre:p-4\r\n                       prose-blockquote:border-l-purple-500 prose-blockquote:bg-purple-500/5 prose-blockquote:px-4 prose-blockquote:py-2 prose-blockquote:rounded-r-lg\r\n                       prose-ul:text-gray-300 prose-ol:text-gray-300\r\n                       prose-img:rounded-xl prose-img:max-w-full\"\r\n            dangerouslySetInnerHTML={{ __html: content }}\r\n        />\r\n    );\r\n}\r\n\r\n/**\r\n * Renderiza contenido con soporte de Markdown\r\n */\r\nfunction renderMarkdownContent(content: string): React.ReactNode {\r\n    // Simple markdown-like rendering\r\n    const lines = content.split('\\n');\r\n    const elements: React.ReactNode[] = [];\r\n    let inCodeBlock = false;\r\n    let codeContent = '';\r\n    let codeLanguage = '';\r\n\r\n    lines.forEach((line, index) => {\r\n        if (line.startsWith('```')) {\r\n            if (inCodeBlock) {\r\n                // End code block\r\n                elements.push(\r\n                    <pre key={`code-${index}`} className=\"bg-black/40 rounded-lg p-3 my-2 overflow-x-auto\">\r\n                        <code className=\"text-sm text-gray-300 font-mono\">\r\n                            {codeContent.trim()}\r\n                        </code>\r\n                    </pre>\r\n                );\r\n                codeContent = '';\r\n                inCodeBlock = false;\r\n            } else {\r\n                // Start code block\r\n                codeLanguage = line.slice(3).trim();\r\n                inCodeBlock = true;\r\n            }\r\n        } else if (inCodeBlock) {\r\n            codeContent += line + '\\n';\r\n        } else {\r\n            // Regular line - handle inline code\r\n            const parts = line.split(/(`[^`]+`)/g);\r\n            const formattedParts = parts.map((part, partIndex) => {\r\n                if (part.startsWith('`') && part.endsWith('`')) {\r\n                    return (\r\n                        <code\r\n                            key={partIndex}\r\n                            className=\"bg-black/30 px-1.5 py-0.5 rounded text-purple-400 text-sm font-mono\"\r\n                        >\r\n                            {part.slice(1, -1)}\r\n                        </code>\r\n                    );\r\n                }\r\n                return part;\r\n            });\r\n\r\n            if (line.trim()) {\r\n                elements.push(\r\n                    <p key={index} className=\"text-gray-300 mb-2\">\r\n                        {formattedParts}\r\n                    </p>\r\n                );\r\n            } else {\r\n                elements.push(<br key={index} />);\r\n            }\r\n        }\r\n    });\r\n\r\n    return elements;\r\n}\r\n\r\n/**\r\n * Renderiza contenido - detecta autom├íticamente HTML vs Markdown\r\n */\r\nfunction renderContent(content: string): React.ReactNode {\r\n    if (!content) return null;\r\n\r\n    if (isHtmlContent(content)) {\r\n        return renderHtmlContent(content);\r\n    }\r\n\r\n    return renderMarkdownContent(content);\r\n}\r\n\r\nexport const ReplyCard: React.FC<ReplyCardProps> = ({\r\n    reply,\r\n    threadAuthorId,\r\n    isThreadAuthor,\r\n    onEdit,\r\n    onDelete,\r\n    onReport,\r\n    onMarkBestAnswer,\r\n    onReply\r\n}) => {\r\n    const navigate = useNavigate();\r\n    const { state } = useAppStore();\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const { liked, toggleLike, loading: likeLoading } = useReplyLike(\r\n        reply.threadId,\r\n        reply.id,\r\n        state.user?.uid\r\n    );\r\n\r\n    const isAuthor = state.user?.uid === reply.authorId;\r\n    const canMarkBest = isThreadAuthor && !reply.isBestAnswer;\r\n    const canUnmarkBest = isThreadAuthor && reply.isBestAnswer;\r\n\r\n    const handleAuthorClick = (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        if (reply.authorUsername) {\r\n            navigate(`/user/${reply.authorUsername}`);\r\n        }\r\n    };\r\n\r\n    const handleLike = async (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        if (!state.user) {\r\n            // Could show login modal here\r\n            return;\r\n        }\r\n        await toggleLike();\r\n    };\r\n\r\n    return (\r\n        <article\r\n            className={`relative bg-[#1a1a2e]/40 border rounded-xl p-4 transition-all duration-200 ${reply.isBestAnswer\r\n                ? 'border-green-500/30 bg-green-500/5'\r\n                : 'border-white/5 hover:border-white/10'\r\n                }`}\r\n        >\r\n            {/* Best Answer Badge */}\r\n            {reply.isBestAnswer && (\r\n                <div className=\"absolute -top-3 left-4 flex items-center gap-1.5 px-3 py-1 bg-green-500 text-white text-xs font-semibold rounded-full shadow-lg\">\r\n                    <Award className=\"w-3.5 h-3.5\" />\r\n                    Mejor Respuesta\r\n                </div>\r\n            )}\r\n\r\n            {/* Header: Author + Actions */}\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <img\r\n                        src={reply.authorAvatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(reply.authorName)}&background=6366f1&color=fff`}\r\n                        alt={reply.authorName}\r\n                        onClick={handleAuthorClick}\r\n                        className=\"w-10 h-10 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-purple-500 transition-all\"\r\n                    />\r\n                    <div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span\r\n                                onClick={handleAuthorClick}\r\n                                className=\"text-white font-medium hover:text-purple-400 cursor-pointer transition-colors\"\r\n                            >\r\n                                {reply.authorName}\r\n                            </span>\r\n                            {reply.authorId === threadAuthorId && (\r\n                                <span className=\"px-1.5 py-0.5 bg-purple-500/20 text-purple-400 text-xs font-medium rounded\">\r\n                                    OP\r\n                                </span>\r\n                            )}\r\n                            {reply.authorRole && (\r\n                                <span className=\"text-xs text-gray-500\">\r\n                                    {reply.authorRole}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n                            <span>{getTimeAgo(reply.createdAt)}</span>\r\n                            {reply.isEdited && (\r\n                                <span>(editado)</span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions Menu */}\r\n                {state.user && (\r\n                    <div className=\"relative\">\r\n                        <button\r\n                            onClick={() => setShowMenu(!showMenu)}\r\n                            className=\"p-1.5 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                        >\r\n                            <MoreVertical className=\"w-4 h-4\" />\r\n                        </button>\r\n\r\n                        {showMenu && (\r\n                            <>\r\n                                <div\r\n                                    className=\"fixed inset-0 z-10\"\r\n                                    onClick={() => setShowMenu(false)}\r\n                                />\r\n                                <div className=\"absolute right-0 top-8 z-20 w-48 bg-[#1a1a2e] border border-white/10 rounded-xl shadow-xl overflow-hidden\">\r\n                                    {isAuthor && onEdit && (\r\n                                        <button\r\n                                            onClick={() => { onEdit(reply.id); setShowMenu(false); }}\r\n                                            className=\"flex items-center gap-2 w-full px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                        >\r\n                                            <Edit2 className=\"w-4 h-4\" />\r\n                                            Editar\r\n                                        </button>\r\n                                    )}\r\n                                    {isAuthor && onDelete && (\r\n                                        <button\r\n                                            onClick={() => { onDelete(reply.id); setShowMenu(false); }}\r\n                                            className=\"flex items-center gap-2 w-full px-4 py-2.5 text-sm text-red-400 hover:bg-red-500/10 transition-colors\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                            Eliminar\r\n                                        </button>\r\n                                    )}\r\n                                    {canMarkBest && onMarkBestAnswer && (\r\n                                        <button\r\n                                            onClick={() => { onMarkBestAnswer(reply.id, true); setShowMenu(false); }}\r\n                                            className=\"flex items-center gap-2 w-full px-4 py-2.5 text-sm text-green-400 hover:bg-green-500/10 transition-colors\"\r\n                                        >\r\n                                            <Check className=\"w-4 h-4\" />\r\n                                            Marcar como mejor\r\n                                        </button>\r\n                                    )}\r\n                                    {canUnmarkBest && onMarkBestAnswer && (\r\n                                        <button\r\n                                            onClick={() => { onMarkBestAnswer(reply.id, false); setShowMenu(false); }}\r\n                                            className=\"flex items-center gap-2 w-full px-4 py-2.5 text-sm text-gray-400 hover:bg-white/5 transition-colors\"\r\n                                        >\r\n                                            <Check className=\"w-4 h-4\" />\r\n                                            Desmarcar respuesta\r\n                                        </button>\r\n                                    )}\r\n                                    {!isAuthor && onReport && (\r\n                                        <button\r\n                                            onClick={() => { onReport(reply.id); setShowMenu(false); }}\r\n                                            className=\"flex items-center gap-2 w-full px-4 py-2.5 text-sm text-gray-400 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                        >\r\n                                            <Flag className=\"w-4 h-4\" />\r\n                                            Reportar\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"prose prose-invert max-w-none text-gray-300\">\r\n                {renderContent(reply.content)}\r\n            </div>\r\n\r\n            {/* Footer: Actions */}\r\n            <div className=\"flex items-center gap-4 mt-4 pt-3 border-t border-white/5\">\r\n                <button\r\n                    onClick={handleLike}\r\n                    disabled={likeLoading || !state.user}\r\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-all ${liked\r\n                        ? 'bg-pink-500/20 text-pink-400'\r\n                        : 'text-gray-500 hover:text-pink-400 hover:bg-pink-500/10'\r\n                        } ${!state.user ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                >\r\n                    <Heart className={`w-4 h-4 ${liked ? 'fill-current' : ''}`} />\r\n                    <span>{reply.likes}</span>\r\n                </button>\r\n\r\n                {onReply && state.user && (\r\n                    <button\r\n                        onClick={() => onReply(reply.id)}\r\n                        className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm text-gray-500 hover:text-purple-400 hover:bg-purple-500/10 transition-all\"\r\n                    >\r\n                        <ReplyIcon className=\"w-4 h-4\" />\r\n                        Responder\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </article>\r\n    );\r\n};\r\n\r\nexport default ReplyCard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\ThreadCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\forum\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\layout\\CreatePageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\layout\\Header.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Video' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Briefcase' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":91},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircleQuestion' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":114},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarDays' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":116,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":128},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Building2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":168,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":177},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Aperture' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":179,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":187},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":207,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":217},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageIcon' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":237,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":246},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeCategory' is assigned a value but never used. Allowed unused args must match /^_/u.","line":26,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onCreateAction' is defined but never used. Allowed unused args must match /^_/u.","line":27,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onSearch' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cartCount' is assigned a value but never used. Allowed unused args must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onCartClick' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":395,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":395,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Menu, Bell, Plus, FileText, Layers, Video, Box, Users, Search, Command, Briefcase, MessageCircleQuestion, CalendarDays, Heart, UserPlus, Check, ShoppingCart, Building2, Aperture, Trash2, Sparkles, ArrowRight, Loader2, Image as ImageIcon, User, Newspaper } from 'lucide-react';\r\nimport { Notification } from '../../types';\r\nimport { ContentMode, useAppStore } from '../../hooks/useAppStore';\r\nimport { searchService, SearchResult } from '../../services/modules/search';\r\n\r\ninterface HeaderProps {\r\n    onMenuClick?: () => void;\r\n    activeCategory?: string;\r\n    onCreateAction?: (actionId: string) => void;\r\n    onLogoClick?: () => void;\r\n    onSearch?: (query: string) => void;\r\n    cartCount?: number;\r\n    onCartClick?: () => void;\r\n    notifications?: Notification[];\r\n    onMarkRead?: (id: string | number) => void;\r\n    onMarkAllRead?: () => void;\r\n    contentMode?: ContentMode;\r\n    onLoginClick?: () => void;\r\n    onRegisterClick?: () => void;\r\n}\r\n\r\nexport const Header = ({\r\n    onMenuClick,\r\n    activeCategory = 'Home',\r\n    onCreateAction,\r\n    onLogoClick,\r\n    onSearch,\r\n    cartCount = 0,\r\n    onCartClick,\r\n    notifications = [],\r\n    onMarkRead,\r\n    onMarkAllRead,\r\n    contentMode = 'creative',\r\n    onLoginClick,\r\n    onRegisterClick\r\n}: HeaderProps) => {\r\n    const { state, actions } = useAppStore();\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const [isCreateMenuOpen, setIsCreateMenuOpen] = useState(false);\r\n    const [isNotificationsOpen, setIsNotificationsOpen] = useState(false);\r\n    const [isSearchFocused, setIsSearchFocused] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n    const menuRef = useRef<HTMLDivElement>(null);\r\n    const notifRef = useRef<HTMLDivElement>(null);\r\n    const searchInputRef = useRef<HTMLInputElement>(null);\r\n    const searchContainerRef = useRef<HTMLDivElement>(null);\r\n    const debounceRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    // Ctrl+K Shortcut\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\r\n                e.preventDefault();\r\n                searchInputRef.current?.focus();\r\n                setIsSearchFocused(true);\r\n            }\r\n            // Escape to close search\r\n            if (e.key === 'Escape') {\r\n                setShowSuggestions(false);\r\n                setIsSearchFocused(false);\r\n                searchInputRef.current?.blur();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, []);\r\n\r\n    // Close menus when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n                setIsCreateMenuOpen(false);\r\n            }\r\n            if (notifRef.current && !notifRef.current.contains(event.target as Node)) {\r\n                setIsNotificationsOpen(false);\r\n            }\r\n            if (searchContainerRef.current && !searchContainerRef.current.contains(event.target as Node)) {\r\n                setShowSuggestions(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    // Debounced search effect\r\n    useEffect(() => {\r\n        if (debounceRef.current) {\r\n            clearTimeout(debounceRef.current);\r\n        }\r\n\r\n        if (searchQuery.trim().length < 2) {\r\n            setSearchResults([]);\r\n            setShowSuggestions(false);\r\n            return;\r\n        }\r\n\r\n        setIsSearching(true);\r\n        debounceRef.current = setTimeout(async () => {\r\n            try {\r\n                const results = await searchService.search(searchQuery.trim(), { maxResults: 8 });\r\n                setSearchResults(results);\r\n                setShowSuggestions(true);\r\n            } catch (error) {\r\n                console.error('Search error:', error);\r\n                setSearchResults([]);\r\n            } finally {\r\n                setIsSearching(false);\r\n            }\r\n        }, 300);\r\n\r\n        return () => {\r\n            if (debounceRef.current) {\r\n                clearTimeout(debounceRef.current);\r\n            }\r\n        };\r\n    }, [searchQuery]);\r\n\r\n    const handleSearchSubmit = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && searchQuery.trim()) {\r\n            navigate(`/search?q=${encodeURIComponent(searchQuery.trim())}`);\r\n            setShowSuggestions(false);\r\n            setSearchQuery('');\r\n            setIsSearchFocused(false);\r\n        }\r\n    };\r\n\r\n    const handleResultClick = (result: SearchResult) => {\r\n        setShowSuggestions(false);\r\n        setSearchQuery('');\r\n        setIsSearchFocused(false);\r\n\r\n        switch (result.type) {\r\n            case 'project':\r\n                navigate(`/portfolio/${result.slug || result.id}`);\r\n                break;\r\n            case 'article':\r\n                navigate(`/blog/${result.slug || result.id}`);\r\n                break;\r\n            case 'user':\r\n                navigate(`/user/${result.username || result.id}`);\r\n                break;\r\n        }\r\n    };\r\n\r\n    const getResultIcon = (type: SearchResult['type']) => {\r\n        switch (type) {\r\n            case 'project':\r\n                return <Layers className=\"h-4 w-4\" />;\r\n            case 'article':\r\n                return <Newspaper className=\"h-4 w-4\" />;\r\n            case 'user':\r\n                return <User className=\"h-4 w-4\" />;\r\n        }\r\n    };\r\n\r\n    const getResultTypeLabel = (type: SearchResult['type']) => {\r\n        switch (type) {\r\n            case 'project':\r\n                return 'Proyecto';\r\n            case 'article':\r\n                return 'Art├¡culo';\r\n            case 'user':\r\n                return 'Usuario';\r\n        }\r\n    };\r\n\r\n    const accentText = contentMode === 'dev' ? 'text-blue-500' : 'text-amber-500';\r\n    const accentBg = contentMode === 'dev' ? 'bg-blue-500' : 'bg-amber-500';\r\n    const accentHoverText = contentMode === 'dev' ? 'group-hover:text-blue-500' : 'group-hover:text-amber-500';\r\n    const accentRing = contentMode === 'dev' ? 'ring-blue-500/20' : 'ring-amber-500/20';\r\n    const accentBorder = contentMode === 'dev' ? 'border-blue-500/50' : 'border-amber-500/50';\r\n    const shadowColor = contentMode === 'dev' ? 'shadow-blue-500/20' : 'shadow-amber-500/20';\r\n\r\n    const createOptions = [\r\n        { id: 'portfolio', icon: Layers, label: 'Subir Proyecto', desc: 'A├▒adir a tu portafolio', color: 'text-amber-500', bg: 'bg-amber-500/10', route: '/create/portfolio' },\r\n        { id: 'article', icon: FileText, label: 'Escribir Art├¡culo', desc: 'Publicar en el blog', color: 'text-blue-500', bg: 'bg-blue-500/10', route: '/create/article' },\r\n    ];\r\n\r\n    const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n    return (\r\n        <header className=\"flex h-20 w-full items-center justify-between border-b border-slate-200 dark:border-white/[0.06] bg-white/80 dark:bg-[#0d0d0f]/80 px-4 md:px-8 backdrop-blur-xl absolute top-0 right-0 left-0 z-40 transition-colors\">\r\n\r\n            {/* LEFT: Logo & Mobile Menu */}\r\n            <div className=\"flex items-center gap-3 md:gap-5 flex-1 md:w-1/3 md:flex-none\">\r\n                <button\r\n                    onClick={onMenuClick}\r\n                    className={`text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/5 ${location.pathname === '/' ? 'md:hidden' : ''}`}\r\n                >\r\n                    <Menu className=\"h-6 w-6\" />\r\n                </button>\r\n                <button onClick={onLogoClick} className=\"flex flex-col hover:opacity-80 transition-opacity text-left\">\r\n                    <span className=\"text-xl font-bold tracking-tight text-slate-900 dark:text-white leading-none\">Latam<span className={accentText}>.</span>Creativa</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* CENTER: Global Search Bar */}\r\n            <div className=\"hidden md:flex justify-center w-1/3\" ref={searchContainerRef}>\r\n                <div className={`relative w-full max-w-md transition-all duration-300 ${isSearchFocused ? 'scale-105' : 'scale-100'}`}>\r\n                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                        {isSearching ? (\r\n                            <Loader2 className={`h-4 w-4 animate-spin ${accentText}`} />\r\n                        ) : (\r\n                            <Search className={`h-4 w-4 transition-colors ${isSearchFocused ? accentText : 'text-slate-400'}`} />\r\n                        )}\r\n                    </div>\r\n                    <input\r\n                        ref={searchInputRef}\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        onKeyDown={handleSearchSubmit}\r\n                        placeholder=\"Buscar proyectos, art├¡culos, usuarios...\"\r\n                        onFocus={() => {\r\n                            setIsSearchFocused(true);\r\n                            if (searchResults.length > 0) setShowSuggestions(true);\r\n                        }}\r\n                        className={`block w-full pl-10 pr-12 py-2.5 border rounded-2xl text-sm font-medium transition-all ${isSearchFocused\r\n                            ? `bg-white dark:bg-[#18181b] ${accentBorder} ring-2 ${accentRing} text-slate-900 dark:text-white`\r\n                            : 'bg-slate-100 dark:bg-white/[0.05] border-transparent text-slate-600 dark:text-slate-300'\r\n                            } placeholder-slate-400 focus:outline-none`}\r\n                    />\r\n                    <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                        <div className=\"flex items-center gap-1 px-1.5 py-0.5 rounded border border-slate-300 dark:border-white/10 bg-slate-200 dark:bg-white/5\">\r\n                            <Command className=\"h-3 w-3 text-slate-500 dark:text-slate-400\" />\r\n                            <span className=\"text-[10px] font-bold text-slate-500 dark:text-slate-400\">K</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Search Suggestions Dropdown */}\r\n                    {showSuggestions && (\r\n                        <div className=\"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-fade-in\">\r\n                            {searchResults.length > 0 ? (\r\n                                <div className=\"max-h-[400px] overflow-y-auto\">\r\n                                    <div className=\"px-3 py-2 border-b border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02]\">\r\n                                        <span className=\"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider\">\r\n                                            {searchResults.length} resultados\r\n                                        </span>\r\n                                    </div>\r\n                                    {searchResults.map((result) => (\r\n                                        <button\r\n                                            key={`${result.type}-${result.id}`}\r\n                                            onClick={() => handleResultClick(result)}\r\n                                            className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors text-left group border-b border-slate-50 dark:border-white/5 last:border-b-0\"\r\n                                        >\r\n                                            {/* Thumbnail */}\r\n                                            <div className={`w-10 h-10 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center ${result.image ? '' : 'bg-slate-100 dark:bg-white/10'}`}>\r\n                                                {result.image ? (\r\n                                                    <img\r\n                                                        src={result.image}\r\n                                                        alt=\"\"\r\n                                                        className={`w-full h-full object-cover ${result.type === 'user' ? 'rounded-full' : ''}`}\r\n                                                    />\r\n                                                ) : (\r\n                                                    <div className={`${result.type === 'project' ? 'text-amber-500' : result.type === 'article' ? 'text-rose-500' : 'text-blue-500'}`}>\r\n                                                        {getResultIcon(result.type)}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            {/* Content */}\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <div className=\"text-sm font-semibold text-slate-900 dark:text-white truncate group-hover:text-amber-500 dark:group-hover:text-amber-400 transition-colors\">\r\n                                                    {result.title}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-slate-500 dark:text-slate-400 truncate\">\r\n                                                    {result.subtitle}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Type Badge */}\r\n                                            <span className={`px-2 py-0.5 text-[10px] font-bold uppercase rounded-full flex-shrink-0 ${result.type === 'project'\r\n                                                ? 'bg-amber-500/10 text-amber-600 dark:text-amber-400'\r\n                                                : result.type === 'article'\r\n                                                    ? 'bg-rose-500/10 text-rose-600 dark:text-rose-400'\r\n                                                    : 'bg-blue-500/10 text-blue-600 dark:text-blue-400'\r\n                                                }`}>\r\n                                                {getResultTypeLabel(result.type)}\r\n                                            </span>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"px-4 py-8 text-center\">\r\n                                    <Search className=\"h-8 w-8 text-slate-300 dark:text-slate-600 mx-auto mb-3\" />\r\n                                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n                                        No se encontraron resultados para \"{searchQuery}\"\r\n                                    </p>\r\n                                    <p className=\"text-xs text-slate-400 dark:text-slate-500 mt-1\">\r\n                                        Intenta con otros t├®rminos de b├║squeda\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* RIGHT: Actions */}\r\n            <div className=\"flex items-center justify-end gap-2 md:gap-4 flex-1 md:w-1/3 md:flex-none\">\r\n                {state.user && (\r\n                    <>\r\n                        {/* Shopping Cart */}\r\n                        {/* Shopping Cart - HIDDEN */}\r\n                        {/* <button\r\n                            onClick={onCartClick}\r\n                            className=\"relative flex h-10 w-10 items-center justify-center rounded-full text-slate-500 dark:text-slate-400 transition-colors hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white group\"\r\n                            title=\"Carrito\"\r\n                        >\r\n                            <ShoppingCart className=\"h-5 w-5 group-hover:scale-110 transition-transform\" />\r\n                            {cartCount > 0 && (\r\n                                <span className={`absolute top-2 right-2 h-3.5 w-3.5 rounded-full ${accentBg} ring-2 ring-white dark:ring-[#0d0d0f] flex items-center justify-center text-[8px] font-bold text-white`}>\r\n                                    {cartCount}\r\n                                </span>\r\n                            )}\r\n                        </button> */}\r\n\r\n                        {/* NOTIFICATIONS DROPDOWN */}\r\n                        <div className=\"relative\" ref={notifRef}>\r\n                            <button\r\n                                onClick={() => setIsNotificationsOpen(!isNotificationsOpen)}\r\n                                className={`relative flex h-10 w-10 items-center justify-center rounded-full transition-colors group ${isNotificationsOpen\r\n                                    ? 'bg-slate-100 dark:bg-white/10 text-slate-900 dark:text-white'\r\n                                    : 'text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white'\r\n                                    }`}\r\n                            >\r\n                                <Bell className={`h-5 w-5 ${isNotificationsOpen ? 'fill-current' : ''} group-hover:rotate-12 transition-transform`} />\r\n                                {unreadCount > 0 && (\r\n                                    <span className=\"absolute top-2 right-2 h-4 w-4 rounded-full bg-red-500 ring-2 ring-white dark:ring-[#0d0d0f] flex items-center justify-center text-[9px] font-bold text-white\">\r\n                                        {unreadCount}\r\n                                    </span>\r\n                                )}\r\n                            </button>\r\n\r\n                            {isNotificationsOpen && (\r\n                                <div className=\"absolute top-full right-0 mt-4 w-80 md:w-96 rounded-2xl bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 shadow-2xl z-50 animate-fade-in origin-top-right ring-1 ring-black/5 overflow-hidden\">\r\n                                    <div className=\"px-4 py-3 border-b border-slate-100 dark:border-white/5 flex justify-between items-center bg-slate-50 dark:bg-white/[0.02]\">\r\n                                        <span className=\"font-bold text-slate-900 dark:text-white\">Notificaciones</span>\r\n                                        <button onClick={onMarkAllRead} className={`text-xs ${accentText} font-medium hover:underline`}>Marcar todo como le├¡do</button>\r\n                                    </div>\r\n                                    <div className=\"max-h-[400px] overflow-y-auto custom-scrollbar\">\r\n                                        {notifications.length === 0 ? (\r\n                                            <div className=\"p-8 text-center text-slate-500 text-sm\">No tienes notificaciones nuevas.</div>\r\n                                        ) : (\r\n                                            notifications.map((notif) => (\r\n                                                <div\r\n                                                    key={notif.id}\r\n                                                    onClick={() => {\r\n                                                        onMarkRead?.(notif.id);\r\n                                                        if (notif.link) {\r\n                                                            navigate(notif.link);\r\n                                                            setIsNotificationsOpen(false);\r\n                                                        }\r\n                                                    }}\r\n                                                    className={`relative p-4 border-b border-slate-50 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors cursor-pointer flex gap-3 group ${!notif.read ? 'bg-amber-50/50 dark:bg-white/[0.03]' : ''}`}\r\n                                                >\r\n                                                    <div className=\"relative shrink-0\">\r\n                                                        <img src={notif.avatar} className=\"h-10 w-10 rounded-full object-cover\" alt=\"\" />\r\n                                                        <div className=\"absolute -bottom-1 -right-1 bg-white dark:bg-[#1A1A1C] rounded-full p-0.5 border border-slate-100 dark:border-white/10\">\r\n                                                            {notif.type === 'comment' && <div className=\"bg-blue-500 rounded-full p-0.5\"><FileText className=\"h-2 w-2 text-white\" /></div>}\r\n                                                            {notif.type === 'follow' && <div className=\"bg-purple-500 rounded-full p-0.5\"><UserPlus className=\"h-2 w-2 text-white\" /></div>}\r\n                                                            {notif.type === 'like' && <div className=\"bg-red-500 rounded-full p-0.5\"><Heart className=\"h-2 w-2 text-white fill-white\" /></div>}\r\n                                                            {notif.type === 'system' && <div className=\"bg-green-500 rounded-full p-0.5\"><Check className=\"h-2 w-2 text-white\" /></div>}\r\n                                                            {notif.type === 'purchase' && <div className=\"bg-emerald-500 rounded-full p-0.5\"><ShoppingCart className=\"h-2 w-2 text-white\" /></div>}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <p className=\"text-sm text-slate-900 dark:text-white leading-snug\">\r\n                                                            <span className=\"font-bold\">{notif.user}</span> {notif.content}\r\n                                                        </p>\r\n                                                        <div className=\"flex items-center gap-2 mt-1\">\r\n                                                            {notif.category && (\r\n                                                                <span className=\"text-[10px] uppercase font-bold px-1.5 py-0.5 rounded bg-slate-100 dark:bg-white/10 text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-white/10\">\r\n                                                                    {notif.category}\r\n                                                                </span>\r\n                                                            )}\r\n                                                            <p className=\"text-xs text-slate-400\">\r\n                                                                {(() => {\r\n                                                                    try {\r\n                                                                        const date = new Date(notif.time);\r\n                                                                        const now = new Date();\r\n                                                                        const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n\r\n                                                                        if (diffInSeconds < 60) return 'Hace un momento';\r\n                                                                        if (diffInSeconds < 3600) return `Hace ${Math.floor(diffInSeconds / 60)} min`;\r\n                                                                        if (diffInSeconds < 86400) return `Hace ${Math.floor(diffInSeconds / 3600)} h`;\r\n                                                                        if (diffInSeconds < 604800) return `Hace ${Math.floor(diffInSeconds / 86400)} d├¡as`;\r\n                                                                        return date.toLocaleDateString();\r\n                                                                    } catch (e) {\r\n                                                                        return notif.time;\r\n                                                                    }\r\n                                                                })()}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex flex-col items-end gap-1 shrink-0\">\r\n                                                        {!notif.read && <div className={`h-2 w-2 rounded-full ${accentBg} mt-1.5 mb-1`}></div>}\r\n\r\n                                                        {/* Delete Button */}\r\n                                                        <button\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                actions.deleteNotification(notif.id);\r\n                                                            }}\r\n                                                            className=\"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all\"\r\n                                                            title=\"Eliminar notificaci├│n\"\r\n                                                        >\r\n                                                            <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"p-2 border-t border-slate-100 dark:border-white/5 text-center\">\r\n                                        <button className=\"text-xs font-bold text-slate-500 hover:text-slate-900 dark:hover:text-white py-1\">Ver historial completo</button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"ml-1 hidden h-8 w-px bg-slate-200 dark:bg-white/10 md:block\"></div>\r\n                    </>\r\n                )}\r\n\r\n                {/* Login Button for Guests */}\r\n                {!state.user && (\r\n                    <div className=\"hidden md:flex items-center gap-3\">\r\n                        <button\r\n                            onClick={onLoginClick}\r\n                            className={`flex rounded-full px-5 py-2.5 text-sm font-bold transition-all hover:scale-105 active:scale-95 items-center gap-2 ${contentMode === 'dev'\r\n                                ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/20'\r\n                                : 'bg-slate-900 dark:bg-white text-white dark:text-slate-900'\r\n                                }`}\r\n                        >\r\n                            <UserPlus className=\"h-4 w-4\" />\r\n                            <span>Iniciar Sesi├│n</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={onRegisterClick}\r\n                            className=\"group flex rounded-full px-5 py-2.5 text-sm font-bold transition-all duration-300 hover:scale-105 active:scale-95 items-center gap-2 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-400 hover:to-orange-500 text-white shadow-lg shadow-amber-500/25 hover:shadow-amber-500/40 ring-1 ring-white/20\"\r\n                        >\r\n                            <Sparkles className=\"h-4 w-4 text-amber-100 group-hover:text-white transition-colors\" />\r\n                            <span>Registrarse</span>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* CREATE BUTTON & DROPDOWN */}\r\n                {state.user && (\r\n                    <div className=\"relative\" ref={menuRef}>\r\n                        <button\r\n                            onClick={() => setIsCreateMenuOpen(!isCreateMenuOpen)}\r\n                            className={`hidden md:flex rounded-full px-5 py-2.5 text-sm font-bold transition-all hover:scale-105 active:scale-95 items-center gap-2 ${isCreateMenuOpen\r\n                                ? `${accentBg} text-white shadow-lg ${shadowColor}`\r\n                                : 'bg-slate-100 dark:bg-white/10 text-slate-900 dark:text-white'\r\n                                }`}\r\n                        >\r\n                            <Plus className={`h-4 w-4 transition-transform ${isCreateMenuOpen ? 'rotate-45' : 'rotate-0'}`} />\r\n                            <span>Crear</span>\r\n                        </button>\r\n\r\n                        {isCreateMenuOpen && (\r\n                            <div className=\"absolute top-full right-0 mt-4 w-80 rounded-2xl bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 shadow-2xl p-2 z-50 animate-fade-in origin-top-right ring-1 ring-black/5\">\r\n                                <div className=\"px-4 py-3 border-b border-slate-100 dark:border-white/5 mb-2 flex justify-between items-center\">\r\n                                    <span className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">Publicar en</span>\r\n                                    <span className=\"text-sm bg-slate-100 dark:bg-white/10 px-2 py-0.5 rounded text-slate-500 font-mono\">Esc</span>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    {createOptions.map((item, idx) => (\r\n                                        <button\r\n                                            key={`${item.id}-${idx}`}\r\n                                            className=\"w-full flex items-center gap-4 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-white/5 transition-colors text-left group\"\r\n                                            onClick={() => {\r\n                                                setIsCreateMenuOpen(false);\r\n                                                if (!state.user) {\r\n                                                    actions.showToast('Debes iniciar sesi├│n para crear contenido', 'info');\r\n                                                    navigate('/auth');\r\n                                                    return;\r\n                                                }\r\n                                                navigate(item.route);\r\n                                            }}\r\n                                        >\r\n                                            <div className={`h-10 w-10 rounded-xl flex items-center justify-center shrink-0 ${item.bg} ${item.color} group-hover:scale-110 transition-transform shadow-sm`}>\r\n                                                <item.icon className=\"h-5 w-5\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className={`text-sm font-bold text-slate-900 dark:text-white ${accentHoverText} transition-colors`}>{item.label}</div>\r\n                                                <div className=\"text-xs text-slate-500 dark:text-slate-400\">{item.desc}</div>\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </header>\r\n    );\r\n};","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\layout\\MobileTabBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Home, Compass, Plus, User, FileText, Layers, X, Newspaper } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\n\r\ninterface MobileTabBarProps {\r\n  activeModule: string;\r\n  onNavigate: (moduleId: string) => void;\r\n  onCreateAction: (actionId: string) => void;\r\n}\r\n\r\nexport const MobileTabBar: React.FC<MobileTabBarProps> = ({ activeModule, onNavigate, onCreateAction }) => {\r\n  const { state } = useAppStore();\r\n  const { contentMode } = state;\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n\r\n  const isDev = contentMode === 'dev';\r\n\r\n  // Dynamic Styles based on Content Mode\r\n  const accentText = isDev ? 'text-blue-500' : 'text-amber-500';\r\n  const fabBg = isDev ? 'bg-blue-600' : 'bg-amber-500';\r\n  const fabShadow = isDev ? 'shadow-blue-600/30' : 'shadow-amber-500/30';\r\n  const borderAccent = isDev ? 'border-blue-500' : 'border-amber-500';\r\n\r\n  // Only Portfolio and Blog creation options\r\n  const createOptions = [\r\n    { id: 'article', icon: FileText, label: 'Art├¡culo', color: 'text-blue-500', bg: 'bg-blue-500/10' },\r\n    { id: 'portfolio', icon: Layers, label: 'Proyecto', color: 'text-amber-500', bg: 'bg-amber-500/10' },\r\n  ];\r\n\r\n  const handleCreate = (id: string) => {\r\n    onCreateAction(id);\r\n    setIsMenuOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      {isMenuOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/60 z-[60] backdrop-blur-sm animate-fade-in\"\r\n          onClick={() => setIsMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Creation Menu */}\r\n      <div className={`fixed bottom-24 left-4 right-4 z-[70] bg-white dark:bg-[#1A1A1C] rounded-3xl p-6 shadow-2xl transition-all duration-300 origin-bottom border border-slate-200 dark:border-white/10 ${isMenuOpen ? 'scale-100 opacity-100 translate-y-0' : 'scale-90 opacity-0 translate-y-10 pointer-events-none'}`}>\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Crear Nuevo</h3>\r\n          <button onClick={() => setIsMenuOpen(false)} className=\"p-2 bg-slate-100 dark:bg-white/10 rounded-full text-slate-500 dark:text-slate-400\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          {createOptions.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => handleCreate(item.id)}\r\n              className=\"flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-slate-50 dark:hover:bg-white/5 transition-colors\"\r\n            >\r\n              <div className={`h-12 w-12 rounded-2xl flex items-center justify-center ${item.bg} ${item.color} shadow-sm`}>\r\n                <item.icon className=\"h-6 w-6\" />\r\n              </div>\r\n              <span className=\"text-xs font-medium text-slate-600 dark:text-slate-300\">{item.label}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Bar */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-[#111114]/95 backdrop-blur-xl border-t border-slate-200 dark:border-white/10 z-[60] md:hidden pb-safe\">\r\n        <div className=\"flex justify-around items-center h-16 px-2\">\r\n\r\n          <button\r\n            onClick={() => onNavigate('home')}\r\n            className={`flex flex-col items-center justify-center w-full h-full gap-1 ${activeModule === 'home' || activeModule === 'landing'\r\n                ? accentText\r\n                : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-200'\r\n              }`}\r\n          >\r\n            <Home className={`h-6 w-6 ${activeModule === 'home' ? 'fill-current' : ''}`} strokeWidth={activeModule === 'home' ? 2 : 1.5} />\r\n            <span className=\"text-[10px] font-medium\">Inicio</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => onNavigate('portfolio')}\r\n            className={`flex flex-col items-center justify-center w-full h-full gap-1 ${activeModule === 'portfolio'\r\n                ? accentText\r\n                : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-200'\r\n              }`}\r\n          >\r\n            <Compass className={`h-6 w-6 ${activeModule === 'portfolio' ? 'fill-current' : ''}`} strokeWidth={activeModule === 'portfolio' ? 2 : 1.5} />\r\n            <span className=\"text-[10px] font-medium\">Explorar</span>\r\n          </button>\r\n\r\n          <div className=\"relative -top-5\">\r\n            <button\r\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n              className={`flex items-center justify-center w-14 h-14 rounded-full text-white shadow-lg ${fabShadow} transition-transform ${isMenuOpen ? 'bg-slate-900 dark:bg-white text-white dark:text-black rotate-45' : `${fabBg} hover:scale-105`}`}\r\n            >\r\n              <Plus className=\"h-7 w-7\" />\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => onNavigate('blog')}\r\n            className={`flex flex-col items-center justify-center w-full h-full gap-1 ${activeModule === 'blog'\r\n                ? accentText\r\n                : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-200'\r\n              }`}\r\n          >\r\n            <Newspaper className={`h-6 w-6 ${activeModule === 'blog' ? 'fill-current' : ''}`} strokeWidth={activeModule === 'blog' ? 2 : 1.5} />\r\n            <span className=\"text-[10px] font-medium\">Blog</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => onNavigate('profile')}\r\n            className={`flex flex-col items-center justify-center w-full h-full gap-1 ${activeModule === 'profile'\r\n                ? accentText\r\n                : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-200'\r\n              }`}\r\n          >\r\n            <div className={`h-6 w-6 rounded-full overflow-hidden border-2 ${activeModule === 'profile' ? borderAccent : 'border-transparent'}`}>\r\n              <img src=\"https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=100&auto=format&fit=crop\" alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n            </div>\r\n            <span className=\"text-[10px] font-medium\">Yo</span>\r\n          </button>\r\n\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\layout\\Navigation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeColorClass' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onProClick' is defined but never used. Allowed unused args must match /^_/u.","line":217,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":217,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11158,11161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11158,11161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Settings, X, Code, Palette, ChevronDown, ChevronRight, User, DollarSign, LogOut, Search, Loader2, Layers, Newspaper } from 'lucide-react';\r\nimport { auth } from '../../lib/firebase';\r\nimport { signOut } from 'firebase/auth';\r\nimport { PRIMARY_NAV_ITEMS, NAV_SECTIONS, NAV_SECTIONS_DEV } from '../../data/navigation';\r\nimport { ContentMode, useAppStore } from '../../hooks/useAppStore';\r\nimport { usersService } from '../../services/modules/users';\r\nimport { searchService, SearchResult } from '../../services/modules/search';\r\n\r\ninterface PrimarySidebarProps {\r\n  activeModule?: string;\r\n  onModuleSelect?: (moduleId: string) => void;\r\n  contentMode: ContentMode;\r\n  onToggleContentMode: () => void;\r\n}\r\n\r\nexport const PrimarySidebar = ({ activeModule = 'portfolio', onModuleSelect, contentMode, onToggleContentMode }: PrimarySidebarProps) => {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n  const { user } = state;\r\n  // Active state colors based on mode\r\n  const activeColorClass = contentMode === 'dev'\r\n    ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/20'\r\n    : 'bg-amber-500 text-white shadow-lg shadow-amber-500/20';\r\n\r\n  const [isProfileOpen, setIsProfileOpen] = useState(false);\r\n  const profileMenuRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (profileMenuRef.current && !profileMenuRef.current.contains(event.target as Node)) {\r\n        setIsProfileOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <aside className=\"hidden flex-col border-r border-white/10 md:flex z-50 bg-[#111114] w-[72px] 2xl:w-[88px] h-screen sticky top-0 transition-all duration-300\">\r\n\r\n      {/* Scrollable Navigation Area */}\r\n      <div className=\"flex-1 flex flex-col w-full min-h-0 py-2 2xl:py-8\">\r\n        <nav className=\"flex-1 flex flex-col items-center w-full justify-evenly 2xl:justify-start 2xl:gap-5 min-h-0\">\r\n          {PRIMARY_NAV_ITEMS.map((item) => {\r\n            const isActive = activeModule === item.id;\r\n            const hoverClass = contentMode === 'dev'\r\n              ? 'hover:bg-blue-500/10 hover:text-blue-500'\r\n              : 'hover:bg-amber-500/10 hover:text-amber-500';\r\n\r\n            return (\r\n              <div key={item.id} className=\"relative group flex items-center justify-center visible\">\r\n                <button\r\n                  onClick={() => onModuleSelect?.(item.id)}\r\n                  className={`group flex transition-all duration-200 hover:scale-110 active:scale-95 w-7 h-7 2xl:w-12 2xl:h-12 rounded-lg 2xl:rounded-2xl items-center justify-center ${isActive\r\n                    ? (contentMode === 'dev' ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/20' : 'bg-amber-500 text-white shadow-lg shadow-amber-500/20')\r\n                    : `text-neutral-500 ${hoverClass}`\r\n                    }`}\r\n                >\r\n                  <item.icon className=\"w-[16px] h-[16px] 2xl:w-[26px] 2xl:h-[26px]\" strokeWidth={1.5} />\r\n                </button>\r\n                {/* Coming Soon Badge */}\r\n                {item.comingSoon && (\r\n                  <span className=\"absolute -top-1.5 -right-2 px-1 py-0.5 bg-orange-500 text-white text-[6px] 2xl:text-[8px] font-bold rounded uppercase tracking-wide\">Pronto</span>\r\n                )}\r\n                {/* Tooltip */}\r\n                <div className={`absolute left-14 px-3 py-1.5 rounded-lg text-white text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-[60] ${contentMode === 'dev' ? 'bg-blue-600' : 'bg-amber-600'}`}>\r\n                  {item.label}{item.comingSoon && ' (Pr├│ximamente)'}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Fixed Bottom Actions */}\r\n      <div className=\"flex flex-col gap-2 2xl:gap-5 items-center pb-4 2xl:pb-8 shrink-0 bg-gradient-to-t from-[#111114] to-transparent w-full z-10\" ref={profileMenuRef}>\r\n\r\n        {/* Toggle Mode Button */}\r\n        <div className=\"relative group flex items-center justify-center\">\r\n          <button\r\n            onClick={onToggleContentMode}\r\n            className={`group flex transition-all duration-200 hover:scale-110 active:scale-95 w-7 h-7 2xl:w-12 2xl:h-12 rounded-lg 2xl:rounded-2xl items-center justify-center text-white shadow-lg ${contentMode === 'dev'\r\n              ? 'bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/20'\r\n              : 'bg-gradient-to-br from-amber-500 to-orange-600 shadow-orange-500/20'\r\n              }`}\r\n          >\r\n            {contentMode === 'dev' ? <Code className=\"w-3.5 h-3.5 2xl:w-6 2xl:h-6\" strokeWidth={2} /> : <Palette className=\"w-3.5 h-3.5 2xl:w-6 2xl:h-6\" strokeWidth={2} />}\r\n          </button>\r\n          <div className={`absolute left-14 px-3 py-1.5 rounded-lg text-white text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-[60] ${contentMode === 'dev' ? 'bg-blue-600' : 'bg-amber-600'}`}>\r\n            {contentMode === 'dev' ? 'Ir a Modo Creativo' : 'Ir a Modo Developer'}\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        {/* Profile Picture & Menu / Login Button */}\r\n        <div className=\"relative\">\r\n          {user && (\r\n            <>\r\n              <button\r\n                onClick={() => setIsProfileOpen(!isProfileOpen)}\r\n                className=\"w-7 h-7 2xl:h-12 2xl:w-12 overflow-hidden rounded-lg 2xl:rounded-2xl ring-1 ring-white/10 transition-transform hover:scale-105 cursor-pointer block\"\r\n              >\r\n                <img\r\n                  src={user.avatar}\r\n                  alt={user.name}\r\n                  className=\"h-full w-full object-cover opacity-90 hover:opacity-100\"\r\n                />\r\n              </button>\r\n\r\n              {isProfileOpen && (\r\n                <div className=\"absolute bottom-0 left-16 w-56 bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 rounded-2xl shadow-2xl p-1.5 z-50 animate-fade-in origin-bottom-left\">\r\n                  <div className=\"px-3 py-2 border-b border-slate-100 dark:border-white/5 mb-1 flex items-center gap-3\">\r\n                    <div className=\"h-8 w-8 rounded-full overflow-hidden bg-slate-200\">\r\n                      <img src={user.avatar} alt=\"\" className=\"h-full w-full object-cover\" />\r\n                    </div>\r\n                    <div className=\"flex-1 overflow-hidden\">\r\n                      <p className=\"text-sm font-bold text-slate-900 dark:text-white truncate\">{user.name}</p>\r\n                      <p className=\"text-[10px] text-slate-500 truncate\">{user.email || 'Usuario'}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      onModuleSelect?.('profile');\r\n                      setIsProfileOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors\"\r\n                  >\r\n                    <User className=\"h-4 w-4 text-slate-400\" />\r\n                    Mi Perfil\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      onModuleSelect?.('earnings');\r\n                      setIsProfileOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors\"\r\n                  >\r\n                    <DollarSign className=\"h-4 w-4 text-slate-400\" />\r\n                    Mis Ganancias\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      onModuleSelect?.('settings');\r\n                      setIsProfileOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors\"\r\n                  >\r\n                    <Settings className=\"h-4 w-4 text-slate-400\" />\r\n                    Configuraci├│n\r\n                  </button>\r\n\r\n                  {/* Admin Dashboard - Only for Admins */}\r\n                  {(user.isAdmin || user.email === 'admin@latamcreativa.com') && (\r\n                    <button\r\n                      onClick={() => {\r\n                        navigate('/admin');\r\n                        setIsProfileOpen(false);\r\n                      }}\r\n                      className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors\"\r\n                    >\r\n                      <Settings className=\"h-4 w-4 text-amber-500\" />\r\n                      Panel Admin\r\n                    </button>\r\n                  )}\r\n\r\n                  <button\r\n                    onClick={async () => {\r\n                      // 1. Optimistic UI update: Clear user immediately\r\n                      actions.setUser(null);\r\n                      // 2. Perform Firebase SignOut\r\n                      await signOut(auth);\r\n                      setIsProfileOpen(false);\r\n                      navigate('/');\r\n                    }}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors\"\r\n                  >\r\n                    <LogOut className=\"h-4 w-4\" />\r\n                    Cerrar Sesi├│n\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n};\r\n\r\ninterface SecondarySidebarProps {\r\n  isOpen?: boolean;\r\n  onClose?: () => void;\r\n  activeCategory: string;\r\n  onCategorySelect: (category: string) => void;\r\n  onSubscriptionSelect?: (authorName: string) => void;\r\n  onProClick?: () => void;\r\n  activeModule?: string;\r\n  onModuleSelect?: (moduleId: string) => void;\r\n  hiddenOnDesktop?: boolean;\r\n  contentMode: ContentMode;\r\n  onToggleContentMode: () => void;\r\n}\r\n\r\nexport const SecondarySidebar = ({\r\n  isOpen,\r\n  onClose,\r\n  activeCategory,\r\n  onCategorySelect,\r\n  onSubscriptionSelect,\r\n  onProClick,\r\n  activeModule,\r\n  onModuleSelect,\r\n  hiddenOnDesktop,\r\n  contentMode,\r\n  onToggleContentMode\r\n}: SecondarySidebarProps) => {\r\n  const { state } = useAppStore();\r\n  const { user } = state;\r\n  const navigate = useNavigate();\r\n\r\n  // State for expanded menu items\r\n  const [expandedItems, setExpandedItems] = useState<string[]>([]);\r\n  // State for real subscriptions\r\n  const [subscriptions, setSubscriptions] = useState<any[]>([]);\r\n  const [loadingSubs, setLoadingSubs] = useState(false);\r\n\r\n  // State for mobile search\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const debounceRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Load expanded items from localStorage on mount\r\n  useEffect(() => {\r\n    try {\r\n      const saved = localStorage.getItem('latamcreativa_menu_expanded');\r\n      if (saved) {\r\n        setExpandedItems(JSON.parse(saved));\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading expanded items from localStorage:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Save expanded items to localStorage when they change\r\n  useEffect(() => {\r\n    try {\r\n      if (expandedItems.length > 0) {\r\n        localStorage.setItem('latamcreativa_menu_expanded', JSON.stringify(expandedItems));\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error saving expanded items to localStorage:', error);\r\n    }\r\n  }, [expandedItems]);\r\n\r\n  // Fetch Subscriptions\r\n  useEffect(() => {\r\n    const fetchSubs = async () => {\r\n      if (!user) {\r\n        setSubscriptions([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoadingSubs(true);\r\n        const followingIds = await usersService.getFollowing(user.id);\r\n\r\n        if (followingIds.length > 0) {\r\n          // Fetch profiles in parallel\r\n          const profilesPromises = followingIds.map(id => usersService.getUserProfile(id));\r\n          const profiles = await Promise.all(profilesPromises);\r\n          setSubscriptions(profiles.filter(p => p !== null));\r\n        } else {\r\n          setSubscriptions([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading subscriptions\", error);\r\n      } finally {\r\n        setLoadingSubs(false);\r\n      }\r\n    };\r\n\r\n    fetchSubs();\r\n  }, [user, state.subscriptionsTimestamp]); // Refetch when user changes OR timestamp updates\r\n\r\n  // Debounced search effect for mobile\r\n  useEffect(() => {\r\n    if (debounceRef.current) {\r\n      clearTimeout(debounceRef.current);\r\n    }\r\n\r\n    if (searchQuery.trim().length < 2) {\r\n      setSearchResults([]);\r\n      setShowSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n    debounceRef.current = setTimeout(async () => {\r\n      try {\r\n        const results = await searchService.search(searchQuery.trim(), { maxResults: 6 });\r\n        setSearchResults(results);\r\n        setShowSuggestions(true);\r\n      } catch (error) {\r\n        console.error('Search error:', error);\r\n        setSearchResults([]);\r\n      } finally {\r\n        setIsSearching(false);\r\n      }\r\n    }, 300);\r\n\r\n    return () => {\r\n      if (debounceRef.current) {\r\n        clearTimeout(debounceRef.current);\r\n      }\r\n    };\r\n  }, [searchQuery]);\r\n\r\n  const handleResultClick = (result: SearchResult) => {\r\n    setShowSuggestions(false);\r\n    setSearchQuery('');\r\n    onClose?.();\r\n\r\n    switch (result.type) {\r\n      case 'project':\r\n        navigate(`/portfolio/${result.slug || result.id}`);\r\n        break;\r\n      case 'article':\r\n        navigate(`/blog/${result.slug || result.id}`);\r\n        break;\r\n      case 'user':\r\n        navigate(`/user/${result.username || result.id}`);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleSearchSubmit = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && searchQuery.trim()) {\r\n      navigate(`/search?q=${encodeURIComponent(searchQuery.trim())}`);\r\n      setShowSuggestions(false);\r\n      setSearchQuery('');\r\n      onClose?.();\r\n    }\r\n  };\r\n\r\n  const getResultIcon = (type: SearchResult['type']) => {\r\n    switch (type) {\r\n      case 'project':\r\n        return <Layers className=\"h-4 w-4\" />;\r\n      case 'article':\r\n        return <Newspaper className=\"h-4 w-4\" />;\r\n      case 'user':\r\n        return <User className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  const getResultTypeLabel = (type: SearchResult['type']) => {\r\n    switch (type) {\r\n      case 'project':\r\n        return 'Proyecto';\r\n      case 'article':\r\n        return 'Art├¡culo';\r\n      case 'user':\r\n        return 'Usuario';\r\n    }\r\n  };\r\n\r\n  // Switch sections based on mode\r\n  const currentNavSections = contentMode === 'dev' ? NAV_SECTIONS_DEV : NAV_SECTIONS;\r\n\r\n  const activeItemClass = contentMode === 'dev'\r\n    ? 'bg-blue-500/10 ring-1 ring-inset ring-blue-500/20 text-blue-600 dark:text-blue-400'\r\n    : 'bg-amber-500/10 ring-1 ring-inset ring-amber-500/20 text-amber-600 dark:text-amber-400';\r\n\r\n  const activeIconClass = contentMode === 'dev'\r\n    ? 'text-blue-500 dark:text-blue-400 bg-blue-500/20'\r\n    : 'text-amber-500 dark:text-amber-400 bg-amber-500/20';\r\n\r\n  const toggleExpand = (label: string) => {\r\n    setExpandedItems(prev =>\r\n      prev.includes(label) ? prev.filter(i => i !== label) : [...prev, label]\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop for mobile/tablet */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-30 bg-black/60 backdrop-blur-sm xl:hidden animate-fade-in\"\r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      <aside className={`\r\n        fixed inset-y-0 z-40 flex flex-col border-r border-slate-200 dark:border-white/[0.06] bg-white dark:bg-[#141417]\r\n        transition-all duration-300 ease-[cubic-bezier(0.2,0,0,1)]\r\n        left-0 md:left-[88px] xl:left-0\r\n        w-[85vw] max-w-[300px] md:w-72\r\n        ${isOpen ? 'translate-x-0' : '-translate-x-full'}\r\n        ${hiddenOnDesktop ? 'xl:hidden' : (isOpen ? 'xl:w-72 xl:translate-x-0 xl:static xl:bg-white/50 dark:xl:bg-[#141417]/50 xl:backdrop-blur-md xl:h-screen xl:sticky xl:top-0' : 'xl:w-0 xl:translate-x-0 xl:static xl:border-none xl:overflow-hidden')}\r\n      `}>\r\n        <div className=\"flex h-20 items-center justify-between border-b border-slate-200 dark:border-white/[0.06] px-6 shrink-0 transition-colors\">\r\n          <span className=\"text-lg font-semibold tracking-tight text-slate-900 dark:text-white\">Men├║ {contentMode === 'dev' && <span className=\"text-xs bg-blue-500 text-white px-2 py-0.5 rounded ml-2\">DEV</span>}</span>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"rounded-lg p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/10 hover:text-slate-900 dark:hover:text-white\"\r\n          >\r\n            <X className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-y-auto scrollbar-hide p-5\">\r\n\r\n          {/* MOBILE SEARCH BAR */}\r\n          <div className=\"relative mb-6\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-3 flex items-center pointer-events-none\">\r\n                {isSearching ? (\r\n                  <Loader2 className={`h-4 w-4 animate-spin ${contentMode === 'dev' ? 'text-blue-500' : 'text-amber-500'}`} />\r\n                ) : (\r\n                  <Search className=\"h-4 w-4 text-slate-400\" />\r\n                )}\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                onKeyDown={handleSearchSubmit}\r\n                placeholder=\"Buscar proyectos, art├¡culos...\"\r\n                className={`w-full pl-10 pr-4 py-3 rounded-xl border text-sm font-medium transition-all ${showSuggestions\r\n                  ? `bg-white dark:bg-[#18181b] ${contentMode === 'dev' ? 'border-blue-500/50 ring-2 ring-blue-500/20' : 'border-amber-500/50 ring-2 ring-amber-500/20'} text-slate-900 dark:text-white`\r\n                  : 'bg-slate-100 dark:bg-white/5 border-transparent text-slate-600 dark:text-slate-300'\r\n                  } placeholder-slate-400 focus:outline-none`}\r\n              />\r\n            </div>\r\n\r\n            {/* Search Results Dropdown */}\r\n            {showSuggestions && (\r\n              <div className=\"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 rounded-xl shadow-2xl overflow-hidden z-50 animate-fade-in\">\r\n                {searchResults.length > 0 ? (\r\n                  <div className=\"max-h-[280px] overflow-y-auto\">\r\n                    <div className=\"px-3 py-2 border-b border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02]\">\r\n                      <span className=\"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider\">\r\n                        {searchResults.length} resultados\r\n                      </span>\r\n                    </div>\r\n                    {searchResults.map((result) => (\r\n                      <button\r\n                        key={`${result.type}-${result.id}`}\r\n                        onClick={() => handleResultClick(result)}\r\n                        className=\"w-full flex items-center gap-3 px-3 py-2.5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors text-left group border-b border-slate-50 dark:border-white/5 last:border-b-0\"\r\n                      >\r\n                        {/* Thumbnail */}\r\n                        <div className={`w-9 h-9 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center ${result.image ? '' : 'bg-slate-100 dark:bg-white/10'}`}>\r\n                          {result.image ? (\r\n                            <img\r\n                              src={result.image}\r\n                              alt=\"\"\r\n                              className={`w-full h-full object-cover ${result.type === 'user' ? 'rounded-full' : ''}`}\r\n                            />\r\n                          ) : (\r\n                            <div className={`${result.type === 'project' ? 'text-amber-500' : result.type === 'article' ? 'text-rose-500' : 'text-blue-500'}`}>\r\n                              {getResultIcon(result.type)}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"text-sm font-semibold text-slate-900 dark:text-white truncate\">\r\n                            {result.title}\r\n                          </div>\r\n                          <div className=\"text-[11px] text-slate-500 dark:text-slate-400 truncate\">\r\n                            {result.subtitle}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Type Badge */}\r\n                        <span className={`px-1.5 py-0.5 text-[9px] font-bold uppercase rounded flex-shrink-0 ${result.type === 'project'\r\n                          ? 'bg-amber-500/10 text-amber-600 dark:text-amber-400'\r\n                          : result.type === 'article'\r\n                            ? 'bg-rose-500/10 text-rose-600 dark:text-rose-400'\r\n                            : 'bg-blue-500/10 text-blue-600 dark:text-blue-400'\r\n                          }`}>\r\n                          {getResultTypeLabel(result.type)}\r\n                        </span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"px-4 py-6 text-center\">\r\n                    <Search className=\"h-6 w-6 text-slate-300 dark:text-slate-600 mx-auto mb-2\" />\r\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n                      Sin resultados para \"{searchQuery}\"\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* MOBILE ONLY: Primary Module Selection */}\r\n          <div className=\"md:hidden mb-8\">\r\n            <h3 className=\"uppercase text-xs font-semibold text-slate-500 tracking-widest mb-4 px-2\">Navegaci├│n Principal</h3>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              {PRIMARY_NAV_ITEMS.map(item => (\r\n                <button\r\n                  key={item.id}\r\n                  onClick={() => {\r\n                    onModuleSelect?.(item.id);\r\n                    onClose?.();\r\n                  }}\r\n                  className={`flex flex-col items-center justify-center gap-2 p-3 rounded-xl transition-colors ${activeModule === item.id\r\n                    ? activeItemClass\r\n                    : 'bg-slate-50 dark:bg-white/5 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10'\r\n                    }`}\r\n                >\r\n                  <item.icon className=\"h-5 w-5\" />\r\n                  <span className=\"text-[10px] font-medium truncate w-full text-center\">{item.label}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"h-px w-full bg-slate-200 dark:bg-white/10 my-6\"></div>\r\n          </div>\r\n\r\n\r\n\r\n          {/* SECTIONED NAVIGATION */}\r\n          <div className=\"space-y-8\">\r\n            {currentNavSections.map((section, idx) => (\r\n              <div key={idx}>\r\n                <h3 className=\"uppercase text-[10px] font-bold text-slate-400 dark:text-slate-500 tracking-widest mb-3 px-3\">\r\n                  {section.title}\r\n                </h3>\r\n                <div className=\"space-y-1\">\r\n                  {section.items.map((item) => {\r\n                    const isActive = activeCategory === item.label;\r\n                    const hasSubItems = item.subItems && item.subItems.length > 0;\r\n                    const isExpanded = expandedItems.includes(item.label);\r\n\r\n                    // DEBUG RENDER\r\n\r\n\r\n                    return (\r\n                      <div key={item.label}>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={(e) => {\r\n                            e.preventDefault();\r\n                            if (hasSubItems) {\r\n                              toggleExpand(item.label);\r\n                            }\r\n                            // Navigate to SEO-friendly route if slug exists\r\n                            if (item.slug && item.slug !== 'home') {\r\n                              const basePath = activeModule === 'blog' ? '/blog' : '/portfolio';\r\n                              navigate(`${basePath}/categoria/${item.slug}`);\r\n                              onClose?.();\r\n                            } else if (item.slug === 'home') {\r\n                              const basePath = activeModule === 'blog' ? '/blog' : '/portfolio';\r\n                              navigate(basePath);\r\n                              onClose?.();\r\n                            } else {\r\n                              onCategorySelect(item.label);\r\n                              if (!hasSubItems) onClose?.();\r\n                            }\r\n                          }}\r\n                          className={`w-full group flex items-center gap-3 rounded-xl p-2.5 px-3 transition-all cursor-pointer ${isActive\r\n                            ? activeItemClass\r\n                            : 'hover:bg-slate-100 dark:hover:bg-white/[0.04] text-slate-600 dark:text-slate-400'\r\n                            }`}\r\n                        >\r\n                          <div className={`flex h-8 w-8 shrink-0 items-center justify-center rounded-lg transition-colors ${isActive ? activeIconClass : 'text-slate-400 dark:text-slate-500 bg-slate-200 dark:bg-white/5 group-hover:text-slate-600 dark:group-hover:text-slate-300'\r\n                            }`}>\r\n                            <item.icon className=\"h-4 w-4\" strokeWidth={2} />\r\n                          </div>\r\n                          <div className=\"flex flex-1 flex-col min-w-0 text-left\">\r\n                            <h4 className={`text-sm font-medium truncate ${isActive ? 'text-slate-900 dark:text-white' : 'group-hover:text-slate-900 dark:group-hover:text-white'}`}>\r\n                              {item.label}\r\n                            </h4>\r\n                            <p className=\"text-[10px] truncate opacity-60\">\r\n                              {item.subLabel}\r\n                            </p>\r\n                          </div>\r\n                          {hasSubItems && (\r\n                            <div className=\"text-slate-400\">\r\n                              {isExpanded ? <ChevronDown className=\"h-3.5 w-3.5\" /> : <ChevronRight className=\"h-3.5 w-3.5\" />}\r\n                            </div>\r\n                          )}\r\n                        </button>\r\n\r\n                        {/* Sub Items Menu */}\r\n                        {isExpanded && hasSubItems && (\r\n                          <div className=\"ml-11 mt-1 space-y-1 border-l-2 border-slate-100 dark:border-white/5 pl-2 animate-fade-in\">\r\n                            {item.subItems?.map(sub => (\r\n                              <button\r\n                                key={sub}\r\n                                onClick={() => {\r\n                                  onCategorySelect(sub);\r\n                                  onClose?.();\r\n                                }}\r\n                                className={`w-full text-left px-3 py-2 rounded-lg text-xs font-medium transition-colors flex items-center gap-2 ${activeCategory === sub\r\n                                  ? (contentMode === 'dev' ? 'text-blue-500 bg-blue-500/10' : 'text-amber-500 bg-amber-500/10')\r\n                                  : 'text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-white/5'\r\n                                  }`}\r\n                              >\r\n                                <span className={`w-1 h-1 rounded-full ${activeCategory === sub ? (contentMode === 'dev' ? 'bg-blue-500' : 'bg-amber-500') : 'bg-slate-400'}`}></span>\r\n                                {sub}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"h-px w-full bg-gradient-to-r from-transparent via-slate-200 dark:via-white/[0.08] to-transparent my-8\"></div>\r\n\r\n          {/* Siguiendo */}\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"uppercase text-xs font-semibold text-slate-500 tracking-widest mb-4 px-2\">\r\n              Siguiendo {loadingSubs && <span className=\"ml-2 opacity-50 animate-pulse\">...</span>}\r\n            </h3>\r\n\r\n            <div className=\"space-y-3\">\r\n              {user && subscriptions.length === 0 && !loadingSubs && (\r\n                <div className=\"px-2 text-sm text-slate-500 italic\">No sigues a nadie a├║n.</div>\r\n              )}\r\n\r\n              {user && subscriptions.map((sub) => (\r\n                <a\r\n                  key={sub.id}\r\n                  href=\"#\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    onSubscriptionSelect?.(sub.name);\r\n                    navigate(`/user/${encodeURIComponent(sub.username || sub.name)}`, { state: { author: sub } });\r\n                    onClose?.();\r\n                  }}\r\n                  className=\"group flex items-center gap-4 px-2 py-1.5 hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition-colors\"\r\n                >\r\n                  <div className=\"relative h-10 w-10 overflow-hidden rounded-full ring-1 ring-slate-200 dark:ring-white/10\">\r\n                    <img src={sub.avatar || sub.image || `https://ui-avatars.com/api/?name=${encodeURIComponent(sub.name)}&background=random`} className=\"h-full w-full object-cover opacity-80 transition-opacity group-hover:opacity-100\" alt={sub.name} />\r\n                  </div>\r\n                  <div className=\"flex-1 overflow-hidden\">\r\n                    <div className=\"truncate text-sm font-medium text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white\">{sub.name}</div>\r\n                    {/* Assume users can be live if property exists, ignoring for now as not in profile usually */}\r\n                    {/* {sub.isLive && <div className={`truncate text-xs font-medium ${contentMode === 'dev' ? 'text-blue-500' : 'text-amber-500'}`}>En vivo</div>} */}\r\n                  </div>\r\n                  {/* {sub.isLive && <div className={`h-2 w-2 rounded-full ${contentMode === 'dev' ? 'bg-blue-500' : 'bg-amber-500'}`}></div>} */}\r\n                </a>\r\n              ))}\r\n\r\n              {!user && (\r\n                <div className=\"px-2 text-sm text-slate-500\">Inicia sesi├│n para ver a qui├®n sigues.</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* MOBILE ONLY: User Profile & Settings */}\r\n          <div className=\"md:hidden border-t border-slate-200 dark:border-white/10 pt-6 mb-6\">\r\n            <div className=\"flex items-center gap-3 px-2 mb-4\">\r\n              <div\r\n                className=\"flex-1 flex items-center gap-3 cursor-pointer min-w-0\"\r\n                onClick={() => {\r\n                  if (!user) {\r\n                    onModuleSelect?.('auth');\r\n                  } else {\r\n                    onModuleSelect?.('profile');\r\n                    onClose?.();\r\n                  }\r\n                }}\r\n              >\r\n                <img\r\n                  src={user ? user.avatar : \"https://ui-avatars.com/api/?name=Guest&background=random\"}\r\n                  alt=\"User\"\r\n                  className=\"h-10 w-10 rounded-full object-cover ring-1 ring-slate-200 dark:ring-white/10\"\r\n                />\r\n                <div className=\"min-w-0\">\r\n                  <h4 className=\"text-sm font-bold text-slate-900 dark:text-white truncate\">{user ? user.name : 'Invitado'}</h4>\r\n                  <p className=\"text-xs text-slate-500\">{user ? 'Ver perfil' : 'Iniciar Sesi├│n'}</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                className=\"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg\"\r\n                onClick={() => {\r\n                  onModuleSelect?.('settings');\r\n                  onClose?.();\r\n                }}\r\n              >\r\n                <Settings className=\"h-5 w-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Added Earnings Button for Mobile */}\r\n            <button\r\n              onClick={() => {\r\n                onModuleSelect?.('earnings');\r\n                onClose?.();\r\n              }}\r\n              className=\"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors mb-2\"\r\n            >\r\n              <DollarSign className=\"h-5 w-5\" />\r\n              <span className=\"text-sm font-medium\">Mis Ganancias</span>\r\n            </button>\r\n\r\n            {/* Admin Dashboard - Mobile */}\r\n            {user && (user.isAdmin || user.email === 'admin@latamcreativa.com') && (\r\n              <button\r\n                onClick={() => {\r\n                  navigate('/admin');\r\n                  onClose?.();\r\n                }}\r\n                className=\"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors mb-2\"\r\n              >\r\n                <Settings className=\"h-5 w-5 text-amber-500\" />\r\n                <span className=\"text-sm font-medium\">Panel Admin</span>\r\n              </button>\r\n            )}\r\n\r\n            <button\r\n              onClick={() => {\r\n                onToggleContentMode();\r\n                onClose?.();\r\n              }}\r\n              className=\"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors mb-2\"\r\n            >\r\n              {contentMode === 'dev' ? <Palette className=\"h-5 w-5\" /> : <Code className=\"h-5 w-5\" />}\r\n              <span className=\"text-sm font-medium\">{contentMode === 'dev' ? 'Modo Creativo' : 'Modo Developer'}</span>\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        {/* Pro Card */}\r\n        <div className=\"p-5 mt-auto\">\r\n          <div className={`relative overflow-hidden rounded-2xl border border-white/10 p-5 ${contentMode === 'dev' ? 'bg-gradient-to-br from-blue-900/80 to-blue-900/60' : 'bg-gradient-to-br from-amber-900/80 to-amber-900/60'}`}>\r\n            <div className=\"relative z-10\">\r\n              <h4 className=\"mb-1.5 text-base font-semibold text-white\">Mejorar a Pro</h4>\r\n              <p className={`mb-4 text-sm ${contentMode === 'dev' ? 'text-blue-100/80' : 'text-amber-100/80'}`}>Desbloquea streaming 4K y descargas ilimitadas.</p>\r\n              <button\r\n                onClick={() => {\r\n                  navigate('/pro');\r\n                  if (window.innerWidth < 1280) onClose?.();\r\n                }}\r\n                className=\"w-full rounded-lg bg-white/20 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-white/30\"\r\n              >\r\n                Ver m├ís\r\n              </button>\r\n            </div>\r\n            <div className={`absolute -right-4 -top-4 h-28 w-28 rounded-full blur-xl ${contentMode === 'dev' ? 'bg-blue-500/20' : 'bg-amber-500/20'}`}></div>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\ConfirmationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\CreatePostModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAddTag' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { X, Newspaper, Image as ImageIcon, Tag, Send, CheckCircle2, Upload, Loader2 } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { ArticleItem } from '../../types';\r\nimport { TagInput } from '../ui/TagInput';\r\nimport { COMMON_TAGS } from '../../data/tags';\r\nimport { db, storage } from '../../lib/firebase';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\n\r\ninterface CreatePostModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nconst OFFICIAL_PROFILE = {\r\n    name: \"Latam Creativa\",\r\n    id: \"latam-creativa-official\",\r\n    avatar: \"https://ui-avatars.com/api/?name=Latam+Creativa&background=0D0D0F&color=F59E0B&bold=true\",\r\n    role: \"Official Account\"\r\n};\r\n\r\nexport const CreatePostModal: React.FC<CreatePostModalProps> = ({ isOpen, onClose }) => {\r\n    const { state, actions } = useAppStore();\r\n    const user = state.user;\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [image, setImage] = useState('');\r\n    const [imageFile, setImageFile] = useState<File | null>(null);\r\n    const [tags, setTags] = useState<string[]>([]);\r\n    const [currentTag, setCurrentTag] = useState('');\r\n    const [isOfficialPost, setIsOfficialPost] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleAddTag = () => {\r\n        if (currentTag.trim() && !tags.includes(currentTag.trim())) {\r\n            setTags([...tags, currentTag.trim()]);\r\n            setCurrentTag('');\r\n        }\r\n    };\r\n\r\n    const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            const file = e.target.files[0];\r\n            setImageFile(file);\r\n            // Create a preview URL\r\n            const previewUrl = URL.createObjectURL(file);\r\n            setImage(previewUrl);\r\n        }\r\n    };\r\n\r\n    const handlePublish = async () => {\r\n        if (!title || !content) return;\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            let imageUrl = image;\r\n\r\n            // 1. Upload Image if exists\r\n            if (imageFile) {\r\n                const storageRef = ref(storage, `blog-covers/${Date.now()}_${imageFile.name}`);\r\n                const snapshot = await uploadBytes(storageRef, imageFile);\r\n                imageUrl = await getDownloadURL(snapshot.ref);\r\n            } else if (!image) {\r\n                // Default image if none provided\r\n                imageUrl = 'https://images.unsplash.com/photo-1542435503-956c469947f6?q=80&w=1000&auto=format&fit=crop';\r\n            }\r\n\r\n            // 2. Prepare Author Data\r\n            const author = isOfficialPost ? OFFICIAL_PROFILE : {\r\n                name: user?.name || 'Anonymous',\r\n                id: user?.id || 'anon',\r\n                authorId: user?.id || 'anon',\r\n                avatar: user?.avatar || '',\r\n                role: user?.role || 'Member'\r\n            };\r\n\r\n            const newPost: ArticleItem = {\r\n                id: Date.now().toString(), // Helper ID, Firestore will generate real one ideally or we use this\r\n                title,\r\n                excerpt: content.substring(0, 120) + '...',\r\n                content,\r\n                author: author.name,\r\n                authorId: author.id,\r\n                authorAvatar: author.avatar,\r\n                role: author.role,\r\n                date: new Date().toISOString(),\r\n                readTime: `${Math.max(1, Math.ceil(content.split(' ').length / 200))} min`,\r\n                likes: 0,\r\n                comments: 0,\r\n                image: imageUrl,\r\n                tags,\r\n                category: 'General'\r\n            };\r\n\r\n            // 3. Save to Firestore\r\n            const docRef = await addDoc(collection(db, 'articles'), newPost);\r\n\r\n            // 4. Update Local State (Optimistic or Refresh)\r\n            // We'll update the ID to match Firestore's ID\r\n            actions.addBlogPost({ ...newPost, id: docRef.id });\r\n\r\n            actions.showToast('Art├¡culo publicado exitosamente', 'success');\r\n\r\n            // Reset form\r\n            setTitle('');\r\n            setContent('');\r\n            setImage('');\r\n            setImageFile(null);\r\n            setTags([]);\r\n            setIsOfficialPost(false);\r\n            onClose();\r\n\r\n        } catch (error) {\r\n            console.error(\"Error publishing post:\", error);\r\n            actions.showToast('Error al publicar el art├¡culo', 'error');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in\">\r\n            <div className=\"bg-white dark:bg-[#141417] w-full max-w-3xl rounded-2xl shadow-2xl border border-slate-200 dark:border-white/10 flex flex-col max-h-[90vh] overflow-hidden\">\r\n\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between p-6 border-b border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02]\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"bg-amber-500/10 p-2 rounded-lg text-amber-500\">\r\n                            <Newspaper className=\"h-6 w-6\" />\r\n                        </div>\r\n                        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Crear Nuevo Art├¡culo</h2>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 rounded-lg text-slate-500 hover:bg-slate-200 dark:hover:bg-white/10 transition-colors\">\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-8 scrollbar-hide space-y-6\">\r\n\r\n                    {/* Title */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">T├¡tulo del Art├¡culo</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            className=\"w-full text-2xl font-bold bg-transparent border-b border-slate-200 dark:border-slate-800 focus:border-amber-500 outline-none py-2 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-600 transition-colors\"\r\n                            placeholder=\"Escribe un t├¡tulo impactante...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Image URL */}\r\n                    {/* Image Upload */}\r\n                    <div className=\"space-y-4\">\r\n                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2\">\r\n                            <ImageIcon className=\"h-4 w-4\" /> Imagen de Portada\r\n                        </label>\r\n\r\n                        {!image ? (\r\n                            <div className=\"border-2 border-dashed border-slate-200 dark:border-white/10 rounded-xl p-8 transition-colors hover:border-amber-500 hover:bg-amber-500/5 group\">\r\n                                <label className=\"flex flex-col items-center justify-center cursor-pointer\">\r\n                                    <div className=\"bg-slate-100 dark:bg-white/5 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform\">\r\n                                        <Upload className=\"h-6 w-6 text-slate-400 group-hover:text-amber-500\" />\r\n                                    </div>\r\n                                    <span className=\"text-sm font-bold text-slate-600 dark:text-slate-300 mb-1\">\r\n                                        Haz clic para subir una imagen\r\n                                    </span>\r\n                                    <span className=\"text-xs text-slate-400 text-center max-w-xs\">\r\n                                        PNG, JPG o WEBP (Max. 5MB)\r\n                                    </span>\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/*\"\r\n                                        className=\"hidden\"\r\n                                        onChange={handleImageSelect}\r\n                                    />\r\n                                </label>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"relative h-56 w-full rounded-xl overflow-hidden border border-slate-200 dark:border-white/10 group\">\r\n                                <img src={image} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                                <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setImage('');\r\n                                            setImageFile(null);\r\n                                        }}\r\n                                        className=\"bg-red-500 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-red-600 transition-colors transform translate-y-4 group-hover:translate-y-0 duration-200\"\r\n                                    >\r\n                                        Eliminar Imagen\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Content Body */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Contenido</label>\r\n                        <textarea\r\n                            value={content}\r\n                            onChange={(e) => setContent(e.target.value)}\r\n                            className=\"w-full h-64 p-4 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500 transition-all text-slate-900 dark:text-slate-300 resize-none leading-relaxed\"\r\n                            placeholder=\"Comparte tu conocimiento con la comunidad...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Tags */}\r\n                    <div className=\"space-y-2\">\r\n                        <TagInput\r\n                            tags={tags}\r\n                            onAddTag={(tag) => {\r\n                                if (!tags.includes(tag)) {\r\n                                    setTags([...tags, tag]);\r\n                                }\r\n                            }}\r\n                            onRemoveTag={(tag) => setTags(tags.filter(t => t !== tag))}\r\n                            suggestions={COMMON_TAGS}\r\n                            label=\"Etiquetas\"\r\n                            icon={<Tag className=\"h-4 w-4\" />}\r\n                            placeholder=\"Ej. Tutorial, 3D, Career...\"\r\n                        />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 border-t border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02] flex items-center justify-between\">\r\n\r\n                    {/* Admin Toggle */}\r\n                    {user?.isAdmin && (\r\n                        <div\r\n                            className={`flex items-center gap-3 px-4 py-2 rounded-xl cursor-pointer transition-colors border ${isOfficialPost ? 'bg-amber-500/10 border-amber-500/50' : 'border-transparent hover:bg-slate-200 dark:hover:bg-white/5'}`}\r\n                            onClick={() => setIsOfficialPost(!isOfficialPost)}\r\n                        >\r\n                            <div className={`w-5 h-5 rounded border flex items-center justify-center ${isOfficialPost ? 'bg-amber-500 border-amber-500' : 'border-slate-400'}`}>\r\n                                {isOfficialPost && <CheckCircle2 className=\"h-3.5 w-3.5 text-black\" />}\r\n                            </div>\r\n                            <div>\r\n                                <span className={`block text-sm font-bold ${isOfficialPost ? 'text-amber-500' : 'text-slate-500'}`}>Publicar como Latam Creativa</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex gap-3\">\r\n                        <button onClick={onClose} className=\"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-white/10 transition-colors\">\r\n                            Cancelar\r\n                        </button>\r\n                        <button\r\n                            onClick={handlePublish}\r\n                            disabled={!title || !content || isSubmitting}\r\n                            className={`px-8 py-3 rounded-xl font-bold text-white shadow-lg flex items-center gap-2 transition-all ${!title || !content || isSubmitting\r\n                                ? 'bg-slate-300 dark:bg-slate-700 cursor-not-allowed opacity-50'\r\n                                : 'bg-amber-500 hover:bg-amber-600 shadow-amber-500/20'\r\n                                }`}\r\n                        >\r\n                            {isSubmitting ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                    Publicando...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Send className=\"h-4 w-4\" />\r\n                                    Publicar Art├¡culo\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\EditProfileModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SocialLinks' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'COMMON_ROLES' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport { X, Save, Plus, Trash2, Briefcase, GraduationCap, User, MapPin, Globe, GripVertical } from 'lucide-react';\r\nimport { ExperienceItem, EducationItem, SocialLinks } from '../../types';\r\nimport { TagInput } from '../ui/TagInput';\r\nimport { COMMON_TAGS } from '../../data/tags';\r\nimport { COMMON_ROLES } from '../../data/roles';\r\nimport { LATAM_COUNTRIES } from '../../data/countries';\r\nimport { useEditProfile } from '../../hooks/useEditProfile';\r\nimport { useDraggableList } from '../../hooks/useDraggableList';\r\n\r\ninterface EditProfileModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport const EditProfileModal: React.FC<EditProfileModalProps> = ({ isOpen, onClose }) => {\r\n    const {\r\n        user,\r\n        activeTab,\r\n        setActiveTab,\r\n        formData,\r\n        handleInputChange,\r\n        collections,\r\n        updateCollection,\r\n        images,\r\n        handleImageChange,\r\n        suggestions,\r\n        setSuggestions,\r\n        usernameError,\r\n        isSaving,\r\n        handleSave\r\n    } = useEditProfile(isOpen, onClose);\r\n\r\n    const fileInputAvatarRef = useRef<HTMLInputElement>(null);\r\n    const fileInputCoverRef = useRef<HTMLInputElement>(null);\r\n\r\n    // --- Experience Hook ---\r\n    const experienceDrag = useDraggableList(\r\n        collections.experience,\r\n        (newItems) => updateCollection('experience', newItems)\r\n    );\r\n\r\n    // --- Education Hook ---\r\n    const educationDrag = useDraggableList(\r\n        collections.education,\r\n        (newItems) => updateCollection('education', newItems)\r\n    );\r\n\r\n    if (!isOpen || !user) return null;\r\n\r\n    // --- Experience Handlers ---\r\n    const addExperience = () => {\r\n        const newExp: ExperienceItem = {\r\n            id: Date.now(),\r\n            role: 'Nuevo Rol',\r\n            company: 'Empresa',\r\n            period: '2023 - Presente',\r\n            location: 'Ciudad, Pa├¡s',\r\n            description: 'Descripci├│n del puesto...'\r\n        };\r\n        updateCollection('experience', [...collections.experience, newExp]);\r\n    };\r\n\r\n    const updateExperience = (id: number | string, field: keyof ExperienceItem, value: string) => {\r\n        updateCollection('experience', collections.experience.map(exp => exp.id === id ? { ...exp, [field]: value } : exp));\r\n    };\r\n\r\n    const removeExperience = (id: number | string) => {\r\n        updateCollection('experience', collections.experience.filter(exp => exp.id !== id));\r\n    };\r\n\r\n    // --- Education Handlers ---\r\n    const addEducation = () => {\r\n        const newEdu: EducationItem = {\r\n            id: Date.now(),\r\n            degree: 'Nuevo T├¡tulo',\r\n            school: 'Instituci├│n',\r\n            period: '2020 - 2024',\r\n            description: 'Descripci├│n de los estudios...'\r\n        };\r\n        updateCollection('education', [...collections.education, newEdu]);\r\n    };\r\n\r\n    const updateEducation = (id: number | string, field: keyof EducationItem, value: string) => {\r\n        updateCollection('education', collections.education.map(edu => edu.id === id ? { ...edu, [field]: value } : edu));\r\n    };\r\n\r\n    const removeEducation = (id: number | string) => {\r\n        updateCollection('education', collections.education.filter(edu => edu.id !== id));\r\n    };\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>, type: 'avatar' | 'cover') => {\r\n        const file = e.target.files?.[0];\r\n        if (file) handleImageChange(file, type);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in\">\r\n            <div className=\"bg-white dark:bg-[#141417] w-full max-w-4xl rounded-2xl shadow-2xl border border-slate-200 dark:border-white/10 flex flex-col max-h-[90vh] overflow-hidden\">\r\n\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between p-6 border-b border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02]\">\r\n                    <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Editar Perfil</h2>\r\n                    <button onClick={onClose} className=\"p-2 rounded-lg text-slate-500 hover:bg-slate-200 dark:hover:bg-white/10 transition-colors\">\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div className=\"flex border-b border-slate-100 dark:border-white/5 px-6\">\r\n                    <button\r\n                        onClick={() => setActiveTab('general')}\r\n                        className={`py-4 px-4 text-sm font-medium border-b-2 transition-colors ${activeTab === 'general' ? 'border-amber-500 text-amber-500' : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'}`}\r\n                    >\r\n                        Informaci├│n General\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('experience')}\r\n                        className={`py-4 px-4 text-sm font-medium border-b-2 transition-colors ${activeTab === 'experience' ? 'border-amber-500 text-amber-500' : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'}`}\r\n                    >\r\n                        Experiencia\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('education')}\r\n                        className={`py-4 px-4 text-sm font-medium border-b-2 transition-colors ${activeTab === 'education' ? 'border-amber-500 text-amber-500' : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'}`}\r\n                    >\r\n                        Educaci├│n\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('social')}\r\n                        className={`py-4 px-4 text-sm font-medium border-b-2 transition-colors ${activeTab === 'social' ? 'border-amber-500 text-amber-500' : 'border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'}`}\r\n                    >\r\n                        Social y Habilidades\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-6 scrollbar-hide\">\r\n\r\n                    {/* GENERAL TAB */}\r\n                    {activeTab === 'general' && (\r\n                        <div className=\"space-y-6 max-w-2xl mx-auto\">\r\n                            <div className=\"relative h-48 md:h-64 bg-slate-900\">\r\n                                <img\r\n                                    src={images.previewCover || user.coverImage || \"https://images.unsplash.com/photo-1614850523459-c2f4c699c52e?q=80&w=2070&auto=format&fit=crop\"}\r\n                                    alt=\"Cover\"\r\n                                    className=\"w-full h-full object-cover opacity-60\"\r\n                                />\r\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-[#0d0d0f] to-transparent\"></div>\r\n\r\n                                {/* Change Cover Button */}\r\n                                <button\r\n                                    onClick={() => fileInputCoverRef.current?.click()}\r\n                                    className=\"absolute bottom-4 right-4 p-2 bg-black/50 hover:bg-black/70 text-white rounded-lg border border-white/10 transition-colors flex items-center gap-2\"\r\n                                >\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"lucide lucide-camera\"><path d=\"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\" /><circle cx=\"12\" cy=\"13\" r=\"3\" /></svg>\r\n                                    <span className=\"text-sm font-medium\">Cambiar Portada</span>\r\n                                </button>\r\n                                <div className=\"absolute top-4 right-4 px-2 py-1 bg-black/40 backdrop-blur-sm rounded text-xs text-white/70\">\r\n                                    Recomendado: 1500x500px ÔÇó M├íx 5MB\r\n                                </div>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputCoverRef}\r\n                                    onChange={(e) => handleFileSelect(e, 'cover')}\r\n                                    accept=\"image/*\"\r\n                                    className=\"hidden\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"px-6 md:px-12 relative -mt-12 md:-mt-14 z-10\">\r\n                                <div className=\"flex flex-col md:flex-row gap-6 md:gap-8 items-start\">\r\n                                    <div className=\"relative group shrink-0\">\r\n                                        <div className=\"h-36 w-36 md:h-44 md:w-44 rounded-3xl p-1 bg-[#0d0d0f]\">\r\n                                            <img\r\n                                                src={images.previewAvatar || user.avatar || \"https://cdn.ui-avatars.com/api/?name=User&background=random\"}\r\n                                                alt=\"Avatar\"\r\n                                                className=\"w-full h-full object-cover rounded-2xl bg-slate-800 border-4 border-[#0d0d0f]\"\r\n                                            />\r\n                                            {/* Change Avatar Overlay */}\r\n                                            <div\r\n                                                onClick={() => fileInputAvatarRef.current?.click()}\r\n                                                className=\"absolute inset-0 bg-black/60 rounded-3xl flex flex-col gap-2 items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-20\"\r\n                                            >\r\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-white\"><path d=\"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\" /><circle cx=\"12\" cy=\"13\" r=\"3\" /></svg>\r\n                                                <span className=\"text-[10px] text-white/80 font-medium px-2 text-center\">400x400px<br />M├íx 5MB</span>\r\n                                            </div>\r\n                                            <input\r\n                                                type=\"file\"\r\n                                                ref={fileInputAvatarRef}\r\n                                                onChange={(e) => handleFileSelect(e, 'avatar')}\r\n                                                accept=\"image/*\"\r\n                                                className=\"hidden\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Nombres y Apellidos */}\r\n                                    <div className=\"flex-1 w-full pb-1\">\r\n                                        <div className=\"flex flex-col gap-4\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Nombres *</label>\r\n                                                <div className=\"relative\">\r\n                                                    <User className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={formData.firstName}\r\n                                                        onChange={(e) => handleInputChange('firstName', e.target.value)}\r\n                                                        className=\"w-full pl-10 pr-4 py-3.5 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white\"\r\n                                                        placeholder=\"Tus nombres\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Apellidos *</label>\r\n                                                <div className=\"relative\">\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={formData.lastName}\r\n                                                        onChange={(e) => handleInputChange('lastName', e.target.value)}\r\n                                                        className=\"w-full px-4 py-3.5 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white\"\r\n                                                        placeholder=\"Tus apellidos\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Rol Profesional *</label>\r\n                                <div className=\"relative\">\r\n                                    <Briefcase className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.role}\r\n                                        onChange={(e) => handleInputChange('role', e.target.value)}\r\n                                        onFocus={() => setSuggestions(prev => ({ ...prev, showRole: true }))}\r\n                                        onBlur={() => setTimeout(() => setSuggestions(prev => ({ ...prev, showRole: false })), 200)}\r\n                                        className=\"w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white\"\r\n                                        placeholder=\"ej. Concept Artist\"\r\n                                    />\r\n                                    {/* Suggestions Dropdown */}\r\n                                    {suggestions.showRole && suggestions.filteredRoles.length > 0 && (\r\n                                        <div className=\"absolute z-50 w-full mt-1 bg-white dark:bg-[#1A1D23] border border-slate-200 dark:border-white/10 rounded-xl shadow-xl max-h-48 overflow-y-auto custom-scrollbar\">\r\n                                            {suggestions.filteredRoles.map((r) => (\r\n                                                <div\r\n                                                    key={r}\r\n                                                    className=\"px-4 py-2 hover:bg-slate-100 dark:hover:bg-white/10 cursor-pointer text-sm text-slate-700 dark:text-slate-300 transition-colors\"\r\n                                                    onClick={() => {\r\n                                                        handleInputChange('role', r);\r\n                                                        setSuggestions(prev => ({ ...prev, showRole: false }));\r\n                                                    }}\r\n                                                >\r\n                                                    {r}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Nombre de Usuario *</label>\r\n                                <div className=\"relative\">\r\n                                    <span className=\"absolute left-3 top-3 text-slate-400 font-bold\">@</span>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.username}\r\n                                        onChange={(e) => handleInputChange('username', e.target.value.toLowerCase())}\r\n                                        className={`w-full pl-8 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border ${usernameError ? 'border-red-500' : 'border-slate-200 dark:border-white/10'} focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white`}\r\n                                        placeholder=\"username\"\r\n                                    />\r\n                                </div>\r\n                                {usernameError && <p className=\"text-xs text-red-500\">{usernameError}</p>}\r\n                                <p className=\"text-[10px] text-slate-500\">latamcreativa.com/user/{formData.username || 'username'}</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Pa├¡s *</label>\r\n                                    <div className=\"relative\">\r\n                                        <Globe className=\"absolute left-3 top-3 h-5 w-5 text-slate-400 pointer-events-none\" />\r\n                                        <select\r\n                                            value={formData.country}\r\n                                            onChange={(e) => handleInputChange('country', e.target.value)}\r\n                                            className=\"w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white appearance-none cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"\" disabled>Selecciona tu pa├¡s</option>\r\n                                            {LATAM_COUNTRIES.map((c) => (\r\n                                                <option key={c} value={c} className=\"bg-white dark:bg-slate-900\">{c}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Ciudad</label>\r\n                                    <div className=\"relative\">\r\n                                        <MapPin className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={formData.city}\r\n                                            onChange={(e) => handleInputChange('city', e.target.value)}\r\n                                            className=\"w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white\"\r\n                                            placeholder=\"Ciudad\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Biograf├¡a</label>\r\n                                <textarea\r\n                                    value={formData.bio}\r\n                                    onChange={(e) => handleInputChange('bio', e.target.value)}\r\n                                    className=\"w-full p-4 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-slate-900 dark:text-white min-h-[150px]\"\r\n                                    placeholder=\"Cu├®ntanos sobre ti...\"\r\n                                />\r\n                                <p className=\"text-xs text-slate-500 text-right\">Breve descripci├│n que aparecer├í en tu perfil.</p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* EXPERIENCE TAB */}\r\n                    {activeTab === 'experience' && (\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Historial Laboral</h3>\r\n                                <button\r\n                                    onClick={addExperience}\r\n                                    className=\"px-4 py-2 bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors\"\r\n                                >\r\n                                    <Plus className=\"h-4 w-4\" /> A├▒adir Puesto\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                {collections.experience.length === 0 ? (\r\n                                    <div className=\"text-center py-10 bg-slate-50 dark:bg-white/5 rounded-xl border border-dashed border-slate-300 dark:border-white/10\">\r\n                                        <Briefcase className=\"h-10 w-10 text-slate-400 mx-auto mb-3 opacity-50\" />\r\n                                        <p className=\"text-slate-500\">No tienes experiencia registrada.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    collections.experience.map((exp, index) => (\r\n                                        <div\r\n                                            key={exp.id}\r\n                                            // Draggable attributes moved to handle\r\n                                            onDragEnter={() => experienceDrag.handleDragEnter(index)}\r\n                                            onDragOver={experienceDrag.handleDragOver}\r\n                                            onDrop={() => experienceDrag.handleDrop(index)}\r\n                                            className={`p-5 rounded-xl bg-slate-50 dark:bg-white/5 border relative group transition-all duration-200 ${experienceDrag.draggedItemIndex === index ? 'opacity-50 border-dashed border-amber-500' : 'border-slate-200 dark:border-white/10'} ${experienceDrag.dragOverItemIndex === index && experienceDrag.draggedItemIndex !== index ? 'border-amber-500 ring-1 ring-amber-500' : ''}`}\r\n                                        >\r\n                                            {/* Delete Button */}\r\n                                            <button\r\n                                                onClick={() => removeExperience(exp.id)}\r\n                                                className=\"absolute top-4 right-4 p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100 z-10\"\r\n                                                title=\"Eliminar\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n\r\n                                            {/* Drag Handle */}\r\n                                            <div\r\n                                                className=\"absolute top-1/2 -translate-y-1/2 -left-3 md:-left-4 p-2 cursor-grab active:cursor-grabbing text-slate-400 hover:text-amber-500 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                draggable\r\n                                                onDragStart={(e) => experienceDrag.handleDragStart(e, index)}\r\n                                                onDragEnd={experienceDrag.handleDragEnd}\r\n                                            >\r\n                                                <GripVertical className=\"h-5 w-5\" />\r\n                                            </div>\r\n\r\n                                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 pr-10\">\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Cargo</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={exp.role}\r\n                                                        onChange={(e) => updateExperience(exp.id, 'role', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm font-medium outline-none focus:border-amber-500\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Empresa</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={exp.company}\r\n                                                        onChange={(e) => updateExperience(exp.id, 'company', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm font-medium outline-none focus:border-amber-500\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Per├¡odo</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={exp.period}\r\n                                                        onChange={(e) => updateExperience(exp.id, 'period', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm outline-none focus:border-amber-500\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Ubicaci├│n</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={exp.location}\r\n                                                        onChange={(e) => updateExperience(exp.id, 'location', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm outline-none focus:border-amber-500\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"space-y-1\">\r\n                                                <label className=\"text-[10px] font-bold uppercase text-slate-500\">Descripci├│n</label>\r\n                                                <textarea\r\n                                                    value={exp.description}\r\n                                                    onChange={(e) => updateExperience(exp.id, 'description', e.target.value)}\r\n                                                    className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm outline-none focus:border-amber-500 min-h-[80px]\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* EDUCATION TAB */}\r\n                    {activeTab === 'education' && (\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Formaci├│n Acad├®mica</h3>\r\n                                <button\r\n                                    onClick={addEducation}\r\n                                    className=\"px-4 py-2 bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors\"\r\n                                >\r\n                                    <Plus className=\"h-4 w-4\" /> A├▒adir Educaci├│n\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                {collections.education.length === 0 ? (\r\n                                    <div className=\"text-center py-10 bg-slate-50 dark:bg-white/5 rounded-xl border border-dashed border-slate-300 dark:border-white/10\">\r\n                                        <GraduationCap className=\"h-10 w-10 text-slate-400 mx-auto mb-3 opacity-50\" />\r\n                                        <p className=\"text-slate-500\">No tienes formaci├│n registrada.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    collections.education.map((edu, index) => (\r\n                                        <div\r\n                                            key={edu.id}\r\n                                            // Draggable attributes moved to handle\r\n                                            onDragEnter={() => educationDrag.handleDragEnter(index)}\r\n                                            onDragOver={educationDrag.handleDragOver}\r\n                                            onDrop={() => educationDrag.handleDrop(index)}\r\n                                            className={`p-5 rounded-xl bg-slate-50 dark:bg-white/5 border relative group transition-all duration-200 ${educationDrag.draggedItemIndex === index ? 'opacity-50 border-dashed border-blue-500' : 'border-slate-200 dark:border-white/10'} ${educationDrag.dragOverItemIndex === index && educationDrag.draggedItemIndex !== index ? 'border-blue-500 ring-1 ring-blue-500' : ''}`}\r\n                                        >\r\n                                            {/* Delete Button */}\r\n                                            <button\r\n                                                onClick={() => removeEducation(edu.id)}\r\n                                                className=\"absolute top-4 right-4 p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100 z-10\"\r\n                                                title=\"Eliminar\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n\r\n                                            {/* Drag Handle */}\r\n                                            <div\r\n                                                className=\"absolute top-1/2 -translate-y-1/2 -left-3 md:-left-4 p-2 cursor-grab active:cursor-grabbing text-slate-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                draggable\r\n                                                onDragStart={(e) => educationDrag.handleDragStart(e, index)}\r\n                                                onDragEnd={educationDrag.handleDragEnd}\r\n                                            >\r\n                                                <GripVertical className=\"h-5 w-5\" />\r\n                                            </div>\r\n\r\n                                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 pr-10\">\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">T├¡tulo / Grado</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={edu.degree}\r\n                                                        onChange={(e) => updateEducation(edu.id, 'degree', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm font-medium outline-none focus:border-blue-500\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Instituci├│n</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={edu.school}\r\n                                                        onChange={(e) => updateEducation(edu.id, 'school', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm font-medium outline-none focus:border-blue-500\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"space-y-1\">\r\n                                                    <label className=\"text-[10px] font-bold uppercase text-slate-500\">Per├¡odo</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={edu.period}\r\n                                                        onChange={(e) => updateEducation(edu.id, 'period', e.target.value)}\r\n                                                        className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm outline-none focus:border-blue-500\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"space-y-1\">\r\n                                                <label className=\"text-[10px] font-bold uppercase text-slate-500\">Descripci├│n</label>\r\n                                                <textarea\r\n                                                    value={edu.description}\r\n                                                    onChange={(e) => updateEducation(edu.id, 'description', e.target.value)}\r\n                                                    className=\"w-full px-3 py-2 rounded-lg bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 text-sm outline-none focus:border-blue-500 min-h-[80px]\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* SOCIAL & SKILLS TAB */}\r\n                    {activeTab === 'social' && (\r\n                        <div className=\"space-y-8 max-w-2xl mx-auto\">\r\n\r\n                            {/* Skills Section */}\r\n                            <div className=\"space-y-4\">\r\n                                <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Habilidades</h3>\r\n\r\n                                <TagInput\r\n                                    tags={collections.skills}\r\n                                    onAddTag={(tag) => {\r\n                                        if (!collections.skills.includes(tag)) {\r\n                                            updateCollection('skills', [...collections.skills, tag]);\r\n                                        }\r\n                                    }}\r\n                                    onRemoveTag={(tag) => updateCollection('skills', collections.skills.filter(s => s !== tag))}\r\n                                    suggestions={COMMON_TAGS}\r\n                                    placeholder=\"Busca o a├▒ade una habilidad...\"\r\n                                />\r\n\r\n                                {collections.skills.length === 0 && <p className=\"text-sm text-slate-500\">A├▒ade tus habilidades principales.</p>}\r\n                            </div>\r\n\r\n                            <hr className=\"border-slate-100 dark:border-white/10\" />\r\n\r\n                            {/* Social Links Section */}\r\n                            <div className=\"space-y-4\">\r\n                                <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Redes Sociales</h3>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">ArtStation</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.artstation || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, artstation: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"username\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">LinkedIn</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.linkedin || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, linkedin: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"usuario-linkedin\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">Twitter / X</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.twitter || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, twitter: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"@usuario\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">Instagram</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.instagram || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, instagram: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"@usuario\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">GitHub</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.github || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, github: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"usuario\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold uppercase text-slate-500\">Website Personal</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={collections.socialLinks.website || ''}\r\n                                            onChange={(e) => updateCollection('socialLinks', { ...collections.socialLinks, website: e.target.value })}\r\n                                            className=\"w-full px-4 py-2 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500\"\r\n                                            placeholder=\"https://miweb.com\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <hr className=\"border-slate-100 dark:border-white/10\" />\r\n\r\n                            {/* Availability Section */}\r\n                            <div className=\"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10\">\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-slate-900 dark:text-white\">Disponible para trabajar</h3>\r\n                                    <p className=\"text-sm text-slate-500\">Muestra en tu perfil que est├ís buscando nuevas oportunidades.</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => handleInputChange('availableForWork', !formData.availableForWork)}\r\n                                    className={`w-14 h-8 rounded-full transition-colors relative ${formData.availableForWork ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-700'}`}\r\n                                >\r\n                                    <div className={`absolute top-1 left-1 bg-white w-6 h-6 rounded-full transition-transform ${formData.availableForWork ? 'translate-x-6' : 'translate-x-0'}`} />\r\n                                </button>\r\n                            </div>\r\n\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 border-t border-slate-100 dark:border-white/5 bg-slate-50 dark:bg-white/[0.02] flex justify-end gap-3\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-white/10 transition-colors\"\r\n                    >\r\n                        Cancelar\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        disabled={isSaving}\r\n                        className={`px-8 py-3 rounded-xl font-bold text-white shadow-lg transition-all flex items-center gap-2 ${isSaving\r\n                            ? 'bg-slate-400 cursor-not-allowed shadow-none'\r\n                            : 'bg-amber-500 hover:bg-amber-600 shadow-amber-500/20'\r\n                            }`}\r\n                    >\r\n                        {isSaving ? (\r\n                            <>\r\n                                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                                Guardando...\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Save className=\"h-4 w-4\" />\r\n                                Guardar Cambios\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\OnboardingModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SkipForward' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkingUsername' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":88,"column":9,"endLine":88,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { SocialLinks } from '../../types';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport { db } from '../../lib/firebase';\r\nimport { LATAM_COUNTRIES } from '../../data/countries';\r\nimport { User, MapPin, Briefcase, Save, ArrowRight, SkipForward, CheckCircle2 } from 'lucide-react';\r\nimport { TagInput } from '../ui/TagInput';\r\nimport { COMMON_TAGS } from '../../data/tags';\r\nimport { COMMON_ROLES } from '../../data/roles';\r\nimport { usersService } from '../../services/modules/users';\r\n\r\nexport const OnboardingModal: React.FC = () => {\r\n    const { state, actions } = useAppStore();\r\n    const { user } = state;\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    // Form State\r\n    const [name, setName] = useState('');\r\n    const [username, setUsername] = useState(''); // New\r\n    const [role, setRole] = useState('');\r\n    const [location, setLocation] = useState(''); // Country\r\n    const [city, setCity] = useState(''); // New\r\n    const [bio, setBio] = useState('');\r\n    const [skills, setSkills] = useState<string[]>([]);\r\n    const [socialLinks, setSocialLinks] = useState<SocialLinks>({});\r\n    const [loading, setLoading] = useState(false);\r\n    const [checkingUsername, setCheckingUsername] = useState(false); // New state\r\n\r\n    // Suggestions State\r\n    const [showRoleSuggestions, setShowRoleSuggestions] = useState(false);\r\n    const [filteredRoles, setFilteredRoles] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            setIsOpen(false);\r\n            return;\r\n        }\r\n\r\n        const hasSkipped = localStorage.getItem(`onboarding_skipped_v4_${user.id}`);\r\n        // Now using explicit 'isProfileComplete' flag from DB.\r\n        // Fallback to old check if flag missing (legacy users)\r\n        const isProfileComplete = user.isProfileComplete ?? (user.location !== 'Latam' && user.username);\r\n        const shouldShow = !isProfileComplete && !hasSkipped;\r\n\r\n\r\n        if (shouldShow && !isOpen) {\r\n            setIsOpen(true);\r\n        }\r\n\r\n        if (isOpen && user) {\r\n            // Update fields if user data becomes available or changes (e.g. from race condition)\r\n            // We prioritize the user data if the local state is empty OR if local state equals \"Usuario\" (default)\r\n            // and the new user data is different.\r\n\r\n            // NOTE: We used to depend on 'name', 'username' etc here, but that causes input lag on every keystroke.\r\n            // Instead, we trust that if 'user' changes, we update. \r\n            // We do NOT update if 'user' didn't change but 'name' changed (that's just user typing).\r\n\r\n            // Name\r\n            if ((!name || name === 'Usuario') && user.name && user.name !== 'Usuario') {\r\n                setName(user.name);\r\n            } else if (!name && user.name) {\r\n                setName(user.name);\r\n            }\r\n\r\n            // Username\r\n            if (!username && user.username) setUsername(user.username);\r\n\r\n            // Location\r\n            if (!location && user.country) setLocation(user.country);\r\n            if (!city && user.city) setCity(user.city);\r\n\r\n            // Role - Don't default to 'Creative Member'\r\n            if (!role && user.role && user.role !== 'Creative Member') {\r\n                setRole(user.role);\r\n            }\r\n\r\n            // Others\r\n            if (!bio && user.bio) setBio(user.bio);\r\n            if (skills.length === 0 && user.skills) setSkills(user.skills);\r\n            if (Object.keys(socialLinks).length === 0 && user.socialLinks) setSocialLinks(user.socialLinks);\r\n        }\r\n\r\n        // ESLint might complain about missing deps (name, role, etc), but we INTENTIONALLY omit them \r\n        // to prevent re-running this effect when the user types in those fields.\r\n        // We only want to re-run if 'user' updates (e.g. initial load vs auth load).\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [user, isOpen]);\r\n\r\n    if (!isOpen || !user) return null;\r\n\r\n    const handleSave = async () => {\r\n        // 1. Mandatory Fields Validation\r\n        if (!username || username.length < 3) {\r\n            actions.showToast('El nombre de usuario debe tener al menos 3 caracteres', 'error');\r\n            return;\r\n        }\r\n        if (/\\s/.test(username)) {\r\n            actions.showToast('El nombre de usuario no puede contener espacios', 'error');\r\n            return;\r\n        }\r\n        if (!location) {\r\n            actions.showToast('Por favor selecciona tu pa├¡s', 'error');\r\n            return;\r\n        }\r\n        if (!role) {\r\n            actions.showToast('Por favor define tu rol profesional', 'error');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setCheckingUsername(true);\r\n\r\n        try {\r\n            // 2. Check Username Availability (Only if it changed)\r\n            if (username !== user.username) {\r\n                const isAvailable = await usersService.checkUsernameAvailability(username);\r\n                if (!isAvailable) {\r\n                    actions.showToast('El nombre de usuario ya est├í en uso. Elige otro.', 'error');\r\n                    setLoading(false);\r\n                    setCheckingUsername(false);\r\n                    return;\r\n                }\r\n            }\r\n            setCheckingUsername(false);\r\n\r\n            // Determine Content Mode based on Role\r\n            const devKeywords = ['developer', 'desarrollador', 'engineer', 'ingeniero', 'coder', 'programmer', 'programador', 'software', 'tech', 'web', 'app', 'mobile', 'backend', 'frontend', 'fullstack', 'devops', 'data', 'ai'];\r\n            const lowerRole = role.toLowerCase();\r\n            const isDevRole = devKeywords.some(k => lowerRole.includes(k));\r\n            const newMode: 'dev' | 'creative' = isDevRole ? 'dev' : 'creative';\r\n\r\n            const finalLocation = city ? `${city}, ${location}` : location;\r\n\r\n            const updatedUser = {\r\n                ...user,\r\n                name,\r\n                username,\r\n                role,\r\n                location: finalLocation,\r\n                country: location,\r\n                city,\r\n                bio,\r\n                skills,\r\n                socialLinks,\r\n                isProfileComplete: true // Mark as complete\r\n            };\r\n\r\n            // Update Firestore\r\n            const userRef = doc(db, 'users', user.id);\r\n            await updateDoc(userRef, {\r\n                name,\r\n                username,\r\n                role,\r\n                location: finalLocation,\r\n                country: location,\r\n                city,\r\n                bio,\r\n                skills,\r\n                socialLinks,\r\n                isProfileComplete: true\r\n            });\r\n\r\n            // Update Local State & Mode\r\n            actions.setUser(updatedUser);\r\n            if (state.contentMode !== newMode) {\r\n                actions.setContentMode(newMode);\r\n                actions.showToast(`Modo ${newMode === 'dev' ? 'Developer' : 'Creativo'} activado seg├║n tu perfil`, 'info');\r\n            } else {\r\n                actions.showToast('┬íPerfil completado! Bienvenido.', 'success');\r\n            }\r\n\r\n            setIsOpen(false);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error saving profile:\", error);\r\n            actions.showToast('Error al guardar perfil', 'error');\r\n        } finally {\r\n            setLoading(false);\r\n            setCheckingUsername(false);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-fade-in\">\r\n            <div className=\"bg-[#0F1115] w-full max-w-2xl rounded-2xl shadow-2xl border border-white/10 flex flex-col max-h-[90vh] overflow-hidden\">\r\n\r\n                {/* Header */}\r\n                <div className=\"p-8 pb-4 text-center\">\r\n                    <h1 className=\"text-3xl font-bold text-white mb-2\">┬íBienvenido a Latam Creativa! ­ƒÜÇ</h1>\r\n                    <p className=\"text-slate-400\">\r\n                        Cu├®ntanos un poco m├ís sobre ti para personalizar tu experiencia.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Content - Scrollable */}\r\n                <div className=\"flex-1 overflow-y-auto p-8 pt-4 space-y-8 custom-scrollbar\">\r\n\r\n                    {/* 1. Basic Info */}\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-lg font-bold text-white border-b border-white/5 pb-2\">Informaci├│n B├ísica</h3>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Username <span className=\"text-red-500\">*</span></label>\r\n                                <div className=\"relative\">\r\n                                    <User className={`absolute left-3 top-3 h-5 w-5 ${username.length >= 3 && !/\\s/.test(username) ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={username}\r\n                                        onChange={(e) => setUsername(e.target.value.toLowerCase())}\r\n                                        className={`w-full pl-10 pr-4 py-3 rounded-xl bg-black/20 border text-white focus:outline-none transition-colors ${username.length >= 3 && !/\\s/.test(username)\r\n                                            ? 'border-green-500/50 focus:border-green-500'\r\n                                            : 'border-white/10 focus:border-amber-500'\r\n                                            }`}\r\n                                        placeholder=\"Tu nombre de usuario\"\r\n                                    />\r\n                                    {username.length >= 3 && !/\\s/.test(username) && (\r\n                                        <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500 animate-in fade-in zoom-in\" />\r\n                                    )}\r\n                                </div>\r\n                                {/* Username Requirements */}\r\n                                <div className=\"text-[10px] space-y-1 pl-1\">\r\n                                    <p className={`${username.length >= 3 ? 'text-green-500' : 'text-slate-500'}`}>\r\n                                        ÔÇó M├¡nimo 3 caracteres\r\n                                    </p>\r\n                                    <p className={`${!/\\s/.test(username) && username.length > 0 ? 'text-green-500' : 'text-slate-500'}`}>\r\n                                        ÔÇó Sin espacios\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Pa├¡s <span className=\"text-red-500\">*</span></label>\r\n                                    <div className=\"relative\">\r\n                                        <MapPin className={`absolute left-3 top-3 h-5 w-5 ${location ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                        <select\r\n                                            value={location}\r\n                                            onChange={(e) => setLocation(e.target.value)}\r\n                                            className={`w-full pl-10 pr-4 py-3 rounded-xl bg-black/20 border text-white focus:outline-none transition-colors appearance-none ${location ? 'border-green-500/50 focus:border-green-500' : 'border-white/10 focus:border-amber-500'\r\n                                                }`}\r\n                                        >\r\n                                            <option value=\"\" disabled>Pa├¡s</option>\r\n                                            {LATAM_COUNTRIES.map(c => (\r\n                                                <option key={c} value={c} className=\"bg-[#0F1115]\">{c}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Ciudad</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={city}\r\n                                        onChange={(e) => setCity(e.target.value)}\r\n                                        className={`w-full px-4 py-3 rounded-xl bg-black/20 border text-white focus:outline-none transition-colors ${city ? 'border-green-500/50 focus:border-green-500' : 'border-white/10 focus:border-amber-500'\r\n                                            }`}\r\n                                        placeholder=\"Ciudad\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2 relative\">\r\n                            <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Rol Profesional <span className=\"text-red-500\">*</span></label>\r\n                            <div className=\"relative\">\r\n                                <Briefcase className={`absolute left-3 top-3 h-5 w-5 ${role ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={role}\r\n                                    onChange={(e) => {\r\n                                        const val = e.target.value;\r\n                                        setRole(val);\r\n                                        setFilteredRoles(COMMON_ROLES.filter(r => r.toLowerCase().includes(val.toLowerCase())));\r\n                                        setShowRoleSuggestions(true);\r\n                                    }}\r\n                                    onFocus={() => {\r\n                                        setFilteredRoles(COMMON_ROLES.filter(r => r.toLowerCase().includes(role.toLowerCase())));\r\n                                        setShowRoleSuggestions(true);\r\n                                    }}\r\n                                    onBlur={() => setTimeout(() => setShowRoleSuggestions(false), 200)} // Delay to allow click\r\n                                    className={`w-full pl-10 pr-4 py-3 rounded-xl bg-black/20 border text-white focus:outline-none transition-colors ${role ? 'border-green-500/50 focus:border-green-500' : 'border-white/10 focus:border-amber-500'\r\n                                        }`}\r\n                                    placeholder=\"ej. UX Designer, Frontend Dev, 3D Artist\"\r\n                                />\r\n                                {role && (\r\n                                    <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500 animate-in fade-in zoom-in\" />\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        {/* Role Suggestions Dropdown */}\r\n                        {showRoleSuggestions && filteredRoles.length > 0 && (\r\n                            <div className=\"absolute z-50 w-full mt-1 bg-[#1A1D23] border border-white/10 rounded-xl shadow-xl max-h-48 overflow-y-auto custom-scrollbar\">\r\n                                {filteredRoles.map((r) => (\r\n                                    <div\r\n                                        key={r}\r\n                                        className=\"px-4 py-2 hover:bg-white/10 cursor-pointer text-sm text-slate-300 hover:text-white transition-colors\"\r\n                                        onClick={() => {\r\n                                            setRole(r);\r\n                                            setShowRoleSuggestions(false);\r\n                                        }}\r\n                                    >\r\n                                        {r}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Biograf├¡a</label>\r\n                        <textarea\r\n                            value={bio}\r\n                            onChange={(e) => setBio(e.target.value)}\r\n                            className=\"w-full p-4 rounded-xl bg-black/20 border border-white/10 text-white focus:border-amber-500 outline-none transition-colors min-h-[100px]\"\r\n                            placeholder=\"┬┐Qu├® te apasiona? ┬┐Qu├® est├ís buscando?\"\r\n                        />\r\n                    </div>\r\n                    {/* End Basic Info */}\r\n\r\n\r\n                    {/* 2. Skills */}\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-lg font-bold text-white border-b border-white/5 pb-2\">Habilidades</h3>\r\n                        <TagInput\r\n                            tags={skills}\r\n                            onAddTag={(tag) => !skills.includes(tag) && setSkills([...skills, tag])}\r\n                            onRemoveTag={(tag) => setSkills(skills.filter(s => s !== tag))}\r\n                            suggestions={COMMON_TAGS}\r\n                            placeholder=\"A├▒adir habilidades (Enter)\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* 3. Socials */}\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-lg font-bold text-white border-b border-white/5 pb-2\">Redes Sociales</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={socialLinks.linkedin || ''}\r\n                                onChange={(e) => setSocialLinks({ ...socialLinks, linkedin: e.target.value })}\r\n                                className=\"w-full px-4 py-3 rounded-xl bg-black/20 border border-white/10 text-white focus:border-amber-500 outline-none\"\r\n                                placeholder=\"LinkedIn Username\"\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={socialLinks.artstation || ''}\r\n                                onChange={(e) => setSocialLinks({ ...socialLinks, artstation: e.target.value })}\r\n                                className=\"w-full px-4 py-3 rounded-xl bg-black/20 border border-white/10 text-white focus:border-amber-500 outline-none\"\r\n                                placeholder=\"ArtStation Username\"\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={socialLinks.instagram || ''}\r\n                                onChange={(e) => setSocialLinks({ ...socialLinks, instagram: e.target.value })}\r\n                                className=\"w-full px-4 py-3 rounded-xl bg-black/20 border border-white/10 text-white focus:border-amber-500 outline-none\"\r\n                                placeholder=\"Instagram Handle\"\r\n                            />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={socialLinks.website || ''}\r\n                                onChange={(e) => setSocialLinks({ ...socialLinks, website: e.target.value })}\r\n                                className=\"w-full px-4 py-3 rounded-xl bg-black/20 border border-white/10 text-white focus:border-amber-500 outline-none\"\r\n                                placeholder=\"Website URL\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 border-t border-white/10 flex justify-end items-center bg-[#0A0B0E]\">\r\n                    <button\r\n                        onClick={handleSave}\r\n                        disabled={loading}\r\n                        className={`px-8 py-3 rounded-xl font-bold bg-amber-500 text-black hover:bg-amber-600 shadow-lg shadow-amber-500/20 transition-all flex items-center gap-2 ${loading ? 'opacity-70 cursor-wait' : ''}`}\r\n                    >\r\n                        {loading ? 'Guardando...' : 'Completar Perfil'}\r\n                        {!loading && <ArrowRight className=\"h-5 w-5\" />}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n        </div >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\ReportModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\SaveToCollectionModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":43,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":59,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { X, Plus, Lock, Image as ImageIcon, Bookmark, Check, Loader2 } from 'lucide-react';\r\nimport { CollectionItem } from '../../types';\r\n\r\ninterface SaveToCollectionModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    collections: CollectionItem[];\r\n    onSave: (collectionId: string) => Promise<void>;\r\n    onCreate: (title: string, isPrivate: boolean) => Promise<void>;\r\n    itemImage?: string;\r\n}\r\n\r\nexport const SaveToCollectionModal: React.FC<SaveToCollectionModalProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    collections,\r\n    onSave,\r\n    onCreate,\r\n    itemImage\r\n}) => {\r\n    const [isCreating, setIsCreating] = useState(false);\r\n    const [newTitle, setNewTitle] = useState('');\r\n    const [isPrivate, setIsPrivate] = useState(false);\r\n    const [savingTo, setSavingTo] = useState<string | null>(null);\r\n    const [savedSuccess, setSavedSuccess] = useState<string | null>(null);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleCreate = async () => {\r\n        if (newTitle.trim()) {\r\n            setSavingTo('new');\r\n            try {\r\n                await onCreate(newTitle, isPrivate);\r\n                setSavedSuccess('new');\r\n                setTimeout(() => {\r\n                    setNewTitle('');\r\n                    setIsCreating(false);\r\n                    setSavedSuccess(null);\r\n                    onClose();\r\n                }, 800);\r\n            } catch (e) {\r\n                setSavingTo(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSave = async (collectionId: string) => {\r\n        setSavingTo(collectionId);\r\n        try {\r\n            await onSave(collectionId);\r\n            setSavedSuccess(collectionId);\r\n            setTimeout(() => {\r\n                setSavedSuccess(null);\r\n                setSavingTo(null);\r\n                onClose();\r\n            }, 800);\r\n        } catch (e) {\r\n            setSavingTo(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n            {/* Backdrop */}\r\n            <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose}></div>\r\n\r\n            {/* Modal */}\r\n            <div className=\"relative bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-slide-up\">\r\n\r\n                <div className=\"p-4 border-b border-slate-200 dark:border-white/10 flex justify-between items-center\">\r\n                    <h3 className=\"font-bold text-slate-900 dark:text-white\">Guardar en Colecci├│n</h3>\r\n                    <button onClick={onClose} className=\"p-1 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg transition-colors\">\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-4 max-h-[400px] overflow-y-auto custom-scrollbar\">\r\n                    {isCreating ? (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"aspect-square w-24 bg-slate-200 dark:bg-white/5 rounded-xl mx-auto overflow-hidden\">\r\n                                {itemImage ? (\r\n                                    <img src={itemImage} alt=\"\" className=\"w-full h-full object-cover opacity-50\" />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full flex items-center justify-center\">\r\n                                        <ImageIcon className=\"h-8 w-8 text-slate-400\" />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2\">Nombre</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    autoFocus\r\n                                    placeholder=\"Ej: Inspiraci├│n Sci-Fi\"\r\n                                    value={newTitle}\r\n                                    onChange={(e) => setNewTitle(e.target.value)}\r\n                                    className=\"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl px-4 py-2 text-slate-900 dark:text-white focus:outline-none focus:border-amber-500\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 cursor-pointer\" onClick={() => setIsPrivate(!isPrivate)}>\r\n                                <div className={`w-5 h-5 rounded border flex items-center justify-center ${isPrivate ? 'bg-amber-500 border-amber-500' : 'border-slate-400'}`}>\r\n                                    {isPrivate && <X className=\"h-3 w-3 text-white\" />}\r\n                                </div>\r\n                                <span className=\"text-sm text-slate-600 dark:text-slate-400\">Colecci├│n Privada</span>\r\n                            </div>\r\n                            <div className=\"flex gap-2 pt-2\">\r\n                                <button onClick={() => setIsCreating(false)} className=\"flex-1 py-2 text-slate-500 font-bold hover:text-slate-900 dark:hover:text-white\">Cancelar</button>\r\n                                <button\r\n                                    onClick={handleCreate}\r\n                                    disabled={savingTo === 'new'}\r\n                                    className=\"flex-1 py-2 bg-amber-500 text-white font-bold rounded-xl hover:bg-amber-600 disabled:opacity-70 flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {savingTo === 'new' ? (\r\n                                        savedSuccess === 'new' ? <Check className=\"h-5 w-5\" /> : <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                    ) : 'Crear'}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-2\">\r\n                            <button\r\n                                onClick={() => setIsCreating(true)}\r\n                                className=\"w-full flex items-center gap-4 p-3 rounded-xl border-2 border-dashed border-slate-200 dark:border-white/10 text-slate-500 hover:text-amber-500 hover:border-amber-500/50 hover:bg-amber-500/5 transition-all group\"\r\n                            >\r\n                                <div className=\"w-12 h-12 rounded-lg bg-slate-100 dark:bg-white/5 flex items-center justify-center group-hover:bg-amber-500/20\">\r\n                                    <Plus className=\"h-6 w-6\" />\r\n                                </div>\r\n                                <span className=\"font-bold\">Nueva Colecci├│n</span>\r\n                            </button>\r\n\r\n                            {collections.map(col => (\r\n                                <button\r\n                                    key={col.id}\r\n                                    onClick={() => handleSave(col.id)}\r\n                                    disabled={savingTo !== null}\r\n                                    className=\"w-full flex items-center gap-4 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-white/5 transition-colors group disabled:opacity-70\"\r\n                                >\r\n                                    <div className=\"w-12 h-12 rounded-lg bg-slate-200 dark:bg-slate-800 overflow-hidden shrink-0\">\r\n                                        <img src={col.thumbnails[0]} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1 text-left\">\r\n                                        <h4 className=\"font-bold text-slate-900 dark:text-white text-sm\">{col.title}</h4>\r\n                                        <div className=\"flex items-center gap-2 text-xs text-slate-500\">\r\n                                            <span>{col.itemCount} items</span>\r\n                                            {col.isPrivate && <Lock className=\"h-3 w-3\" />}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={`transition-all ${savingTo === col.id || savedSuccess === col.id ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}>\r\n                                        <div className={`p-2 rounded-full text-white ${savedSuccess === col.id ? 'bg-green-500' : 'bg-amber-500'}`}>\r\n                                            {savingTo === col.id && !savedSuccess ? (\r\n                                                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                            ) : savedSuccess === col.id ? (\r\n                                                <Check className=\"h-4 w-4\" />\r\n                                            ) : (\r\n                                                <Bookmark className=\"h-4 w-4 fill-current\" />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\modals\\ShareModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\components\\ui\\TagInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { X, Tag, Plus } from 'lucide-react';\r\n\r\ninterface TagInputProps {\r\n    tags: string[];\r\n    onAddTag: (tag: string) => void;\r\n    onRemoveTag: (tag: string) => void;\r\n    suggestions: string[];\r\n    placeholder?: string;\r\n    label?: string;\r\n    icon?: React.ReactNode;\r\n}\r\n\r\nexport const TagInput: React.FC<TagInputProps> = ({\r\n    tags,\r\n    onAddTag,\r\n    onRemoveTag,\r\n    suggestions,\r\n    placeholder = \"A├▒adir etiqueta...\",\r\n    label,\r\n    icon\r\n}) => {\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n    const filteredSuggestions = suggestions.filter(\r\n        s => s.toLowerCase().includes(inputValue.toLowerCase()) && !tags.includes(s)\r\n    );\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\r\n                setShowSuggestions(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            if (inputValue.trim()) {\r\n                onAddTag(inputValue.trim());\r\n                setInputValue('');\r\n                setShowSuggestions(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSelectSuggestion = (suggestion: string) => {\r\n        onAddTag(suggestion);\r\n        setInputValue('');\r\n        setShowSuggestions(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-3\" ref={wrapperRef}>\r\n            {label && (\r\n                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2\">\r\n                    {icon} {label}\r\n                </label>\r\n            )}\r\n\r\n            <div className=\"relative\">\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={inputValue}\r\n                        onChange={(e) => {\r\n                            setInputValue(e.target.value);\r\n                            setShowSuggestions(true);\r\n                        }}\r\n                        onFocus={() => setShowSuggestions(true)}\r\n                        onKeyDown={handleKeyDown}\r\n                        className=\"flex-1 px-4 py-2.5 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 outline-none focus:border-amber-500 transition-all text-sm text-slate-900 dark:text-white\"\r\n                        placeholder={placeholder}\r\n                    />\r\n                    <button\r\n                        onClick={() => {\r\n                            if (inputValue.trim()) {\r\n                                onAddTag(inputValue.trim());\r\n                                setInputValue('');\r\n                            }\r\n                        }}\r\n                        className=\"px-4 bg-amber-500/10 text-amber-600 dark:text-amber-500 rounded-xl font-bold text-sm hover:bg-amber-500 hover:text-white transition-colors flex items-center\"\r\n                    >\r\n                        <Plus className=\"h-4 w-4\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Suggestions Dropdown */}\r\n                {showSuggestions && inputValue && filteredSuggestions.length > 0 && (\r\n                    <div className=\"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 rounded-xl shadow-xl z-50 max-h-48 overflow-y-auto\">\r\n                        {filteredSuggestions.map((suggestion) => (\r\n                            <button\r\n                                key={suggestion}\r\n                                onClick={() => handleSelectSuggestion(suggestion)}\r\n                                className=\"w-full text-left px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-white/5 text-slate-700 dark:text-slate-300 transition-colors flex items-center justify-between group\"\r\n                            >\r\n                                {suggestion}\r\n                                <Plus className=\"h-3 w-3 opacity-0 group-hover:opacity-100 text-amber-500\" />\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Selected Tags */}\r\n            <div className=\"flex flex-wrap gap-2\">\r\n                {tags.map(tag => (\r\n                    <span key={tag} className=\"px-3 py-1 bg-slate-100 dark:bg-white/5 text-slate-700 dark:text-slate-300 rounded-lg text-xs font-bold border border-slate-200 dark:border-white/10 flex items-center gap-2 animate-fade-in\">\r\n                        {tag}\r\n                        <button\r\n                            onClick={() => onRemoveTag(tag)}\r\n                            className=\"hover:text-red-500 hover:bg-red-500/10 rounded p-0.5 transition-colors\"\r\n                        >\r\n                            <X className=\"h-3 w-3\" />\r\n                        </button>\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\data\\countries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\data\\forumCategories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\data\\navigation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Store' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layout' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarDays' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":97,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":109},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UsersRound' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":111,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":121},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bookmark' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":142,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":150},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Terminal' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":94,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":102}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport {\r\n  Home, Move3d, MonitorPlay, Clapperboard, Gamepad2, GraduationCap, Palette, Box, Users,\r\n  ImageIcon, Store, Newspaper, Compass, Flame, Clock, Layout, Briefcase, MessageCircleQuestion, CalendarDays, UsersRound, Trophy, Building2, Bookmark,\r\n  PenTool, Cuboid, Brush, Camera, Lightbulb, Code, Smartphone, Server, Database, Cloud, Cpu, Terminal\r\n} from 'lucide-react';\r\nimport { NavItem, NavSection, Chip, CategoryItem } from '../types';\r\n\r\n// --- MAIN SIDEBAR MODULES (REORDERED LOGICALLY) ---\r\nexport const PRIMARY_NAV_ITEMS: NavItem[] = [\r\n  // 1. Navigation Base\r\n  { id: 'home', icon: Home, label: 'Inicio' },\r\n\r\n  // 2. Showcase (Visual Core)\r\n  { id: 'portfolio', icon: ImageIcon, label: 'Portafolio' },\r\n\r\n  // 3. Content & News\r\n  { id: 'blog', icon: Newspaper, label: 'Blog' },\r\n\r\n  // 4. Learning & Services (Coming Soon)\r\n  { id: 'courses', icon: GraduationCap, label: 'Cursos', comingSoon: true },\r\n  { id: 'freelance', icon: Briefcase, label: 'Freelance', comingSoon: true },\r\n\r\n  // 5. Community & Collaboration (Coming Soon)\r\n  { id: 'forum', icon: MessageCircleQuestion, label: 'Foro' },\r\n  { id: 'jobs', icon: Building2, label: 'Bolsa de Trabajo', comingSoon: true },\r\n  { id: 'projects', icon: Users, label: 'Proyectos Colaborativos', comingSoon: true },\r\n  { id: 'contests', icon: Trophy, label: 'Concursos', comingSoon: true },\r\n];\r\n\r\n// --- SECONDARY SIDEBAR ITEMS (CREATIVE) ---\r\nexport const NAV_SECTIONS: NavSection[] = [\r\n  {\r\n    title: 'Descubrir',\r\n    items: [\r\n      { icon: Compass, label: 'Home', slug: 'home', subLabel: 'Para ti', active: true },\r\n      { icon: Flame, label: 'Tendencias', slug: 'tendencias', subLabel: 'Viral hoy' },\r\n      { icon: Clock, label: 'Nuevos', slug: 'nuevos', subLabel: 'Reci├®n salidos' },\r\n    ]\r\n  },\r\n  {\r\n    title: '3D & CGI',\r\n    items: [\r\n      { icon: Move3d, label: 'Modelado 3D', slug: 'modelado-3d', subLabel: 'Hard Surface, Organic', subItems: ['Blender', 'Maya', '3ds Max', 'Cinema 4D', 'Houdini'] },\r\n      { icon: Cuboid, label: 'Escultura', slug: 'escultura', subLabel: 'ZBrush, Mudbox', subItems: ['ZBrush', 'Mudbox', 'Blender Sculpt', '3DCoat'] },\r\n      { icon: Brush, label: 'Texturizado', slug: 'texturizado', subLabel: 'Substance, Mari', subItems: ['Substance Painter', 'Mari', 'Marmoset Toolbag', 'Quixel Mixer'] },\r\n      { icon: Users, label: 'ArchViz', slug: 'archviz', subLabel: 'Interiores, Arquitectura', subItems: ['V-Ray', 'Corona', 'Lumion', 'Twinmotion', 'D5 Render'] },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Animaci├│n & Cine',\r\n    items: [\r\n      { icon: MonitorPlay, label: 'Animaci├│n 3D', slug: 'animacion-3d', subLabel: 'Personajes, Rigging', subItems: ['Maya', 'Blender', 'iClone', 'Cascadeur'] },\r\n      { icon: Clapperboard, label: 'Animaci├│n 2D', slug: 'animacion-2d', subLabel: 'Tradicional, Cut-out', subItems: ['Toon Boom Harmony', 'TVPaint', 'After Effects', 'Moho'] },\r\n      { icon: Box, label: 'VFX', slug: 'vfx', subLabel: 'Simulaciones, Comp', subItems: ['Nuke', 'Houdini', 'After Effects', 'Fusion'] },\r\n      { icon: Camera, label: 'Motion Graphics', slug: 'motion-graphics', subLabel: 'Publicidad, Title Seq', subItems: ['After Effects', 'Cinema 4D', 'Rive', 'Cavalry'] },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Desarrollo de Juegos',\r\n    items: [\r\n      { icon: Gamepad2, label: 'Game Dev', slug: 'game-dev', subLabel: 'Unity, Unreal', subItems: ['Unreal Engine', 'Unity', 'Godot', 'GameMaker'] },\r\n      { icon: Lightbulb, label: 'Level Design', slug: 'level-design', subLabel: 'Entornos, Lighting', subItems: ['Unreal Engine', 'Unity', 'Hammer'] },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Arte 2D',\r\n    items: [\r\n      { icon: Palette, label: 'Concept Art', slug: 'concept-art', subLabel: 'Personajes, Fondos', subItems: ['Photoshop', 'Procreate', 'Clip Studio Paint', 'Krita'] },\r\n      { icon: PenTool, label: 'Ilustraci├│n', slug: 'ilustracion', subLabel: 'Digital, Vectorial', subItems: ['Illustrator', 'Affinity Designer', 'Inkscape'] },\r\n    ]\r\n  }\r\n];\r\n\r\n// --- SECONDARY SIDEBAR ITEMS (DEVELOPER) ---\r\nexport const NAV_SECTIONS_DEV: NavSection[] = [\r\n  {\r\n    title: 'Descubrir',\r\n    items: [\r\n      { icon: Compass, label: 'Home', slug: 'home', subLabel: 'Tech Feed', active: true },\r\n      { icon: Flame, label: 'Tendencias', slug: 'tendencias', subLabel: 'GitHub Stars' },\r\n      { icon: Clock, label: 'Nuevos', slug: 'nuevos', subLabel: 'Lanzamientos' },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Desarrollo Web',\r\n    items: [\r\n      { icon: Code, label: 'Frontend', slug: 'frontend', subLabel: 'React, Vue, Angular', subItems: ['React', 'Vue', 'Angular', 'Svelte', 'Next.js'] },\r\n      { icon: Server, label: 'Backend', slug: 'backend', subLabel: 'Node, Python, Go', subItems: ['Node.js', 'Python', 'Go', 'Java', 'PHP'] },\r\n      { icon: Palette, label: 'UI/UX Code', slug: 'ui-ux-code', subLabel: 'CSS, Tailwind, Animation', subItems: ['Tailwind CSS', 'Framer Motion', 'GSAP', 'Three.js'] },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Infraestructura',\r\n    items: [\r\n      { icon: Cloud, label: 'DevOps', slug: 'devops', subLabel: 'AWS, Docker, K8s', subItems: ['Docker', 'Kubernetes', 'AWS', 'Azure', 'Terraform'] },\r\n      { icon: Database, label: 'Base de Datos', slug: 'base-de-datos', subLabel: 'SQL, NoSQL, Redis', subItems: ['PostgreSQL', 'MongoDB', 'Redis', 'MySQL', 'Supabase'] },\r\n    ]\r\n  },\r\n  {\r\n    title: 'Emergentes',\r\n    items: [\r\n      { icon: Cpu, label: 'AI & ML', slug: 'ai-ml', subLabel: 'LLMs, PyTorch, TensorFlow', subItems: ['Python', 'PyTorch', 'TensorFlow', 'OpenAI API'] },\r\n      { icon: Smartphone, label: 'Mobile Dev', slug: 'mobile-dev', subLabel: 'iOS, Android, React Native', subItems: ['React Native', 'Flutter', 'Swift', 'Kotlin'] },\r\n      { icon: Gamepad2, label: 'Game Code', slug: 'game-code', subLabel: 'C++, C#, Shaders', subItems: ['C++', 'C#', 'HLSL/GLSL', 'Lua'] },\r\n    ]\r\n  }\r\n];\r\n\r\nexport const CATEGORY_ITEMS: CategoryItem[] = NAV_SECTIONS.flatMap(section => section.items);\r\n\r\n// --- HEADER CHIPS ---\r\nconst GENERAL_CHIPS: Chip[] = [\r\n  { id: 'g1', label: 'Blender', image: 'https://ih1.redbubble.net/image.5193480187.3281/bg,f8f8f8-flat,750x,075,f-pad,750x1000,f8f8f8.webp?w=800&q=80', active: true },\r\n  { id: 'g2', label: 'Cinema 4D', image: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=100&auto=format&fit=crop&q=60' },\r\n  { id: 'g3', label: 'Unreal Engine', image: 'https://images.unsplash.com/photo-1605810230434-7631ac76ec81?w=100&auto=format&fit=crop&q=60' },\r\n  { id: 'g4', label: 'After Effects', image: 'https://images.unsplash.com/photo-1626785774573-4b799314346d?w=100&auto=format&fit=crop&q=60' },\r\n  { id: 'g11', label: 'Otros programas' },\r\n];\r\n\r\nexport const CATEGORY_CHIPS_MAP: Record<string, Chip[]> = {\r\n  'Home': GENERAL_CHIPS,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\data\\roles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\data\\tags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\store\\authSlice.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5206,5209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5206,5209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Auth Slice\r\n * Maneja autenticaci├│n de usuario, perfil, carrito, likes, notificaciones y colecciones\r\n * \r\n * @module hooks/store/authSlice\r\n */\r\n\r\nimport { StateCreator } from 'zustand';\r\nimport { AuthSlice, AppStore } from './types';\r\nimport { api } from '../../services/api';\r\nimport { notificationsService } from '../../services/modules/notifications';\r\nimport { SocialLinks, CollectionItem } from '../../types';\r\n\r\nexport const createAuthSlice: StateCreator<AppStore, [], [], AuthSlice> = (set, get) => ({\r\n    // Initial State\r\n    user: null,\r\n    cartItems: [],\r\n    likedItems: [],\r\n    createdItems: [],\r\n    notifications: [],\r\n    collections: [],\r\n    blogPosts: [],\r\n    isLoadingAuth: true,\r\n    isLoadingNotifications: false,\r\n    unsubscribeNotifications: null,\r\n\r\n    // User Actions\r\n    setUser: (user) => set({ user, isLoadingAuth: false }),\r\n    setLoadingAuth: (loading) => set({ isLoadingAuth: loading }),\r\n    clearUser: () => set({ user: null }),\r\n\r\n    updateUserProfile: (updates) => set((state) => ({\r\n        user: state.user ? { ...state.user, ...updates } : null\r\n    })),\r\n\r\n    addSkill: (skill) => set((state) => {\r\n        if (!state.user) return {};\r\n        const currentSkills = state.user.skills || [];\r\n        if (currentSkills.includes(skill)) return {};\r\n        return { user: { ...state.user, skills: [...currentSkills, skill] } };\r\n    }),\r\n\r\n    removeSkill: (skill) => set((state) => {\r\n        if (!state.user) return {};\r\n        return { user: { ...state.user, skills: (state.user.skills || []).filter(s => s !== skill) } };\r\n    }),\r\n\r\n    updateSocialLinks: (links: SocialLinks) => set((state) => {\r\n        if (!state.user) return {};\r\n        return { user: { ...state.user, socialLinks: { ...(state.user.socialLinks || {}), ...links } } };\r\n    }),\r\n\r\n    // Cart Actions\r\n    addToCart: (item) => {\r\n        const { cartItems, showToast } = get();\r\n        if (!cartItems.find(i => i.id === item.id)) {\r\n            set({ cartItems: [...cartItems, item] });\r\n            showToast(`A├▒adido al carrito: ${item.title}`, 'success');\r\n        } else {\r\n            showToast(`Este item ya est├í en tu carrito`, 'info');\r\n        }\r\n    },\r\n\r\n    removeFromCart: (itemId) => set((state) => ({\r\n        cartItems: state.cartItems.filter(i => i.id !== itemId)\r\n    })),\r\n\r\n    clearCart: () => set({ cartItems: [] }),\r\n\r\n    // Like Actions\r\n    toggleLike: (itemId) => set((state) => {\r\n        const isLiked = state.likedItems.includes(itemId);\r\n        return {\r\n            likedItems: isLiked\r\n                ? state.likedItems.filter(id => id !== itemId)\r\n                : [...state.likedItems, itemId]\r\n        };\r\n    }),\r\n\r\n    // Content Actions\r\n    addCreatedItem: (item) => set((state) => ({\r\n        createdItems: [item, ...state.createdItems]\r\n    })),\r\n\r\n    addBlogPost: (post) => set((state) => ({\r\n        blogPosts: [post, ...state.blogPosts]\r\n    })),\r\n\r\n    // Notification Actions\r\n    markNotificationRead: async (id) => {\r\n        const { user } = get();\r\n        if (user) await api.markNotificationRead(user.id, id.toString());\r\n        set((state) => ({\r\n            notifications: state.notifications.map(n => n.id === id ? { ...n, read: true } : n)\r\n        }));\r\n    },\r\n\r\n    deleteNotification: async (id) => {\r\n        const { user } = get();\r\n        if (!user) return;\r\n        // Optimistic update\r\n        set((state) => ({\r\n            notifications: state.notifications.filter((n) => n.id !== id),\r\n        }));\r\n        await notificationsService.deleteNotification(user.id, String(id));\r\n    },\r\n\r\n    markAllNotificationsRead: () => set((state) => ({\r\n        notifications: state.notifications.map(n => ({ ...n, read: true }))\r\n    })),\r\n\r\n    subscribeToNotifications: (userId: string) => {\r\n        // Cleanup previous if exists\r\n        const { unsubscribeNotifications } = get();\r\n        if (unsubscribeNotifications) {\r\n            unsubscribeNotifications();\r\n        }\r\n\r\n        set({ isLoadingNotifications: true });\r\n\r\n        const unsubscribe = api.subscribeToNotifications(userId, (notifications) => {\r\n            set({ notifications, isLoadingNotifications: false });\r\n        });\r\n\r\n        set({ unsubscribeNotifications: unsubscribe });\r\n    },\r\n\r\n    cleanupNotifications: () => {\r\n        const { unsubscribeNotifications } = get();\r\n        if (unsubscribeNotifications) unsubscribeNotifications();\r\n        set({ unsubscribeNotifications: null, notifications: [] });\r\n    },\r\n\r\n    // Collection Actions\r\n    fetchCollections: async () => {\r\n        const { user } = get();\r\n        if (!user) return;\r\n        const collections = await api.getUserCollections(user.id);\r\n        set({ collections });\r\n    },\r\n\r\n    saveToCollection: async (collectionId) => {\r\n        const { itemToSave, showToast, closeSaveModal, user } = get();\r\n        if (!itemToSave || !user) return;\r\n\r\n        try {\r\n            const sanitizedItem = {\r\n                id: String(itemToSave.id),\r\n                type: itemToSave.type || 'project',\r\n                image: String(itemToSave.image || ''),\r\n            };\r\n\r\n            await api.addToCollection(user.id, collectionId, sanitizedItem as any);\r\n\r\n            set((state) => ({\r\n                collections: state.collections.map(col => {\r\n                    if (col.id === collectionId) {\r\n                        return {\r\n                            ...col,\r\n                            itemCount: (col.itemCount || 0) + 1,\r\n                            thumbnails: [itemToSave.image, ...(col.thumbnails || []).slice(0, 3)],\r\n                            items: [...(col.items || []), { id: itemToSave.id, type: itemToSave.type || 'project', addedAt: new Date().toISOString() }]\r\n                        };\r\n                    }\r\n                    return col;\r\n                })\r\n            }));\r\n            showToast(\"Guardado en colecci├│n\", 'success');\r\n            closeSaveModal();\r\n        } catch (error) {\r\n            console.error(error);\r\n            showToast(\"Error al guardar\", 'error');\r\n        }\r\n    },\r\n\r\n    createCollection: async (title, isPrivate) => {\r\n        const { itemToSave, showToast, closeSaveModal, user, saveToCollection } = get();\r\n        if (!user) {\r\n            showToast('Debes iniciar sesi├│n para crear colecciones', 'error');\r\n            throw new Error('No user');\r\n        }\r\n\r\n        try {\r\n            const newCol = await api.createCollection(user.id, title, isPrivate);\r\n\r\n            if (newCol) {\r\n                const newCollectionState: CollectionItem = {\r\n                    id: newCol.id,\r\n                    title: newCol.title,\r\n                    itemCount: 0,\r\n                    thumbnails: [],\r\n                    isPrivate: newCol.isPrivate,\r\n                    items: []\r\n                };\r\n\r\n                set((state) => ({\r\n                    collections: [...state.collections, newCollectionState]\r\n                }));\r\n\r\n                if (itemToSave) {\r\n                    await saveToCollection(newCollectionState.id);\r\n                } else {\r\n                    showToast('Colecci├│n creada correctamente', 'success');\r\n                    closeSaveModal();\r\n                }\r\n            } else {\r\n                throw new Error('API returned null');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error creating collection:\", error);\r\n            showToast(\"Error al crear colecci├│n\", 'error');\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    deleteCollection: async (collectionId) => {\r\n        const { user, showToast } = get();\r\n        if (!user) return;\r\n        try {\r\n            await api.deleteCollection(user.id, collectionId);\r\n            set((state) => ({\r\n                collections: state.collections.filter(c => c.id !== collectionId)\r\n            }));\r\n            showToast(\"Colecci├│n eliminada\", 'success');\r\n        } catch (error) {\r\n            console.error(\"Action error:\", error);\r\n            showToast(\"Error al eliminar colecci├│n\", 'error');\r\n        }\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\store\\blogSlice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\store\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\store\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3324,3327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3324,3327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3417,3420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3417,3420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * App Store Types\r\n * Type definitions for Zustand store slices\r\n */\r\n\r\nimport { CartItem, Notification, CollectionItem, PortfolioItem, ArticleItem, ItemType, CreateMode, User, SocialLinks } from '../../types';\r\n\r\n// Re-export for convenience\r\nexport type { CreateMode, ItemType } from '../../types';\r\n\r\n// --- Core Types ---\r\nexport type ContentMode = 'creative' | 'dev';\r\nexport type ToastType = 'success' | 'error' | 'info';\r\n\r\nexport interface ToastState {\r\n    message: string;\r\n    type: ToastType;\r\n}\r\n\r\n// --- UI Slice ---\r\nexport interface UISlice {\r\n    // State\r\n    isSidebarOpen: boolean;\r\n    activeCategory: string;\r\n    activeModule: string;\r\n    contentMode: ContentMode;\r\n    createMode: CreateMode;\r\n    searchQuery: string;\r\n    toast: ToastState | null;\r\n    subscriptionsTimestamp: number;\r\n    isSaveModalOpen: boolean;\r\n    isShareModalOpen: boolean;\r\n    itemToSave: { id: string; image: string; type: ItemType } | null;\r\n    viewingAuthor: { name: string; avatar?: string; id?: string } | null;\r\n\r\n    setIsSidebarOpen: (isOpen: boolean) => void;\r\n    setActiveCategory: (category: string) => void;\r\n    setActiveModule: (module: string) => void;\r\n    setContentMode: (mode: ContentMode) => void;\r\n    setCreateMode: (mode: CreateMode) => void;\r\n    setSearchQuery: (query: string) => void;\r\n    showToast: (message: string, type?: ToastType) => void;\r\n    triggerSubscriptionUpdate: () => void;\r\n    openSaveModal: (id: string, image: string, type: ItemType) => void;\r\n    closeSaveModal: () => void;\r\n    openShareModal: () => void;\r\n    closeShareModal: () => void;\r\n    setViewingAuthor: (author: { name: string; avatar?: string; id?: string } | null) => void;\r\n}\r\n\r\n// --- Auth Slice ---\r\nexport interface AuthSlice {\r\n    // State\r\n    user: User | null;\r\n    cartItems: CartItem[];\r\n    likedItems: string[];\r\n    createdItems: PortfolioItem[];\r\n    notifications: Notification[];\r\n    collections: CollectionItem[];\r\n    blogPosts: ArticleItem[];\r\n    isLoadingAuth: boolean;\r\n    isLoadingNotifications?: boolean;\r\n    unsubscribeNotifications: (() => void) | null;\r\n\r\n    // Actions\r\n    setUser: (user: AuthSlice['user']) => void;\r\n    clearUser: () => void;\r\n    updateUserProfile: (updates: Partial<AuthSlice['user']>) => void;\r\n    addSkill: (skill: string) => void;\r\n    removeSkill: (skill: string) => void;\r\n    updateSocialLinks: (links: SocialLinks) => void;\r\n    setLoadingAuth: (loading: boolean) => void;\r\n    addToCart: (item: CartItem) => void;\r\n    removeFromCart: (itemId: string) => void;\r\n    clearCart: () => void;\r\n    toggleLike: (itemId: string) => void;\r\n    addCreatedItem: (item: PortfolioItem) => void;\r\n    addBlogPost: (post: ArticleItem) => void;\r\n    markNotificationRead: (id: string | number) => void;\r\n    deleteNotification: (id: string | number) => void;\r\n    markAllNotificationsRead: () => void;\r\n    subscribeToNotifications: (userId: string) => void;\r\n    cleanupNotifications: () => void;\r\n    fetchCollections: () => Promise<void>;\r\n    saveToCollection: (collectionId: string) => Promise<void>;\r\n    createCollection: (title: string, isPrivate: boolean) => Promise<void>;\r\n    deleteCollection: (collectionId: string) => Promise<void>;\r\n}\r\n\r\n// --- Blog Slice ---\r\nexport interface BlogState {\r\n    articles: ArticleItem[];\r\n    pageStack: any[];\r\n    currentPage: number;\r\n    hasMore: boolean;\r\n    loading: boolean;\r\n    lastDoc: any | null;\r\n    sortOption: 'recent' | 'oldest' | 'popular';\r\n}\r\n\r\nexport interface BlogSlice {\r\n    blogState: BlogState;\r\n    setBlogState: (updates: Partial<BlogState>) => void;\r\n    resetBlogState: () => void;\r\n}\r\n\r\n// --- Combined Store Type ---\r\nexport type AppStore = UISlice & AuthSlice & BlogSlice;\r\n\r\n// --- Initial State Constants ---\r\nexport const INITIAL_UI_STATE: Pick<UISlice,\r\n    'isSidebarOpen' | 'activeCategory' | 'activeModule' | 'contentMode' |\r\n    'createMode' | 'searchQuery' | 'toast' |\r\n    'isSaveModalOpen' | 'isShareModalOpen' | 'itemToSave' | 'viewingAuthor' | 'subscriptionsTimestamp'\r\n> = {\r\n    isSidebarOpen: false,\r\n    activeCategory: 'Home',\r\n    activeModule: 'home',\r\n    contentMode: 'creative',\r\n    createMode: null,\r\n    searchQuery: '',\r\n    toast: null,\r\n    isSaveModalOpen: false,\r\n    isShareModalOpen: false,\r\n    itemToSave: null,\r\n    viewingAuthor: null,\r\n    subscriptionsTimestamp: 0,\r\n};\r\n\r\nexport const INITIAL_AUTH_STATE: Pick<AuthSlice,\r\n    'user' | 'cartItems' | 'likedItems' | 'createdItems' | 'notifications' |\r\n    'collections' | 'blogPosts' | 'isLoadingAuth' | 'unsubscribeNotifications'\r\n> = {\r\n    user: null,\r\n    cartItems: [],\r\n    likedItems: [],\r\n    createdItems: [],\r\n    notifications: [],\r\n    collections: [],\r\n    blogPosts: [],\r\n    isLoadingAuth: false,\r\n    unsubscribeNotifications: null,\r\n};\r\n\r\nexport const INITIAL_BLOG_STATE: BlogState = {\r\n    articles: [],\r\n    pageStack: [],\r\n    currentPage: 1,\r\n    hasMore: true,\r\n    loading: false,\r\n    lastDoc: null,\r\n    sortOption: 'recent',\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\store\\uiSlice.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ToastType' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ItemType' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1254,1257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1254,1257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1286,1289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1286,1289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1336,1339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1336,1339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1569,1572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1569,1572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2487,2490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2487,2490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2519,2522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2519,2522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2569,2572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2569,2572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used. Allowed unused args must match /^_/u.","line":102,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { StateCreator } from 'zustand';\r\nimport { UISlice, AppStore, ToastType, ContentMode, CreateMode, ItemType } from './types';\r\n\r\n// Helper to safely read from localStorage\r\nconst getSavedContentMode = (): ContentMode => {\r\n    if (typeof window === 'undefined') return 'creative';\r\n    try {\r\n        const saved = localStorage.getItem('latamcreativa_content_mode');\r\n        if (saved === 'dev' || saved === 'creative') {\r\n            return saved;\r\n        }\r\n    } catch (error) {\r\n        console.warn('Error reading content mode from localStorage:', error);\r\n    }\r\n    return 'creative';\r\n};\r\n\r\nexport const createUISlice: StateCreator<AppStore, [], [], UISlice> = (set, get) => ({\r\n    // Initial State\r\n    isSidebarOpen: false,\r\n    activeCategory: 'Home',\r\n    activeModule: 'home',\r\n    contentMode: getSavedContentMode(),\r\n    createMode: null as CreateMode,\r\n    searchQuery: '',\r\n    toast: null,\r\n    isSaveModalOpen: false,\r\n    isShareModalOpen: false,\r\n    itemToSave: null,\r\n    viewingAuthor: null,\r\n    subscriptionsTimestamp: 0,\r\n\r\n    // Actions\r\n    setIsSidebarOpen: (isOpen) => set({ isSidebarOpen: isOpen }),\r\n\r\n    setActiveCategory: (category) => {\r\n        if (typeof window !== 'undefined') {\r\n            (window as any)._debugActions = (window as any)._debugActions || [];\r\n            (window as any)._debugActions.push({\r\n                action: 'setActiveCategory',\r\n                category: category,\r\n                stack: new Error().stack\r\n            });\r\n        }\r\n        set((state) => {\r\n            const updates: any = { activeCategory: category };\r\n\r\n            // Sync sort option with category\r\n            if (category === 'Tendencias') {\r\n                updates.blogState = { ...state.blogState, sortOption: 'popular' };\r\n            } else if (category === 'Home' || category === 'Nuevos') {\r\n                updates.blogState = { ...state.blogState, sortOption: 'recent' };\r\n            }\r\n\r\n            return updates;\r\n        });\r\n    },\r\n\r\n    setActiveModule: (module) => {\r\n        set({ activeModule: module, viewingAuthor: null, createMode: null, searchQuery: '' });\r\n        if (typeof window !== 'undefined' && window.innerWidth < 1280) {\r\n            set({ isSidebarOpen: false });\r\n        }\r\n    },\r\n\r\n    setContentMode: (mode) => {\r\n        const currentMode = get().contentMode;\r\n        const currentCategory = get().activeCategory;\r\n\r\n        if (typeof window !== 'undefined') {\r\n            (window as any)._debugActions = (window as any)._debugActions || [];\r\n            (window as any)._debugActions.push({\r\n                action: 'setContentMode',\r\n                mode: mode,\r\n                currentMode: currentMode,\r\n                currentCategory: currentCategory,\r\n                stack: new Error().stack\r\n            });\r\n        }\r\n\r\n        if (currentMode === mode) return;\r\n\r\n        // Save to localStorage\r\n        try {\r\n            localStorage.setItem('latamcreativa_content_mode', mode);\r\n        } catch (error) {\r\n            console.warn('Error saving content mode to localStorage:', error);\r\n        }\r\n\r\n        set({ contentMode: mode, activeCategory: 'Home' });\r\n        get().showToast(mode === 'dev' ? 'Modo Desarrollador Activado ­ƒæ¿ÔÇì­ƒÆ╗' : 'Modo Creativo Activado ­ƒÄ¿', 'info');\r\n    },\r\n\r\n    setCreateMode: (mode) => set({ createMode: mode }),\r\n    setSearchQuery: (query) => set({ searchQuery: query }),\r\n\r\n    showToast: (message, type = 'success') => {\r\n        set({ toast: { message, type } });\r\n        setTimeout(() => set({ toast: null }), 3000);\r\n    },\r\n\r\n    triggerSubscriptionUpdate: () => set((state) => ({\r\n        subscriptionsTimestamp: Date.now()\r\n    })),\r\n\r\n    openSaveModal: (id, image, type) => set({\r\n        isSaveModalOpen: true,\r\n        itemToSave: { id, image, type }\r\n    }),\r\n\r\n    closeSaveModal: () => set({\r\n        isSaveModalOpen: false,\r\n        itemToSave: null\r\n    }),\r\n\r\n    openShareModal: () => set({ isShareModalOpen: true }),\r\n    closeShareModal: () => set({ isShareModalOpen: false }),\r\n\r\n    setViewingAuthor: (author) => {\r\n        set({ viewingAuthor: author });\r\n        if (typeof window !== 'undefined' && window.innerWidth < 1280 && author) {\r\n            set({ isSidebarOpen: false });\r\n        }\r\n    },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useAppStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ContentMode' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[965,968],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[965,968],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * App Store\r\n * Centralized Zustand store with modular slices\r\n * \r\n * Architecture:\r\n * - types.ts    ÔåÆ Type definitions for all slices\r\n * - uiSlice.ts  ÔåÆ UI state (sidebar, modals, navigation, toasts)\r\n * - authSlice.ts ÔåÆ Auth state (user, cart, likes, notifications, collections)\r\n * - blogSlice.ts ÔåÆ Blog state (article pagination)\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { devtools, persist } from 'zustand/middleware';\r\nimport { CartItem, CreateMode } from '../types';\r\nimport {\r\n  AppStore,\r\n  ContentMode,\r\n  createUISlice,\r\n  createAuthSlice,\r\n  createBlogSlice\r\n} from './store';\r\n\r\n// --- Zustand Implementation with Modular Slices ---\r\nconst useZustandStore = create<AppStore>()(\r\n  devtools(\r\n    persist(\r\n      (...a) => ({\r\n        ...createUISlice(...a),\r\n        ...createAuthSlice(...a),\r\n        ...createBlogSlice(...a),\r\n      }),\r\n      {\r\n        name: 'app-storage',\r\n        version: 1,\r\n        migrate: (persistedState: any, version: number) => {\r\n          if (version < 1) {\r\n            return {\r\n              ...persistedState,\r\n              createdItems: [],\r\n              blogPosts: [],\r\n              collections: [],\r\n              cartItems: [],\r\n              likedItems: [],\r\n              notifications: []\r\n            };\r\n          }\r\n          return persistedState;\r\n        },\r\n        partialize: (state) => ({\r\n          user: state.user,\r\n          createdItems: state.createdItems,\r\n          blogPosts: state.blogPosts,\r\n          cartItems: state.cartItems,\r\n          likedItems: state.likedItems,\r\n          collections: state.collections,\r\n          contentMode: state.contentMode,\r\n          notifications: state.notifications\r\n        }),\r\n      }\r\n    )\r\n  )\r\n);\r\n\r\n// --- Re-export types for convenience ---\r\nexport type { ContentMode, ToastType, ToastState } from './store/types';\r\n\r\n// --- Adapter Hook (Facade Pattern) ---\r\nexport const useAppStore = () => {\r\n  const store = useZustandStore();\r\n\r\n  return {\r\n    state: {\r\n      // UI State\r\n      isSidebarOpen: store.isSidebarOpen,\r\n      activeCategory: store.activeCategory,\r\n      activeModule: store.activeModule,\r\n      viewingAuthor: store.viewingAuthor,\r\n      contentMode: store.contentMode,\r\n      createMode: store.createMode,\r\n      searchQuery: store.searchQuery,\r\n      toast: store.toast,\r\n      toastMessage: store.toast?.message,\r\n      isSaveModalOpen: store.isSaveModalOpen,\r\n      itemToSave: store.itemToSave,\r\n      isShareModalOpen: store.isShareModalOpen,\r\n      subscriptionsTimestamp: store.subscriptionsTimestamp,\r\n\r\n      // Auth State\r\n      user: store.user,\r\n      cartItems: store.cartItems,\r\n      likedItems: store.likedItems,\r\n      createdItems: store.createdItems,\r\n      blogPosts: store.blogPosts,\r\n      collections: store.collections,\r\n      notifications: store.notifications,\r\n      isLoadingAuth: store.isLoadingAuth,\r\n      isLoadingNotifications: store.isLoadingNotifications,\r\n\r\n      // Blog State\r\n      blogState: store.blogState\r\n    },\r\n    actions: {\r\n      // UI Actions\r\n      setIsSidebarOpen: store.setIsSidebarOpen,\r\n      setActiveCategory: store.setActiveCategory,\r\n      setViewingAuthor: store.setViewingAuthor,\r\n      setContentMode: store.setContentMode,\r\n      toggleContentMode: () => store.setContentMode(store.contentMode === 'creative' ? 'dev' : 'creative'),\r\n      setCreateMode: store.setCreateMode,\r\n      handleModuleSelect: store.setActiveModule,\r\n      handleSubscriptionSelect: (name: string) => store.setViewingAuthor(name ? { name } : null),\r\n      openSaveModal: store.openSaveModal,\r\n      closeSaveModal: store.closeSaveModal,\r\n      openShareModal: store.openShareModal,\r\n      closeShareModal: store.closeShareModal,\r\n      triggerSubscriptionUpdate: store.triggerSubscriptionUpdate,\r\n      triggerFollowUpdate: store.triggerSubscriptionUpdate, // Alias sem├íntico\r\n      showToast: store.showToast,\r\n\r\n      // Auth Actions\r\n      setUser: store.setUser,\r\n      setLoadingAuth: store.setLoadingAuth,\r\n      clearUser: store.clearUser,\r\n      updateUserProfile: store.updateUserProfile,\r\n      addSkill: store.addSkill,\r\n      removeSkill: store.removeSkill,\r\n      updateSocialLinks: store.updateSocialLinks,\r\n      addToCart: store.addToCart,\r\n      removeFromCart: store.removeFromCart,\r\n      clearCart: store.clearCart,\r\n      toggleLike: store.toggleLike,\r\n      addCreatedItem: store.addCreatedItem,\r\n      addBlogPost: store.addBlogPost,\r\n      markNotificationRead: store.markNotificationRead,\r\n      deleteNotification: store.deleteNotification,\r\n      markAllNotificationsRead: store.markAllNotificationsRead,\r\n      subscribeToNotifications: store.subscribeToNotifications,\r\n      cleanupNotifications: store.cleanupNotifications,\r\n      unsubscribeNotifications: store.unsubscribeNotifications,\r\n      fetchCollections: store.fetchCollections,\r\n      saveToCollection: store.saveToCollection,\r\n      createCollection: store.createCollection,\r\n      deleteCollection: store.deleteCollection,\r\n\r\n      // Blog Actions\r\n      setBlogState: store.setBlogState,\r\n      resetBlogState: store.resetBlogState,\r\n\r\n      // Complex Actions\r\n      handleCreateAction: (actionId: string) => {\r\n        if (!store.user) {\r\n          store.showToast('Debes iniciar sesi├│n para crear contenido', 'info');\r\n          store.setActiveModule('auth');\r\n          store.setIsSidebarOpen(false);\r\n          return;\r\n        }\r\n\r\n        const moduleMap: Record<string, string> = {\r\n          project: 'community',\r\n          article: 'blog',\r\n          portfolio: 'portfolio',\r\n          course: 'education',\r\n          asset: 'market',\r\n          service: 'freelance',\r\n          forum: 'forum',\r\n          event: 'events'\r\n        };\r\n        if (moduleMap[actionId]) {\r\n          store.setActiveModule(moduleMap[actionId]);\r\n          store.setCreateMode(actionId as CreateMode);\r\n        }\r\n        store.setIsSidebarOpen(false);\r\n      },\r\n\r\n      handleProClick: () => {\r\n        store.setActiveModule('pro');\r\n        if (typeof window !== 'undefined' && window.innerWidth < 1280) {\r\n          store.setIsSidebarOpen(false);\r\n        }\r\n      },\r\n\r\n      handleSearch: (query: string) => {\r\n        store.setSearchQuery(query);\r\n        store.setActiveModule('search');\r\n      },\r\n\r\n      handleBuyNow: (item: CartItem) => {\r\n        if (!store.cartItems.find(i => i.id === item.id)) {\r\n          store.addToCart(item);\r\n        }\r\n        store.setActiveModule('cart');\r\n      },\r\n    }\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useArticleHooks.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3129,3132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3129,3132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4996,4999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4996,4999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5749,5752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5749,5752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6372,6375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6372,6375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6946,6949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6946,6949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7782,7785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7782,7785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":292,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9419,9422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9419,9422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":320,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10360,10363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10360,10363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":340,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10978,10981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10978,10981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":350,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11296,11299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11296,11299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":362,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":362,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11644,11647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11644,11647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":378,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":378,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Article Hooks\r\n * Domain-specific hooks for blog article operations\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAppStore } from './useAppStore';\r\nimport { ArticleItem, BlogComment } from '../types';\r\nimport { QueryDocumentSnapshot, DocumentData } from 'firebase/firestore';\r\nimport { NAV_SECTIONS, NAV_SECTIONS_DEV } from '../data/navigation';\r\nimport { articlesService } from '../services/modules/articles';\r\n\r\n// --- Hook for Blog Articles (Paged) ---\r\nexport const useArticles = () => {\r\n    const { state, actions } = useAppStore();\r\n    const { articles, pageStack, currentPage, hasMore, loading, lastDoc, sortOption } = state.blogState;\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Initial Load (only if empty)\r\n    useEffect(() => {\r\n        if (articles.length === 0 && !loading) {\r\n            fetchPage(null);\r\n        }\r\n    }, [articles.length]);\r\n\r\n    // Re-fetch when Sort Option changes\r\n    useEffect(() => {\r\n        if (!loading) {\r\n            actions.setBlogState({\r\n                pageStack: [],\r\n                currentPage: 1,\r\n                lastDoc: null,\r\n                hasMore: true,\r\n                articles: []\r\n            });\r\n            fetchPage(null);\r\n        }\r\n    }, [sortOption, state.activeCategory]);\r\n\r\n    const fetchPage = async (startAfterDoc: QueryDocumentSnapshot<DocumentData> | null) => {\r\n        actions.setBlogState({ loading: true });\r\n        setError(null);\r\n\r\n        try {\r\n            let sortField: 'date' | 'likes' = 'date';\r\n            let sortDir: 'desc' | 'asc' = 'desc';\r\n\r\n            if (sortOption === 'popular') {\r\n                sortField = 'likes';\r\n                sortDir = 'desc';\r\n            } else if (sortOption === 'oldest') {\r\n                sortField = 'date';\r\n                sortDir = 'asc';\r\n            }\r\n\r\n            let result;\r\n            const category = state.activeCategory;\r\n            const isHome = category === 'Home' || category === 'Todas';\r\n            const isTrending = category === 'Tendencias';\r\n            const isNew = category === 'Nuevos';\r\n\r\n            if (!isHome && !isTrending && !isNew) {\r\n                const isTag = NAV_SECTIONS.some(section =>\r\n                    section.items.some(item => item.subItems?.includes(category))\r\n                ) || NAV_SECTIONS_DEV.some(section =>\r\n                    section.items.some(item => item.subItems?.includes(category))\r\n                );\r\n\r\n                if (isTag) {\r\n                    result = await articlesService.getArticlesByTag(category, startAfterDoc, 10);\r\n                } else {\r\n                    result = await articlesService.getArticlesByCategories([category], startAfterDoc, 10);\r\n                }\r\n            } else {\r\n                result = await articlesService.getArticles(startAfterDoc, 10, sortField, sortDir);\r\n            }\r\n\r\n            actions.setBlogState({\r\n                articles: result.data,\r\n                lastDoc: result.lastDoc,\r\n                hasMore: result.hasMore,\r\n                loading: false\r\n            });\r\n        } catch (err: any) {\r\n            setError(err.message || 'Error loading articles');\r\n            actions.setBlogState({ loading: false });\r\n        }\r\n    };\r\n\r\n    const nextPage = () => {\r\n        if (!hasMore || loading) return;\r\n        const currentStack = [...pageStack];\r\n        if (lastDoc) currentStack.push(lastDoc);\r\n\r\n        actions.setBlogState({\r\n            pageStack: currentStack,\r\n            currentPage: currentPage + 1\r\n        });\r\n\r\n        fetchPage(lastDoc);\r\n    };\r\n\r\n    const prevPage = () => {\r\n        if (currentPage <= 1 || loading) return;\r\n        const currentStack = [...pageStack];\r\n        const newPage = currentPage - 1;\r\n\r\n        let targetDoc = null;\r\n        if (newPage > 1) {\r\n            targetDoc = currentStack[newPage - 2];\r\n        }\r\n\r\n        const newStack = currentStack.slice(0, newPage - 1);\r\n\r\n        actions.setBlogState({\r\n            pageStack: newStack,\r\n            currentPage: newPage\r\n        });\r\n\r\n        fetchPage(targetDoc);\r\n    };\r\n\r\n    return {\r\n        articles,\r\n        loading,\r\n        error,\r\n        hasMore,\r\n        currentPage,\r\n        nextPage,\r\n        prevPage,\r\n        loadMore: nextPage\r\n    };\r\n};\r\n\r\n// --- Hook for Single Article (by slug or ID) ---\r\nexport const useArticle = (slugOrId: string | undefined) => {\r\n    const [article, setArticle] = useState<ArticleItem | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!slugOrId) return;\r\n\r\n        const fetchArticle = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Uses getArticleBySlug which tries slug first, then falls back to ID\r\n                const data = await articlesService.getArticleBySlug(slugOrId);\r\n                setArticle(data);\r\n            } catch (err: any) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchArticle();\r\n    }, [slugOrId]);\r\n\r\n    return { article, loading, error };\r\n};\r\n\r\n// --- Hook for Creating Article ---\r\nexport const useCreateArticle = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const create = async (data: Omit<ArticleItem, 'id'>, file?: File): Promise<{ id: string; slug: string }> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const result = await articlesService.createArticle(data, file);\r\n            return result; // { id, slug }\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { create, loading, error };\r\n};\r\n\r\n// --- Hook for Updating Article ---\r\nexport const useUpdateArticle = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const update = async (id: string, data: Partial<ArticleItem>, file?: File) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await articlesService.updateArticle(id, data, file);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { update, loading, error };\r\n};\r\n\r\n// --- Hook for Deleting Article ---\r\nexport const useDeleteArticle = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const deletePost = async (id: string) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await articlesService.deleteArticle(id);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { deletePost, loading, error };\r\n};\r\n\r\n// --- Hook for User Articles ---\r\nexport const useUserArticles = (authorName: string | undefined, authorId?: string | undefined) => {\r\n    const [articles, setArticles] = useState<ArticleItem[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!authorName && !authorId) return;\r\n\r\n        const fetchArticles = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await articlesService.getUserArticles(authorName || '', authorId);\r\n                setArticles(data);\r\n            } catch (err: any) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchArticles();\r\n    }, [authorName, authorId]);\r\n\r\n    return { articles, loading, error };\r\n};\r\n\r\n// --- Hook for Recommended Articles ---\r\nexport const useRecommendedArticles = (currentArticleId: string) => {\r\n    const [articles, setArticles] = useState<ArticleItem[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const result = await articlesService.getArticles(null, 4);\r\n                const filtered = result.data\r\n                    .filter(a => a.id !== currentArticleId)\r\n                    .slice(0, 3);\r\n                setArticles(filtered);\r\n            } catch (e) {\r\n                console.error(e);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        if (currentArticleId) fetch();\r\n    }, [currentArticleId]);\r\n\r\n    return { articles, loading };\r\n};\r\n\r\n// --- Hook for Article Comments ---\r\nexport const useComments = (articleId: string | undefined) => {\r\n    const [comments, setComments] = useState<BlogComment[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchComments = async () => {\r\n        if (!articleId) return;\r\n        setLoading(true);\r\n        try {\r\n            const data = await articlesService.getComments(articleId);\r\n            setComments(data);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchComments();\r\n    }, [articleId]);\r\n\r\n    const removeComment = (commentId: string) => {\r\n        setComments(prev => prev.filter(c => c.id !== commentId));\r\n    };\r\n\r\n    return { comments, loading, error, refresh: fetchComments, removeComment };\r\n};\r\n\r\n// --- Hook for Adding Comment ---\r\nexport const useAddComment = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const add = async (articleId: string, commentData: { authorId: string; authorName: string; authorUsername?: string; authorAvatar: string; text: string; parentId?: string }) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await articlesService.addComment(articleId, commentData);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { add, loading, error };\r\n};\r\n\r\n\r\n// --- Hook for Comment Actions ---\r\nexport const useCommentActions = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const toggleLike = async (articleId: string, commentId: string, userId: string): Promise<boolean> => {\r\n        try {\r\n            return await articlesService.toggleCommentLike(articleId, commentId, userId);\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const update = async (articleId: string, commentId: string, content: string) => {\r\n        setLoading(true);\r\n        try {\r\n            await articlesService.updateComment(articleId, commentId, content);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const remove = async (articleId: string, commentId: string) => {\r\n        setLoading(true);\r\n        try {\r\n            await articlesService.deleteComment(articleId, commentId);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { toggleLike, update, remove, loading, error };\r\n};\r\n\r\n\r\n// --- Hook for Article Like ---\r\nexport const useArticleLike = (articleId: string | undefined, userId: string | undefined, userInfo?: { name: string; avatar: string }) => {\r\n    const [isLiked, setIsLiked] = useState(false);\r\n    const [initialIsLiked, setInitialIsLiked] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkLike = async () => {\r\n            if (!articleId || !userId) return;\r\n            const status = await articlesService.getArticleLikeStatus(articleId, userId);\r\n            setIsLiked(status);\r\n            setInitialIsLiked(status);\r\n        };\r\n        checkLike();\r\n    }, [articleId, userId]);\r\n\r\n    const toggleLike = async () => {\r\n        if (!articleId || !userId) return;\r\n\r\n        const previousState = isLiked;\r\n        setIsLiked(!previousState);\r\n\r\n        try {\r\n            const newState = await articlesService.toggleArticleLike(articleId, userId, userInfo);\r\n            setIsLiked(newState);\r\n        } catch (error) {\r\n            console.error(\"Error toggling like:\", error);\r\n            setIsLiked(previousState);\r\n        }\r\n    };\r\n\r\n    return { isLiked, initialIsLiked, toggleLike, loading };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useAuthorInfo.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1503,1506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1503,1506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useAuthorInfo Hook\r\n * \r\n * Fetches author information in real-time using the authorId.\r\n * This ensures that when a user updates their profile (name, avatar),\r\n * the changes are reflected immediately in all their content.\r\n * \r\n * Usage:\r\n * const { authorName, authorAvatar, loading } = useAuthorInfo(authorId, fallbackName, fallbackAvatar);\r\n */\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { usersService } from '../services/modules/users';\r\n\r\ninterface AuthorInfo {\r\n    authorName: string;\r\n    authorUsername?: string;\r\n    authorAvatar: string;\r\n    authorId: string;\r\n    loading: boolean;\r\n}\r\n\r\n/**\r\n * Safely extracts a string value from potentially nested data (handles n8n edge cases)\r\n */\r\nfunction safeString(value: any, fallback: string = ''): string {\r\n    if (!value) return fallback;\r\n    if (typeof value === 'string') return value;\r\n    if (typeof value === 'object') {\r\n        // Handle { name: 'value' } format\r\n        if (value.name && typeof value.name === 'string') return value.name;\r\n        // Handle { text: 'value' } format (Gemini API)\r\n        if (value.text && typeof value.text === 'string') return value.text;\r\n        // Handle nested parts structure\r\n        if (value.parts && Array.isArray(value.parts) && value.parts[0]?.text) {\r\n            return value.parts[0].text;\r\n        }\r\n    }\r\n    return String(value) || fallback;\r\n}\r\n\r\n/**\r\n * Safely extracts author ID from potentially nested data\r\n */\r\nfunction safeAuthorId(value: any): string | undefined {\r\n    if (!value) return undefined;\r\n    if (typeof value === 'string') return value;\r\n    if (typeof value === 'object') {\r\n        if (value.id) return String(value.id);\r\n        if (value.uid) return String(value.uid);\r\n    }\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * Hook to fetch live author information\r\n * Falls back to provided values while loading or if fetch fails\r\n * \r\n * @param authorId - The author's user ID (can be string or object)\r\n * @param fallbackName - Fallback name (stored at creation time)\r\n * @param fallbackAvatar - Fallback avatar (stored at creation time)\r\n * @returns Live author info with loading state\r\n */\r\nexport function useAuthorInfo(\r\n    authorId: string | object | undefined,\r\n    fallbackName: string | object = 'Usuario',\r\n    fallbackAvatar: string | object = ''\r\n): AuthorInfo {\r\n    // Normalize inputs once using useMemo to prevent unnecessary re-renders\r\n    const normalizedData = useMemo(() => ({\r\n        id: safeAuthorId(authorId),\r\n        name: safeString(fallbackName, 'Usuario'),\r\n        avatar: safeString(fallbackAvatar, '')\r\n    }), [\r\n        // Use stable string representations for comparison\r\n        typeof authorId === 'string' ? authorId : JSON.stringify(authorId),\r\n        typeof fallbackName === 'string' ? fallbackName : JSON.stringify(fallbackName),\r\n        typeof fallbackAvatar === 'string' ? fallbackAvatar : JSON.stringify(fallbackAvatar)\r\n    ]);\r\n\r\n    const [authorInfo, setAuthorInfo] = useState<AuthorInfo>({\r\n        authorName: normalizedData.name,\r\n        authorAvatar: normalizedData.avatar,\r\n        authorId: normalizedData.id || '',\r\n        loading: !!normalizedData.id // Only loading if we have an ID to fetch\r\n    });\r\n\r\n    useEffect(() => {\r\n        const { id, name, avatar } = normalizedData;\r\n\r\n        // Skip if no authorId\r\n        if (!id) {\r\n            setAuthorInfo({\r\n                authorName: name,\r\n                authorAvatar: avatar,\r\n                authorId: '',\r\n                loading: false\r\n            });\r\n            return;\r\n        }\r\n\r\n        const fetchAuthor = async () => {\r\n            try {\r\n                const userProfile = await usersService.getUserProfile(id);\r\n\r\n                if (userProfile) {\r\n                    setAuthorInfo({\r\n                        authorName: userProfile.name || name,\r\n                        authorUsername: userProfile.username,\r\n                        authorAvatar: userProfile.avatar || avatar,\r\n                        authorId: id,\r\n                        loading: false\r\n                    });\r\n                } else {\r\n                    // User not found, use fallbacks\r\n                    setAuthorInfo({\r\n                        authorName: name,\r\n                        authorAvatar: avatar,\r\n                        authorId: id,\r\n                        loading: false\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching author info:', error);\r\n                // On error, use fallbacks\r\n                setAuthorInfo({\r\n                    authorName: name,\r\n                    authorAvatar: avatar,\r\n                    authorId: id,\r\n                    loading: false\r\n                });\r\n            }\r\n        };\r\n\r\n        fetchAuthor();\r\n    }, [normalizedData]);\r\n\r\n    return authorInfo;\r\n}\r\n\r\n\r\n/**\r\n * Batch hook for fetching multiple authors at once\r\n * Useful for lists of articles/projects\r\n * Uses caching to avoid duplicate requests\r\n */\r\nconst authorCache = new Map<string, { name: string; avatar: string; username?: string }>();\r\n\r\nexport function useAuthorsInfo(\r\n    authorIds: string[]\r\n): Map<string, { name: string; avatar: string; username?: string; loading: boolean }> {\r\n    const [authorsMap, setAuthorsMap] = useState<Map<string, { name: string; avatar: string; username?: string; loading: boolean }>>(new Map());\r\n\r\n    useEffect(() => {\r\n        const fetchAuthors = async () => {\r\n            const uniqueIds = [...new Set(authorIds.filter(id => id && !authorCache.has(id)))];\r\n\r\n            if (uniqueIds.length === 0) {\r\n                // All cached, build result from cache\r\n                const result = new Map<string, { name: string; avatar: string; username?: string; loading: boolean }>();\r\n                authorIds.forEach(id => {\r\n                    const cached = authorCache.get(id);\r\n                    if (cached) {\r\n                        result.set(id, { ...cached, loading: false });\r\n                    }\r\n                });\r\n                setAuthorsMap(result);\r\n                return;\r\n            }\r\n\r\n            // Fetch uncached authors\r\n            await Promise.all(uniqueIds.map(async (id) => {\r\n                try {\r\n                    const profile = await usersService.getUserProfile(id);\r\n                    if (profile) {\r\n                        authorCache.set(id, {\r\n                            name: profile.name || 'Usuario',\r\n                            avatar: profile.avatar || '',\r\n                            username: profile.username\r\n                        });\r\n                    }\r\n                } catch (error) {\r\n                    console.error(`Error fetching author ${id}:`, error);\r\n                }\r\n            }));\r\n\r\n            // Build result with all authors\r\n            const result = new Map<string, { name: string; avatar: string; username?: string; loading: boolean }>();\r\n            authorIds.forEach(id => {\r\n                const cached = authorCache.get(id);\r\n                result.set(id, {\r\n                    name: cached?.name || 'Usuario',\r\n                    avatar: cached?.avatar || '',\r\n                    username: cached?.username,\r\n                    loading: false\r\n                });\r\n            });\r\n            setAuthorsMap(result);\r\n        };\r\n\r\n        fetchAuthors();\r\n    }, [authorIds.join(',')]);\r\n\r\n    return authorsMap;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useContentVerification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useDraggableList.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useEditProfile.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3311,3314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3311,3314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4110,4113],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4110,4113],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAppStore } from './useAppStore';\r\nimport { usersService } from '../services/modules/users';\r\nimport { storageService } from '../services/modules/storage';\r\nimport { User, ExperienceItem, EducationItem, SocialLinks } from '../types';\r\nimport { COMMON_ROLES } from '../data/roles';\r\n\r\ninterface EditProfileState {\r\n    firstName: string;\r\n    lastName: string;\r\n    username: string;\r\n    role: string;\r\n    country: string;\r\n    city: string;\r\n    bio: string;\r\n    availableForWork: boolean;\r\n}\r\n\r\ninterface ImageState {\r\n    previewAvatar: string;\r\n    previewCover: string;\r\n    avatarFile: File | null;\r\n    coverFile: File | null;\r\n}\r\n\r\ninterface CollectionState {\r\n    experience: ExperienceItem[];\r\n    education: EducationItem[];\r\n    skills: string[];\r\n    socialLinks: SocialLinks;\r\n}\r\n\r\nexport const useEditProfile = (isOpen: boolean, onClose: () => void) => {\r\n    const { state: { user }, actions: { showToast, setUser } } = useAppStore();\r\n    const navigate = useNavigate();\r\n\r\n    const [activeTab, setActiveTab] = useState('general');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [usernameError, setUsernameError] = useState('');\r\n\r\n    const [formData, setFormData] = useState<EditProfileState>({\r\n        firstName: '',\r\n        lastName: '',\r\n        username: '',\r\n        role: '',\r\n        country: '',\r\n        city: '',\r\n        bio: '',\r\n        availableForWork: false\r\n    });\r\n\r\n    const [collections, setCollections] = useState<CollectionState>({\r\n        experience: [],\r\n        education: [],\r\n        skills: [],\r\n        socialLinks: {}\r\n    });\r\n\r\n    const [images, setImages] = useState<ImageState>({\r\n        previewAvatar: '',\r\n        previewCover: '',\r\n        avatarFile: null,\r\n        coverFile: null\r\n    });\r\n\r\n    const [suggestions, setSuggestions] = useState({\r\n        showRole: false,\r\n        filteredRoles: COMMON_ROLES\r\n    });\r\n\r\n    // Reset and Load Data when modal opens\r\n    useEffect(() => {\r\n        if (isOpen && user) {\r\n            setFormData({\r\n                firstName: user.firstName || user.name.split(' ')[0] || '',\r\n                lastName: user.lastName || user.name.split(' ').slice(1).join(' ') || '',\r\n                username: user.username || '',\r\n                role: user.role || '',\r\n                country: user.country || user.location || '',\r\n                city: user.city || '',\r\n                bio: user.bio || '',\r\n                availableForWork: user.availableForWork || false\r\n            });\r\n\r\n            setCollections({\r\n                experience: user.experience || [],\r\n                education: user.education || [],\r\n                skills: user.skills || [],\r\n                socialLinks: user.socialLinks || {}\r\n            });\r\n\r\n            setImages({\r\n                previewAvatar: '',\r\n                previewCover: '',\r\n                avatarFile: null,\r\n                coverFile: null\r\n            });\r\n\r\n            setActiveTab('general');\r\n            setUsernameError('');\r\n            setSuggestions({ showRole: false, filteredRoles: COMMON_ROLES });\r\n        }\r\n    }, [isOpen, user]);\r\n\r\n    const handleInputChange = (field: keyof EditProfileState, value: any) => {\r\n        setFormData(prev => ({ ...prev, [field]: value }));\r\n\r\n        if (field === 'role') {\r\n            const filtered = COMMON_ROLES.filter(r =>\r\n                r.toLowerCase().includes(value.toLowerCase())\r\n            );\r\n            setSuggestions(prev => ({ ...prev, filteredRoles: filtered }));\r\n        }\r\n\r\n        if (field === 'username') {\r\n            // Basic validation\r\n            if (value.length < 3) {\r\n                setUsernameError('M├¡nimo 3 caracteres');\r\n            } else if (!/^[a-z0-9_]+$/.test(value)) {\r\n                setUsernameError('Solo letras min├║sculas, n├║meros y guiones bajos');\r\n            } else {\r\n                setUsernameError('');\r\n            }\r\n        }\r\n    };\r\n\r\n    const updateCollection = (key: keyof CollectionState, value: any) => {\r\n        setCollections(prev => ({ ...prev, [key]: value }));\r\n    };\r\n\r\n    const handleImageChange = (file: File, type: 'avatar' | 'cover') => {\r\n        if (file) {\r\n            const objectUrl = URL.createObjectURL(file);\r\n            setImages(prev => ({\r\n                ...prev,\r\n                [type === 'avatar' ? 'previewAvatar' : 'previewCover']: objectUrl,\r\n                [type === 'avatar' ? 'avatarFile' : 'coverFile']: file\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!user) return;\r\n        if (usernameError && formData.username !== user.username) {\r\n            showToast('El nombre de usuario tiene un formato inv├ílido.', 'error');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            // Verificaci├│n de disponibilidad del username si ha cambiado\r\n            if (formData.username !== user.username) {\r\n                const isAvailable = await usersService.checkUsernameAvailability(formData.username);\r\n                if (!isAvailable) {\r\n                    throw new Error('Este nombre de usuario ya est├í en uso.');\r\n                }\r\n            }\r\n\r\n            let avatarUrl = user.avatar;\r\n            let coverUrl = user.coverImage;\r\n\r\n            // 1. Upload Images if changed (delete old ones first to save storage)\r\n            if (images.avatarFile) {\r\n                // Delete old avatar if it exists\r\n                if (user.avatar) {\r\n                    await storageService.deleteFromUrl(user.avatar);\r\n                }\r\n                avatarUrl = await storageService.uploadImage(images.avatarFile, `users/${user.id}/avatar_${Date.now()}`);\r\n            }\r\n            if (images.coverFile) {\r\n                // Delete old cover if it exists\r\n                if (user.coverImage) {\r\n                    await storageService.deleteFromUrl(user.coverImage);\r\n                }\r\n                coverUrl = await storageService.uploadImage(images.coverFile, `users/${user.id}/cover_${Date.now()}`);\r\n            }\r\n\r\n            // 2. Prepare Updates\r\n            const updates: Partial<User> = {\r\n                firstName: formData.firstName,\r\n                lastName: formData.lastName,\r\n                name: `${formData.firstName} ${formData.lastName}`.trim(),\r\n                username: formData.username,\r\n                role: formData.role,\r\n                country: formData.country, // Ensure both fields are synced if needed\r\n                location: formData.city ? `${formData.city}, ${formData.country}` : formData.country,\r\n                city: formData.city,\r\n                bio: formData.bio,\r\n                availableForWork: formData.availableForWork,\r\n                avatar: avatarUrl,\r\n                photoURL: avatarUrl, // Sync photoURL\r\n                coverImage: coverUrl,\r\n                experience: collections.experience,\r\n                education: collections.education,\r\n                skills: collections.skills,\r\n                socialLinks: collections.socialLinks,\r\n                isProfileComplete: true\r\n            };\r\n\r\n            // 3. Optimistic Update\r\n            setUser({ ...user, ...updates } as User);\r\n\r\n            // 4. Backend Update\r\n            await usersService.updateUserProfile(user.id, updates);\r\n\r\n            showToast('Perfil actualizado correctamente', 'success');\r\n            onClose();\r\n\r\n            // Navegar a la nueva URL si el username cambi├│\r\n            if (formData.username && formData.username !== user.username) {\r\n                navigate(`/user/${formData.username}`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error saving profile:', error);\r\n            const errorMessage = error instanceof Error ? error.message : 'Ocurri├│ un error al guardar.';\r\n            showToast(errorMessage, 'error');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    return {\r\n        user,\r\n        activeTab,\r\n        setActiveTab,\r\n        formData,\r\n        handleInputChange,\r\n        collections,\r\n        updateCollection,\r\n        images,\r\n        handleImageChange,\r\n        suggestions,\r\n        setSuggestions,\r\n        usernameError,\r\n        isSaving,\r\n        handleSave\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useFirebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useForumHooks.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ForumPaginatedResult' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":522,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":522,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":536,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":536,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":550,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":550,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":568,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":568,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Forum Hooks\r\n * \r\n * Custom React hooks para operaciones del foro.\r\n * Incluye hooks para hilos, respuestas, likes y moderaci├│n.\r\n * \r\n * @module hooks/useForumHooks\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { QueryDocumentSnapshot, DocumentData } from 'firebase/firestore';\r\nimport { useAppStore } from './useAppStore';\r\nimport {\r\n    ForumThread,\r\n    ForumReply,\r\n    ForumPaginatedResult,\r\n    ThreadSortOption,\r\n    ReplySortOption\r\n} from '../types/forum';\r\nimport { forumService, forumReplies, forumModeration } from '../services/modules/forum';\r\n\r\n// ============================================\r\n// THREADS HOOKS\r\n// ============================================\r\n\r\n/**\r\n * Hook para obtener hilos paginados con filtros.\r\n */\r\nexport function useForumThreads(\r\n    category?: string,\r\n    sortBy: ThreadSortOption = 'activity'\r\n) {\r\n    const [threads, setThreads] = useState<ForumThread[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [lastDoc, setLastDoc] = useState<QueryDocumentSnapshot<DocumentData> | null>(null);\r\n    const [page, setPage] = useState(1);\r\n    const [pageHistory, setPageHistory] = useState<(QueryDocumentSnapshot<DocumentData> | null)[]>([null]);\r\n\r\n    const fetchThreads = useCallback(async (startAfterDoc: QueryDocumentSnapshot<DocumentData> | null = null) => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await forumService.getThreads({\r\n                category: category === 'all' ? undefined : category,\r\n                sortBy,\r\n                lastDoc: startAfterDoc,\r\n                pageSize: 20\r\n            });\r\n\r\n            setThreads(result.items);\r\n            setHasMore(result.hasMore);\r\n            setLastDoc(result.lastDoc as QueryDocumentSnapshot<DocumentData> | null);\r\n        } catch (err) {\r\n            console.error('Error fetching threads:', err);\r\n            setError('Error al cargar los hilos');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [category, sortBy]);\r\n\r\n    // Initial fetch and refetch when filters change\r\n    useEffect(() => {\r\n        setPage(1);\r\n        setPageHistory([null]);\r\n        fetchThreads(null);\r\n    }, [category, sortBy, fetchThreads]);\r\n\r\n    const nextPage = useCallback(() => {\r\n        if (hasMore && lastDoc) {\r\n            setPageHistory(prev => [...prev, lastDoc]);\r\n            setPage(p => p + 1);\r\n            fetchThreads(lastDoc);\r\n        }\r\n    }, [hasMore, lastDoc, fetchThreads]);\r\n\r\n    const prevPage = useCallback(() => {\r\n        if (page > 1) {\r\n            const previousDoc = pageHistory[page - 2] || null;\r\n            setPageHistory(prev => prev.slice(0, -1));\r\n            setPage(p => p - 1);\r\n            fetchThreads(previousDoc);\r\n        }\r\n    }, [page, pageHistory, fetchThreads]);\r\n\r\n    const refresh = useCallback(() => {\r\n        setPage(1);\r\n        setPageHistory([null]);\r\n        fetchThreads(null);\r\n    }, [fetchThreads]);\r\n\r\n    return {\r\n        threads,\r\n        loading,\r\n        error,\r\n        hasMore,\r\n        page,\r\n        nextPage,\r\n        prevPage,\r\n        refresh\r\n    };\r\n}\r\n\r\n/**\r\n * Hook para obtener un hilo individual por slug o ID.\r\n */\r\nexport function useForumThread(slugOrId: string | undefined) {\r\n    const [thread, setThread] = useState<ForumThread | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!slugOrId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const fetchThread = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            try {\r\n                const result = await forumService.getThreadBySlug(slugOrId);\r\n                setThread(result);\r\n\r\n                // Increment views only once per session (prevent spam)\r\n                if (result) {\r\n                    const viewedKey = `forum_viewed_${result.id}`;\r\n                    if (!sessionStorage.getItem(viewedKey)) {\r\n                        sessionStorage.setItem(viewedKey, 'true');\r\n                        forumService.incrementViews(result.id).catch(console.error);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching thread:', err);\r\n                setError('Error al cargar el hilo');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchThread();\r\n    }, [slugOrId]);\r\n\r\n    return { thread, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para crear un nuevo hilo.\r\n */\r\nexport function useCreateThread() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const { state } = useAppStore();\r\n\r\n    const create = useCallback(async (\r\n        data: {\r\n            title: string;\r\n            content: string;\r\n            category: string;\r\n            tags?: string[];\r\n        },\r\n        attachments?: File[]\r\n    ): Promise<{ id: string; slug: string } | null> => {\r\n        if (!state.user) {\r\n            setError('Debes iniciar sesi├│n para crear un hilo');\r\n            return null;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await forumService.createThread(\r\n                {\r\n                    title: data.title,\r\n                    content: data.content,\r\n                    category: data.category,\r\n                    tags: data.tags,\r\n                    authorId: state.user.uid,\r\n                    authorName: state.user.name,\r\n                    authorUsername: state.user.username,\r\n                    authorAvatar: state.user.photoURL || state.user.avatar,\r\n                    authorRole: state.user.role\r\n                },\r\n                attachments\r\n            );\r\n            return result;\r\n        } catch (err) {\r\n            console.error('Error creating thread:', err);\r\n            setError('Error al crear el hilo');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [state.user]);\r\n\r\n    return { create, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para actualizar un hilo.\r\n */\r\nexport function useUpdateThread() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const update = useCallback(async (\r\n        threadId: string,\r\n        data: Partial<Pick<ForumThread, 'title' | 'content' | 'category' | 'tags'>>\r\n    ): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            await forumService.updateThread(threadId, data);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error updating thread:', err);\r\n            setError('Error al actualizar el hilo');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    return { update, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para eliminar un hilo.\r\n */\r\nexport function useDeleteThread() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const deleteThread = useCallback(async (threadId: string): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            await forumService.deleteThread(threadId);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error deleting thread:', err);\r\n            setError('Error al eliminar el hilo');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    return { deleteThread, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para obtener hilos de un usuario.\r\n */\r\nexport function useUserThreads(userId?: string) {\r\n    const [threads, setThreads] = useState<ForumThread[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!userId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const fetchThreads = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const result = await forumService.getUserThreads(userId);\r\n                setThreads(result);\r\n            } catch (err) {\r\n                console.error('Error fetching user threads:', err);\r\n                setError('Error al cargar los hilos');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchThreads();\r\n    }, [userId]);\r\n\r\n    return { threads, loading, error };\r\n}\r\n\r\n// ============================================\r\n// REPLIES HOOKS\r\n// ============================================\r\n\r\n/**\r\n * Hook para obtener respuestas de un hilo.\r\n */\r\nexport function useForumReplies(threadId: string | undefined, sortBy: ReplySortOption = 'oldest') {\r\n    const [replies, setReplies] = useState<ForumReply[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchReplies = useCallback(async () => {\r\n        if (!threadId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await forumReplies.getReplies(threadId, sortBy);\r\n            setReplies(result);\r\n        } catch (err) {\r\n            console.error('Error fetching replies:', err);\r\n            setError('Error al cargar las respuestas');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [threadId, sortBy]);\r\n\r\n    useEffect(() => {\r\n        fetchReplies();\r\n    }, [fetchReplies]);\r\n\r\n    const refresh = useCallback(() => {\r\n        fetchReplies();\r\n    }, [fetchReplies]);\r\n\r\n    return { replies, loading, error, refresh };\r\n}\r\n\r\n/**\r\n * Hook para agregar una respuesta.\r\n */\r\nexport function useAddReply() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const { state } = useAppStore();\r\n\r\n    const addReply = useCallback(async (\r\n        threadId: string,\r\n        content: string,\r\n        parentId?: string\r\n    ): Promise<ForumReply | null> => {\r\n        if (!state.user) {\r\n            setError('Debes iniciar sesi├│n para responder');\r\n            return null;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await forumReplies.addReply(threadId, {\r\n                content,\r\n                authorId: state.user.uid,\r\n                authorName: state.user.name,\r\n                authorUsername: state.user.username,\r\n                authorAvatar: state.user.photoURL || state.user.avatar,\r\n                authorRole: state.user.role,\r\n                parentId\r\n            });\r\n            return result;\r\n        } catch (err) {\r\n            console.error('Error adding reply:', err);\r\n            setError('Error al agregar la respuesta');\r\n            return null;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [state.user]);\r\n\r\n    return { addReply, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para acciones sobre respuestas (editar, eliminar).\r\n */\r\nexport function useReplyActions() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const update = useCallback(async (\r\n        threadId: string,\r\n        replyId: string,\r\n        content: string\r\n    ): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            await forumReplies.updateReply(threadId, replyId, content);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error updating reply:', err);\r\n            setError('Error al actualizar la respuesta');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const remove = useCallback(async (\r\n        threadId: string,\r\n        replyId: string\r\n    ): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            await forumReplies.deleteReply(threadId, replyId);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error deleting reply:', err);\r\n            setError('Error al eliminar la respuesta');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    return { update, remove, loading, error };\r\n}\r\n\r\n// ============================================\r\n// LIKES HOOKS\r\n// ============================================\r\n\r\n/**\r\n * Hook para manejar likes en hilos.\r\n */\r\nexport function useThreadLike(threadId: string | undefined, userId?: string) {\r\n    const [liked, setLiked] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Check initial like status\r\n    useEffect(() => {\r\n        if (!threadId || !userId) return;\r\n\r\n        forumService.getLikeStatus(threadId, userId)\r\n            .then(setLiked)\r\n            .catch(console.error);\r\n    }, [threadId, userId]);\r\n\r\n    const toggleLike = useCallback(async (): Promise<boolean> => {\r\n        if (!threadId || !userId) return liked;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const newStatus = await forumService.toggleLike(threadId, userId);\r\n            setLiked(newStatus);\r\n            return newStatus;\r\n        } catch (err) {\r\n            console.error('Error toggling like:', err);\r\n            return liked;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [threadId, userId, liked]);\r\n\r\n    return { liked, toggleLike, loading };\r\n}\r\n\r\n/**\r\n * Hook para manejar likes en respuestas.\r\n */\r\nexport function useReplyLike(\r\n    threadId: string | undefined,\r\n    replyId: string | undefined,\r\n    userId?: string\r\n) {\r\n    const [liked, setLiked] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Check initial like status\r\n    useEffect(() => {\r\n        if (!threadId || !replyId || !userId) return;\r\n\r\n        forumReplies.getReplyLikeStatus(threadId, replyId, userId)\r\n            .then(setLiked)\r\n            .catch(console.error);\r\n    }, [threadId, replyId, userId]);\r\n\r\n    const toggleLike = useCallback(async (): Promise<boolean> => {\r\n        if (!threadId || !replyId || !userId) return liked;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const newStatus = await forumReplies.toggleReplyLike(threadId, replyId, userId);\r\n            setLiked(newStatus);\r\n            return newStatus;\r\n        } catch (err) {\r\n            console.error('Error toggling reply like:', err);\r\n            return liked;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [threadId, replyId, userId, liked]);\r\n\r\n    return { liked, toggleLike, loading };\r\n}\r\n\r\n// ============================================\r\n// MODERATION HOOKS\r\n// ============================================\r\n\r\n/**\r\n * Hook para acciones de moderaci├│n.\r\n */\r\nexport function useThreadModeration() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const pin = useCallback(async (threadId: string, isPinned: boolean): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await forumModeration.pinThread(threadId, isPinned);\r\n            return true;\r\n        } catch (err) {\r\n            setError('Error al fijar el hilo');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const close = useCallback(async (threadId: string, isClosed: boolean): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await forumModeration.closeThread(threadId, isClosed);\r\n            return true;\r\n        } catch (err) {\r\n            setError('Error al cerrar el hilo');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const markResolved = useCallback(async (threadId: string, isResolved: boolean): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await forumModeration.markResolved(threadId, isResolved);\r\n            return true;\r\n        } catch (err) {\r\n            setError('Error al marcar como resuelto');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const markBestAnswer = useCallback(async (\r\n        threadId: string,\r\n        replyId: string,\r\n        isBest: boolean\r\n    ): Promise<boolean> => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await forumReplies.toggleBestAnswer(threadId, replyId, isBest);\r\n            return true;\r\n        } catch (err) {\r\n            setError('Error al marcar la mejor respuesta');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    return { pin, close, markResolved, markBestAnswer, loading, error };\r\n}\r\n\r\n/**\r\n * Hook para reportar contenido.\r\n */\r\nexport function useReportContent() {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState(false);\r\n    const { state } = useAppStore();\r\n\r\n    const report = useCallback(async (\r\n        targetType: 'thread' | 'reply',\r\n        targetId: string,\r\n        threadId: string,\r\n        reason: 'spam' | 'offensive' | 'off-topic' | 'harassment' | 'other',\r\n        description?: string\r\n    ): Promise<boolean> => {\r\n        if (!state.user) {\r\n            setError('Debes iniciar sesi├│n para reportar');\r\n            return false;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n        setSuccess(false);\r\n\r\n        try {\r\n            // Check if already reported\r\n            const alreadyReported = await forumModeration.hasUserReported(\r\n                targetType,\r\n                targetId,\r\n                state.user.uid\r\n            );\r\n\r\n            if (alreadyReported) {\r\n                setError('Ya has reportado este contenido');\r\n                return false;\r\n            }\r\n\r\n            await forumModeration.reportContent(\r\n                targetType,\r\n                targetId,\r\n                threadId,\r\n                state.user.uid,\r\n                state.user.name,\r\n                reason,\r\n                description\r\n            );\r\n\r\n            setSuccess(true);\r\n            return true;\r\n        } catch (err) {\r\n            console.error('Error reporting content:', err);\r\n            setError('Error al reportar el contenido');\r\n            return false;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [state.user]);\r\n\r\n    return { report, loading, error, success };\r\n}\r\n\r\n// ============================================\r\n// STATS HOOKS\r\n// ============================================\r\n\r\n/**\r\n * Hook para obtener estad├¡sticas del foro.\r\n */\r\nexport function useForumStats() {\r\n    const [stats, setStats] = useState({\r\n        totalThreads: 0,\r\n        totalReplies: 0,\r\n        totalUsers: 0,\r\n        activeToday: 0\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        forumModeration.getForumStats()\r\n            .then(setStats)\r\n            .catch(console.error)\r\n            .finally(() => setLoading(false));\r\n    }, []);\r\n\r\n    return { stats, loading };\r\n}\r\n\r\n/**\r\n * Hook para obtener hilos recientes (para widgets/sidebar).\r\n */\r\nexport function useRecentThreads(limitCount = 5) {\r\n    const [threads, setThreads] = useState<ForumThread[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        forumService.getRecentThreads(limitCount)\r\n            .then(setThreads)\r\n            .catch(console.error)\r\n            .finally(() => setLoading(false));\r\n    }, [limitCount]);\r\n\r\n    return { threads, loading };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useProfile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useProjectHooks.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[994,997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[994,997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2594,2597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2594,2597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4118,4121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4118,4121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4884,4887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4884,4887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5702,5705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5702,5705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":197,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6245,6248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6245,6248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6786,6789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6786,6789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":243,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7750,7753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7750,7753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":264,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8376,8379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8376,8379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Project Hooks\r\n * Domain-specific hooks for project-related operations (Portfolio)\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAppStore } from './useAppStore';\r\nimport { PortfolioItem } from '../types';\r\nimport { projectsService } from '../services/modules/projects';\r\n\r\n// --- Hook for Fetching Single Project (by slug or ID) ---\r\nexport const useProject = (slugOrId: string | undefined) => {\r\n    const [project, setProject] = useState<PortfolioItem | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!slugOrId) return;\r\n\r\n        const fetchProject = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Uses getProjectBySlug which tries slug first, then falls back to ID\r\n                const data = await projectsService.getProjectBySlug(slugOrId);\r\n                setProject(data);\r\n            } catch (err: any) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProject();\r\n    }, [slugOrId]);\r\n\r\n    return { project, loading, error };\r\n};\r\n\r\n// --- Hook for Creating Project ---\r\nexport const useCreateProject = () => {\r\n    const { state } = useAppStore();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    const create = async (\r\n        projectData: Partial<PortfolioItem>,\r\n        files: { cover?: File | null; gallery?: File[] },\r\n        uploadOptions: {\r\n            maxSizeMB: number;\r\n            galleryMetadata?: { type: 'image' | 'youtube'; caption: string; fileIndex?: number; url?: string }[]\r\n        }\r\n    ): Promise<{ id: string; slug: string }> => {\r\n        if (!state.user?.id) {\r\n            throw new Error(\"Debes iniciar sesi├│n para crear un proyecto.\");\r\n        }\r\n\r\n        setLoading(true);\r\n        setProgress(0);\r\n        setError(null);\r\n        try {\r\n            const finalFiles = {\r\n                cover: files.cover || undefined,\r\n                gallery: files.gallery\r\n            };\r\n\r\n            const result = await projectsService.createProject(\r\n                state.user.id,\r\n                projectData,\r\n                finalFiles,\r\n                {\r\n                    ...uploadOptions,\r\n                    onProgress: setProgress\r\n                }\r\n            );\r\n            return result; // { id, slug }\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { create, loading, error, progress };\r\n};\r\n\r\n// --- Hook for Updating Project ---\r\nexport const useUpdateProject = () => {\r\n    const { state } = useAppStore();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    const update = async (\r\n        projectId: string,\r\n        projectData: Partial<PortfolioItem>,\r\n        files: { cover?: File | null; gallery?: File[] },\r\n        uploadOptions: {\r\n            maxSizeMB: number;\r\n            galleryMetadata?: { type: 'image' | 'youtube'; caption: string; fileIndex?: number; url?: string }[]\r\n        }\r\n    ) => {\r\n        if (!state.user?.id) {\r\n            throw new Error(\"Debes iniciar sesi├│n para editar un proyecto.\");\r\n        }\r\n\r\n        setLoading(true);\r\n        setProgress(0);\r\n        setError(null);\r\n        try {\r\n            const finalFiles = {\r\n                cover: files.cover || undefined,\r\n                gallery: files.gallery\r\n            };\r\n\r\n            await projectsService.updateProject(\r\n                state.user.id,\r\n                projectId,\r\n                projectData,\r\n                finalFiles,\r\n                {\r\n                    ...uploadOptions,\r\n                    onProgress: setProgress\r\n                }\r\n            );\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { update, loading, error, progress };\r\n};\r\n\r\n// --- Hook for Deleting Project ---\r\nexport const useDeleteProject = () => {\r\n    const { state } = useAppStore();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const deleteProject = async (id: string) => {\r\n        if (!state.user?.id) {\r\n            throw new Error(\"Debes iniciar sesi├│n para eliminar un proyecto.\");\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await projectsService.deleteProject(state.user.id, id);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { deleteProject, loading, error };\r\n};\r\n\r\n// --- Hook for User Projects ---\r\nexport const useUserProjects = (userId: string | undefined, userName: string | undefined) => {\r\n    const [projects, setProjects] = useState<PortfolioItem[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!userId && !userName) return;\r\n\r\n        const fetchProjects = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await projectsService.getUserProjects(userId || '');\r\n                setProjects(data);\r\n            } catch (err: any) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProjects();\r\n    }, [userId, userName]);\r\n\r\n    const removeProject = (projectId: string) => {\r\n        setProjects(prev => prev.filter(p => p.id !== projectId));\r\n    };\r\n\r\n    return { projects, loading, error, removeProject };\r\n};\r\n\r\n// --- Hook for Project Comments ---\r\nexport const useProjectComments = (projectId: string | undefined) => {\r\n    const [comments, setComments] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!projectId) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const unsubscribe = projectsService.listenToComments(projectId, (newComments) => {\r\n                setComments(newComments);\r\n                setLoading(false);\r\n            });\r\n            return () => unsubscribe();\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            setLoading(false);\r\n        }\r\n    }, [projectId]);\r\n\r\n    return { comments, loading, error };\r\n};\r\n\r\n// --- Hook for Adding Project Comment ---\r\nexport const useAddProjectComment = () => {\r\n    const { state } = useAppStore();\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const add = async (projectId: string, text: string) => {\r\n        if (!state.user) {\r\n            throw new Error(\"Debes iniciar sesi├│n para comentar.\");\r\n        }\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await projectsService.addComment(projectId, {\r\n                authorId: state.user.id,\r\n                authorName: state.user.name,\r\n                authorUsername: state.user.username || '',\r\n                authorAvatar: state.user.avatar || '',\r\n                text,\r\n            });\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { add, loading, error };\r\n};\r\n\r\n// --- Hook for Deleting Project Comment ---\r\nexport const useDeleteProjectComment = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const remove = async (projectId: string, commentId: string) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            await projectsService.deleteComment(projectId, commentId);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return { remove, loading, error };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useSalesController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useUserHooks.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[430,433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[430,433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1113,1116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1113,1116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * User Hooks\r\n * Domain-specific hooks for user profile, follow, and admin operations\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAppStore } from './useAppStore';\r\nimport { api } from '../services/api';\r\nimport { usersService } from '../services/modules/users';\r\n\r\n// --- Hook for User Profile ---\r\nexport const useUserProfile = (userId: string | null) => {\r\n    const [profile, setProfile] = useState<any>(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n\r\n        const fetchProfile = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await usersService.getUserProfile(userId);\r\n                setProfile(data);\r\n            } catch (error) {\r\n                console.error(error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProfile();\r\n    }, [userId]);\r\n\r\n    return { profile, loading };\r\n};\r\n\r\n// --- Hook for Admin: All Users ---\r\nexport const useAllUsers = () => {\r\n    const [users, setUsers] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await api.getAllUsers();\r\n                setUsers(data);\r\n            } catch (error) {\r\n                console.error(error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    return { users, loading };\r\n};\r\n\r\n// --- Hook for Follow/Unfollow ---\r\nexport const useFollow = (targetUserId: string, currentUserId: string | undefined) => {\r\n    const { actions } = useAppStore();\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [followerCount, setFollowerCount] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Initial check and fetch count\r\n    const init = async () => {\r\n        if (!targetUserId) return;\r\n        setLoading(true);\r\n        try {\r\n            // Check if following\r\n            if (currentUserId) {\r\n                const following = await usersService.isFollowing(targetUserId, currentUserId);\r\n                setIsFollowing(following);\r\n            }\r\n\r\n            // Fetch follower count\r\n            const followers = await usersService.getFollowers(targetUserId);\r\n            setFollowerCount(followers.length);\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, [targetUserId, currentUserId]);\r\n\r\n    const toggleFollow = async () => {\r\n        if (!currentUserId || !targetUserId) return;\r\n\r\n        // Optimistic update: Store previous state for rollback\r\n        const wasFollowing = isFollowing;\r\n        const offset = wasFollowing ? -1 : 1;\r\n\r\n        // Update UI immediately (Optimistic)\r\n        setIsFollowing(!wasFollowing);\r\n        setFollowerCount(prev => Math.max(0, prev + offset));\r\n\r\n        try {\r\n            if (wasFollowing) {\r\n                await usersService.unfollowUser(targetUserId, currentUserId);\r\n            } else {\r\n                await usersService.followUser(targetUserId, currentUserId);\r\n            }\r\n            // Trigger global update for sidebar\r\n            actions.triggerFollowUpdate();\r\n        } catch (error) {\r\n            console.error(\"Error toggling follow:\", error);\r\n            // Revert state on error\r\n            setIsFollowing(wasFollowing);\r\n            setFollowerCount(prev => Math.max(0, prev - offset));\r\n        }\r\n    };\r\n\r\n    return { isFollowing, loading, toggleFollow, setFollowerCount, followerCount };\r\n};\r\n\r\n// Backward compatibility alias (deprecated)\r\nexport const useSubscription = useFollow;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\hooks\\useUserProfileData.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[705,708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[705,708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4118,4121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4118,4121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4146,4149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4146,4149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4709,4712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4709,4712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/hooks/useUserProfileData.ts\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAppStore } from './useAppStore';\r\nimport { usersService } from '../services/modules/users';\r\nimport { api } from '../services/api';\r\n\r\nexport function useUserProfileData(\r\n    author?: { name: string; avatar?: string; id?: string; role?: string; location?: string } | null,\r\n    authorName?: string,\r\n    options: { preventRedirect?: boolean } = {}\r\n) {\r\n    const { state } = useAppStore();\r\n    const { username } = useParams<{ username: string }>();\r\n    const navigate = useNavigate();\r\n    const [fetchedUser, setFetchedUser] = useState<any>(null);\r\n\r\n    const isOwnProfile = useMemo(() => {\r\n        // 1. If currently viewing /profile (no args) or /user/me\r\n        if (!author && !authorName && (!username || username === 'me')) return true;\r\n\r\n        // 2. If logged in, compare with current user\r\n        if (state.user) {\r\n            const currentName = state.user.name;\r\n            const currentId = state.user.id;\r\n            const currentUsername = state.user.username;\r\n\r\n            // Check ID match (if author prop has ID)\r\n            if (author?.id && author.id === currentId) return true;\r\n\r\n            // Check Username match\r\n            if (username && currentUsername && username.toLowerCase() === currentUsername.toLowerCase()) return true;\r\n\r\n            // Check Name match (author prop, authorName prop, or URL param)\r\n            const targetName = author?.name || authorName || (username ? decodeURIComponent(username) : '');\r\n            if (targetName === currentName) return true;\r\n        }\r\n\r\n        return false;\r\n    }, [state.user, author, authorName, username]);\r\n\r\n    useEffect(() => {\r\n        if (isOwnProfile && state.user?.username && !options.preventRedirect) {\r\n            // If current 'username' param is missing OR different from actual username\r\n            if (username !== state.user.username) {\r\n                // Avoid redirect loop if they are equivalent\r\n                navigate(`/user/${state.user.username}`, { replace: true });\r\n            }\r\n        }\r\n    }, [isOwnProfile, state.user?.username, username, navigate]);\r\n\r\n    useEffect(() => {\r\n        let unsubscribe: (() => void) | undefined;\r\n\r\n        const setupSubscription = async () => {\r\n            // 0. If Own Profile, listen by ID from state\r\n            if (isOwnProfile && state.user?.id) {\r\n                unsubscribe = usersService.listenToUserProfile(state.user.id, (user) => {\r\n                    if (user) setFetchedUser(user);\r\n                });\r\n                return;\r\n            }\r\n\r\n            // 1. Try by ID (if author prop allows)\r\n            if (author?.id && author.id !== 'unknown') {\r\n                unsubscribe = usersService.listenToUserProfile(author.id, (user) => {\r\n                    if (user) setFetchedUser(user);\r\n                });\r\n                return;\r\n            }\r\n\r\n            // 2. Try by Username\r\n            if (username) {\r\n                unsubscribe = usersService.listenToUserProfileByUsername(username, (user) => {\r\n                    if (user) {\r\n                        setFetchedUser(user);\r\n                    } else {\r\n                        // Fallback: Try by Name (for legacy links or name-based navigation)\r\n                        const decoded = decodeURIComponent(username);\r\n                        usersService.getUserProfileByName(decoded).then(userByName => {\r\n                            if (userByName) setFetchedUser(userByName);\r\n                            else setFetchedUser(null);\r\n                        });\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n\r\n            // 3. Fallback: Try by Name (one-time fetch)\r\n            const targetName = author?.name || authorName || (username ? decodeURIComponent(username) : '');\r\n            if (targetName && targetName !== 'Unknown User') {\r\n                const cleanName = typeof targetName === 'object'\r\n                    ? (targetName as any).name || (targetName as any).displayName || ''\r\n                    : String(targetName);\r\n\r\n                if (cleanName) {\r\n                    const user = await api.getUserProfileByName(cleanName);\r\n                    if (user) setFetchedUser(user);\r\n                }\r\n            }\r\n        };\r\n\r\n        setupSubscription();\r\n\r\n        return () => {\r\n            if (unsubscribe) unsubscribe();\r\n        };\r\n    }, [author?.id, author?.name, authorName, isOwnProfile, username, state.user?.id]);\r\n\r\n    // Helper to check if a name is valid/useful\r\n    const isValidName = (n: any) => {\r\n        if (!n) return false;\r\n        const s = String(n).trim();\r\n        if (s === 'Unknown User' || s === 'unknown user' || s === 'Unknown' || s === '[object Object]') return false;\r\n        if (s.includes('Unknown User')) return false; // Catch \"Unknown User (Mock)\" etc\r\n        return true;\r\n    };\r\n\r\n    const getDisplayName = () => {\r\n        // 1. Prioritize author passed prop if it's valid (Visual Consistency)\r\n        if (author?.name && isValidName(author.name)) return author.name;\r\n\r\n        // 2. Try fetched user name (if author prop wasn't valid)\r\n        if (fetchedUser?.name && isValidName(fetchedUser.name)) return fetchedUser.name;\r\n\r\n        // 3. Try other props\r\n        if (authorName && isValidName(authorName)) return authorName;\r\n        if (username && isValidName(username)) return username;\r\n\r\n        return 'Unknown User';\r\n    };\r\n\r\n    const finalName = getDisplayName();\r\n\r\n    // Standardized user profile object\r\n    const displayUser = isOwnProfile ? (state.user || {\r\n        // Minimal default for new users (avoiding 'Digital Artist' default if not set)\r\n        name: 'Usuario Nuevo',\r\n        id: 'new-user',\r\n        avatar: 'https://ui-avatars.com/api/?name=U&background=random',\r\n        role: undefined, // Let UI handle empty state\r\n        location: undefined,\r\n        email: '',\r\n        createdAt: new Date().toISOString(),\r\n        stats: fetchedUser?.stats || state.user?.stats\r\n    }) : {\r\n        name: finalName,\r\n        id: fetchedUser?.id || author?.id || 'unknown',\r\n        avatar: fetchedUser?.avatar || author?.avatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(finalName)}&background=random&size=512`,\r\n        // Prioritize explicit role, fallback to generalized fields, but NO static string default\r\n        role: fetchedUser?.role || author?.role,\r\n        location: fetchedUser?.location || author?.location,\r\n        bio: fetchedUser?.bio,\r\n        createdAt: fetchedUser?.createdAt,\r\n        skills: fetchedUser?.skills,\r\n        experience: fetchedUser?.experience,\r\n        education: fetchedUser?.education,\r\n        socialLinks: fetchedUser?.socialLinks,\r\n        username: fetchedUser?.username,\r\n        coverImage: fetchedUser?.coverImage,\r\n        stats: fetchedUser?.stats,\r\n        availableForWork: fetchedUser?.availableForWork\r\n    };\r\n\r\n    return {\r\n        isOwnProfile,\r\n        displayUser,\r\n        fetchedUser,\r\n        finalName\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\layouts\\AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\layouts\\MainLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MobileTabBar' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\r\nimport { Outlet, useNavigate, useLocation } from 'react-router-dom';\r\nimport { PrimarySidebar, SecondarySidebar } from '../components/layout/Navigation';\r\nimport { Header } from '../components/layout/Header';\r\nimport { Footer } from '../components/layout/Footer';\r\nimport { MobileTabBar } from '../components/layout/MobileTabBar';\r\nimport { SaveToCollectionModal } from '../components/modals/SaveToCollectionModal';\r\nimport { ShareModal } from '../components/modals/ShareModal';\r\nimport { CheckCircle, AlertCircle, Info } from 'lucide-react';\r\nimport { useAppStore } from '../hooks/useAppStore';\r\nimport { OnboardingModal } from '../components/modals/OnboardingModal';\r\n\r\nexport const MainLayout: React.FC = () => {\r\n    const { state, actions } = useAppStore();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const mainScrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Sync State with URL on mount and change\r\n    useEffect(() => {\r\n        // Scroll to top on route change\r\n        if (mainScrollRef.current) {\r\n            mainScrollRef.current.scrollTo(0, 0);\r\n        }\r\n\r\n        const path = location.pathname;\r\n        if (path === '/') {\r\n            if (state.activeModule !== 'home') actions.handleModuleSelect('home');\r\n        } else {\r\n            // Extract the first segment: /portfolio/123 -> portfolio\r\n            const moduleName = path.split('/')[1];\r\n            // Only update if different and valid module\r\n            if (moduleName && state.activeModule !== moduleName) {\r\n                // We might want to validate against known modules, but strict checking isn't crucial for highlight only\r\n                // Just ensuring we don't overwrite if it's a \"detail\" view that keeps the parent module active\r\n                actions.handleModuleSelect(moduleName);\r\n            }\r\n        }\r\n    }, [location.pathname]);\r\n\r\n    // Fetch notifications on mount/auth (Real-time)\r\n    useEffect(() => {\r\n        if (state.user) {\r\n            actions.subscribeToNotifications(state.user.id);\r\n        } else {\r\n            actions.cleanupNotifications();\r\n        }\r\n\r\n        return () => {\r\n            actions.cleanupNotifications();\r\n        };\r\n    }, [state.user?.id]);\r\n\r\n    const isLearningMode = state.activeModule === 'learning';\r\n    const selectionColor = state.contentMode === 'dev' ? 'selection:bg-blue-500/30' : 'selection:bg-amber-500/30';\r\n\r\n    // Navigation Handler to sync State + Router\r\n    const handleModuleNavigation = (moduleId: string) => {\r\n        actions.handleModuleSelect(moduleId);\r\n\r\n        // Map module IDs to routes\r\n        if (moduleId === 'home') navigate('/'); // Home is root\r\n        else if (moduleId === 'learning') navigate('/education'); // Or keep state only? But likely /learning route exists? router says /learning \r\n        // Router says: path: '/learning/:courseId?'\r\n        else navigate(`/${moduleId}`);\r\n    };\r\n\r\n    // Additional handler for Logo\r\n    const handleLogoClick = () => {\r\n        actions.handleModuleSelect('home');\r\n        navigate('/');\r\n    };\r\n\r\n    // Global Search Handler\r\n    const handleGlobalSearch = (query: string) => {\r\n        actions.handleSearch(query);\r\n        navigate(`/search?q=${encodeURIComponent(query)}`);\r\n    };\r\n\r\n    // Handler for creating\r\n    // If Create Actions need navigation, handle here, but they usually open Modals or change local state (createMode)\r\n    // The Views handle createMode.\r\n\r\n    return (\r\n        <div className={`flex w-full h-screen overflow-hidden bg-slate-50 dark:bg-[#0d0d0f] text-slate-600 dark:text-slate-300 font-sans ${selectionColor} transition-colors duration-500 antialiased`}>\r\n\r\n            {/* Enhanced Ambient Background - Hidden in learning mode for focus */}\r\n            {!isLearningMode && (\r\n                <div className=\"fixed inset-0 z-0 pointer-events-none transition-opacity duration-1000 opacity-60 dark:opacity-100\">\r\n                    <div className={`absolute top-[-25%] left-[-15%] w-[60%] h-[60%] rounded-full ${state.contentMode === 'dev' ? 'bg-blue-600/10' : 'bg-blue-400/10'} dark:bg-[#0f172a]/40 blur-[150px] mix-blend-screen animate-pulse duration-[8000ms]`}></div>\r\n                    <div className={`absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full ${state.contentMode === 'dev' ? 'bg-emerald-500/10' : 'bg-amber-500/10'} dark:bg-[#451a03]/30 blur-[150px] mix-blend-screen`}></div>\r\n                    <div className={`absolute top-[30%] right-[20%] w-[40%] h-[40%] rounded-full ${state.contentMode === 'dev' ? 'bg-cyan-500/10' : 'bg-purple-500/10'} dark:bg-[#2e1065]/30 blur-[150px] mix-blend-screen animate-pulse duration-[12000ms]`}></div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Hide Primary Sidebar in Learning Mode */}\r\n            {!isLearningMode && (\r\n                <PrimarySidebar\r\n                    activeModule={state.activeModule}\r\n                    onModuleSelect={handleModuleNavigation}\r\n                    contentMode={state.contentMode}\r\n                    onToggleContentMode={actions.toggleContentMode}\r\n                />\r\n            )}\r\n\r\n            <SecondarySidebar\r\n                isOpen={state.isSidebarOpen}\r\n                onClose={() => actions.setIsSidebarOpen(false)}\r\n                activeCategory={state.activeCategory}\r\n                onCategorySelect={actions.setActiveCategory}\r\n                onSubscriptionSelect={actions.handleSubscriptionSelect}\r\n                onProClick={actions.handleProClick}\r\n                activeModule={state.activeModule}\r\n                onModuleSelect={handleModuleNavigation}\r\n                hiddenOnDesktop={isLearningMode || ['landing', 'home', 'settings', 'pro', 'search', 'collections', 'cart', 'people', 'community', 'events', 'profile'].includes(state.activeModule) || state.activeModule.startsWith('earnings') || state.activeModule.startsWith('info-') || !!state.viewingAuthor}\r\n                contentMode={state.contentMode}\r\n                onToggleContentMode={actions.toggleContentMode}\r\n            />\r\n\r\n            <main className={`relative flex min-w-0 flex-1 flex-col overflow-hidden z-10 ${isLearningMode ? 'bg-[#18181b]' : ''}`}>\r\n                {!isLearningMode && (\r\n                    <Header\r\n                        onMenuClick={() => actions.setIsSidebarOpen(true)}\r\n                        activeCategory={state.activeCategory}\r\n                        onCreateAction={actions.handleCreateAction}\r\n                        onLogoClick={handleLogoClick}\r\n                        onSearch={handleGlobalSearch}\r\n                        cartCount={state.cartItems.length}\r\n                        onCartClick={() => handleModuleNavigation('cart')}\r\n                        notifications={state.notifications}\r\n                        onMarkRead={actions.markNotificationRead}\r\n                        onMarkAllRead={actions.markAllNotificationsRead}\r\n                        contentMode={state.contentMode}\r\n                        onLoginClick={() => navigate('/auth')}\r\n                        onRegisterClick={() => navigate('/auth')}\r\n                    />\r\n                )}\r\n\r\n                {/* Adjusted padding bottom for mobile tab bar, remove padding in learning mode */}\r\n                <div ref={mainScrollRef} className={`custom-scrollbar flex-1 overflow-y-auto ${isLearningMode ? 'pt-0' : 'pt-20'} pb-32 md:pb-0`}>\r\n                    <div className=\"flex flex-col min-h-full\">\r\n                        <div className=\"flex-1\">\r\n                            {/* REPLACED VideoContent with Outlet */}\r\n                            <Outlet />\r\n                        </div>\r\n                        {!isLearningMode && (\r\n                            <Footer onNavigate={handleModuleNavigation} />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n\r\n            {/* Mobile Tab Bar - Disabled\r\n            {!isLearningMode && (\r\n                <MobileTabBar\r\n                    activeModule={state.activeModule}\r\n                    onNavigate={handleModuleNavigation}\r\n                    onCreateAction={actions.handleCreateAction}\r\n                />\r\n            )}\r\n            */}\r\n\r\n            <SaveToCollectionModal\r\n                isOpen={state.isSaveModalOpen}\r\n                onClose={actions.closeSaveModal}\r\n                collections={state.collections}\r\n                onSave={actions.saveToCollection}\r\n                onCreate={actions.createCollection}\r\n                itemImage={state.itemToSave?.image}\r\n            />\r\n\r\n            <ShareModal\r\n                isOpen={state.isShareModalOpen}\r\n                onClose={actions.closeShareModal}\r\n            />\r\n\r\n            <OnboardingModal />\r\n\r\n            {/* Enhanced Toast Notification */}\r\n            {state.toast && (\r\n                <div className=\"fixed bottom-24 md:bottom-8 left-1/2 -translate-x-1/2 z-[110] animate-enter-up w-auto max-w-[90%] text-center\">\r\n                    <div className={`\r\n            px-6 py-3 rounded-full shadow-2xl flex items-center justify-center gap-3 font-medium backdrop-blur-md border\r\n            ${state.toast.type === 'success'\r\n                            ? 'bg-slate-900/90 dark:bg-white/90 text-white dark:text-slate-900 border-green-500/30'\r\n                            : state.toast.type === 'error'\r\n                                ? 'bg-red-500/90 text-white border-red-400/30'\r\n                                : 'bg-blue-500/90 text-white border-blue-400/30'\r\n                        }\r\n          `}>\r\n                        {state.toast.type === 'success' && <CheckCircle className=\"h-5 w-5 text-green-400 dark:text-green-600 shrink-0\" />}\r\n                        {state.toast.type === 'error' && <AlertCircle className=\"h-5 w-5 text-white shrink-0\" />}\r\n                        {state.toast.type === 'info' && <Info className=\"h-5 w-5 text-white shrink-0\" />}\r\n                        {state.toast.message}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\router.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ForumComingSoon' is defined but never used. Allowed unused vars must match /^_/u.","line":46,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { createBrowserRouter } from 'react-router-dom';\r\nimport { MainLayout } from './layouts/MainLayout';\r\nimport {\r\n  SuccessView,\r\n  SettingsView,\r\n  ProUpgradeView,\r\n  InfoView,\r\n  ComingSoonView,\r\n  AdminDashboardView,\r\n  // Wrappers\r\n  SearchResultsWrapper,\r\n  PortfolioWrapper,\r\n  PortfolioPostWrapper,\r\n  HomeWrapper,\r\n  AboutWrapper,\r\n  UserProfileWrapper,\r\n  BlogPostWrapper,\r\n  CollectionsWrapper,\r\n  CollectionDetailWrapper,\r\n  CreateWrapper,\r\n  BlogWrapper,\r\n  ForumWrapper,\r\n  ForumCategoryWrapper,\r\n  ThreadWrapper,\r\n  CreateThreadWrapper,\r\n  EditThreadWrapper,\r\n  Suspended,\r\n  SuspendedView\r\n} from './router/RouteWrappers';\r\n\r\nimport { lazyImport } from './utils/lazyImport';\r\n\r\n// --- Admin Views ---\r\nconst AdminLayoutView = lazyImport(() => import('./layouts/AdminLayout').then(module => ({ default: module.AdminLayout })));\r\n\r\n// Lazy Load Create Views\r\nconst CreateArticleView = lazyImport(() => import('./views/blog/CreateArticleView').then(module => ({ default: module.CreateArticleView })));\r\nconst CreatePortfolioView = lazyImport(() => import('./views/portfolio/CreatePortfolioView').then(module => ({ default: module.CreatePortfolioView })));\r\n\r\n// 404 View\r\nconst NotFoundView = lazyImport(() => import('./views/general/NotFoundView').then(module => ({ default: module.NotFoundView })));\r\n\r\n// Service Coming Soon Pages\r\nimport { ForumComingSoon, JobsComingSoon, ProjectsComingSoon, ContestsComingSoon } from './views/general/ServicePages';\r\n\r\n// New Services Coming Soon\r\nconst CoursesView = lazyImport(() => import('./views/general/CoursesView').then(module => ({ default: module.CoursesView })));\r\nconst FreelanceView = lazyImport(() => import('./views/general/FreelanceView').then(module => ({ default: module.FreelanceView })));\r\n\r\n// Legal Pages\r\nconst TermsView = lazyImport(() => import('./views/legal/TermsView').then(module => ({ default: module.TermsView })));\r\nconst PrivacyView = lazyImport(() => import('./views/legal/PrivacyView').then(module => ({ default: module.PrivacyView })));\r\n\r\n// Blog Preview (n8n automation)\r\nconst PreviewPost = lazyImport(() => import('./views/blog/PreviewPost').then(module => ({ default: module.PreviewPost })));\r\n\r\nexport const router = createBrowserRouter([\r\n  {\r\n    path: '/auth',\r\n    element: <SuspendedView Component={lazyImport(() => import('./views/auth/AuthView').then(m => ({ default: m.AuthView })))} />\r\n  },\r\n  {\r\n    path: 'admin',\r\n    element: <Suspended><AdminLayoutView /></Suspended>,\r\n    children: [\r\n      { index: true, element: <Suspended><AdminDashboardView /></Suspended> },\r\n      { path: 'users', element: <Suspended><AdminDashboardView /></Suspended> },\r\n    ]\r\n  },\r\n  {\r\n    path: '/',\r\n    element: <MainLayout />,\r\n    children: [\r\n      // Home - Landing Page\r\n      { index: true, element: <HomeWrapper /> },\r\n\r\n      // Portfolio\r\n      { path: 'portfolio', element: <PortfolioWrapper /> },\r\n      { path: 'portfolio/categoria/:slug', element: <PortfolioWrapper /> },\r\n      { path: 'portfolio/:id', element: <PortfolioPostWrapper /> },\r\n      { path: 'create/portfolio', element: <CreateWrapper Component={CreatePortfolioView} /> },\r\n\r\n      // Blog\r\n      { path: 'blog', element: <BlogWrapper /> },\r\n      { path: 'blog/categoria/:slug', element: <BlogWrapper /> },\r\n      { path: 'blog/:id', element: <BlogPostWrapper /> },\r\n      { path: 'create/article', element: <CreateWrapper Component={CreateArticleView} /> },\r\n\r\n      // Blog Preview (n8n automation - token-secured)\r\n      { path: 'preview/:id', element: <SuspendedView Component={PreviewPost} /> },\r\n\r\n      // User Profile\r\n      { path: 'profile', element: <UserProfileWrapper /> },\r\n      { path: 'user/:username', element: <UserProfileWrapper /> },\r\n\r\n      // Personal & Utility\r\n      { path: 'success', element: <SuspendedView Component={SuccessView} /> },\r\n      { path: 'collections', element: <CollectionsWrapper /> },\r\n      { path: 'collections/:id', element: <CollectionDetailWrapper /> },\r\n      { path: 'settings', element: <SuspendedView Component={SettingsView} /> },\r\n      { path: 'pro', element: <Suspended><ProUpgradeView onBack={() => window.history.back()} /></Suspended> },\r\n\r\n      // Search\r\n      { path: 'search', element: <SearchResultsWrapper /> },\r\n\r\n      // Info Pages\r\n      { path: 'about', element: <AboutWrapper /> },\r\n      { path: 'info/:pageId', element: <Suspended><InfoView pageId=\"\" onBack={() => window.history.back()} /></Suspended> },\r\n\r\n      // Fallback\r\n      { path: 'info/help', element: <SuspendedView Component={ComingSoonView} /> },\r\n      { path: 'info/guides', element: <SuspendedView Component={ComingSoonView} /> },\r\n\r\n      // Forum\r\n      { path: 'forum', element: <ForumWrapper /> },\r\n      { path: 'forum/new', element: <CreateThreadWrapper /> },\r\n      { path: 'forum/edit/:id', element: <EditThreadWrapper /> },\r\n      { path: 'forum/categoria/:slug', element: <ForumCategoryWrapper /> },\r\n      { path: 'forum/:slug', element: <ThreadWrapper /> },\r\n\r\n      // Other Coming Soon Services\r\n      { path: 'jobs', element: <JobsComingSoon /> },\r\n      { path: 'projects', element: <ProjectsComingSoon /> },\r\n      { path: 'contests', element: <ContestsComingSoon /> },\r\n      { path: 'courses', element: <SuspendedView Component={CoursesView} /> },\r\n      { path: 'freelance', element: <SuspendedView Component={FreelanceView} /> },\r\n\r\n      // Legal Pages\r\n      { path: 'terms', element: <SuspendedView Component={TermsView} /> },\r\n      { path: 'privacy', element: <SuspendedView Component={PrivacyView} /> },\r\n\r\n      // 404 - Catch all unmatched routes\r\n      { path: '*', element: <SuspendedView Component={NotFoundView} /> }\r\n    ]\r\n  }\r\n]);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\router\\RouteWrappers.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4016,4019],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4016,4019],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":124,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5849,5852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5849,5852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'name' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":154,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":154,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":305,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10073,10076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10073,10076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":305,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10094,10097],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10094,10097],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { Suspense } from 'react';\r\nimport { useNavigate, useLocation, useParams, useSearchParams } from 'react-router-dom';\r\nimport { useAppStore } from '../hooks/useAppStore';\r\nimport { Loader } from '../components/common/Loader';\r\nimport { lazyImport } from '../utils/lazyImport';\r\n\r\n// Lazy Load Views - Only Portfolio, Blog, and User related\r\nconst HomeView = lazyImport(() => import('../views/general/HomeView').then(module => ({ default: module.HomeView })));\r\nconst PortfolioView = lazyImport(() => import('../views/portfolio/PortfolioView').then(module => ({ default: module.PortfolioView })));\r\nconst PortfolioPostView = lazyImport(() => import('../views/portfolio/PortfolioPostView').then(module => ({ default: module.PortfolioPostView })));\r\nconst BlogView = lazyImport(() => import('../views/blog/BlogView').then(module => ({ default: module.BlogView })));\r\nconst BlogPostView = lazyImport(() => import('../views/blog/BlogPostView').then(module => ({ default: module.BlogPostView })));\r\nconst UserProfileView = lazyImport(() => import('../views/user/UserProfileView').then(module => ({ default: module.UserProfileView })));\r\nconst SettingsView = lazyImport(() => import('../views/user/SettingsView').then(module => ({ default: module.SettingsView })));\r\nconst ProUpgradeView = lazyImport(() => import('../views/user/ProUpgradeView').then(module => ({ default: module.ProUpgradeView })));\r\nconst AboutView = lazyImport(() => import('../views/general/AboutView').then(module => ({ default: module.AboutView })));\r\nconst InfoView = lazyImport(() => import('../views/general/InfoView').then(module => ({ default: module.InfoView })));\r\nconst SearchResultsView = lazyImport(() => import('../views/general/SearchResultsView').then(module => ({ default: module.SearchResultsView })));\r\nconst ComingSoonView = lazyImport(() => import('../views/general/ComingSoonView'));\r\nconst SuccessView = lazyImport(() => import('../views/general/SuccessView').then(module => ({ default: module.SuccessView })));\r\nconst CollectionsView = lazyImport(() => import('../views/user/CollectionsView').then(module => ({ default: module.CollectionsView })));\r\nconst CollectionDetailView = lazyImport(() => import('../views/user/CollectionDetailView').then(module => ({ default: module.CollectionDetailView })));\r\n\r\n// Helper to wrap components in Suspense\r\nexport const Suspended = ({ children }: { children?: React.ReactNode }) => (\r\n  <Suspense fallback={<Loader />}>{children}</Suspense>\r\n);\r\n\r\n// Wrappers\r\nexport function SearchResultsWrapper() {\r\n  const [searchParams] = useSearchParams();\r\n  const query = searchParams.get('q') || '';\r\n  const navigate = useNavigate();\r\n\r\n  const handleItemSelect = (id: string, type: string) => {\r\n    if (type === 'portfolio') navigate(`/portfolio/${id}`);\r\n    if (type === 'blog') navigate(`/blog/${id}`);\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <SearchResultsView query={query} onItemSelect={handleItemSelect} />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport function PortfolioWrapper() {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleCreateClick = (path: string) => {\r\n    if (!state.user) {\r\n      actions.showToast('Debes iniciar sesi├│n para crear contenido', 'info');\r\n      navigate('/auth');\r\n      return;\r\n    }\r\n    navigate(path);\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <PortfolioView\r\n        activeCategory={state.activeCategory}\r\n        onItemSelect={(id) => navigate(`/portfolio/${id}`)}\r\n        onCreateClick={() => handleCreateClick('/create/portfolio')}\r\n        onSave={actions.openSaveModal}\r\n        contentMode={state.contentMode}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function PortfolioPostWrapper() {\r\n  const { actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Suspended>\r\n      <PortfolioPostView\r\n        onBack={() => window.history.back()}\r\n        onShare={actions.openShareModal}\r\n        onSave={actions.openSaveModal}\r\n        onAuthorClick={(user: any) => {\r\n          const name = user.username || user.name || user;\r\n          navigate(`/user/${encodeURIComponent(name)}`);\r\n        }}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function HomeWrapper() {\r\n  const { state } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleItemSelect = (id: string, type: string) => {\r\n    if (type === 'portfolio') navigate(`/portfolio/${id}`);\r\n    if (type === 'blog') navigate(`/blog/${id}`);\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <HomeView\r\n        onNavigateToModule={(mod) => navigate(mod === 'home' ? '/' : `/${mod}`)}\r\n        onItemSelect={handleItemSelect}\r\n        contentMode={state.contentMode}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function AboutWrapper() {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Suspended>\r\n      <AboutView onNavigate={(path) => navigate(path)} />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function UserProfileWrapper() {\r\n  const { actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const authorFromState = location.state?.author;\r\n\r\n  return (\r\n    <Suspended>\r\n      <UserProfileView\r\n        author={authorFromState}\r\n        onBack={() => window.history.back()}\r\n        onItemSelect={(id, type) => {\r\n          if (type === 'blog') navigate(`/blog/${id}`);\r\n          else if (type === 'portfolio') navigate(`/portfolio/${id}`);\r\n        }}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function BlogPostWrapper() {\r\n  const { actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Suspended>\r\n      <BlogPostView\r\n        onBack={() => window.history.back()}\r\n        onArticleSelect={(id) => navigate(`/blog/${id}`)}\r\n        onShare={actions.openShareModal}\r\n        onSave={actions.openSaveModal}\r\n        onAuthorClick={(author: any) => {\r\n          const name = typeof author === 'object' ? author.name : author;\r\n          const target = typeof author === 'object' ? (author.username || author.name) : author;\r\n          navigate(`/user/${encodeURIComponent(target)}`, { state: { author: typeof author === 'object' ? author : { name: author } } });\r\n        }}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function CollectionsWrapper() {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleCreateClick = () => {\r\n    if (!state.user) {\r\n      actions.showToast('Debes iniciar sesi├│n para crear colecciones', 'info');\r\n      navigate('/auth');\r\n      return;\r\n    }\r\n    actions.openSaveModal('', '', 'collection');\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <CollectionsView\r\n        onCreateClick={handleCreateClick}\r\n        onCollectionSelect={(id) => navigate(`/collections/${id}`)}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function CollectionDetailWrapper() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const { actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleItemSelect = (itemId: string, type: string = 'project') => {\r\n    if (type === 'article') {\r\n      navigate(`/blog/${itemId}`);\r\n    } else {\r\n      navigate(`/portfolio/${itemId}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <CollectionDetailView\r\n        collectionId={id || ''}\r\n        onBack={() => window.history.back()}\r\n        onItemSelect={handleItemSelect}\r\n        onShare={actions.openShareModal}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function CreateWrapper({ Component }: { Component: React.FC<{ onBack: () => void }> }) {\r\n  return (\r\n    <Suspended>\r\n      <Component onBack={() => window.history.back()} />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function BlogWrapper() {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const handleCreateClick = (path: string) => {\r\n    if (!state.user) {\r\n      actions.showToast('Debes iniciar sesi├│n para escribir un art├¡culo', 'info');\r\n      navigate('/auth');\r\n      return;\r\n    }\r\n    navigate(path);\r\n  };\r\n\r\n  return (\r\n    <Suspended>\r\n      <BlogView\r\n        activeCategory={state.activeCategory}\r\n        onArticleSelect={(id) => navigate(`/blog/${id}`)}\r\n        onCreateClick={() => handleCreateClick('/create/article')}\r\n        onSave={actions.openSaveModal}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\n// --- Forum ---\r\nconst ForumView = lazyImport(() => import('../views/forum/ForumView').then(module => ({ default: module.ForumView })));\r\nconst ThreadView = lazyImport(() => import('../views/forum/ThreadView').then(module => ({ default: module.ThreadView })));\r\nconst CreateThreadView = lazyImport(() => import('../views/forum/CreateThreadView').then(module => ({ default: module.CreateThreadView })));\r\nconst EditThreadView = lazyImport(() => import('../views/forum/EditThreadView').then(module => ({ default: module.EditThreadView })));\r\n\r\nexport function ForumWrapper() {\r\n  const navigate = useNavigate();\r\n  const { slug } = useParams<{ slug?: string }>();\r\n\r\n  return (\r\n    <Suspended>\r\n      <ForumView\r\n        activeCategory={slug}\r\n        onThreadSelect={(id) => navigate(`/forum/${id}`)}\r\n        onCreateClick={() => navigate('/forum/new')}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function ForumCategoryWrapper() {\r\n  const navigate = useNavigate();\r\n  const { slug } = useParams<{ slug: string }>();\r\n\r\n  return (\r\n    <Suspended>\r\n      <ForumView\r\n        activeCategory={slug}\r\n        onThreadSelect={(id) => navigate(`/forum/${id}`)}\r\n        onCreateClick={() => navigate('/forum/new')}\r\n      />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function ThreadWrapper() {\r\n  return (\r\n    <Suspended>\r\n      <ThreadView />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function CreateThreadWrapper() {\r\n  return (\r\n    <Suspended>\r\n      <CreateThreadView />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\nexport function EditThreadWrapper() {\r\n  return (\r\n    <Suspended>\r\n      <EditThreadView />\r\n    </Suspended>\r\n  );\r\n}\r\n\r\n// Simple wrapper for views that don't need prop injection but need Suspense\r\nexport const SuspendedView = ({ Component, ...props }: { Component: React.FC<any>, [key: string]: any }) => (\r\n  <Suspended><Component {...props} /></Suspended>\r\n);\r\n\r\n// --- Admin Views ---\r\nconst AdminDashboard = lazyImport(() => import('../views/admin/AdminDashboardView').then(module => ({ default: module.AdminDashboardView })));\r\n\r\n// Exports for direct use in router\r\nexport {\r\n  SuccessView,\r\n  SettingsView,\r\n  ProUpgradeView,\r\n  InfoView,\r\n  ComingSoonView,\r\n  AdminDashboard as AdminDashboardView\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\articles\\comments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\articles\\crud.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3647,3650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3647,3650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6430,6433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6430,6433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Operaciones CRUD de Art├¡culos\r\n * \r\n * M├│dulo que maneja las operaciones Create, Read, Update, Delete\r\n * para art├¡culos del blog almacenados en Firestore.\r\n * \r\n * @module services/articles/crud\r\n */\r\nimport {\r\n    collection,\r\n    query,\r\n    orderBy,\r\n    limit,\r\n    startAfter,\r\n    getDocs,\r\n    addDoc,\r\n    deleteDoc,\r\n    doc,\r\n    getDoc,\r\n    updateDoc,\r\n    where,\r\n    increment,\r\n    QueryDocumentSnapshot,\r\n    DocumentData,\r\n    documentId\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\nimport { ArticleItem, Notification } from '../../../types';\r\nimport { PaginatedResult, withTimeout, sanitizeData } from '../utils';\r\nimport { usersService } from '../users';\r\nimport { notificationsService } from '../notifications';\r\nimport { storageService } from '../storage';\r\nimport { generateUniqueSlug } from '../../../utils/slugUtils';\r\n\r\nexport const articlesCrud = {\r\n    /**\r\n     * Obtiene art├¡culos paginados.\r\n     * \r\n     * @param lastDoc - ├Ültimo documento de la p├ígina anterior (null para primera p├ígina)\r\n     * @param pageSize - Cantidad de art├¡culos por p├ígina\r\n     * @param sortField - Campo para ordenar ('date' o 'likes')\r\n     * @param sortDirection - Direcci├│n del ordenamiento\r\n     * @returns Resultado paginado con datos, cursor y flag hasMore\r\n     */\r\n    getArticles: async (lastDoc: QueryDocumentSnapshot<DocumentData> | null = null, pageSize = 10, sortField: 'date' | 'likes' = 'date', sortDirection: 'desc' | 'asc' = 'desc'): Promise<PaginatedResult<ArticleItem>> => {\r\n        try {\r\n            // Only fetch published articles for public listings\r\n            let q = query(\r\n                collection(db, 'articles'),\r\n                where('status', '==', 'published'),\r\n                orderBy(sortField, sortDirection),\r\n                limit(pageSize)\r\n            );\r\n\r\n            if (lastDoc) {\r\n                q = query(\r\n                    collection(db, 'articles'),\r\n                    where('status', '==', 'published'),\r\n                    orderBy(sortField, sortDirection),\r\n                    startAfter(lastDoc),\r\n                    limit(pageSize)\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ArticleItem));\r\n\r\n            return {\r\n                data,\r\n                lastDoc: snapshot.docs[snapshot.docs.length - 1] || null,\r\n                hasMore: snapshot.docs.length === pageSize\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Error fetching articles:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Crea un nuevo art├¡culo.\r\n     * \r\n     * Sube la imagen de portada (si existe) y notifica a los seguidores del autor.\r\n     * \r\n     * @param articleData - Datos del art├¡culo\r\n     * @param imageFile - Archivo de imagen de portada (opcional)\r\n     * @returns ID del art├¡culo creado\r\n     */\r\n    createArticle: async (articleData: Omit<ArticleItem, 'id'>, imageFile?: File): Promise<{ id: string; slug: string }> => {\r\n        try {\r\n            let imageUrl = articleData.image;\r\n\r\n            if (imageFile) {\r\n                try {\r\n                    const imagePath = `articles/${Date.now()}_${imageFile.name}`;\r\n                    imageUrl = await withTimeout(\r\n                        storageService.uploadImage(imageFile, imagePath, { maxSizeMB: 5, compress: true }),\r\n                        15000,\r\n                        \"Image upload timed out (15s). Please check your connection.\"\r\n                    );\r\n                } catch (uploadError: any) {\r\n                    console.error(\"Error uploading image:\", uploadError);\r\n                }\r\n            }\r\n\r\n            const finalData = sanitizeData({\r\n                ...articleData,\r\n                slug: generateUniqueSlug(articleData.title || 'articulo'),\r\n                image: imageUrl,\r\n                date: new Date().toISOString(),\r\n                likes: 0,\r\n                comments: 0,\r\n                views: 0,\r\n                status: articleData.status || 'published',\r\n                scheduledAt: articleData.scheduledAt || null\r\n            });\r\n\r\n            const docRef = await withTimeout(\r\n                addDoc(collection(db, 'articles'), finalData),\r\n                7000,\r\n                \"Saving article timed out (7s). Please check your connection.\"\r\n            );\r\n\r\n            // Notify Followers\r\n            try {\r\n                if (articleData.authorId) {\r\n                    const followers = await usersService.getFollowers(articleData.authorId);\r\n\r\n                    const notification: Omit<Notification, 'id'> = {\r\n                        type: 'system',\r\n                        user: articleData.author,\r\n                        avatar: articleData.authorAvatar,\r\n                        content: `public├│ un nuevo art├¡culo: \"${articleData.title}\"`,\r\n                        category: articleData.category,\r\n                        link: `/blog/${docRef.id}`,\r\n                        time: new Date().toISOString(),\r\n                        read: false\r\n                    };\r\n\r\n                    await Promise.all(followers.map(followerId =>\r\n                        notificationsService.createNotification(followerId, notification)\r\n                    ));\r\n                }\r\n            } catch (notifError) {\r\n                console.error(\"Error sending notifications:\", notifError);\r\n            }\r\n\r\n            return { id: docRef.id, slug: finalData.slug as string };\r\n        } catch (error) {\r\n            console.error(\"Error creating article:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Actualiza un art├¡culo existente.\r\n     * \r\n     * @param articleId - ID del art├¡culo\r\n     * @param articleData - Datos a actualizar\r\n     * @param imageFile - Nueva imagen de portada (opcional)\r\n     */\r\n    updateArticle: async (articleId: string, articleData: Partial<ArticleItem>, imageFile?: File): Promise<void> => {\r\n        try {\r\n            let imageUrl = articleData.image;\r\n\r\n            if (imageFile) {\r\n                try {\r\n                    const imagePath = `articles/${Date.now()}_${imageFile.name}`;\r\n                    imageUrl = await storageService.uploadImage(imageFile, imagePath, { maxSizeMB: 5, compress: true });\r\n                } catch (uploadError: any) {\r\n                    console.error(\"Error uploading new image:\", uploadError);\r\n                }\r\n            }\r\n\r\n            const docRef = doc(db, 'articles', articleId);\r\n            const finalData = sanitizeData({ ...articleData, image: imageUrl });\r\n\r\n            await updateDoc(docRef, finalData);\r\n        } catch (error) {\r\n            console.error(\"Error updating article:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene los art├¡culos m├ís recientes.\r\n     * \r\n     * @param limitCount - Cantidad m├íxima (default: 4)\r\n     * @returns Array de art├¡culos\r\n     */\r\n    getRecentArticles: async (limitCount = 4): Promise<ArticleItem[]> => {\r\n        try {\r\n            // Only fetch published articles\r\n            const q = query(\r\n                collection(db, 'articles'),\r\n                where('status', '==', 'published'),\r\n                orderBy('date', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ArticleItem));\r\n        } catch (error) {\r\n            console.error(\"Error fetching recent articles:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene art├¡culos de un usuario (soporta nombre e ID).\r\n     * \r\n     * Realiza queries duales para compatibilidad con datos legacy.\r\n     * \r\n     * @param authorName - Nombre del autor\r\n     * @param authorId - ID del autor (opcional pero recomendado)\r\n     * @returns Array de art├¡culos ordenados por fecha\r\n     */\r\n    getUserArticles: async (authorName: string, authorId?: string): Promise<ArticleItem[]> => {\r\n        try {\r\n            const queries = [];\r\n\r\n            if (authorName) {\r\n                queries.push(query(collection(db, 'articles'), where('author', '==', authorName), orderBy('date', 'desc')));\r\n            }\r\n\r\n            if (authorId) {\r\n                queries.push(query(collection(db, 'articles'), where('authorId', '==', authorId), orderBy('date', 'desc')));\r\n            }\r\n\r\n            if (queries.length === 0) return [];\r\n\r\n            const snapshots = await Promise.all(queries.map(q => getDocs(q)));\r\n\r\n            const articlesMap = new Map<string, ArticleItem>();\r\n            snapshots.forEach(snap => {\r\n                snap.forEach(doc => {\r\n                    articlesMap.set(doc.id, { id: doc.id, ...doc.data() as object } as ArticleItem);\r\n                });\r\n            });\r\n\r\n            return Array.from(articlesMap.values()).sort((a, b) =>\r\n                new Date(b.date).getTime() - new Date(a.date).getTime()\r\n            );\r\n        } catch (error) {\r\n            console.error(\"Error fetching user articles:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene art├¡culos por categor├¡as.\r\n     * \r\n     * Soporta hasta 10 categor├¡as (l├¡mite de Firestore 'in').\r\n     * \r\n     * @param categories - Array de categor├¡as\r\n     * @param lastDoc - Cursor de paginaci├│n\r\n     * @param limitCount - Cantidad por p├ígina\r\n     * @returns Resultado paginado\r\n     */\r\n    getArticlesByCategories: async (categories: string[], lastDoc: QueryDocumentSnapshot<DocumentData> | null = null, limitCount = 10): Promise<PaginatedResult<ArticleItem>> => {\r\n        try {\r\n            if (!categories || categories.length === 0) return { data: [], lastDoc: null, hasMore: false };\r\n\r\n            const limitedCategories = categories.slice(0, 10);\r\n\r\n            // Only fetch published articles\r\n            let q = query(\r\n                collection(db, 'articles'),\r\n                where('status', '==', 'published'),\r\n                where('category', 'in', limitedCategories),\r\n                orderBy('date', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n\r\n            if (lastDoc) {\r\n                q = query(\r\n                    collection(db, 'articles'),\r\n                    where('status', '==', 'published'),\r\n                    where('category', 'in', limitedCategories),\r\n                    orderBy('date', 'desc'),\r\n                    startAfter(lastDoc),\r\n                    limit(limitCount)\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ArticleItem));\r\n\r\n            return {\r\n                data,\r\n                lastDoc: snapshot.docs[snapshot.docs.length - 1] || null,\r\n                hasMore: snapshot.docs.length === limitCount\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Error fetching articles by categories:\", error);\r\n            return { data: [], lastDoc: null, hasMore: false };\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene art├¡culos por tag.\r\n     * \r\n     * @param tag - Tag a buscar\r\n     * @param lastDoc - Cursor de paginaci├│n\r\n     * @param limitCount - Cantidad por p├ígina\r\n     * @returns Resultado paginado\r\n     */\r\n    getArticlesByTag: async (tag: string, lastDoc: QueryDocumentSnapshot<DocumentData> | null = null, limitCount = 10): Promise<PaginatedResult<ArticleItem>> => {\r\n        try {\r\n            // Only fetch published articles\r\n            let q = query(\r\n                collection(db, 'articles'),\r\n                where('status', '==', 'published'),\r\n                where('tags', 'array-contains', tag),\r\n                orderBy('date', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n\r\n            if (lastDoc) {\r\n                q = query(\r\n                    collection(db, 'articles'),\r\n                    where('status', '==', 'published'),\r\n                    where('tags', 'array-contains', tag),\r\n                    orderBy('date', 'desc'),\r\n                    startAfter(lastDoc),\r\n                    limit(limitCount)\r\n                );\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ArticleItem));\r\n\r\n            return {\r\n                data,\r\n                lastDoc: snapshot.docs[snapshot.docs.length - 1] || null,\r\n                hasMore: snapshot.docs.length === limitCount\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Error fetching articles by tag:\", error);\r\n            return { data: [], lastDoc: null, hasMore: false };\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene m├║ltiples art├¡culos por sus IDs.\r\n     * \r\n     * Maneja el l├¡mite de 10 items de Firestore dividiendo en chunks.\r\n     * \r\n     * @param ids - Array de IDs\r\n     * @returns Array de art├¡culos encontrados\r\n     */\r\n    getArticlesByIds: async (ids: string[]): Promise<ArticleItem[]> => {\r\n        if (!ids || ids.length === 0) return [];\r\n\r\n        const chunks = [];\r\n        for (let i = 0; i < ids.length; i += 10) {\r\n            chunks.push(ids.slice(i, i + 10));\r\n        }\r\n\r\n        try {\r\n            const results = await Promise.all(chunks.map(async chunk => {\r\n                const q = query(collection(db, 'articles'), where(documentId(), 'in', chunk));\r\n                const snapshot = await getDocs(q);\r\n                return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as ArticleItem));\r\n            }));\r\n\r\n            return results.flat();\r\n        } catch (error) {\r\n            console.error(\"Error fetching articles by IDs:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un art├¡culo por su ID.\r\n     * \r\n     * @param articleId - ID del art├¡culo\r\n     * @returns El art├¡culo o null si no existe\r\n     */\r\n    getArticle: async (articleId: string): Promise<ArticleItem | null> => {\r\n        try {\r\n            const docRef = doc(db, 'articles', articleId);\r\n            const docSnap = await getDoc(docRef);\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() } as ArticleItem;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching article:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un art├¡culo por su slug (URL amigable).\r\n     * Si no encuentra por slug, intenta buscar por ID (backward compatibility).\r\n     * \r\n     * @param slugOrId - Slug del art├¡culo o ID de Firebase\r\n     * @returns El art├¡culo encontrado o null si no existe\r\n     */\r\n    getArticleBySlug: async (slugOrId: string): Promise<ArticleItem | null> => {\r\n        try {\r\n            // First try to find by slug\r\n            const slugQuery = query(collection(db, 'articles'), where('slug', '==', slugOrId), limit(1));\r\n            const slugSnapshot = await getDocs(slugQuery);\r\n\r\n            if (!slugSnapshot.empty) {\r\n                const docData = slugSnapshot.docs[0];\r\n                return { id: docData.id, ...docData.data() } as ArticleItem;\r\n            }\r\n\r\n            // Fallback: try to find by ID (for old articles without slug)\r\n            const docRef = doc(db, 'articles', slugOrId);\r\n            const docSnap = await getDoc(docRef);\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() } as ArticleItem;\r\n            }\r\n\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching article by slug:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Elimina un art├¡culo y su imagen asociada del Storage.\r\n     * \r\n     * @param articleId - ID del art├¡culo a eliminar\r\n     */\r\n    deleteArticle: async (articleId: string): Promise<void> => {\r\n        try {\r\n            // Get article data to find the image URL\r\n            const docRef = doc(db, 'articles', articleId);\r\n            const docSnap = await getDoc(docRef);\r\n\r\n            if (docSnap.exists()) {\r\n                const articleData = docSnap.data();\r\n\r\n                // Delete image from Storage if it exists and is from our storage\r\n                if (articleData.image && articleData.image.includes('firebasestorage.googleapis.com')) {\r\n                    try {\r\n                        await storageService.deleteFromUrl(articleData.image);\r\n                    } catch (storageError) {\r\n                        console.warn(\"Could not delete article image:\", storageError);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Delete the article document\r\n            await deleteDoc(docRef);\r\n        } catch (error) {\r\n            console.error(\"Error deleting article:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Incrementa el contador de vistas de un art├¡culo.\r\n     * \r\n     * @param articleId - ID del art├¡culo\r\n     */\r\n    incrementArticleViews: async (articleId: string): Promise<void> => {\r\n        try {\r\n            const articleRef = doc(db, 'articles', articleId);\r\n            await updateDoc(articleRef, { views: increment(1) });\r\n        } catch (error) {\r\n            console.error(\"Error incrementing article views:\", error);\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\articles\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\articles\\likes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\collections.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'arrayUnion' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":84},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'arrayRemove' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":86,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":97},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5463,5466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5463,5466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { db } from '../../lib/firebase';\r\nimport { collection, doc, getDocs, getDoc, addDoc, updateDoc, deleteDoc, arrayUnion, arrayRemove, query, where, orderBy } from 'firebase/firestore';\r\nimport { CollectionItem, SavedItemReference } from '../../types';\r\n\r\nexport const collectionsService = {\r\n    // Get all collections for a specific user (owner only - used for own profile)\r\n    getUserCollections: async (userId: string): Promise<CollectionItem[]> => {\r\n        try {\r\n            const q = query(collection(db, `users/${userId}/collections`), orderBy('createdAt', 'desc'));\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            return querySnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })) as CollectionItem[];\r\n        } catch (error) {\r\n            console.error(\"Error fetching collections:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    // Get only public collections for a user (used for viewing other users' profiles)\r\n    getPublicUserCollections: async (userId: string): Promise<CollectionItem[]> => {\r\n        try {\r\n            const q = query(\r\n                collection(db, `users/${userId}/collections`),\r\n                where('isPrivate', '==', false),\r\n                orderBy('createdAt', 'desc')\r\n            );\r\n            const querySnapshot = await getDocs(q);\r\n\r\n            return querySnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })) as CollectionItem[];\r\n        } catch (error) {\r\n            console.error(\"Error fetching public collections:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    // Get a single collection by owner ID and collection ID\r\n    getCollectionById: async (userId: string, collectionId: string): Promise<CollectionItem | null> => {\r\n        try {\r\n            const colRef = doc(db, `users/${userId}/collections`, collectionId);\r\n            const snapshot = await getDoc(colRef);\r\n\r\n            if (snapshot.exists()) {\r\n                return {\r\n                    id: snapshot.id,\r\n                    ...snapshot.data()\r\n                } as CollectionItem;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching collection:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    // Create a new collection\r\n    createCollection: async (userId: string, title: string, isPrivate: boolean): Promise<CollectionItem | null> => {\r\n        try {\r\n            const newCollectionData = {\r\n                title,\r\n                isPrivate,\r\n                itemCount: 0,\r\n                thumbnails: [],\r\n                items: [], // Array of item IDs\r\n                createdAt: new Date().toISOString()\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, `users/${userId}/collections`), newCollectionData);\r\n\r\n            return {\r\n                id: docRef.id,\r\n                ...newCollectionData\r\n            } as CollectionItem;\r\n        } catch (error) {\r\n            console.error(\"Error creating collection:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    // Update collection metadata (title, privacy)\r\n    updateCollection: async (userId: string, collectionId: string, updates: { title?: string; isPrivate?: boolean }): Promise<void> => {\r\n        try {\r\n            const colRef = doc(db, `users/${userId}/collections`, collectionId);\r\n            await updateDoc(colRef, updates);\r\n        } catch (error) {\r\n            console.error(\"Error updating collection:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Add an item to a collection\r\n    addToCollection: async (userId: string, collectionId: string, item: { id: string, image: string, type: 'project' | 'article' }): Promise<void> => {\r\n        try {\r\n            const colRef = doc(db, `users/${userId}/collections`, collectionId);\r\n            const snapshot = await getDoc(colRef);\r\n\r\n            if (snapshot.exists()) {\r\n                const data = snapshot.data();\r\n                const currentItems = (data.items || []) as SavedItemReference[];\r\n\r\n                // Check for duplicates based on ID\r\n                if (!currentItems.some(i => i.id === item.id)) {\r\n                    const newItem = {\r\n                        id: item.id,\r\n                        type: item.type,\r\n                        addedAt: new Date().toISOString()\r\n                    };\r\n                    const newItems = [...currentItems, newItem];\r\n                    const newThumbs = [item.image, ...(data.thumbnails || [])].slice(0, 4);\r\n\r\n                    await updateDoc(colRef, {\r\n                        items: newItems,\r\n                        thumbnails: newThumbs,\r\n                        itemCount: newItems.length\r\n                    });\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error adding to collection:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Remove item from collection\r\n    removeFromCollection: async (userId: string, collectionId: string, itemId: string): Promise<void> => {\r\n        try {\r\n            const colRef = doc(db, `users/${userId}/collections`, collectionId);\r\n            const snapshot = await getDoc(colRef);\r\n\r\n            if (snapshot.exists()) {\r\n                const data = snapshot.data();\r\n                const currentItems = (data.items || []) as any[];\r\n\r\n                // Filter out the item\r\n                const newItems = currentItems.filter(i => i.id !== itemId);\r\n\r\n                if (newItems.length !== currentItems.length) {\r\n                    await updateDoc(colRef, {\r\n                        items: newItems,\r\n                        itemCount: newItems.length\r\n                        // We strictly can't easily remove the specific thumbnail without tracking which one it is\r\n                        // For now we keep thumbnails as is, they are just a preview cache.\r\n                    });\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error removing from collection:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Delete a collection\r\n    deleteCollection: async (userId: string, collectionId: string): Promise<void> => {\r\n        try {\r\n            await deleteDoc(doc(db, `users/${userId}/collections`, collectionId));\r\n        } catch (error) {\r\n            console.error(\"Error deleting collection:\", error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\forum\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\forum\\moderation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\forum\\replies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\forum\\threads.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\[.","line":49,"column":24,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":49,"endColumn":25,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1581,1582],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1581,1581],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Forum Threads CRUD Operations\r\n * \r\n * M├│dulo que maneja las operaciones Create, Read, Update, Delete\r\n * para hilos del foro almacenados en Firestore.\r\n * \r\n * @module services/forum/threads\r\n */\r\nimport {\r\n    collection,\r\n    query,\r\n    orderBy,\r\n    limit,\r\n    startAfter,\r\n    getDocs,\r\n    getDoc,\r\n    doc,\r\n    setDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    where,\r\n    increment,\r\n    QueryDocumentSnapshot,\r\n    DocumentData\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\nimport { ForumThread, ForumPaginatedResult } from '../../../types/forum';\r\nimport { storageService } from '../storage';\r\nimport { sanitizeData } from '../utils';\r\nimport { generateUniqueSlug } from '../../../utils/slugUtils';\r\n\r\nconst COLLECTION_NAME = 'forumThreads';\r\n\r\n/**\r\n * Genera un extracto del contenido (limpia HTML y Markdown)\r\n */\r\nfunction generateExcerpt(content: string, maxLength = 150): string {\r\n    // Remove HTML tags (from WYSIWYG editor)\r\n    const plainText = content\r\n        .replace(/<[^>]*>/g, ' ')         // Remove all HTML tags\r\n        .replace(/&nbsp;/g, ' ')          // Replace &nbsp; with space\r\n        .replace(/&amp;/g, '&')           // Decode &amp;\r\n        .replace(/&lt;/g, '<')            // Decode &lt;\r\n        .replace(/&gt;/g, '>')            // Decode &gt;\r\n        .replace(/&quot;/g, '\"')          // Decode quotes\r\n        // Also clean markdown formatting\r\n        .replace(/```[\\s\\S]*?```/g, '')   // Remove code blocks\r\n        .replace(/`[^`]*`/g, '')          // Remove inline code\r\n        .replace(/[#*_~\\[\\]]/g, '')       // Remove markdown symbols\r\n        .replace(/!\\[.*?\\]\\(.*?\\)/g, '')  // Remove markdown images\r\n        .replace(/\\[.*?\\]\\(.*?\\)/g, '')   // Remove markdown links\r\n        .replace(/\\s+/g, ' ')             // Normalize whitespace\r\n        .trim();\r\n\r\n    if (plainText.length <= maxLength) return plainText;\r\n    return plainText.substring(0, maxLength).trim() + '...';\r\n}\r\n\r\nexport const forumThreadsCrud = {\r\n    /**\r\n     * Obtiene hilos paginados con filtros opcionales.\r\n     */\r\n    async getThreads(\r\n        options: {\r\n            category?: string;\r\n            sortBy?: 'recent' | 'popular' | 'activity' | 'unanswered';\r\n            lastDoc?: QueryDocumentSnapshot<DocumentData> | null;\r\n            pageSize?: number;\r\n        } = {}\r\n    ): Promise<ForumPaginatedResult<ForumThread>> {\r\n        const {\r\n            category,\r\n            sortBy = 'activity',\r\n            lastDoc = null,\r\n            pageSize = 20\r\n        } = options;\r\n\r\n        try {\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const constraints: Parameters<typeof query>[1][] = [];\r\n\r\n            // Filter by category\r\n            if (category && category !== 'all') {\r\n                constraints.push(where('category', '==', category));\r\n            }\r\n\r\n            // Filter unanswered\r\n            if (sortBy === 'unanswered') {\r\n                constraints.push(where('isResolved', '==', false));\r\n                constraints.push(orderBy('createdAt', 'desc'));\r\n            } else {\r\n                // Add sort order\r\n                switch (sortBy) {\r\n                    case 'recent':\r\n                        constraints.push(orderBy('createdAt', 'desc'));\r\n                        break;\r\n                    case 'popular':\r\n                        constraints.push(orderBy('likes', 'desc'));\r\n                        break;\r\n                    case 'activity':\r\n                    default:\r\n                        constraints.push(orderBy('lastActivityAt', 'desc'));\r\n                        break;\r\n                }\r\n            }\r\n\r\n            // Pagination\r\n            constraints.push(limit(pageSize + 1)); // +1 to check if there are more\r\n            if (lastDoc) {\r\n                constraints.push(startAfter(lastDoc));\r\n            }\r\n\r\n            const q = query(threadsRef, ...constraints);\r\n            const snapshot = await getDocs(q);\r\n\r\n            const threads: ForumThread[] = [];\r\n            let hasMore = false;\r\n            let newLastDoc: QueryDocumentSnapshot<DocumentData> | null = null;\r\n\r\n            snapshot.docs.forEach((docSnap, index) => {\r\n                if (index < pageSize) {\r\n                    const data = docSnap.data();\r\n                    threads.push({\r\n                        id: docSnap.id,\r\n                        ...data,\r\n                        createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                        updatedAt: data.updatedAt?.toDate?.()?.toISOString() || data.updatedAt,\r\n                        lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n                    } as ForumThread);\r\n                    newLastDoc = docSnap;\r\n                } else {\r\n                    hasMore = true;\r\n                }\r\n            });\r\n\r\n            // Sort pinned threads to top\r\n            threads.sort((a, b) => {\r\n                if (a.isPinned && !b.isPinned) return -1;\r\n                if (!a.isPinned && b.isPinned) return 1;\r\n                return 0;\r\n            });\r\n\r\n            return { items: threads, hasMore, lastDoc: newLastDoc };\r\n        } catch (error) {\r\n            console.error('Error fetching threads:', error);\r\n            return { items: [], hasMore: false, lastDoc: null };\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un hilo por su ID.\r\n     */\r\n    async getThread(threadId: string): Promise<ForumThread | null> {\r\n        try {\r\n            const docRef = doc(db, COLLECTION_NAME, threadId);\r\n            const docSnap = await getDoc(docRef);\r\n\r\n            if (!docSnap.exists()) return null;\r\n\r\n            const data = docSnap.data();\r\n            return {\r\n                id: docSnap.id,\r\n                ...data,\r\n                createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                updatedAt: data.updatedAt?.toDate?.()?.toISOString() || data.updatedAt,\r\n                lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n            } as ForumThread;\r\n        } catch (error) {\r\n            console.error('Error fetching thread:', error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un hilo por su slug (para URLs SEO-friendly).\r\n     * Si no encuentra por slug, intenta buscar por ID.\r\n     */\r\n    async getThreadBySlug(slugOrId: string): Promise<ForumThread | null> {\r\n        try {\r\n            // First try to find by slug\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const q = query(threadsRef, where('slug', '==', slugOrId), limit(1));\r\n            const snapshot = await getDocs(q);\r\n\r\n            if (!snapshot.empty) {\r\n                const docSnap = snapshot.docs[0];\r\n                const data = docSnap.data();\r\n                return {\r\n                    id: docSnap.id,\r\n                    ...data,\r\n                    createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                    updatedAt: data.updatedAt?.toDate?.()?.toISOString() || data.updatedAt,\r\n                    lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n                } as ForumThread;\r\n            }\r\n\r\n            // Fallback: try by ID (backward compatibility)\r\n            return await this.getThread(slugOrId);\r\n        } catch (error) {\r\n            console.error('Error fetching thread by slug:', error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Crea un nuevo hilo.\r\n     */\r\n    async createThread(\r\n        threadData: {\r\n            title: string;\r\n            content: string;\r\n            category: string;\r\n            tags?: string[];\r\n            authorId: string;\r\n            authorName: string;\r\n            authorUsername?: string;\r\n            authorAvatar?: string;\r\n            authorRole?: string;\r\n        },\r\n        attachmentFiles?: File[]\r\n    ): Promise<{ id: string; slug: string }> {\r\n        try {\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const newDocRef = doc(threadsRef);\r\n            const now = new Date().toISOString();\r\n\r\n            // Generate unique slug\r\n            const slug = generateUniqueSlug(threadData.title);\r\n\r\n            // Upload attachments if any\r\n            let attachments: { id: string; url: string; type: 'image' | 'file'; name: string; size: number }[] = [];\r\n            if (attachmentFiles && attachmentFiles.length > 0) {\r\n                attachments = await Promise.all(\r\n                    attachmentFiles.map(async (file, index) => {\r\n                        const url = await storageService.uploadImage(\r\n                            file,\r\n                            `forum/${newDocRef.id}/attachments/${index}_${file.name}`\r\n                        );\r\n                        return {\r\n                            id: `${newDocRef.id}_${index}`,\r\n                            url,\r\n                            type: file.type.startsWith('image/') ? 'image' as const : 'file' as const,\r\n                            name: file.name,\r\n                            size: file.size\r\n                        };\r\n                    })\r\n                );\r\n            }\r\n\r\n            const thread: Omit<ForumThread, 'id'> = {\r\n                slug,\r\n                title: threadData.title.trim(),\r\n                content: threadData.content,\r\n                excerpt: generateExcerpt(threadData.content),\r\n                authorId: threadData.authorId,\r\n                authorName: threadData.authorName,\r\n                authorUsername: threadData.authorUsername,\r\n                authorAvatar: threadData.authorAvatar,\r\n                authorRole: threadData.authorRole,\r\n                category: threadData.category,\r\n                tags: threadData.tags || [],\r\n                views: 0,\r\n                replies: 0,\r\n                likes: 0,\r\n                isPinned: false,\r\n                isClosed: false,\r\n                isResolved: false,\r\n                createdAt: now,\r\n                lastActivityAt: now,\r\n                attachments: attachments.length > 0 ? attachments : undefined\r\n            };\r\n\r\n            await setDoc(newDocRef, sanitizeData(thread));\r\n\r\n            return { id: newDocRef.id, slug };\r\n        } catch (error) {\r\n            console.error('Error creating thread:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Actualiza un hilo existente.\r\n     */\r\n    async updateThread(\r\n        threadId: string,\r\n        data: Partial<Pick<ForumThread, 'title' | 'content' | 'category' | 'tags'>>\r\n    ): Promise<void> {\r\n        try {\r\n            const docRef = doc(db, COLLECTION_NAME, threadId);\r\n\r\n            const updateData: Record<string, unknown> = {\r\n                ...data,\r\n                updatedAt: new Date().toISOString()\r\n            };\r\n\r\n            // Update excerpt if content changed\r\n            if (data.content) {\r\n                updateData.excerpt = generateExcerpt(data.content);\r\n            }\r\n\r\n            await updateDoc(docRef, sanitizeData(updateData));\r\n        } catch (error) {\r\n            console.error('Error updating thread:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Elimina un hilo y sus respuestas/likes asociados.\r\n     */\r\n    async deleteThread(threadId: string): Promise<void> {\r\n        try {\r\n            // Get thread to check for attachments\r\n            const thread = await this.getThread(threadId);\r\n\r\n            // Delete attachments from storage\r\n            if (thread?.attachments) {\r\n                await Promise.all(\r\n                    thread.attachments.map(att =>\r\n                        storageService.deleteFromUrl(att.url).catch(console.error)\r\n                    )\r\n                );\r\n            }\r\n\r\n            // Delete the thread document\r\n            // Note: Subcollections (replies, likes) will be orphaned but can be cleaned up by a Cloud Function\r\n            const docRef = doc(db, COLLECTION_NAME, threadId);\r\n            await deleteDoc(docRef);\r\n        } catch (error) {\r\n            console.error('Error deleting thread:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene los hilos de un usuario espec├¡fico.\r\n     */\r\n    async getUserThreads(userId: string, limitCount = 10): Promise<ForumThread[]> {\r\n        try {\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const q = query(\r\n                threadsRef,\r\n                where('authorId', '==', userId),\r\n                orderBy('createdAt', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(docSnap => {\r\n                const data = docSnap.data();\r\n                return {\r\n                    id: docSnap.id,\r\n                    ...data,\r\n                    createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                    lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n                } as ForumThread;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching user threads:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Incrementa el contador de vistas de un hilo.\r\n     */\r\n    async incrementViews(threadId: string): Promise<void> {\r\n        try {\r\n            const docRef = doc(db, COLLECTION_NAME, threadId);\r\n            await updateDoc(docRef, { views: increment(1) });\r\n        } catch (error) {\r\n            console.error('Error incrementing views:', error);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Alterna el like de un hilo.\r\n     */\r\n    async toggleLike(threadId: string, userId: string): Promise<boolean> {\r\n        try {\r\n            const likeRef = doc(db, COLLECTION_NAME, threadId, 'likes', userId);\r\n            const likeSnap = await getDoc(likeRef);\r\n\r\n            const threadRef = doc(db, COLLECTION_NAME, threadId);\r\n\r\n            if (likeSnap.exists()) {\r\n                // Remove like\r\n                await deleteDoc(likeRef);\r\n                await updateDoc(threadRef, { likes: increment(-1) });\r\n                return false;\r\n            } else {\r\n                // Add like\r\n                await setDoc(likeRef, {\r\n                    createdAt: new Date().toISOString(),\r\n                    userId\r\n                });\r\n                await updateDoc(threadRef, { likes: increment(1) });\r\n                return true;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error toggling like:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Verifica si un usuario ha dado like a un hilo.\r\n     */\r\n    async getLikeStatus(threadId: string, userId: string): Promise<boolean> {\r\n        try {\r\n            const likeRef = doc(db, COLLECTION_NAME, threadId, 'likes', userId);\r\n            const likeSnap = await getDoc(likeRef);\r\n            return likeSnap.exists();\r\n        } catch (error) {\r\n            console.error('Error checking like status:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene los hilos m├ís recientes.\r\n     */\r\n    async getRecentThreads(limitCount = 5): Promise<ForumThread[]> {\r\n        try {\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const q = query(\r\n                threadsRef,\r\n                orderBy('createdAt', 'desc'),\r\n                limit(limitCount)\r\n            );\r\n\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(docSnap => {\r\n                const data = docSnap.data();\r\n                return {\r\n                    id: docSnap.id,\r\n                    ...data,\r\n                    createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                    lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n                } as ForumThread;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching recent threads:', error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Busca hilos por texto en t├¡tulo o contenido.\r\n     */\r\n    async searchThreads(searchQuery: string, limitCount = 20): Promise<ForumThread[]> {\r\n        try {\r\n            // Note: Firestore doesn't support full-text search natively\r\n            // This is a simple prefix search on title. For better search,\r\n            // consider using Algolia or Elasticsearch.\r\n            const threadsRef = collection(db, COLLECTION_NAME);\r\n            const q = query(\r\n                threadsRef,\r\n                orderBy('title'),\r\n                where('title', '>=', searchQuery),\r\n                where('title', '<=', searchQuery + '\\uf8ff'),\r\n                limit(limitCount)\r\n            );\r\n\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(docSnap => {\r\n                const data = docSnap.data();\r\n                return {\r\n                    id: docSnap.id,\r\n                    ...data,\r\n                    createdAt: data.createdAt?.toDate?.()?.toISOString() || data.createdAt,\r\n                    lastActivityAt: data.lastActivityAt?.toDate?.()?.toISOString() || data.lastActivityAt\r\n                } as ForumThread;\r\n            });\r\n        } catch (error) {\r\n            console.error('Error searching threads:', error);\r\n            return [];\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\projects\\comments.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3044,3047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3044,3047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Sistema de Comentarios de Proyectos\r\n * \r\n * M├│dulo que maneja comentarios, respuestas y likes de comentarios\r\n * para proyectos de portafolio.\r\n * \r\n * @module services/projects/comments\r\n */\r\nimport {\r\n    collection,\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    deleteDoc,\r\n    updateDoc,\r\n    query,\r\n    orderBy,\r\n    onSnapshot,\r\n    increment,\r\n    addDoc\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\n\r\nexport const projectsComments = {\r\n    /**\r\n     * Agrega un comentario a un proyecto.\r\n     * \r\n     * Crea el comentario en Firestore y env├¡a una notificaci├│n al autor\r\n     * del proyecto (as├¡ncrona, no bloqueante).\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param commentData - Datos del comentario (autor, texto, etc.)\r\n     */\r\n    addComment: async (projectId: string, commentData: { authorId: string; authorName: string; authorUsername?: string; authorAvatar: string; text: string; }) => {\r\n        const commentsCol = collection(db, 'projects', projectId, 'comments');\r\n        const newCommentRef = doc(commentsCol);\r\n        await setDoc(newCommentRef, {\r\n            ...commentData,\r\n            id: newCommentRef.id,\r\n            createdAt: new Date().toISOString(),\r\n            likes: 0,\r\n            replies: []\r\n        });\r\n\r\n        // Incrementar contador de comentarios\r\n        const projectRef = doc(db, 'projects', projectId);\r\n        await updateDoc(projectRef, {\r\n            'stats.commentCount': increment(1)\r\n        });\r\n\r\n        // Enviar notificaci├│n (async, fire and forget)\r\n        (async () => {\r\n            try {\r\n                const projectSnap = await getDoc(projectRef);\r\n                const projectData = projectSnap.data();\r\n\r\n                if (projectData && projectData.authorId && projectData.authorId !== commentData.authorId) {\r\n                    await addDoc(collection(db, 'users', projectData.authorId, 'notifications'), {\r\n                        type: 'comment',\r\n                        user: commentData.authorName,\r\n                        avatar: commentData.authorAvatar,\r\n                        content: `coment├│ en tu proyecto \"${projectData.title || 'Sin t├¡tulo'}\"`,\r\n                        image: projectData.image || '',\r\n                        time: new Date().toISOString(),\r\n                        read: false,\r\n                        link: `/portfolio/${projectId}`\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error creando notificaci├│n de comentario:\", error);\r\n            }\r\n        })();\r\n    },\r\n\r\n    /**\r\n     * Listener en tiempo real para comentarios de un proyecto.\r\n     * \r\n     * Se actualiza autom├íticamente cuando se agregan, modifican o eliminan comentarios.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param callback - Funci├│n que recibe el array de comentarios actualizados\r\n     * @returns Funci├│n para cancelar la suscripci├│n\r\n     */\r\n    listenToComments: (projectId: string, callback: (comments: any[]) => void) => {\r\n        const commentsQuery = query(\r\n            collection(db, 'projects', projectId, 'comments'),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n\r\n        return onSnapshot(commentsQuery, (snapshot) => {\r\n            const comments = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            callback(comments);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Elimina un comentario de un proyecto.\r\n     * \r\n     * Tambi├®n decrementa el contador de comentarios del proyecto.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param commentId - ID del comentario a eliminar\r\n     */\r\n    deleteComment: async (projectId: string, commentId: string) => {\r\n        const commentRef = doc(db, 'projects', projectId, 'comments', commentId);\r\n        await deleteDoc(commentRef);\r\n\r\n        const projectRef = doc(db, 'projects', projectId);\r\n        await updateDoc(projectRef, {\r\n            'stats.commentCount': increment(-1)\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Alterna el like de un comentario.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param commentId - ID del comentario\r\n     * @param userId - ID del usuario\r\n     * @returns true si ahora tiene like, false si se quit├│\r\n     */\r\n    toggleCommentLike: async (projectId: string, commentId: string, userId: string): Promise<boolean> => {\r\n        try {\r\n            const commentRef = doc(db, 'projects', projectId, 'comments', commentId);\r\n            const likeRef = doc(db, 'projects', projectId, 'comments', commentId, 'likes', userId);\r\n\r\n            const likeSnap = await getDoc(likeRef);\r\n            const isLiked = likeSnap.exists();\r\n\r\n            if (isLiked) {\r\n                await deleteDoc(likeRef);\r\n                await updateDoc(commentRef, { likes: increment(-1) });\r\n                return false;\r\n            } else {\r\n                await setDoc(likeRef, {\r\n                    userId,\r\n                    createdAt: new Date().toISOString()\r\n                });\r\n                await updateDoc(commentRef, { likes: increment(1) });\r\n                return true;\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error alternando like de comentario:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Verifica si un usuario ha dado like a un comentario.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param commentId - ID del comentario\r\n     * @param userId - ID del usuario\r\n     * @returns true si el usuario dio like, false si no\r\n     */\r\n    getCommentLikeStatus: async (projectId: string, commentId: string, userId: string): Promise<boolean> => {\r\n        try {\r\n            const likeRef = doc(db, 'projects', projectId, 'comments', commentId, 'likes', userId);\r\n            const snap = await getDoc(likeRef);\r\n            return snap.exists();\r\n        } catch (error) {\r\n            console.error(\"Error verificando estado de like:\", error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene el estado de likes para m├║ltiples comentarios a la vez.\r\n     * \r\n     * ├Ütil para cargar el estado inicial de todos los comentarios\r\n     * sin hacer m├║ltiples llamadas individuales.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param commentIds - Array de IDs de comentarios\r\n     * @param userId - ID del usuario\r\n     * @returns Objeto mapeando commentId => boolean (liked)\r\n     */\r\n    getCommentsLikeStatuses: async (projectId: string, commentIds: string[], userId: string): Promise<Record<string, boolean>> => {\r\n        try {\r\n            const statuses: Record<string, boolean> = {};\r\n\r\n            const promises = commentIds.map(async (commentId) => {\r\n                const likeRef = doc(db, 'projects', projectId, 'comments', commentId, 'likes', userId);\r\n                const snap = await getDoc(likeRef);\r\n                statuses[commentId] = snap.exists();\r\n            });\r\n\r\n            await Promise.all(promises);\r\n            return statuses;\r\n        } catch (error) {\r\n            console.error(\"Error obteniendo estados de like:\", error);\r\n            return {};\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Agrega una respuesta a un comentario.\r\n     * \r\n     * Las respuestas se almacenan como comentarios regulares con\r\n     * un campo parentId que indica a cu├íl comentario responden.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param parentCommentId - ID del comentario padre\r\n     * @param replyData - Datos de la respuesta\r\n     * @returns ID de la respuesta creada\r\n     */\r\n    addCommentReply: async (\r\n        projectId: string,\r\n        parentCommentId: string,\r\n        replyData: { authorId: string; authorName: string; authorUsername?: string; authorAvatar: string; text: string; }\r\n    ) => {\r\n        try {\r\n            const commentsCol = collection(db, 'projects', projectId, 'comments');\r\n            const newReplyRef = doc(commentsCol);\r\n\r\n            await setDoc(newReplyRef, {\r\n                ...replyData,\r\n                id: newReplyRef.id,\r\n                parentId: parentCommentId,\r\n                createdAt: new Date().toISOString(),\r\n                likes: 0\r\n            });\r\n\r\n            const projectRef = doc(db, 'projects', projectId);\r\n            await updateDoc(projectRef, {\r\n                'stats.commentCount': increment(1)\r\n            });\r\n\r\n            return newReplyRef.id;\r\n        } catch (error) {\r\n            console.error(\"Error agregando respuesta:\", error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\projects\\crud.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3583,3586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3583,3586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5391,5394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5391,5394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5679,5682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5679,5682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":113,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":116,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5727,5730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5727,5730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9041,9044],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9041,9044],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":248,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11061,11064],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11061,11064],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":248,"column":113,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":116,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11109,11112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11109,11112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":337,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":337,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14653,14656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14653,14656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Operaciones CRUD de Proyectos\r\n * \r\n * M├│dulo que maneja las operaciones Create, Read, Update, Delete\r\n * para proyectos de portafolio almacenados en Firestore.\r\n * \r\n * @module services/projects/crud\r\n */\r\nimport {\r\n    collection,\r\n    doc,\r\n    getDoc,\r\n    getDocs,\r\n    deleteDoc,\r\n    updateDoc,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    writeBatch,\r\n    increment,\r\n    onSnapshot,\r\n    startAfter,\r\n    QueryDocumentSnapshot,\r\n    DocumentData\r\n} from 'firebase/firestore';\r\nimport { ref, listAll, deleteObject } from 'firebase/storage';\r\nimport { db, storage } from '../../../lib/firebase';\r\nimport { storageService } from '../storage';\r\nimport { PortfolioItem } from '../../../types';\r\nimport { PaginatedResult } from '../utils';\r\nimport { generateUniqueSlug } from '../../../utils/slugUtils';\r\n\r\nexport const projectsCrud = {\r\n    /**\r\n     * Crea un nuevo proyecto con manejo robusto de transacciones.\r\n     * \r\n     * Proceso:\r\n     * 1. Sube la imagen de portada (si existe)\r\n     * 2. Sube las im├ígenes de galer├¡a (si existen)\r\n     * 3. Crea el documento del proyecto y actualiza estad├¡sticas del usuario at├│micamente\r\n     * \r\n     * @param userId - ID del usuario que crea el proyecto\r\n     * @param projectData - Datos parciales del proyecto (t├¡tulo, descripci├│n, etc.)\r\n     * @param files - Archivos a subir (portada y galer├¡a)\r\n     * @param uploadOptions - Opciones de subida (tama├▒o m├íximo, metadatos, callback de progreso)\r\n     * @returns Promise con el ID del proyecto creado\r\n     * @throws Error si falla la creaci├│n\r\n     */\r\n    createProject: async (\r\n        userId: string,\r\n        projectData: Partial<PortfolioItem>,\r\n        files: { cover?: File; gallery?: File[] },\r\n        uploadOptions: {\r\n            maxSizeMB: number;\r\n            galleryMetadata?: { type: 'image' | 'video' | 'youtube' | 'sketchfab'; caption?: string; fileIndex?: number; url?: string }[];\r\n            onProgress?: (progress: number) => void;\r\n        }\r\n    ): Promise<{ id: string; slug: string }> => {\r\n        try {\r\n            const totalOps = (files.cover ? 1 : 0) + (files.gallery?.length || 0) + 1;\r\n            let completedOps = 0;\r\n            const updateProgress = () => {\r\n                completedOps++;\r\n                if (uploadOptions.onProgress) uploadOptions.onProgress(Math.round((completedOps / totalOps) * 100));\r\n            };\r\n\r\n            const newProjectRef = doc(collection(db, 'projects'));\r\n            const projectId = newProjectRef.id;\r\n\r\n            // Upload Cover Image\r\n            let coverUrl = '';\r\n            if (files.cover) {\r\n                const path = `users/${userId}/projects/${projectId}/cover.jpg`;\r\n                coverUrl = await storageService.uploadImage(files.cover, path, uploadOptions);\r\n                updateProgress();\r\n            }\r\n\r\n            // Upload Gallery Images\r\n            const uploadedUrls: string[] = [];\r\n            if (files.gallery && files.gallery.length > 0) {\r\n                const uploadPromises = files.gallery.map(async (file, index) => {\r\n                    const timestamp = Date.now();\r\n                    const path = `users/${userId}/projects/${projectId}/gallery/${timestamp}_${index}.jpg`;\r\n                    const url = await storageService.uploadImage(file, path, uploadOptions);\r\n                    updateProgress();\r\n                    return url;\r\n                });\r\n                uploadedUrls.push(...(await Promise.all(uploadPromises)));\r\n            }\r\n\r\n            // Prepare Gallery Objects\r\n            let galleryObjects: any[] = [];\r\n            if (uploadOptions.galleryMetadata) {\r\n                galleryObjects = uploadOptions.galleryMetadata.map(meta => {\r\n                    if (meta.type === 'image' && meta.fileIndex !== undefined) {\r\n                        return { type: 'image', caption: meta.caption || '', url: uploadedUrls[meta.fileIndex] || '' };\r\n                    } else if (meta.type === 'youtube' || meta.type === 'sketchfab') {\r\n                        return { type: meta.type, caption: meta.caption || '', url: meta.url || '' };\r\n                    }\r\n                    return null;\r\n                }).filter(Boolean);\r\n            } else {\r\n                galleryObjects = uploadedUrls.map(url => ({ type: 'image', url, caption: '' }));\r\n            }\r\n\r\n            const legacyImages = galleryObjects.filter(item => item.type === 'image').map(item => item.url);\r\n\r\n            // Fetch author availability\r\n            const authorDocRef = doc(db, 'users', userId);\r\n            const authorDocSnap = await getDoc(authorDocRef);\r\n            const isAuthorAvailable = authorDocSnap.data()?.availableForWork || false;\r\n\r\n            const finalData = {\r\n                ...projectData,\r\n                domain: projectData.domain || 'creative',\r\n                id: projectId,\r\n                slug: generateUniqueSlug(projectData.title || 'proyecto'),\r\n                authorId: userId,\r\n                image: coverUrl || projectData.image || '',\r\n                images: legacyImages.length > 0 ? legacyImages : (projectData.images || []),\r\n                gallery: galleryObjects,\r\n                availableForWork: isAuthorAvailable,\r\n                createdAt: new Date().toISOString(),\r\n                views: 0,\r\n                likes: 0,\r\n                artistUsername: (projectData as any).artistUsername || '',\r\n                status: projectData.status || 'published',\r\n                scheduledAt: projectData.scheduledAt || null,\r\n                stats: { viewCount: 0, likeCount: 0 }\r\n            };\r\n\r\n            Object.keys(finalData).forEach(key => (finalData as any)[key] === undefined && delete (finalData as any)[key]);\r\n\r\n            const batch = writeBatch(db);\r\n            batch.set(newProjectRef, finalData);\r\n\r\n            const userRef = doc(db, 'users', userId);\r\n            batch.update(userRef, { 'stats.projects': increment(1) });\r\n\r\n            await batch.commit();\r\n            updateProgress();\r\n\r\n            return { id: projectId, slug: finalData.slug };\r\n        } catch (error) {\r\n            console.error(\"Error creating project:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Actualiza un proyecto existente.\r\n     * \r\n     * Maneja la subida de nuevos archivos y los combina con el contenido existente.\r\n     * Elimina autom├íticamente las im├ígenes antiguas que ya no se usan.\r\n     * \r\n     * @param userId - ID del usuario propietario\r\n     * @param projectId - ID del proyecto a actualizar\r\n     * @param projectData - Datos a actualizar\r\n     * @param files - Nuevos archivos a subir\r\n     * @param uploadOptions - Opciones de subida\r\n     */\r\n    updateProject: async (\r\n        userId: string,\r\n        projectId: string,\r\n        projectData: Partial<PortfolioItem>,\r\n        files: { cover?: File; gallery?: File[] },\r\n        uploadOptions: {\r\n            maxSizeMB: number;\r\n            galleryMetadata?: { type: 'image' | 'video' | 'youtube' | 'sketchfab'; caption?: string; fileIndex?: number; url?: string }[];\r\n            onProgress?: (progress: number) => void;\r\n        }\r\n    ): Promise<void> => {\r\n        try {\r\n            const totalOps = (files.cover ? 1 : 0) + (files.gallery?.length || 0) + 1;\r\n            let completedOps = 0;\r\n            const updateProgress = () => {\r\n                completedOps++;\r\n                if (uploadOptions.onProgress) uploadOptions.onProgress(Math.round((completedOps / totalOps) * 100));\r\n            };\r\n\r\n            const projectRef = doc(db, 'projects', projectId);\r\n            const existingDoc = await getDoc(projectRef);\r\n            const existingData = existingDoc.data();\r\n            const oldCoverUrl = existingData?.image || '';\r\n            const oldGalleryUrls: string[] = existingData?.images || [];\r\n\r\n            // Upload Cover Image\r\n            let coverUrl = projectData.image;\r\n            if (files.cover) {\r\n                if (oldCoverUrl) await storageService.deleteFromUrl(oldCoverUrl);\r\n                const path = `users/${userId}/projects/${projectId}/cover_${Date.now()}.jpg`;\r\n                coverUrl = await storageService.uploadImage(files.cover, path, uploadOptions);\r\n                updateProgress();\r\n            }\r\n\r\n            // Upload New Gallery Images\r\n            const uploadedUrls: string[] = [];\r\n            if (files.gallery && files.gallery.length > 0) {\r\n                const uploadPromises = files.gallery.map(async (file, index) => {\r\n                    const timestamp = Date.now();\r\n                    const path = `users/${userId}/projects/${projectId}/gallery/${timestamp}_${index}.jpg`;\r\n                    const url = await storageService.uploadImage(file, path, uploadOptions);\r\n                    updateProgress();\r\n                    return url;\r\n                });\r\n                uploadedUrls.push(...(await Promise.all(uploadPromises)));\r\n            }\r\n\r\n            // Construct Gallery Objects\r\n            let galleryObjects: any[] = [];\r\n            if (uploadOptions.galleryMetadata) {\r\n                galleryObjects = uploadOptions.galleryMetadata.map(meta => {\r\n                    if (meta.type === 'image') {\r\n                        if (meta.fileIndex !== undefined) {\r\n                            return { type: 'image', caption: meta.caption || '', url: uploadedUrls[meta.fileIndex] || '' };\r\n                        } else if (meta.url) {\r\n                            return { type: 'image', caption: meta.caption || '', url: meta.url };\r\n                        }\r\n                    } else if (meta.type === 'youtube' || meta.type === 'sketchfab') {\r\n                        return { type: meta.type, caption: meta.caption || '', url: meta.url || '' };\r\n                    }\r\n                    return null;\r\n                }).filter(Boolean);\r\n            }\r\n\r\n            // Cleanup removed gallery images\r\n            const newGalleryUrls = galleryObjects.filter(item => item.type === 'image').map(item => item.url);\r\n            const removedGalleryUrls = oldGalleryUrls.filter(url => !newGalleryUrls.includes(url));\r\n            if (removedGalleryUrls.length > 0) {\r\n                Promise.all(removedGalleryUrls.map(url => storageService.deleteFromUrl(url)))\r\n                    .catch(err => console.warn('Some gallery images could not be deleted:', err));\r\n            }\r\n\r\n            const authorDocRef = doc(db, 'users', userId);\r\n            const authorDocSnap = await getDoc(authorDocRef);\r\n            const isAuthorAvailable = authorDocSnap.data()?.availableForWork || false;\r\n\r\n            const finalData = {\r\n                ...projectData,\r\n                image: coverUrl,\r\n                availableForWork: isAuthorAvailable,\r\n                images: galleryObjects.filter(item => item.type === 'image').map(item => item.url),\r\n                gallery: galleryObjects,\r\n                updatedAt: new Date().toISOString()\r\n            };\r\n\r\n            Object.keys(finalData).forEach(key => (finalData as any)[key] === undefined && delete (finalData as any)[key]);\r\n\r\n            await updateDoc(projectRef, finalData);\r\n            updateProgress();\r\n        } catch (error) {\r\n            console.error(\"Error updating project:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Elimina un proyecto y actualiza estad├¡sticas del usuario at├│micamente.\r\n     * \r\n     * Proceso:\r\n     * 1. Elimina todos los archivos del Storage (portada y galer├¡a)\r\n     * 2. Elimina el documento del proyecto\r\n     * 3. Decrementa el contador de proyectos del usuario\r\n     * \r\n     * @param userId - ID del usuario propietario\r\n     * @param projectId - ID del proyecto a eliminar\r\n     */\r\n    deleteProject: async (userId: string, projectId: string): Promise<void> => {\r\n        try {\r\n            const deleteFolder = async (path: string) => {\r\n                const folderRef = ref(storage, path);\r\n                try {\r\n                    const list = await listAll(folderRef);\r\n                    await Promise.all(list.items.map(item => deleteObject(item)));\r\n                    await Promise.all(list.prefixes.map(prefix => deleteFolder(prefix.fullPath)));\r\n                } catch (err) {\r\n                    console.warn(`Storage cleanup warning for ${path}:`, err);\r\n                }\r\n            };\r\n            await deleteFolder(`users/${userId}/projects/${projectId}`);\r\n\r\n            const batch = writeBatch(db);\r\n            const projectRef = doc(db, 'projects', projectId);\r\n            batch.delete(projectRef);\r\n\r\n            const userRef = doc(db, 'users', userId);\r\n            batch.update(userRef, { 'stats.projects': increment(-1) });\r\n\r\n            await batch.commit();\r\n        } catch (error) {\r\n            console.error(\"Error deleting project:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene proyectos paginados para el feed global.\r\n     * \r\n     * Usa paginaci├│n basada en cursor para mejor rendimiento con grandes datasets.\r\n     * \r\n     * @param lastDoc - ├Ültimo documento de la p├ígina anterior (null para la primera p├ígina)\r\n     * @param pageSize - Cantidad de proyectos por p├ígina\r\n     * @returns Resultado paginado con datos, cursor y flag hasMore\r\n     */\r\n    getProjects: async (lastDoc: QueryDocumentSnapshot<DocumentData> | null = null, pageSize: number = 20): Promise<PaginatedResult<PortfolioItem>> => {\r\n        try {\r\n            let q = query(collection(db, 'projects'), orderBy('createdAt', 'desc'), limit(pageSize));\r\n\r\n            if (lastDoc) {\r\n                q = query(collection(db, 'projects'), orderBy('createdAt', 'desc'), startAfter(lastDoc), limit(pageSize));\r\n            }\r\n\r\n            const snapshot = await getDocs(q);\r\n            const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as PortfolioItem));\r\n\r\n            return {\r\n                data,\r\n                lastDoc: snapshot.docs[snapshot.docs.length - 1] || null,\r\n                hasMore: snapshot.docs.length === pageSize\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Error fetching paginated projects:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene todos los proyectos de un usuario espec├¡fico.\r\n     * \r\n     * @param userId - ID del usuario (authorId)\r\n     * @param limitCount - L├¡mite opcional de resultados\r\n     * @returns Array de proyectos ordenados por fecha de creaci├│n\r\n     */\r\n    getUserProjects: async (userId: string, limitCount?: number): Promise<PortfolioItem[]> => {\r\n        try {\r\n            const constraints: any[] = [where('authorId', '==', userId), orderBy('createdAt', 'desc')];\r\n            if (limitCount) constraints.push(limit(limitCount));\r\n\r\n            const q = query(collection(db, 'projects'), ...constraints);\r\n            const snapshot = await getDocs(q);\r\n\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as PortfolioItem));\r\n        } catch (error) {\r\n            console.error(\"Error fetching user projects:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un proyecto por su ID.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @returns El proyecto encontrado o null si no existe\r\n     */\r\n    getProject: async (projectId: string): Promise<PortfolioItem | null> => {\r\n        try {\r\n            const docRef = doc(db, 'projects', projectId);\r\n            const docSnap = await getDoc(docRef);\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() } as PortfolioItem;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching project:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene un proyecto por su slug (URL amigable).\r\n     * Si no encuentra por slug, intenta buscar por ID (backward compatibility).\r\n     * \r\n     * @param slugOrId - Slug del proyecto o ID de Firebase\r\n     * @returns El proyecto encontrado o null si no existe\r\n     */\r\n    getProjectBySlug: async (slugOrId: string): Promise<PortfolioItem | null> => {\r\n        try {\r\n            // First try to find by slug\r\n            const slugQuery = query(collection(db, 'projects'), where('slug', '==', slugOrId), limit(1));\r\n            const slugSnapshot = await getDocs(slugQuery);\r\n\r\n            if (!slugSnapshot.empty) {\r\n                const doc = slugSnapshot.docs[0];\r\n                return { id: doc.id, ...doc.data() } as PortfolioItem;\r\n            }\r\n\r\n            // Fallback: try to find by ID (for old projects without slug)\r\n            const docRef = doc(db, 'projects', slugOrId);\r\n            const docSnap = await getDoc(docRef);\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() } as PortfolioItem;\r\n            }\r\n\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching project by slug:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene m├║ltiples proyectos por sus IDs.\r\n     * \r\n     * Maneja el l├¡mite de 10 items de Firestore para queries 'in'\r\n     * dividiendo la consulta en chunks.\r\n     * \r\n     * @param ids - Array de IDs de proyectos\r\n     * @returns Array de proyectos encontrados\r\n     */\r\n    getProjectsByIds: async (ids: string[]): Promise<PortfolioItem[]> => {\r\n        if (!ids || ids.length === 0) return [];\r\n\r\n        const chunks = [];\r\n        for (let i = 0; i < ids.length; i += 10) {\r\n            chunks.push(ids.slice(i, i + 10));\r\n        }\r\n\r\n        try {\r\n            const { documentId } = await import('firebase/firestore');\r\n            const results = await Promise.all(chunks.map(async chunk => {\r\n                const q = query(collection(db, 'projects'), where(documentId(), 'in', chunk));\r\n                const snapshot = await getDocs(q);\r\n                return snapshot.docs.map(d => ({ id: d.id, ...d.data() } as PortfolioItem));\r\n            }));\r\n\r\n            return results.flat();\r\n        } catch (error) {\r\n            console.error(\"Error fetching projects by IDs:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene los proyectos m├ís recientes para el feed global.\r\n     * \r\n     * @param limitCount - Cantidad m├íxima de proyectos (default: 20)\r\n     * @returns Array de proyectos ordenados por fecha descendente\r\n     */\r\n    getRecentProjects: async (limitCount: number = 20): Promise<PortfolioItem[]> => {\r\n        try {\r\n            const q = query(collection(db, 'projects'), orderBy('createdAt', 'desc'), limit(limitCount));\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as PortfolioItem));\r\n        } catch (error) {\r\n            console.error(\"Error fetching recent projects:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Listener en tiempo real para los proyectos de un usuario.\r\n     * \r\n     * Se actualiza autom├íticamente cuando hay cambios en Firestore.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @param callback - Funci├│n que recibe el array actualizado de proyectos\r\n     * @returns Funci├│n para cancelar la suscripci├│n\r\n     */\r\n    listenToUserProjects: (userId: string, callback: (projects: PortfolioItem[]) => void) => {\r\n        const q = query(collection(db, 'projects'), where('authorId', '==', userId), orderBy('createdAt', 'desc'));\r\n\r\n        return onSnapshot(q, (snapshot) => {\r\n            const projects = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as PortfolioItem));\r\n            callback(projects);\r\n        });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\projects\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\projects\\likes.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":134,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Sistema de Likes para Proyectos\r\n * \r\n * M├│dulo que maneja vistas y likes de proyectos de portafolio.\r\n * Incluye notificaciones autom├íticas al autor del proyecto.\r\n * \r\n * @module services/projects/likes\r\n */\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    deleteDoc,\r\n    updateDoc,\r\n    writeBatch,\r\n    increment\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\n\r\nexport const projectsLikes = {\r\n    /**\r\n     * Incrementa el contador de vistas de un proyecto.\r\n     * \r\n     * Se llama autom├íticamente cuando alguien visita un proyecto.\r\n     * Actualiza tanto 'stats.viewCount' como 'views' para compatibilidad.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     */\r\n    incrementProjectView: async (projectId: string): Promise<void> => {\r\n        try {\r\n            const ref = doc(db, 'projects', projectId);\r\n            await updateDoc(ref, {\r\n                'stats.viewCount': increment(1),\r\n                'views': increment(1)\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error incrementing view:\", error);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Alterna el like de un proyecto.\r\n     * \r\n     * Si el usuario ya dio like, lo quita. Si no, lo agrega.\r\n     * Env├¡a/elimina notificaci├│n al autor autom├íticamente (no bloqueante).\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param userId - ID del usuario que da/quita like\r\n     * @returns true si ahora tiene like, false si se quit├│\r\n     */\r\n    toggleProjectLike: async (projectId: string, userId: string): Promise<boolean> => {\r\n        try {\r\n            const projectRef = doc(db, 'projects', projectId);\r\n            const likeRef = doc(db, 'projects', projectId, 'likes', userId);\r\n            const userRef = doc(db, 'users', userId);\r\n\r\n            const [projectSnap, likeSnap, userSnap] = await Promise.all([\r\n                getDoc(projectRef),\r\n                getDoc(likeRef),\r\n                getDoc(userRef)\r\n            ]);\r\n\r\n            const projectData = projectSnap.data();\r\n            const userData = userSnap.data();\r\n            const isLiked = likeSnap.exists();\r\n\r\n            const batch = writeBatch(db);\r\n\r\n            if (isLiked) {\r\n                // UNLIKE\r\n                batch.delete(likeRef);\r\n                batch.update(projectRef, {\r\n                    'stats.likeCount': increment(-1),\r\n                    'likes': increment(-1)\r\n                });\r\n            } else {\r\n                // LIKE\r\n                batch.set(likeRef, {\r\n                    userId,\r\n                    createdAt: new Date().toISOString()\r\n                });\r\n                batch.update(projectRef, {\r\n                    'stats.likeCount': increment(1),\r\n                    'likes': increment(1)\r\n                });\r\n            }\r\n\r\n            await batch.commit();\r\n\r\n            // Handle notifications AFTER the main batch (non-blocking)\r\n            if (projectData && projectData.authorId && projectData.authorId !== userId) {\r\n                const notifId = `like_${projectId}_${userId}`;\r\n                const notifRef = doc(db, 'users', projectData.authorId, 'notifications', notifId);\r\n\r\n                try {\r\n                    if (isLiked) {\r\n                        await deleteDoc(notifRef);\r\n                    } else {\r\n                        await setDoc(notifRef, {\r\n                            type: 'like',\r\n                            user: userData?.name || 'Alguien',\r\n                            avatar: userData?.avatar || '',\r\n                            content: `le gust├│ tu proyecto \"${projectData.title || 'Sin t├¡tulo'}\"`,\r\n                            image: projectData.image || '',\r\n                            time: new Date().toISOString(),\r\n                            read: false,\r\n                            link: `/portfolio/${projectId}`\r\n                        });\r\n                    }\r\n                } catch (notifError) {\r\n                    console.warn('Notification operation failed (non-critical):', notifError);\r\n                }\r\n            }\r\n\r\n            return !isLiked;\r\n        } catch (error) {\r\n            console.error(\"Error toggling like:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Verifica si un usuario ha dado like a un proyecto.\r\n     * \r\n     * @param projectId - ID del proyecto\r\n     * @param userId - ID del usuario\r\n     * @returns true si el usuario dio like, false si no\r\n     */\r\n    getProjectLikeStatus: async (projectId: string, userId: string): Promise<boolean> => {\r\n        try {\r\n            const likeRef = doc(db, 'projects', projectId, 'likes', userId);\r\n            const snap = await getDoc(likeRef);\r\n            return snap.exists();\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\reports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\users\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8414,8417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8414,8417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Operaciones de Autenticaci├│n de Usuario\r\n * \r\n * M├│dulo que maneja operaciones de cuenta: cambio de email, contrase├▒a y eliminaci├│n.\r\n * Requiere re-autenticaci├│n para operaciones sensibles seg├║n las reglas de Firebase.\r\n * \r\n * @module services/users/auth\r\n */\r\nimport {\r\n    updateEmail,\r\n    updatePassword,\r\n    EmailAuthProvider,\r\n    reauthenticateWithCredential,\r\n    deleteUser,\r\n    sendEmailVerification,\r\n    sendPasswordResetEmail\r\n} from 'firebase/auth';\r\nimport { doc, deleteDoc, updateDoc } from 'firebase/firestore';\r\nimport { auth, db } from '../../../lib/firebase';\r\n\r\nexport const usersAuth = {\r\n    /**\r\n     * Re-autentica al usuario actual con su contrase├▒a.\r\n     * Requerido por Firebase antes de operaciones sensibles como cambio de email/password o eliminaci├│n.\r\n     * \r\n     * @param password - Contrase├▒a actual del usuario\r\n     * @throws Error si la re-autenticaci├│n falla\r\n     */\r\n    reauthenticate: async (password: string): Promise<void> => {\r\n        const user = auth.currentUser;\r\n        if (!user || !user.email) {\r\n            throw new Error('No hay usuario autenticado');\r\n        }\r\n\r\n        const credential = EmailAuthProvider.credential(user.email, password);\r\n        await reauthenticateWithCredential(user, credential);\r\n    },\r\n\r\n    /**\r\n     * Actualiza el email del usuario.\r\n     * \r\n     * Actualiza tanto en Firebase Auth como en Firestore.\r\n     * Requiere re-autenticaci├│n previa si la sesi├│n es antigua.\r\n     * \r\n     * @param newEmail - Nuevo correo electr├│nico\r\n     * @param currentPassword - Contrase├▒a para re-autenticaci├│n\r\n     * @throws Error si el email est├í en uso o la contrase├▒a es incorrecta\r\n     */\r\n    updateUserEmail: async (newEmail: string, currentPassword: string): Promise<void> => {\r\n        const user = auth.currentUser;\r\n        if (!user) {\r\n            throw new Error('No hay usuario autenticado');\r\n        }\r\n\r\n        // Re-autenticar primero\r\n        await usersAuth.reauthenticate(currentPassword);\r\n\r\n        // Actualizar en Firebase Auth\r\n        await updateEmail(user, newEmail);\r\n\r\n        // Actualizar en Firestore\r\n        const userRef = doc(db, 'users', user.uid);\r\n        await updateDoc(userRef, { email: newEmail });\r\n\r\n        // Enviar email de verificaci├│n al nuevo correo\r\n        await sendEmailVerification(user);\r\n    },\r\n\r\n    /**\r\n     * Actualiza la contrase├▒a del usuario.\r\n     * \r\n     * @param currentPassword - Contrase├▒a actual para re-autenticaci├│n\r\n     * @param newPassword - Nueva contrase├▒a (m├¡nimo 6 caracteres)\r\n     * @throws Error si la contrase├▒a actual es incorrecta o la nueva es muy d├®bil\r\n     */\r\n    updateUserPassword: async (currentPassword: string, newPassword: string): Promise<void> => {\r\n        const user = auth.currentUser;\r\n        if (!user) {\r\n            throw new Error('No hay usuario autenticado');\r\n        }\r\n\r\n        if (newPassword.length < 8) {\r\n            throw new Error('La contrase├▒a debe tener al menos 8 caracteres');\r\n        }\r\n\r\n        if (!/[A-Z]/.test(newPassword)) {\r\n            throw new Error('La contrase├▒a debe contener al menos una may├║scula');\r\n        }\r\n\r\n        if (!/[0-9]/.test(newPassword)) {\r\n            throw new Error('La contrase├▒a debe contener al menos un n├║mero');\r\n        }\r\n\r\n        if (!/[^A-Za-z0-9]/.test(newPassword)) {\r\n            throw new Error('La contrase├▒a debe contener al menos un s├¡mbolo');\r\n        }\r\n\r\n        // Re-autenticar primero\r\n        await usersAuth.reauthenticate(currentPassword);\r\n\r\n        // Actualizar contrase├▒a\r\n        await updatePassword(user, newPassword);\r\n    },\r\n\r\n    /**\r\n     * Elimina la cuenta del usuario y TODO su contenido.\r\n     * \r\n     * Elimina en orden:\r\n     * 1. Todos los proyectos del usuario (incluyendo im├ígenes)\r\n     * 2. Todos los art├¡culos del usuario (incluyendo im├ígenes)\r\n     * 3. Todas las colecciones del usuario\r\n     * 4. Carpeta completa del usuario en Storage\r\n     * 5. Documento de usuario de Firestore\r\n     * 6. Usuario de Firebase Auth\r\n     * \r\n     * @param password - Contrase├▒a para confirmaci├│n\r\n     * @throws Error si la contrase├▒a es incorrecta\r\n     */\r\n    deleteUserAccount: async (password: string): Promise<void> => {\r\n        const user = auth.currentUser;\r\n        if (!user) {\r\n            throw new Error('No hay usuario autenticado');\r\n        }\r\n\r\n        // Re-autenticar primero\r\n        await usersAuth.reauthenticate(password);\r\n\r\n        const userId = user.uid;\r\n\r\n        try {\r\n            // 1. Eliminar todos los proyectos del usuario\r\n            const { collection, getDocs, query, where, writeBatch } = await import('firebase/firestore');\r\n            const { ref, listAll, deleteObject } = await import('firebase/storage');\r\n            const { storage } = await import('../../../lib/firebase');\r\n\r\n            const projectsQuery = query(collection(db, 'projects'), where('authorId', '==', userId));\r\n            const projectsSnapshot = await getDocs(projectsQuery);\r\n\r\n            for (const projectDoc of projectsSnapshot.docs) {\r\n                const projectId = projectDoc.id;\r\n                // Eliminar im├ígenes del proyecto\r\n                try {\r\n                    const projectStorageRef = ref(storage, `users/${userId}/projects/${projectId}`);\r\n                    const projectFiles = await listAll(projectStorageRef);\r\n                    await Promise.all(projectFiles.items.map(item => deleteObject(item)));\r\n                    // Eliminar subcarpetas (galer├¡a)\r\n                    for (const prefix of projectFiles.prefixes) {\r\n                        const subFiles = await listAll(prefix);\r\n                        await Promise.all(subFiles.items.map(item => deleteObject(item)));\r\n                    }\r\n                } catch (storageError) {\r\n                    console.warn(`Could not delete project storage for ${projectId}:`, storageError);\r\n                }\r\n            }\r\n\r\n            // Eliminar documentos de proyectos en batch\r\n            const projectsBatch = writeBatch(db);\r\n            projectsSnapshot.docs.forEach(doc => projectsBatch.delete(doc.ref));\r\n            if (projectsSnapshot.docs.length > 0) {\r\n                await projectsBatch.commit();\r\n            }\r\n\r\n            // 2. Eliminar todos los art├¡culos del usuario\r\n            const articlesQuery = query(collection(db, 'articles'), where('authorId', '==', userId));\r\n            const articlesSnapshot = await getDocs(articlesQuery);\r\n\r\n            for (const articleDoc of articlesSnapshot.docs) {\r\n                const articleId = articleDoc.id;\r\n                const articleData = articleDoc.data();\r\n                // Eliminar imagen de portada del art├¡culo\r\n                if (articleData.coverImage) {\r\n                    try {\r\n                        const imageRef = ref(storage, articleData.coverImage);\r\n                        await deleteObject(imageRef);\r\n                    } catch (storageError) {\r\n                        console.warn(`Could not delete article image for ${articleId}:`, storageError);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Eliminar documentos de art├¡culos en batch\r\n            const articlesBatch = writeBatch(db);\r\n            articlesSnapshot.docs.forEach(doc => articlesBatch.delete(doc.ref));\r\n            if (articlesSnapshot.docs.length > 0) {\r\n                await articlesBatch.commit();\r\n            }\r\n\r\n            // 3. Eliminar todas las colecciones del usuario\r\n            const collectionsQuery = query(collection(db, 'collections'), where('userId', '==', userId));\r\n            const collectionsSnapshot = await getDocs(collectionsQuery);\r\n\r\n            const collectionsBatch = writeBatch(db);\r\n            collectionsSnapshot.docs.forEach(doc => collectionsBatch.delete(doc.ref));\r\n            if (collectionsSnapshot.docs.length > 0) {\r\n                await collectionsBatch.commit();\r\n            }\r\n\r\n            // 4. Eliminar carpeta completa del usuario en Storage\r\n            try {\r\n                const userStorageRef = ref(storage, `users/${userId}`);\r\n                const allFiles = await listAll(userStorageRef);\r\n                await Promise.all(allFiles.items.map(item => deleteObject(item)));\r\n                // Eliminar subcarpetas\r\n                for (const prefix of allFiles.prefixes) {\r\n                    const deleteFolder = async (folderRef: any) => {\r\n                        const folderFiles = await listAll(folderRef);\r\n                        await Promise.all(folderFiles.items.map(item => deleteObject(item)));\r\n                        for (const subPrefix of folderFiles.prefixes) {\r\n                            await deleteFolder(subPrefix);\r\n                        }\r\n                    };\r\n                    await deleteFolder(prefix);\r\n                }\r\n            } catch (storageError) {\r\n                console.warn('Could not fully clean user storage:', storageError);\r\n            }\r\n\r\n            // 5. Eliminar documento de usuario de Firestore\r\n            const userRef = doc(db, 'users', userId);\r\n            await deleteDoc(userRef);\r\n\r\n            // 6. Eliminar usuario de Firebase Auth\r\n            await deleteUser(user);\r\n\r\n        } catch (error) {\r\n            console.error('Error during account deletion:', error);\r\n            throw new Error('Error al eliminar la cuenta. Algunos datos pueden no haberse eliminado completamente.');\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Env├¡a un email de verificaci├│n al usuario actual.\r\n     */\r\n    sendVerificationEmail: async (): Promise<void> => {\r\n        const user = auth.currentUser;\r\n        if (!user) {\r\n            throw new Error('No hay usuario autenticado');\r\n        }\r\n        await sendEmailVerification(user);\r\n    },\r\n\r\n    /**\r\n     * Env├¡a un email de recuperaci├│n de contrase├▒a.\r\n     * \r\n     * @param email - Email del usuario que quiere recuperar su contrase├▒a\r\n     * @throws Error si el email no est├í registrado\r\n     */\r\n    resetPassword: async (email: string): Promise<void> => {\r\n        if (!email || !email.trim()) {\r\n            throw new Error('El email es requerido');\r\n        }\r\n        await sendPasswordResetEmail(auth, email.trim());\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\users\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserProfile' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Servicio de Usuarios\r\n * \r\n * Re-exporta todas las operaciones de usuario desde m├│dulos separados.\r\n * Mantiene compatibilidad con imports existentes.\r\n * \r\n * @module services/users\r\n */\r\nimport { usersProfile, UserProfile } from './profile';\r\nimport { usersSocial } from './social';\r\nimport { usersAuth } from './auth';\r\n\r\n/**\r\n * Servicio combinado que integra todos los sub-m├│dulos de usuarios\r\n */\r\nexport const usersService = {\r\n    // Operaciones de Perfil\r\n    getUserProfile: usersProfile.getUserProfile,\r\n    updateUserProfile: usersProfile.updateUserProfile,\r\n    initializeUserProfile: usersProfile.initializeUserProfile,\r\n    getUserProfileByUsername: usersProfile.getUserProfileByUsername,\r\n    checkUsernameAvailability: usersProfile.checkUsernameAvailability,\r\n    listenToUserProfile: usersProfile.listenToUserProfile,\r\n    listenToUserProfileByUsername: usersProfile.listenToUserProfileByUsername,\r\n    getUserProfileByName: usersProfile.getUserProfileByName,\r\n    getAllUsers: usersProfile.getAllUsers,\r\n    getArtistDirectory: usersProfile.getArtistDirectory,\r\n\r\n    // Operaciones Sociales\r\n    getFollowers: usersSocial.getFollowers,\r\n    getFollowing: usersSocial.getFollowing,\r\n    subscribeToUser: usersSocial.subscribeToUser,\r\n    unsubscribeFromUser: usersSocial.unsubscribeFromUser,\r\n    getSubscriptionStatus: usersSocial.getSubscriptionStatus,\r\n    // Alias sem├ínticos para Follow\r\n    followUser: usersSocial.followUser,\r\n    unfollowUser: usersSocial.unfollowUser,\r\n    isFollowing: usersSocial.isFollowing,\r\n    // Otros\r\n    getChatMessages: usersSocial.getChatMessages,\r\n    sendMessage: usersSocial.sendMessage,\r\n    incrementProfileViews: usersSocial.incrementProfileViews,\r\n    getTotalProjectLikes: usersSocial.getTotalProjectLikes,\r\n\r\n    // Operaciones de Autenticaci├│n\r\n    updateUserEmail: usersAuth.updateUserEmail,\r\n    updateUserPassword: usersAuth.updateUserPassword,\r\n    deleteUserAccount: usersAuth.deleteUserAccount,\r\n    sendVerificationEmail: usersAuth.sendVerificationEmail,\r\n    resetPassword: usersAuth.resetPassword\r\n};\r\n\r\n// Re-exportar sub-m├│dulos y tipos\r\nexport { usersProfile } from './profile';\r\nexport { usersSocial } from './social';\r\nexport { usersAuth } from './auth';\r\nexport type { UserProfile } from './profile';\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\users\\profile.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3516,3519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3516,3519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Operaciones de Perfil de Usuario\r\n * \r\n * M├│dulo que maneja las operaciones CRUD para perfiles de usuario.\r\n * Incluye b├║squeda por ID, username y nombre, adem├ís de listeners en tiempo real.\r\n * \r\n * @module services/users/profile\r\n */\r\nimport {\r\n    collection,\r\n    query,\r\n    getDocs,\r\n    getDoc,\r\n    doc,\r\n    setDoc,\r\n    where,\r\n    limit,\r\n    updateDoc,\r\n    onSnapshot\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\nimport { User } from '../../../types';\r\n\r\nexport type UserProfile = User | null;\r\n\r\n/**\r\n * Funci├│n recursiva para eliminar valores undefined de objetos.\r\n * Necesario para Firestore que no acepta undefined.\r\n */\r\nconst sanitizeData = (obj: unknown): unknown => {\r\n    if (Array.isArray(obj)) {\r\n        return obj.map(v => sanitizeData(v)).filter(v => v !== undefined);\r\n    }\r\n    if (obj !== null && typeof obj === 'object') {\r\n        return Object.entries(obj as Record<string, unknown>).reduce((acc, [key, value]) => {\r\n            const sanitizedValue = sanitizeData(value);\r\n            if (sanitizedValue !== undefined) {\r\n                acc[key] = sanitizedValue;\r\n            }\r\n            return acc;\r\n        }, {} as Record<string, unknown>);\r\n    }\r\n    return obj;\r\n};\r\n\r\nexport const usersProfile = {\r\n    /**\r\n     * Obtiene perfil de usuario por ID.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @returns Perfil del usuario o null si no existe\r\n     */\r\n    getUserProfile: async (userId: string): Promise<UserProfile> => {\r\n        try {\r\n            if (!userId) return null;\r\n            const docRef = doc(db, 'users', userId);\r\n            const docSnap = await getDoc(docRef);\r\n\r\n            if (docSnap.exists()) {\r\n                return { id: docSnap.id, ...docSnap.data() } as User;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(\"Error fetching user profile:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Actualiza el perfil de un usuario.\r\n     * \r\n     * Sanitiza los datos autom├íticamente para eliminar valores undefined.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @param data - Datos parciales a actualizar\r\n     */\r\n    updateUserProfile: async (userId: string, data: Partial<User>): Promise<void> => {\r\n        try {\r\n            const userRef = doc(db, 'users', userId);\r\n            const sanitizedData = sanitizeData(data);\r\n            await updateDoc(userRef, sanitizedData);\r\n        } catch (error) {\r\n            console.error(\"Error updating user profile:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Asegura que un perfil de usuario existe en Firestore.\r\n     * \r\n     * Si no existe, crea uno nuevo con valores por defecto.\r\n     * Ideal para Google Auth o inicializaci├│n desde App.tsx.\r\n     * \r\n     * @param user - Objeto de usuario de Firebase Auth\r\n     * @param additionalData - Datos adicionales para el perfil\r\n     * @returns Perfil existente o reci├®n creado\r\n     */\r\n    initializeUserProfile: async (user: { uid: string; displayName?: string | null; email?: string | null; photoURL?: string | null }, additionalData: Partial<User> = {}): Promise<UserProfile> => {\r\n        try {\r\n            const userRef = doc(db, 'users', user.uid);\r\n            const userSnap = await getDoc(userRef);\r\n\r\n            if (userSnap.exists()) {\r\n                return { id: userSnap.id, ...userSnap.data() } as User;\r\n            }\r\n\r\n            const newUser: Record<string, any> = {\r\n                name: additionalData.name || user.displayName || 'Usuario',\r\n                email: user.email || '',\r\n                avatar: additionalData.avatar || user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || 'U')}`,\r\n                role: 'Creative Member',\r\n                location: 'Latam',\r\n                firstName: additionalData.firstName || '',\r\n                lastName: additionalData.lastName || '',\r\n                country: additionalData.country || '',\r\n                city: additionalData.city || '',\r\n                isProfileComplete: false,\r\n                createdAt: new Date().toISOString(),\r\n                ...additionalData\r\n            };\r\n\r\n            Object.keys(newUser).forEach(key => newUser[key] === undefined && delete newUser[key]);\r\n\r\n            await setDoc(userRef, newUser);\r\n            return { id: user.uid, uid: user.uid, ...newUser } as User;\r\n        } catch (error) {\r\n            console.error(\"Error initializing user profile:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene perfil de usuario por username.\r\n     * \r\n     * @param username - Username a buscar\r\n     * @returns Perfil o null si no existe\r\n     */\r\n    getUserProfileByUsername: async (username: string) => {\r\n        try {\r\n            if (!username) return null;\r\n            const q = query(collection(db, 'users'), where('username', '==', username), limit(1));\r\n            const querySnapshot = await getDocs(q);\r\n            if (!querySnapshot.empty) {\r\n                const doc = querySnapshot.docs[0];\r\n                return { id: doc.id, ...doc.data() };\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching user profile by username:', error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Verifica si un username est├í disponible.\r\n     * \r\n     * @param username - Username a verificar\r\n     * @returns true si est├í disponible, false si ya existe\r\n     */\r\n    checkUsernameAvailability: async (username: string): Promise<boolean> => {\r\n        try {\r\n            if (!username) return false;\r\n            const q = query(collection(db, 'users'), where('username', '==', username), limit(1));\r\n            const querySnapshot = await getDocs(q);\r\n            return querySnapshot.empty;\r\n        } catch (error) {\r\n            console.error(\"Error checking username availability:\", error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Listener en tiempo real para perfil de usuario por ID.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @param callback - Funci├│n que recibe el perfil actualizado\r\n     * @returns Funci├│n para cancelar la suscripci├│n\r\n     */\r\n    listenToUserProfile: (userId: string, callback: (user: UserProfile) => void) => {\r\n        if (!userId) return () => { };\r\n        const docRef = doc(db, 'users', userId);\r\n        return onSnapshot(docRef, (docSnap) => {\r\n            if (docSnap.exists()) {\r\n                callback({ id: docSnap.id, ...docSnap.data() } as User);\r\n            } else {\r\n                callback(null);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Listener en tiempo real para perfil de usuario por username.\r\n     * \r\n     * @param username - Username del usuario\r\n     * @param callback - Funci├│n que recibe el perfil actualizado\r\n     * @returns Funci├│n para cancelar la suscripci├│n\r\n     */\r\n    listenToUserProfileByUsername: (username: string, callback: (user: UserProfile) => void) => {\r\n        if (!username) return () => { };\r\n        const q = query(collection(db, 'users'), where('username', '==', username), limit(1));\r\n        return onSnapshot(q, (querySnapshot) => {\r\n            if (!querySnapshot.empty) {\r\n                const doc = querySnapshot.docs[0];\r\n                callback({ id: doc.id, ...doc.data() } as User);\r\n            } else {\r\n                callback(null);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Obtiene perfil de usuario por nombre.\r\n     * \r\n     * ├Ütil para compatibilidad con datos legacy.\r\n     * \r\n     * @param name - Nombre del usuario\r\n     * @returns Perfil o null si no existe\r\n     */\r\n    getUserProfileByName: async (name: string) => {\r\n        try {\r\n            if (!name || name === 'Unknown User') return null;\r\n            const q = query(collection(db, 'users'), where('name', '==', name), limit(1));\r\n            const querySnapshot = await getDocs(q);\r\n            if (!querySnapshot.empty) {\r\n                const doc = querySnapshot.docs[0];\r\n                return { id: doc.id, ...doc.data() };\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching user profile by name:', error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene todos los usuarios.\r\n     * \r\n     * @returns Array de todos los usuarios\r\n     */\r\n    getAllUsers: async (): Promise<User[]> => {\r\n        try {\r\n            const q = query(collection(db, 'users'));\r\n            const snapshot = await getDocs(q);\r\n            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as User));\r\n        } catch (error) {\r\n            console.error(\"Error fetching all users:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene el directorio de artistas (placeholder).\r\n     * \r\n     * @returns Array vac├¡o (por implementar)\r\n     */\r\n    getArtistDirectory: async (): Promise<User[]> => {\r\n        return [];\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\users\\social.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'friendId' is defined but never used. Allowed unused args must match /^_/u.","line":179,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'friendId' is defined but never used. Allowed unused args must match /^_/u.","line":187,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":187,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'text' is defined but never used. Allowed unused args must match /^_/u.","line":187,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":187,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Operaciones Sociales de Usuario\r\n * \r\n * M├│dulo que maneja followers, following, suscripciones,\r\n * chat (placeholder) y estad├¡sticas de perfil.\r\n * \r\n * @module services/users/social\r\n */\r\nimport {\r\n    collection,\r\n    query,\r\n    getDocs,\r\n    getDoc,\r\n    doc,\r\n    where,\r\n    updateDoc,\r\n    increment,\r\n    addDoc,\r\n    writeBatch\r\n} from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\nimport { usersProfile } from './profile';\r\n\r\nexport const usersSocial = {\r\n    /**\r\n     * Obtiene la lista de IDs de seguidores.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @returns Array de IDs de usuarios que lo siguen\r\n     */\r\n    getFollowers: async (userId: string): Promise<string[]> => {\r\n        try {\r\n            const followersRef = collection(db, 'users', userId, 'followers');\r\n            const snapshot = await getDocs(followersRef);\r\n            return snapshot.docs.map(doc => doc.id);\r\n        } catch (error) {\r\n            console.error(\"Error fetching followers:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Obtiene la lista de IDs de usuarios que sigue.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @returns Array de IDs de usuarios que sigue\r\n     */\r\n    getFollowing: async (userId: string): Promise<string[]> => {\r\n        try {\r\n            const followingRef = collection(db, 'users', userId, 'following');\r\n            const snapshot = await getDocs(followingRef);\r\n            return snapshot.docs.map(doc => doc.id);\r\n        } catch (error) {\r\n            console.error(\"Error fetching following:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sigue a un usuario.\r\n     * \r\n     * Proceso at├│mico con batch:\r\n     * 1. Agrega al follower en la subcolecci├│n del target\r\n     * 2. Agrega al following en la subcolecci├│n del current\r\n     * 3. Incrementa contadores de ambos usuarios\r\n     * 4. Env├¡a notificaci├│n al usuario seguido\r\n     * \r\n     * @param targetUserId - ID del usuario a seguir\r\n     * @param currentUserId - ID del usuario que sigue\r\n     */\r\n    subscribeToUser: async (targetUserId: string, currentUserId: string): Promise<void> => {\r\n        try {\r\n            const currentUserProfile = await usersProfile.getUserProfile(currentUserId);\r\n\r\n            const followerData = {\r\n                since: new Date().toISOString(),\r\n                followerId: currentUserId,\r\n                followerName: currentUserProfile?.name || 'Usuario',\r\n                followerUsername: currentUserProfile?.username || '',\r\n                followerAvatar: currentUserProfile?.avatar || ''\r\n            };\r\n\r\n            const batch = writeBatch(db);\r\n\r\n            // Add to target's followers\r\n            const followerRef = doc(db, 'users', targetUserId, 'followers', currentUserId);\r\n            batch.set(followerRef, followerData);\r\n\r\n            // Add to current's following\r\n            const followingRef = doc(db, 'users', currentUserId, 'following', targetUserId);\r\n            batch.set(followingRef, {\r\n                since: new Date().toISOString(),\r\n                followingId: targetUserId\r\n            });\r\n\r\n            // Update Counters\r\n            const targetUserRef = doc(db, 'users', targetUserId);\r\n            batch.update(targetUserRef, { 'stats.followers': increment(1) });\r\n\r\n            const currentUserRef = doc(db, 'users', currentUserId);\r\n            batch.update(currentUserRef, { 'stats.following': increment(1) });\r\n\r\n            await batch.commit();\r\n\r\n            // Create Notification\r\n            try {\r\n                await addDoc(collection(db, 'users', targetUserId, 'notifications'), {\r\n                    type: 'follow',\r\n                    user: currentUserProfile?.name || 'Alguien',\r\n                    avatar: currentUserProfile?.avatar || '',\r\n                    content: 'ha comenzado a seguirte',\r\n                    time: new Date().toISOString(),\r\n                    read: false,\r\n                    link: `/user/${currentUserProfile?.username || currentUserId}`\r\n                });\r\n            } catch (notifError) {\r\n                console.error(\"Error sending follow notification:\", notifError);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error subscribing:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Deja de seguir a un usuario.\r\n     * \r\n     * Proceso at├│mico con batch que revierte subscribeToUser.\r\n     * \r\n     * @param targetUserId - ID del usuario a dejar de seguir\r\n     * @param currentUserId - ID del usuario que deja de seguir\r\n     */\r\n    unsubscribeFromUser: async (targetUserId: string, currentUserId: string): Promise<void> => {\r\n        try {\r\n            const batch = writeBatch(db);\r\n\r\n            const followerRef = doc(db, 'users', targetUserId, 'followers', currentUserId);\r\n            batch.delete(followerRef);\r\n\r\n            const followingRef = doc(db, 'users', currentUserId, 'following', targetUserId);\r\n            batch.delete(followingRef);\r\n\r\n            const targetUserRef = doc(db, 'users', targetUserId);\r\n            batch.update(targetUserRef, { 'stats.followers': increment(-1) });\r\n\r\n            const currentUserRef = doc(db, 'users', currentUserId);\r\n            batch.update(currentUserRef, { 'stats.following': increment(-1) });\r\n\r\n            await batch.commit();\r\n        } catch (error) {\r\n            console.error(\"Error unsubscribing:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Verifica si el usuario actual sigue al usuario objetivo.\r\n     * \r\n     * @param targetUserId - ID del usuario objetivo\r\n     * @param currentUserId - ID del usuario actual\r\n     * @returns true si lo sigue, false si no\r\n     */\r\n    getSubscriptionStatus: async (targetUserId: string, currentUserId: string): Promise<boolean> => {\r\n        try {\r\n            const docRef = doc(db, 'users', targetUserId, 'followers', currentUserId);\r\n            const snap = await getDoc(docRef);\r\n            return snap.exists();\r\n        } catch (error) {\r\n            console.error(\"Error checking subscription:\", error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    // --- M├®todos de Chat (Placeholder) ---\r\n    /**\r\n     * Obtiene mensajes de chat (placeholder).\r\n     * @returns Array vac├¡o (por implementar)\r\n     */\r\n    getChatMessages: async (friendId: string): Promise<{ id: string; text: string; senderId: string }[]> => {\r\n        return [];\r\n    },\r\n\r\n    /**\r\n     * Env├¡a un mensaje (placeholder).\r\n     * Simula un delay de red.\r\n     */\r\n    sendMessage: async ({ friendId, text }: { friendId: string, text: string }): Promise<void> => {\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n    },\r\n\r\n    /**\r\n     * Incrementa el contador de vistas de perfil.\r\n     * \r\n     * Se llama cuando alguien visita un perfil (no el propio).\r\n     * \r\n     * @param userId - ID del usuario cuyo perfil fue visitado\r\n     */\r\n    incrementProfileViews: async (userId: string): Promise<void> => {\r\n        try {\r\n            const userRef = doc(db, 'users', userId);\r\n            await updateDoc(userRef, { 'stats.views': increment(1) });\r\n        } catch (error) {\r\n            console.error(\"Error incrementing profile views:\", error);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Calcula el total de likes en todos los proyectos del usuario.\r\n     * \r\n     * @param userId - ID del usuario\r\n     * @returns Suma total de likes en todos sus proyectos\r\n     */\r\n    getTotalProjectLikes: async (userId: string): Promise<number> => {\r\n        try {\r\n            const projectsQuery = query(\r\n                collection(db, 'projects'),\r\n                where('authorId', '==', userId)\r\n            );\r\n\r\n            const snapshot = await getDocs(projectsQuery);\r\n            let totalLikes = 0;\r\n\r\n            snapshot.docs.forEach(doc => {\r\n                const data = doc.data();\r\n                totalLikes += Number(data.likes || 0) + Number(data.stats?.likeCount || 0);\r\n            });\r\n\r\n            return totalLikes;\r\n        } catch (error) {\r\n            console.error(\"Error calculating total project likes:\", error);\r\n            return 0;\r\n        }\r\n    },\r\n\r\n    // --- Alias sem├ínticos para mejor legibilidad ---\r\n    /** Alias de subscribeToUser - sigue a un usuario */\r\n    followUser: async (targetUserId: string, currentUserId: string): Promise<void> => {\r\n        return usersSocial.subscribeToUser(targetUserId, currentUserId);\r\n    },\r\n\r\n    /** Alias de unsubscribeFromUser - deja de seguir a un usuario */\r\n    unfollowUser: async (targetUserId: string, currentUserId: string): Promise<void> => {\r\n        return usersSocial.unsubscribeFromUser(targetUserId, currentUserId);\r\n    },\r\n\r\n    /** Alias de getSubscriptionStatus - verifica si sigue a un usuario */\r\n    isFollowing: async (targetUserId: string, currentUserId: string): Promise<boolean> => {\r\n        return usersSocial.getSubscriptionStatus(targetUserId, currentUserId);\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\services\\modules\\utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[624,627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[624,627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QueryDocumentSnapshot, DocumentData } from 'firebase/firestore';\r\n\r\n// Helper for pagination\r\nexport interface PaginatedResult<T> {\r\n    data: T[];\r\n    lastDoc: QueryDocumentSnapshot<DocumentData> | null;\r\n    hasMore: boolean;\r\n}\r\n\r\n// Helper for timeouts\r\nexport const withTimeout = <T>(promise: Promise<T>, ms: number, errorMessage: string): Promise<T> => {\r\n    return Promise.race([\r\n        promise,\r\n        new Promise<T>((_, reject) => setTimeout(() => reject(new Error(errorMessage)), ms))\r\n    ]);\r\n};\r\n\r\n// Sanitize data to remove undefined values (JSON pure check)\r\nexport const sanitizeData = (data: any) => {\r\n    return JSON.parse(JSON.stringify(data));\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\commerce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\community.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\content.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\forum.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\navigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\types\\user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\forumIcons.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\helpers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\lazyImport.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[405,408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[405,408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[602,605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[602,605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { ComponentType, LazyExoticComponent } from 'react';\r\n\r\n/**\r\n * Wrapper para React.lazy que recarga la p├ígina una vez si el import falla.\r\n * ├Ütil para manejar errores \"ChunkLoadError\" o \"Failed to fetch dynamically imported module\"\r\n * que ocurren cuando se despliega una nueva versi├│n y los chunks antiguos ya no est├ín disponibles.\r\n */\r\nexport const lazyImport = <T extends ComponentType<any>>(\r\n    factory: () => Promise<{ default: T }>\r\n): LazyExoticComponent<T> => {\r\n    return React.lazy(async () => {\r\n        try {\r\n            return await factory();\r\n        } catch (error: any) {\r\n            const pageHasAlreadyBeenForceRefreshed = JSON.parse(\r\n                window.sessionStorage.getItem('page-has-been-force-refreshed') || 'false'\r\n            );\r\n\r\n            if (!pageHasAlreadyBeenForceRefreshed) {\r\n                // Marcar que estamos forzando un refresh para no hacerlo infinitamente\r\n                window.sessionStorage.setItem('page-has-been-force-refreshed', 'true');\r\n                window.location.reload();\r\n\r\n                // Retornar una promesa que nunca resuelve (ya que estamos recargando) para evitar que React lance el error inmediatamente\r\n                return new Promise(() => { });\r\n            }\r\n\r\n            // Si ya recargamos y a├║n falla, lanzar el error\r\n            throw error;\r\n        }\r\n    });\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\passwordValidation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\slugUtils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\slugUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\utils\\viewTracking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\admin\\AdminDashboardView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":101},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":103,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":110},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[792,795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[792,795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useAllUsers } from '../../hooks/useFirebase';\r\nimport { Search, Mail, Calendar, Shield, MoreHorizontal, FileText, Users, ArrowUpRight, CheckCircle2, XCircle, Loader2 } from 'lucide-react';\r\nimport { CreatePostModal } from '../../components/modals/CreatePostModal';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport { db } from '../../lib/firebase';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\n\r\nexport const AdminDashboardView: React.FC = () => {\r\n    const { actions, state } = useAppStore();\r\n    const currentUser = state.user;\r\n    const isSuperAdmin = currentUser?.email === 'admin@latamcreativa.com';\r\n    const { users: initialUsers, loading } = useAllUsers();\r\n    const [usersList, setUsersList] = useState<any[]>([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n    const [actionLoading, setActionLoading] = useState<string | null>(null);\r\n\r\n    // Sync initial users to local state\r\n    React.useEffect(() => {\r\n        setUsersList(initialUsers);\r\n    }, [initialUsers]);\r\n\r\n    const handleToggleAdmin = async (userId: string, currentIsAdmin: boolean, userName: string) => {\r\n        if (!isSuperAdmin) {\r\n            actions.showToast('Solo el Super Admin puede gestionar roles.', 'error');\r\n            return;\r\n        }\r\n\r\n        // if (!confirm(...)) return; // Removed for debugging/UX\r\n\r\n\r\n        setActionLoading(userId);\r\n        try {\r\n            await updateDoc(doc(db, 'users', userId), {\r\n                isAdmin: !currentIsAdmin,\r\n                role: !currentIsAdmin ? 'Administrator' : 'Creative Member'\r\n            });\r\n\r\n            // Optimistic Update\r\n            setUsersList(prev => prev.map(user =>\r\n                user.id === userId\r\n                    ? { ...user, isAdmin: !currentIsAdmin, role: !currentIsAdmin ? 'Administrator' : 'Creative Member' }\r\n                    : user\r\n            ));\r\n\r\n            actions.showToast(`${userName} ahora ${!currentIsAdmin ? 'es Admin' : 'ya no es Admin'}`, 'success');\r\n        } catch (error) {\r\n            console.error(error);\r\n            actions.showToast('Error al actualizar permisos', 'error');\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const filteredUsers = usersList.filter(u =>\r\n        u.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        u.email?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    const stats = [\r\n        { label: 'Total Usuarios', value: usersList.length, icon: Users, change: '+12%', color: 'text-blue-500' },\r\n        { label: 'Posts Totales', value: '1,234', icon: FileText, change: '+5%', color: 'text-amber-500' },\r\n        { label: 'Nuevos este mes', value: '156', icon: Calendar, change: '+18%', color: 'text-green-500' },\r\n    ];\r\n\r\n    if (loading) {\r\n        return <div className=\"text-white\">Cargando datos...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold\">Dashboard</h1>\r\n                    <p className=\"text-slate-400 mt-1\">Bienvenido al panel de control de Latam Creativa.</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => setIsCreateModalOpen(true)}\r\n                    className=\"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-black font-bold rounded-xl transition-colors flex items-center gap-2\"\r\n                >\r\n                    <FileText className=\"h-4 w-4\" />\r\n                    Crear Post Oficial\r\n                </button>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                {stats.map((stat, index) => (\r\n                    <div key={index} className=\"bg-white/5 border border-white/5 p-6 rounded-2xl\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className={`p-3 rounded-xl bg-white/5 ${stat.color}`}>\r\n                                <stat.icon className=\"h-6 w-6\" />\r\n                            </div>\r\n                            <span className=\"flex items-center gap-1 text-green-500 text-sm font-medium bg-green-500/10 px-2 py-1 rounded-lg\">\r\n                                {stat.change} <ArrowUpRight className=\"h-3 w-3\" />\r\n                            </span>\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-white\">{stat.value}</h3>\r\n                        <p className=\"text-slate-400 text-sm\">{stat.label}</p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Users Table */}\r\n            <div className=\"bg-white/5 border border-white/5 rounded-2xl overflow-hidden\">\r\n                <div className=\"p-6 border-b border-white/5 flex items-center justify-between\">\r\n                    <h2 className=\"text-lg font-bold\">Usuarios Recientes</h2>\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar usuarios...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"bg-black/20 border border-white/10 rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:outline-none focus:border-amber-500/50 w-64\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left text-sm\">\r\n                        <thead className=\"bg-white/5 text-slate-400 font-medium\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4\">Usuario</th>\r\n                                <th className=\"px-6 py-4\">Email</th>\r\n                                <th className=\"px-6 py-4\">Rol</th>\r\n                                <th className=\"px-6 py-4\">Fecha Registro</th>\r\n                                <th className=\"px-6 py-4 text-right\">Acciones</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-white/5\">\r\n                            {filteredUsers.map((user) => (\r\n                                <tr key={user.id} className=\"hover:bg-white/5 transition-colors\">\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <img src={user.avatar || `https://ui-avatars.com/api/?name=${user.name}`} className=\"w-8 h-8 rounded-full bg-white/10\" alt=\"\" />\r\n                                            <span className=\"font-medium text-white\">{user.name || 'Sin nombre'}</span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-slate-400\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Mail className=\"h-3 w-3\" />\r\n                                            {user.email}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold ${user.isAdmin\r\n                                            ? 'bg-amber-500/10 text-amber-500 border border-amber-500/20'\r\n                                            : 'bg-slate-500/10 text-slate-400 border border-white/5'\r\n                                            }`}>\r\n                                            {user.isAdmin && <Shield className=\"h-3 w-3\" />}\r\n                                            {user.isAdmin ? 'Admin' : 'Miembro'}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-slate-400\">\r\n                                        {user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            {isSuperAdmin && (\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => handleToggleAdmin(user.id, !!user.isAdmin, user.name)}\r\n                                                    disabled={actionLoading === user.id}\r\n                                                    className={`p-2 rounded-lg transition-colors ${user.isAdmin\r\n                                                        ? 'bg-amber-500/10 text-amber-500 hover:bg-amber-500/20'\r\n                                                        : 'bg-white/5 text-slate-400 hover:text-white hover:bg-white/10'\r\n                                                        }`}\r\n                                                    title={user.isAdmin ? \"Quitar Admin\" : \"Hacer Admin\"}\r\n                                                >\r\n                                                    {actionLoading === user.id ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Shield className=\"h-4 w-4\" />}\r\n                                                </button>\r\n                                            )}\r\n                                            <button className=\"p-2 hover:bg-white/10 rounded-lg transition-colors text-slate-400 hover:text-white\">\r\n                                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Create Post Modal */}\r\n            <CreatePostModal\r\n                isOpen={isCreateModalOpen}\r\n                onClose={() => setIsCreateModalOpen(false)}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\auth\\AuthView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5721,5724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5721,5724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7770,7773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7770,7773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8403,8406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8403,8406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { usersService } from '../../services/modules/users';\r\nimport { Mail, Lock, User, ArrowRight, Loader2, AlertCircle, Eye, EyeOff, Zap, Check, CheckCircle2 } from 'lucide-react';\r\nimport { auth, googleProvider, db } from '../../lib/firebase';\r\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile, signInWithPopup, sendEmailVerification, signOut } from 'firebase/auth';\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\r\n\r\nexport const AuthView: React.FC = () => {\r\n    const { state, actions } = useAppStore();\r\n    const { contentMode } = state;\r\n    const isDev = contentMode === 'dev';\r\n    const navigate = useNavigate();\r\n\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [isVerificationSent, setIsVerificationSent] = useState(false);\r\n    const [isForgotPassword, setIsForgotPassword] = useState(false);\r\n    const [isResetSent, setIsResetSent] = useState(false);\r\n\r\n    // Form State\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [firstName, setFirstName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n    const [acceptedTerms, setAcceptedTerms] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const activeColor = isDev ? 'text-blue-500' : 'text-amber-500';\r\n    const activeBg = isDev ? 'bg-blue-600 hover:bg-blue-700' : 'bg-amber-500 hover:bg-amber-600';\r\n    const focusRing = isDev ? 'focus:ring-blue-500' : 'focus:ring-amber-500';\r\n\r\n    // Validation Helpers\r\n    const isEmailValid = /\\S+@\\S+\\.\\S+/.test(email);\r\n    const isPasswordValid = password.length >= 8 && /[A-Z]/.test(password) && /[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password);\r\n    const isFirstNameValid = firstName.trim().length > 1;\r\n    const isLastNameValid = lastName.trim().length > 1;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            if (isLogin) {\r\n                // Login Logic\r\n                const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n\r\n                // CHECK IF EMAIL IS VERIFIED\r\n                if (!userCredential.user.emailVerified) {\r\n                    await signOut(auth);\r\n                    setError(\"Tu correo electr├│nico no ha sido verificado. Por favor revisa tu bandeja de entrada.\");\r\n                    return; // Stop execution\r\n                }\r\n            } else {\r\n                // Register Logic\r\n                if (!acceptedTerms) {\r\n                    setError(\"Debes aceptar los t├®rminos y condiciones para continuar.\");\r\n                    setIsLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // Password Validation\r\n                if (!isPasswordValid) {\r\n                    setError(\"La contrase├▒a no cumple con los requisitos m├¡nimos.\");\r\n                    setIsLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n                // Create User Document\r\n                if (userCredential.user) {\r\n                    const displayName = `${firstName} ${lastName}`.trim();\r\n                    await updateProfile(userCredential.user, {\r\n                        displayName: displayName\r\n                    });\r\n\r\n                    // Use centralized service\r\n                    await usersService.initializeUserProfile(userCredential.user, {\r\n                        name: displayName,\r\n                        firstName,\r\n                        lastName\r\n                    });\r\n\r\n                    // Send Email Verification\r\n                    try {\r\n                        await sendEmailVerification(userCredential.user);\r\n                        await signOut(auth); // Sign out immediately\r\n                        setIsVerificationSent(true);\r\n                        setIsLoading(false);\r\n                        return; // Stop execution\r\n                    } catch (emailError) {\r\n                        console.error(\"Error sending verification email:\", emailError);\r\n                        actions.showToast('Cuenta creada, pero hubo un error enviando el correo de verificaci├│n.', 'error');\r\n                    }\r\n                }\r\n            }\r\n\r\n            // FORCE STORE UPDATE BEFORE REDIRECT (Only if still logged in)\r\n            if (auth.currentUser) {\r\n                const user = auth.currentUser;\r\n                // Double check verification\r\n                if (!user.emailVerified) return;\r\n\r\n                const isAdmin = user.email === 'admin@latamcreativa.com';\r\n                const appUser = {\r\n                    id: user.uid,\r\n                    uid: user.uid,\r\n                    name: user.displayName || (firstName ? `${firstName} ${lastName}`.trim() : 'Usuario'),\r\n                    avatar: user.photoURL || 'https://ui-avatars.com/api/?name=' + (user.displayName || firstName || 'U'),\r\n                    role: isAdmin ? 'Administrator' : 'Creative Member',\r\n                    location: 'Latam',\r\n                    email: user.email || '',\r\n                    isAdmin: isAdmin\r\n                };\r\n                actions.setUser(appUser);\r\n            }\r\n\r\n            // Redirect to home\r\n            navigate('/');\r\n\r\n\r\n        } catch (err: any) {\r\n            console.error(\"Auth error:\", err);\r\n            let msg = \"Ocurri├│ un error al autenticar.\";\r\n\r\n            // Map common Firebase errors\r\n            if (err.code === 'auth/invalid-email') msg = \"El correo electr├│nico no es v├ílido.\";\r\n            if (err.code === 'auth/user-not-found') msg = \"No existe una cuenta con este correo.\";\r\n            if (err.code === 'auth/wrong-password') msg = \"Contrase├▒a incorrecta.\";\r\n            if (err.code === 'auth/email-already-in-use') msg = \"Este correo ya est├í registrado.\";\r\n            if (err.code === 'auth/weak-password') msg = \"La contrase├▒a debe tener al menos 6 caracteres.\";\r\n\r\n            setError(msg);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGoogleLogin = async () => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        try {\r\n            const userCredential = await signInWithPopup(auth, googleProvider);\r\n            const user = userCredential.user;\r\n\r\n            await usersService.initializeUserProfile(user);\r\n\r\n            const userDocRef = doc(db, 'users', user.uid);\r\n\r\n            if (user) {\r\n                const finalDoc = await getDoc(userDocRef);\r\n                const userData = finalDoc.exists() ? finalDoc.data() : {};\r\n\r\n                const isAdmin = user.email === 'admin@latamcreativa.com';\r\n                const appUser = {\r\n                    id: user.uid,\r\n                    uid: user.uid,\r\n                    name: userData.name || user.displayName || 'Usuario',\r\n                    avatar: userData.avatar || user.photoURL || 'https://ui-avatars.com/api/?name=U',\r\n                    role: isAdmin ? 'Administrator' : (userData.role || 'Creative Member'),\r\n                    location: userData.location || 'Latam',\r\n                    email: user.email || '',\r\n                    isAdmin: isAdmin,\r\n                    ...userData\r\n                };\r\n                actions.setUser(appUser);\r\n            }\r\n\r\n            navigate('/');\r\n        } catch (err: any) {\r\n            console.error(\"Google auth error:\", err);\r\n            setError(\"Error al iniciar sesi├│n con Google.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Handle Forgot Password\r\n    const handleForgotPassword = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!isEmailValid) {\r\n            setError('Por favor ingresa un email v├ílido');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            await usersService.resetPassword(email);\r\n            setIsResetSent(true);\r\n        } catch (err: any) {\r\n            console.error('Reset password error:', err);\r\n            if (err.code === 'auth/user-not-found') {\r\n                setError('No existe una cuenta con este correo electr├│nico.');\r\n            } else {\r\n                setError('Error al enviar el correo de recuperaci├│n.');\r\n            }\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center p-4 animate-fade-in relative z-10\">\r\n            <div className=\"w-full max-w-lg\">\r\n\r\n                <div className=\"bg-white dark:bg-[#0A0A0B] border border-slate-200 dark:border-white/10 rounded-2xl p-6 sm:p-8 shadow-xl relative overflow-hidden\">\r\n\r\n                    {/* Header Logo/Title */}\r\n                    <div className=\"text-center mb-8 relative z-10\">\r\n                        {!isLogin && (\r\n                            <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-500/10 border border-amber-500/20 text-amber-500 text-[10px] font-bold uppercase tracking-wider mb-4\">\r\n                                <Zap className=\"h-3 w-3\" /> ├Ünete a la Beta\r\n                            </div>\r\n                        )}\r\n                        <h1 className=\"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white mb-2\">\r\n                            {isLogin ? 'Bienvenido de nuevo' : 'Crea tu cuenta'}\r\n                        </h1>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 text-xs sm:text-sm\">\r\n                            {isLogin ? 'Accede a tu cuenta para continuar' : '├Ünete al ecosistema definitivo para creadores digitales.'}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Ambient Glow */}\r\n                    <div className={`absolute top-0 right-0 w-64 h-64 rounded-full blur-[100px] opacity-20 -mr-20 -mt-20 pointer-events-none ${isDev ? 'bg-blue-500' : 'bg-amber-500'}`}></div>\r\n\r\n                    {/* ERROR MESSAGE */}\r\n                    {error && (\r\n                        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-3 text-red-500 text-sm\">\r\n                            <AlertCircle className=\"h-5 w-5 shrink-0\" />\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Verification Sent Screen */}\r\n                    {isVerificationSent ? (\r\n                        <div className=\"text-center py-8 animate-fade-in relative z-10\">\r\n                            <div className={`mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-6 ${isDev ? 'bg-blue-500/10 text-blue-500' : 'bg-amber-500/10 text-amber-500'}`}>\r\n                                <Mail className=\"h-8 w-8\" />\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">Verifica tu Correo</h2>\r\n                            <p className=\"text-slate-600 dark:text-slate-400 mb-8\">\r\n                                Hemos enviado un enlace de confirmaci├│n a <strong>{email}</strong>.\r\n                                <br />Por favor, verifica tu cuenta para poder continuar.\r\n                            </p>\r\n                            <button\r\n                                onClick={() => {\r\n                                    setIsVerificationSent(false);\r\n                                    setIsLogin(true);\r\n                                }}\r\n                                className={`w-full py-3 rounded-xl text-white font-bold transition-all ${activeBg}`}\r\n                            >\r\n                                Volver al Inicio de Sesi├│n\r\n                            </button>\r\n                        </div>\r\n                    ) : isResetSent ? (\r\n                        /* Password Reset Sent Screen */\r\n                        <div className=\"text-center py-8 animate-fade-in relative z-10\">\r\n                            <div className={`mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-6 ${isDev ? 'bg-blue-500/10 text-blue-500' : 'bg-amber-500/10 text-amber-500'}`}>\r\n                                <CheckCircle2 className=\"h-8 w-8\" />\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">Correo Enviado</h2>\r\n                            <p className=\"text-slate-600 dark:text-slate-400 mb-8\">\r\n                                Hemos enviado instrucciones para restablecer tu contrase├▒a a <strong>{email}</strong>.\r\n                                <br />Revisa tu bandeja de entrada y sigue el enlace.\r\n                            </p>\r\n                            <button\r\n                                onClick={() => {\r\n                                    setIsResetSent(false);\r\n                                    setIsForgotPassword(false);\r\n                                    setIsLogin(true);\r\n                                    setEmail('');\r\n                                }}\r\n                                className={`w-full py-3 rounded-xl text-white font-bold transition-all ${activeBg}`}\r\n                            >\r\n                                Volver al Inicio de Sesi├│n\r\n                            </button>\r\n                        </div>\r\n                    ) : isForgotPassword ? (\r\n                        /* Forgot Password Form */\r\n                        <form onSubmit={handleForgotPassword} className=\"space-y-5 relative z-10 animate-fade-in\">\r\n                            <div className=\"text-center mb-6\">\r\n                                <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Recuperar Contrase├▒a</h2>\r\n                                <p className=\"text-sm text-slate-500 dark:text-slate-400\">Ingresa tu email y te enviaremos un enlace para restablecer tu contrase├▒a.</p>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Correo Electr├│nico</label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className={`absolute left-3 top-3 h-5 w-5 ${isEmailValid ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        placeholder=\"hola@ejemplo.com\"\r\n                                        className={`w-full bg-slate-50 dark:bg-white/5 border rounded-xl pl-10 pr-10 py-3 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${isEmailValid\r\n                                            ? 'border-green-500/50 focus:border-green-500'\r\n                                            : `border-slate-200 dark:border-white/10 ${focusRing}`\r\n                                            }`}\r\n                                        required\r\n                                    />\r\n                                    {isEmailValid && (\r\n                                        <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500\" />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoading || !isEmailValid}\r\n                                className={`w-full py-3.5 rounded-xl text-white font-bold text-sm shadow-lg flex items-center justify-center gap-2 transition-all ${activeBg} ${isLoading ? 'opacity-80 cursor-wait' : ''} disabled:opacity-50`}\r\n                            >\r\n                                {isLoading ? (\r\n                                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                ) : (\r\n                                    'Enviar Enlace de Recuperaci├│n'\r\n                                )}\r\n                            </button>\r\n\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => {\r\n                                    setIsForgotPassword(false);\r\n                                    setError(null);\r\n                                }}\r\n                                className=\"w-full py-2 text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors\"\r\n                            >\r\n                                ÔåÉ Volver al inicio de sesi├│n\r\n                            </button>\r\n                        </form>\r\n                    ) : (\r\n                        <form onSubmit={handleSubmit} className=\"space-y-5 relative z-10\">\r\n\r\n                            {!isLogin && (\r\n                                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 animate-fade-in\">\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Nombres</label>\r\n                                        <div className=\"relative\">\r\n                                            <User className={`absolute left-3 top-3 h-5 w-5 ${isFirstNameValid ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={firstName}\r\n                                                onChange={(e) => setFirstName(e.target.value)}\r\n                                                placeholder=\"Juan\"\r\n                                                className={`w-full bg-slate-50 dark:bg-white/5 border rounded-xl pl-10 pr-10 py-3 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${isFirstNameValid\r\n                                                    ? 'border-green-500/50 focus:border-green-500'\r\n                                                    : `border-slate-200 dark:border-white/10 ${focusRing}`\r\n                                                    }`}\r\n                                                required={!isLogin}\r\n                                            />\r\n                                            {isFirstNameValid && (\r\n                                                <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500 animate-in fade-in zoom-in\" />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Apellidos</label>\r\n                                        <div className=\"relative\">\r\n                                            {/* Note: No specific icon for lastname, keeping it simple or reuse User? Reusing input styling */}\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={lastName}\r\n                                                onChange={(e) => setLastName(e.target.value)}\r\n                                                placeholder=\"P├®rez\"\r\n                                                className={`w-full bg-slate-50 dark:bg-white/5 border rounded-xl px-4 py-3 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${isLastNameValid\r\n                                                    ? 'border-green-500/50 focus:border-green-500'\r\n                                                    : `border-slate-200 dark:border-white/10 ${focusRing}`\r\n                                                    }`}\r\n                                                required={!isLogin}\r\n                                            />\r\n                                            {isLastNameValid && (\r\n                                                <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500 animate-in fade-in zoom-in\" />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Email Field */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Correo Electr├│nico</label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className={`absolute left-3 top-3 h-5 w-5 ${isEmailValid ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        placeholder=\"hola@ejemplo.com\"\r\n                                        className={`w-full bg-slate-50 dark:bg-white/5 border rounded-xl pl-10 pr-10 py-3 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${isEmailValid\r\n                                            ? 'border-green-500/50 focus:border-green-500'\r\n                                            : `border-slate-200 dark:border-white/10 ${focusRing}`\r\n                                            }`}\r\n                                        required\r\n                                    />\r\n                                    {isEmailValid && (\r\n                                        <CheckCircle2 className=\"absolute right-3 top-3 h-5 w-5 text-green-500 animate-in fade-in zoom-in\" />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Password Field */}\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"text-xs font-bold uppercase tracking-wider text-slate-500\">Contrase├▒a</label>\r\n                                <div className=\"relative\">\r\n                                    <Lock className={`absolute left-3 top-3 h-5 w-5 z-10 ${isPasswordValid ? 'text-green-500' : 'text-slate-400'}`} />\r\n                                    <input\r\n                                        type={showPassword ? \"text\" : \"password\"}\r\n                                        value={password}\r\n                                        onChange={(e) => setPassword(e.target.value)}\r\n                                        placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                                        className={`w-full bg-slate-50 dark:bg-white/5 border rounded-xl pl-10 pr-12 py-3 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${isPasswordValid\r\n                                            ? 'border-green-500/50 focus:border-green-500'\r\n                                            : `border-slate-200 dark:border-white/10 ${focusRing}`\r\n                                            }`}\r\n                                        required\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setShowPassword(!showPassword)}\r\n                                        className=\"absolute right-3 top-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\r\n                                    >\r\n                                        {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Password Requirements Checklist (Register Only) */}\r\n                                {!isLogin && (\r\n                                    <div className=\"grid grid-cols-2 gap-2 mt-2\">\r\n                                        {[\r\n                                            { label: '8+ Caracteres', valid: password.length >= 8 },\r\n                                            { label: 'May├║scula', valid: /[A-Z]/.test(password) },\r\n                                            { label: 'N├║mero', valid: /[0-9]/.test(password) },\r\n                                            { label: 'S├¡mbolo', valid: /[^A-Za-z0-9]/.test(password) }\r\n                                        ].map((req, index) => (\r\n                                            <div key={index} className=\"flex items-center gap-1.5\">\r\n                                                <div className={`h-1.5 w-1.5 rounded-full ${req.valid ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-700'}`}></div>\r\n                                                <span className={`text-[10px] font-medium ${req.valid ? 'text-green-500' : 'text-slate-500 dark:text-slate-400'}`}>\r\n                                                    {req.label}\r\n                                                </span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Terms and Conditions (Register Only) */}\r\n                            {!isLogin && (\r\n                                <div\r\n                                    className=\"flex items-center gap-3 animate-fade-in px-1 cursor-pointer group\"\r\n                                    onClick={() => setAcceptedTerms(!acceptedTerms)}\r\n                                >\r\n                                    <div className={`\r\n                                        h-5 w-5 rounded-full border flex items-center justify-center transition-all duration-200\r\n                                        ${acceptedTerms\r\n                                            ? 'bg-amber-500 border-amber-500'\r\n                                            : 'border-slate-300 dark:border-white/20 group-hover:border-amber-500/50'\r\n                                        }\r\n                                    `}>\r\n                                        {acceptedTerms && <Check className=\"h-3 w-3 text-white stroke-[3]\" />}\r\n                                    </div>\r\n                                    <label className=\"text-sm text-slate-600 dark:text-slate-400 cursor-pointer select-none\">\r\n                                        Acepto los <span className={`font-bold hover:underline ${activeColor}`}>t├®rminos y condiciones</span>\r\n                                    </label>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Submit Button */}\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoading}\r\n                                className={`w-full py-3.5 rounded-xl text-white font-bold text-sm shadow-lg flex items-center justify-center gap-2 transition-all ${activeBg} ${isLoading ? 'opacity-80 cursor-wait' : ''}`}\r\n                            >\r\n                                {isLoading ? (\r\n                                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                ) : (\r\n                                    <>\r\n                                        {isLogin ? 'Iniciar Sesi├│n' : 'Crear Cuenta'}\r\n                                        <ArrowRight className=\"h-5 w-5\" />\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n\r\n                            {/* Forgot Password Link (Login only) */}\r\n                            {isLogin && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                        setIsForgotPassword(true);\r\n                                        setError(null);\r\n                                    }}\r\n                                    className={`w-full text-center text-sm font-medium ${activeColor} hover:underline`}\r\n                                >\r\n                                    ┬┐Olvidaste tu contrase├▒a?\r\n                                </button>\r\n                            )}\r\n\r\n                        </form>\r\n                    )}\r\n\r\n                    {/* Divider */}\r\n                    <div className=\"relative my-8\">\r\n                        <div className=\"absolute inset-0 flex items-center\">\r\n                            <div className=\"w-full border-t border-slate-200 dark:border-white/5\"></div>\r\n                        </div>\r\n                        <div className=\"relative flex justify-center text-[10px] uppercase tracking-widest\">\r\n                            <span className=\"bg-white dark:bg-[#0A0A0B] px-2 text-slate-400\">O reg├¡strate con</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Social Auth */}\r\n                    <div className=\"w-full\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={handleGoogleLogin}\r\n                            className=\"w-full flex items-center justify-center gap-3 p-3.5 rounded-xl border border-slate-200 dark:border-white/5 bg-white dark:bg-white/5 hover:bg-slate-50 dark:hover:bg-white/10 transition-all text-sm font-medium text-slate-700 dark:text-slate-300\"\r\n                        >\r\n                            <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\r\n                                <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\" />\r\n                                <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\" />\r\n                                <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" fill=\"#FBBC05\" />\r\n                                <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\" />\r\n                            </svg>\r\n                            Google\r\n                        </button>\r\n\r\n                    </div>\r\n\r\n                    {/* Toggle Login/Register */}\r\n                    <p className=\"mt-8 text-center text-sm text-slate-500\">\r\n                        {isLogin ? '┬┐No tienes una cuenta?' : '┬┐Ya tienes una cuenta?'}\r\n                        <button\r\n                            onClick={() => setIsLogin(!isLogin)}\r\n                            className={`ml-1 font-bold hover:underline ${activeColor}`}\r\n                        >\r\n                            {isLogin ? 'Reg├¡strate' : 'Inicia Sesi├│n'}\r\n                        </button>\r\n                    </p>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\BlogCategorySection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Code' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isDev' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":65,"column":9,"endLine":65,"endColumn":64,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react';\r\nimport { ArrowRight, Newspaper, ChevronLeft, ChevronRight, Code } from 'lucide-react';\r\nimport { ArticleItem } from '../../types';\r\nimport { articlesService } from '../../services/modules/articles';\r\nimport { BlogCard } from '../../components/cards/BlogCard';\r\nimport { ContentMode } from '../../hooks/useAppStore';\r\n\r\ninterface BlogCategorySectionProps {\r\n    title: string;\r\n    categories?: string[]; // Optional: if omitted, fetches newest articles globally\r\n    onArticleSelect?: (id: string) => void;\r\n    onSave?: (id: string, image: string) => void;\r\n    contentMode?: ContentMode;\r\n}\r\n\r\nexport const BlogCategorySection: React.FC<BlogCategorySectionProps> = ({\r\n    title,\r\n    categories,\r\n    onArticleSelect,\r\n    onSave,\r\n    contentMode = 'creative'\r\n}) => {\r\n    const [articles, setArticles] = useState<ArticleItem[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const isDev = contentMode === 'dev';\r\n\r\n    // Create a stable key for dependencies to prevent re-fetching on every render\r\n    // simply because the parent passes a new array reference.\r\n    const categoriesKey = JSON.stringify(categories);\r\n\r\n    useEffect(() => {\r\n        const fetchArticles = async () => {\r\n            try {\r\n                setLoading(true);\r\n                let fetched: ArticleItem[] = [];\r\n\r\n                if (categories && categories.length > 0) {\r\n                    // Fetch by specific categories (increased limit for carousel)\r\n                    // Update: getArticlesByCategories now returns PaginatedResult\r\n                    const result = await articlesService.getArticlesByCategories(categories, null, 10);\r\n                    fetched = result.data;\r\n                } else {\r\n                    // Fetch recent (top 10 globally)\r\n                    fetched = await articlesService.getRecentArticles(10);\r\n                }\r\n\r\n                // Filter by domain (default to 'creative' for legacy articles)\r\n                const filteredByDomain = fetched.filter(article =>\r\n                    (article.domain || 'creative') === contentMode\r\n                );\r\n\r\n                setArticles(filteredByDomain);\r\n            } catch (error) {\r\n                console.error(`Error loading section ${title}:`, error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchArticles();\r\n\r\n        // Disable warning because we are using a stable stringified key for the array dependency\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [categoriesKey, title, contentMode]);\r\n\r\n    const scroll = (direction: 'left' | 'right') => {\r\n        if (scrollContainerRef.current) {\r\n            const container = scrollContainerRef.current;\r\n            const scrollAmount = container.clientWidth * 0.75;\r\n            const newScrollLeft = direction === 'right'\r\n                ? container.scrollLeft + scrollAmount\r\n                : container.scrollLeft - scrollAmount;\r\n\r\n            container.scrollTo({\r\n                left: newScrollLeft,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"mb-12 relative group/section\">\r\n            <div className=\"flex items-center justify-between mb-4 md:mb-6 px-1\">\r\n                <h3 className=\"text-xl md:text-2xl font-bold text-white flex items-center gap-2\">\r\n                    <span className=\"w-1 h-6 bg-rose-500 rounded-full\"></span>\r\n                    {title}\r\n                </h3>\r\n            </div>\r\n\r\n            {/* Carousel Container */}\r\n            <div className=\"relative\">\r\n                {/* Left Arrow */}\r\n                <button\r\n                    onClick={() => scroll('left')}\r\n                    className=\"absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/section:opacity-100 transition-opacity hover:bg-rose-600 disabled:opacity-0 -ml-4 md:-ml-6 hidden md:flex items-center justify-center backdrop-blur-md\"\r\n                >\r\n                    <ChevronLeft className=\"h-5 w-5\" />\r\n                </button>\r\n\r\n                {/* Scrollable Area */}\r\n                <div\r\n                    ref={scrollContainerRef}\r\n                    className=\"flex overflow-x-auto gap-4 md:gap-5 pb-4 -mx-6 px-6 md:mx-0 md:px-0 scrollbar-hide snap-x\"\r\n                    style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n                >\r\n                    {loading ? (\r\n                        Array.from({ length: 6 }).map((_, i) => (\r\n                            <div key={i} className=\"flex-none w-[calc(50%-8px)] md:w-[calc(20%-12px)] animate-pulse flex flex-col gap-4\">\r\n                                <div className=\"aspect-[4/3] w-full bg-white/5 rounded-2xl\"></div>\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"h-4 w-20 bg-white/5 rounded\"></div>\r\n                                    <div className=\"h-6 w-full bg-white/5 rounded\"></div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : articles.length > 0 ? (\r\n                        articles.map((article) => (\r\n                            <div key={article.id} className=\"flex-none w-[calc(50%-8px)] md:w-[calc(20%-12px)] snap-start\">\r\n                                <BlogCard\r\n                                    article={article}\r\n                                    onClick={() => onArticleSelect?.(article.id)}\r\n                                    onSave={onSave}\r\n                                    compact // Optional compact prop, handled by container width mostly\r\n                                />\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"w-full bg-white/5 border border-white/5 rounded-2xl p-8 py-10 text-center flex-none\">\r\n                            <div className=\"inline-flex items-center justify-center p-3 rounded-full bg-white/5 mb-4\">\r\n                                <Newspaper className=\"h-6 w-6 text-slate-500\" />\r\n                            </div>\r\n                            <h4 className=\"text-slate-300 font-medium mb-1\">A├║n no hay art├¡culos</h4>\r\n                            <p className=\"text-sm text-slate-500\">Pronto publicaremos contenido en esta categor├¡a.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Right Arrow */}\r\n                <button\r\n                    onClick={() => scroll('right')}\r\n                    className=\"absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/section:opacity-100 transition-opacity hover:bg-rose-600 -mr-4 md:-mr-6 hidden md:flex items-center justify-center backdrop-blur-md\"\r\n                >\r\n                    <ChevronRight className=\"h-5 w-5\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\BlogPostView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":112,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":125},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Reply' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":127,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":132},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Send' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":134,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":138},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'timeAgo' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authorLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":46,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2498,2501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2498,2501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAddingComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":58,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'replyingTo' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAddingReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":63,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rootComments' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":66,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getReplies' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":71,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":71,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAddComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":102,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5386,5389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5386,5389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDeleteComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":122,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5804,5807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5804,5807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":146,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":146,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleStartReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":153,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":153,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleCancelReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":162,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":162,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSubmitReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":167,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":167,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":184,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7749,7752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7749,7752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, Clock, Heart, Share2, Bookmark, CheckCircle2, ThumbsUp, Edit, Trash2, UserPlus, UserCheck, MessageSquare, Reply, Send, Flag } from 'lucide-react';\r\n\r\nimport { useArticle, useDeleteArticle, useRecommendedArticles, useFollow, useArticleLike, useComments, useAddComment } from '../../hooks/useFirebase';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useAuthorInfo } from '../../hooks/useAuthorInfo';\r\nimport { ConfirmationModal } from '../../components/modals/ConfirmationModal';\r\nimport { ReportModal } from '../../components/modals/ReportModal';\r\n\r\nimport { shouldCountView } from '../../utils/viewTracking';\r\nimport { timeAgo } from '../../utils/helpers';\r\nimport { articlesService } from '../../services/modules/articles';\r\nimport { CommentsSection } from '../../components/CommentsSection';\r\nimport { SEOHead } from '../../components/SEOHead';\r\n\r\ninterface BlogPostViewProps {\r\n    articleId?: string;\r\n    onBack: () => void;\r\n    onAuthorClick?: (author: string | { name: string; avatar?: string; id?: string; username?: string }) => void;\r\n    onArticleSelect: (id: string) => void;\r\n    onSave?: (id: string, image: string, type: string) => void;\r\n    onShare?: () => void;\r\n}\r\n\r\nexport const BlogPostView: React.FC<BlogPostViewProps> = ({ articleId, onBack, onAuthorClick, onArticleSelect, onSave, onShare }) => {\r\n    const { id: paramId } = useParams<{ id: string }>();\r\n    const id = articleId || paramId;\r\n    const { state, actions } = useAppStore();\r\n    const navigate = useNavigate();\r\n\r\n    const { article, loading: articleLoading } = useArticle(id);\r\n\r\n    const { deletePost, loading: isDeleting } = useDeleteArticle();\r\n    const { articles: recArticles } = useRecommendedArticles(id || '');\r\n\r\n    const { isLiked, initialIsLiked, toggleLike } = useArticleLike(\r\n        article?.id,\r\n        state.user?.id,\r\n        state.user ? { name: state.user.name, avatar: state.user.avatar || '' } : undefined\r\n    );\r\n    const { isFollowing, loading: followLoading, toggleFollow, followerCount } = useFollow(article?.authorId || '', state.user?.id);\r\n\r\n    // Live author lookup - fetches current name/avatar from user profile\r\n    const { authorName, authorUsername, authorAvatar, loading: authorLoading } = useAuthorInfo(\r\n        article?.authorId,\r\n        typeof article?.author === 'object' ? (article.author as any).name : article?.author,\r\n        article?.authorAvatar\r\n    );\r\n\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n    const [isReportModalOpen, setIsReportModalOpen] = useState(false);\r\n    const [isLikeLoading, setIsLikeLoading] = useState(false);\r\n\r\n    // --- Comments State ---\r\n    const { comments, loading: isLoadingComments, refresh: refreshComments } = useComments(article?.id);\r\n    const { add: addCommentToArticle, loading: isAddingComment } = useAddComment();\r\n    const [newComment, setNewComment] = useState('');\r\n    const [commentLikes, setCommentLikes] = useState<Record<string, boolean>>({});\r\n    const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n    const [replyText, setReplyText] = useState('');\r\n    const [isAddingReply, setIsAddingReply] = useState(false);\r\n\r\n    // Memoize root comments and replies\r\n    const rootComments = useMemo(() =>\r\n        comments.filter(c => !c.parentId).sort((a, b) =>\r\n            new Date(b.date || b.createdAt || 0).getTime() - new Date(a.date || a.createdAt || 0).getTime()\r\n        ), [comments]);\r\n\r\n    const getReplies = (parentId: string) =>\r\n        comments.filter(c => c.parentId === parentId).sort((a, b) =>\r\n            new Date(a.date || a.createdAt || 0).getTime() - new Date(b.date || b.createdAt || 0).getTime()\r\n        );\r\n\r\n    // View Tracking - 24h unique visitor protection\r\n    useEffect(() => {\r\n        if (article?.id && shouldCountView('article', article.id)) {\r\n            articlesService.incrementArticleViews(article.id);\r\n        }\r\n    }, [article?.id]);\r\n\r\n    const handleDeleteClick = () => {\r\n        setIsDeleteModalOpen(true);\r\n    };\r\n\r\n    const handleConfirmDelete = async () => {\r\n        if (!article) return;\r\n        try {\r\n            await deletePost(article.id);\r\n            actions.showToast('Art├¡culo eliminado correctamente', 'success');\r\n            setIsDeleteModalOpen(false);\r\n            onBack();\r\n        } catch (error) {\r\n            console.error(\"Error caught in handleDelete:\", error);\r\n            actions.showToast('Error al eliminar el art├¡culo', 'error');\r\n            setIsDeleteModalOpen(false);\r\n        }\r\n    };\r\n\r\n    // --- Comment Handlers ---\r\n    const handleAddComment = async () => {\r\n        if (!newComment.trim() || !article?.id || !state.user) {\r\n            if (!state.user) actions.showToast('Inicia sesi├│n para comentar', 'info');\r\n            return;\r\n        }\r\n        try {\r\n            await addCommentToArticle(article.id, {\r\n                authorId: state.user.id,\r\n                authorName: state.user.name || 'Usuario',\r\n                authorUsername: state.user.username || '',\r\n                authorAvatar: state.user.avatar || '',\r\n                text: newComment.trim()\r\n            });\r\n            setNewComment('');\r\n            refreshComments();\r\n        } catch (error: any) {\r\n            actions.showToast(error.message || 'Error al comentar', 'error');\r\n        }\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId: string) => {\r\n        if (!article?.id) return;\r\n        try {\r\n            await articlesService.deleteComment(article.id, commentId);\r\n            refreshComments();\r\n            actions.showToast('Comentario eliminado', 'success');\r\n        } catch (error: any) {\r\n            actions.showToast(error.message || 'Error al eliminar', 'error');\r\n        }\r\n    };\r\n\r\n    const handleCommentLike = async (commentId: string) => {\r\n        if (!state.user) {\r\n            actions.showToast('Inicia sesi├│n para dar like', 'info');\r\n            return;\r\n        }\r\n        if (!article?.id) return;\r\n\r\n        // Optimistic UI update\r\n        const wasLiked = commentLikes[commentId] || false;\r\n        setCommentLikes(prev => ({ ...prev, [commentId]: !wasLiked }));\r\n\r\n        try {\r\n            await articlesService.toggleCommentLike(article.id, commentId, state.user.id);\r\n        } catch (error) {\r\n            // Rollback on error\r\n            setCommentLikes(prev => ({ ...prev, [commentId]: wasLiked }));\r\n            actions.showToast('Error al dar like', 'error');\r\n        }\r\n    };\r\n\r\n    const handleStartReply = (commentId: string) => {\r\n        if (!state.user) {\r\n            actions.showToast('Inicia sesi├│n para responder', 'info');\r\n            return;\r\n        }\r\n        setReplyingTo(commentId);\r\n        setReplyText('');\r\n    };\r\n\r\n    const handleCancelReply = () => {\r\n        setReplyingTo(null);\r\n        setReplyText('');\r\n    };\r\n\r\n    const handleSubmitReply = async (parentCommentId: string) => {\r\n        if (!replyText.trim() || !article?.id || !state.user) return;\r\n\r\n        setIsAddingReply(true);\r\n        try {\r\n            await addCommentToArticle(article.id, {\r\n                authorId: state.user.id,\r\n                authorName: state.user.name || 'Usuario',\r\n                authorUsername: state.user.username || '',\r\n                authorAvatar: state.user.avatar || '',\r\n                text: replyText.trim(),\r\n                parentId: parentCommentId\r\n            });\r\n            setReplyingTo(null);\r\n            setReplyText('');\r\n            refreshComments();\r\n            actions.showToast('Respuesta publicada', 'success');\r\n        } catch (error: any) {\r\n            actions.showToast(error.message || 'Error al responder', 'error');\r\n        } finally {\r\n            setIsAddingReply(false);\r\n        }\r\n    };\r\n\r\n    if (articleLoading) {\r\n        return <div className=\"min-h-screen flex items-center justify-center text-slate-500\">Cargando art├¡culo...</div>;\r\n    }\r\n\r\n    if (!article) {\r\n        return <div className=\"min-h-screen flex flex-col items-center justify-center text-slate-500 gap-4\">\r\n            <p>Art├¡culo no encontrado</p>\r\n            <button onClick={onBack} className=\"text-amber-500 hover:underline\">Volver</button>\r\n        </div>;\r\n    }\r\n\r\n    const isAuthor = state.user?.name === article.author;\r\n\r\n    return (\r\n        <div className=\"max-w-[1800px] mx-auto transition-colors animate-fade-in pb-20\">\r\n            <SEOHead\r\n                title={article.title}\r\n                description={article.excerpt || article.content?.substring(0, 150)}\r\n                image={article.image}\r\n                url={`/blog/${article.id}`}\r\n                type=\"article\"\r\n                author={article.author}\r\n                publishedTime={article.date}\r\n                keywords={article.tags || []}\r\n            />\r\n            {/* Top Navigation Bar */}\r\n            <div className=\"sticky top-0 z-20 bg-white/90 dark:bg-[#0d0d0f]/90 backdrop-blur-xl border-b border-slate-200 dark:border-white/[0.06] px-6 py-4 flex items-center justify-between\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" />\r\n                    Volver al Blog\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8 px-6 md:px-10 py-10 relative\">\r\n\r\n                {/* Left Sidebar - Actions (Sticky) */}\r\n                <aside className=\"hidden lg:flex lg:col-span-1 flex-col items-center gap-6 sticky top-24 h-fit\">\r\n                    <div className=\"flex flex-col gap-4 bg-white dark:bg-white/5 p-2 rounded-2xl border border-slate-200 dark:border-white/10 shadow-sm w-full items-center\">\r\n                        <button\r\n                            onClick={async () => {\r\n                                if (isLikeLoading) return;\r\n                                setIsLikeLoading(true);\r\n                                try {\r\n                                    await toggleLike();\r\n                                } finally {\r\n                                    setIsLikeLoading(false);\r\n                                }\r\n                            }}\r\n                            disabled={isLikeLoading}\r\n                            className={`p-3 rounded-xl transition-all flex flex-col items-center gap-1 ${isLiked\r\n                                ? 'bg-amber-500/10 text-amber-600 dark:text-amber-500'\r\n                                : 'hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400'\r\n                                } ${isLikeLoading ? 'opacity-50 cursor-wait' : ''}`}\r\n                            title=\"Me gusta\"\r\n                        >\r\n                            <Heart className={`h-5 w-5 ${isLiked ? 'fill-current' : ''}`} />\r\n                            <span className=\"text-xs font-bold mt-1 block\">{(article.likes || 0) + (isLiked ? 1 : 0) - (initialIsLiked ? 1 : 0)}</span>\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={() => onSave?.(article.id, article.image, 'article')}\r\n                            className=\"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-amber-500 dark:hover:text-amber-500 transition-colors\"\r\n                            title=\"Guardar\"\r\n                        >\r\n                            <Bookmark className=\"h-5 w-5\" />\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={onShare}\r\n                            className=\"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-blue-500 dark:hover:text-blue-500 transition-colors\"\r\n                            title=\"Compartir\"\r\n                        >\r\n                            <Share2 className=\"h-5 w-5\" />\r\n                        </button>\r\n\r\n                        {isAuthor && (\r\n                            <>\r\n                                <div className=\"h-px w-8 bg-slate-200 dark:bg-white/10 my-1\" />\r\n                                <button\r\n                                    onClick={() => navigate(`/create/article?edit=${article.id}`)}\r\n                                    className=\"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-blue-500 dark:hover:text-blue-500 transition-colors\"\r\n                                    title=\"Editar Art├¡culo\"\r\n                                >\r\n                                    <Edit className=\"h-5 w-5\" />\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleDeleteClick}\r\n                                    disabled={isDeleting}\r\n                                    className=\"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-red-500 dark:hover:text-red-500 transition-colors\"\r\n                                    title=\"Eliminar Art├¡culo\"\r\n                                >\r\n                                    <Trash2 className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                        {!isAuthor && state.user && (\r\n                            <>\r\n                                <div className=\"h-px w-8 bg-slate-200 dark:bg-white/10 my-1\" />\r\n                                <button\r\n                                    onClick={() => setIsReportModalOpen(true)}\r\n                                    className=\"p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-red-500 dark:hover:text-red-500 transition-colors\"\r\n                                    title=\"Reportar Art├¡culo\"\r\n                                >\r\n                                    <Flag className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* Center Column - Article Content */}\r\n                <article className=\"lg:col-span-8 lg:px-8\">\r\n                    <div className=\"mb-10 text-center lg:text-left\">\r\n                        <span className=\"px-3 py-1 rounded-full bg-amber-500/10 text-amber-600 dark:text-amber-400 text-xs font-bold uppercase tracking-wider border border-amber-500/20\">\r\n                            {article.category}\r\n                        </span>\r\n                        <span className=\"text-slate-400 dark:text-slate-500 text-sm mx-2\">ÔÇó</span>\r\n                        <span className=\"text-slate-500 dark:text-slate-400 text-sm font-medium inline-flex items-center gap-1\">\r\n                            <Clock className=\"h-3.5 w-3.5\" />\r\n                            {new Date(article.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' })}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 dark:text-white leading-tight mb-8 font-display\">\r\n                        {article.title}\r\n                    </h1>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row items-center justify-center lg:justify-between gap-6 border-y border-slate-200 dark:border-white/10 py-6\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div\r\n                                className=\"h-12 w-12 rounded-full overflow-hidden ring-2 ring-slate-100 dark:ring-white/10 cursor-pointer hover:ring-amber-500 transition-all\"\r\n                                onClick={() => {\r\n                                    onAuthorClick?.({ name: authorName, avatar: authorAvatar, id: article.authorId, username: authorUsername });\r\n                                }}\r\n                            >\r\n                                <img src={authorAvatar} alt={authorName} className=\"h-full w-full object-cover\" />\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-col\">\r\n                                <div\r\n                                    className=\"flex items-center gap-1.5 cursor-pointer group\"\r\n                                    onClick={() => {\r\n                                        onAuthorClick?.({ name: authorName, avatar: authorAvatar, id: article.authorId, username: authorUsername });\r\n                                    }}\r\n                                >\r\n                                    <h3 className=\"font-bold text-lg text-slate-900 dark:text-white leading-none group-hover:text-amber-500 transition-colors\">\r\n                                        {authorName}\r\n                                    </h3>\r\n                                    <CheckCircle2 className=\"h-4 w-4 text-amber-500 fill-amber-500/20\" />\r\n                                </div>\r\n                                <span className=\"text-xs text-slate-500 dark:text-slate-400 font-medium\">{followerCount} seguidores</span>\r\n                            </div>\r\n\r\n                            {!isAuthor && (\r\n                                <button\r\n                                    onClick={toggleFollow}\r\n                                    disabled={followLoading}\r\n                                    className={`ml-4 h-10 px-6 rounded-2xl text-sm font-bold transition-all flex items-center gap-2 shadow-lg hover:shadow-xl ${isFollowing\r\n                                        ? 'bg-slate-100 dark:bg-white/10 text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-white/20'\r\n                                        : 'bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20 hover:shadow-amber-500/30'\r\n                                        } ${followLoading ? 'opacity-50 cursor-wait' : 'hover:scale-105 active:scale-95'} `}\r\n                                >\r\n                                    {isFollowing ? (\r\n                                        <>\r\n                                            <UserCheck className=\"h-4 w-4\" />\r\n                                            Siguiendo\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <UserPlus className=\"h-4 w-4\" />\r\n                                            Seguir\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"lg:hidden flex items-center gap-3\">\r\n                            <button\r\n                                onClick={toggleLike}\r\n                                className={`p-2 rounded-full ${isLiked ? 'text-amber-500 bg-amber-500/10' : 'text-slate-500 bg-slate-100 dark:bg-white/5'}`}\r\n                            >\r\n                                <ThumbsUp className={`h-5 w-5 ${isLiked ? 'fill-current' : ''}`} />\r\n                            </button>\r\n                            <button className=\"p-2 rounded-full text-slate-500 bg-slate-100 dark:bg-white/5\">\r\n                                <Share2 className=\"h-5 w-5\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mb-12 rounded-3xl overflow-hidden aspect-video shadow-2xl\">\r\n                        <img src={article.image} alt={article.title} className=\"w-full h-full object-cover\" />\r\n                    </div>\r\n\r\n                    <div className=\"prose prose-lg prose-slate dark:prose-invert max-w-none text-slate-700 dark:text-slate-300 leading-loose\">\r\n                        {article.content ? (\r\n                            (() => {\r\n                                const getYoutubeId = (url: string) => {\r\n                                    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n                                    const match = url.match(regExp);\r\n                                    return (match && match[2].length === 11) ? match[2] : null;\r\n                                };\r\n\r\n                                // Convert URLs to clickable links (skip if already in an anchor tag)\r\n                                const linkifyText = (html: string): string => {\r\n                                    // First, protect existing anchor tags by replacing them temporarily\r\n                                    const anchorPlaceholders: string[] = [];\r\n                                    let protectedHtml = html.replace(/<a\\s[^>]*>.*?<\\/a>/gi, (match) => {\r\n                                        anchorPlaceholders.push(match);\r\n                                        return `__ANCHOR_PLACEHOLDER_${anchorPlaceholders.length - 1}__`;\r\n                                    });\r\n\r\n                                    // Now linkify URLs that aren't already in anchors\r\n                                    const urlPattern = /(\\bhttps?:\\/\\/[^\\s<>\"']+)/gi;\r\n                                    protectedHtml = protectedHtml.replace(urlPattern, (url) => {\r\n                                        const safeUrl = url.replace(/\"/g, '&quot;');\r\n                                        return `<a href=\"${safeUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-amber-500 hover:text-amber-400 underline underline-offset-2 transition-colors break-all\">${url}</a>`;\r\n                                    });\r\n\r\n                                    // Restore original anchor tags\r\n                                    anchorPlaceholders.forEach((anchor, i) => {\r\n                                        protectedHtml = protectedHtml.replace(`__ANCHOR_PLACEHOLDER_${i}__`, anchor);\r\n                                    });\r\n\r\n                                    return protectedHtml;\r\n                                };\r\n\r\n                                return article.content.split('\\n\\n').map((block, index) => {\r\n                                    const youtubeId = getYoutubeId(block.trim());\r\n\r\n                                    if (youtubeId) {\r\n                                        return (\r\n                                            <div key={index} className=\"aspect-video rounded-xl overflow-hidden bg-black shadow-lg my-8\">\r\n                                                <iframe\r\n                                                    width=\"100%\"\r\n                                                    height=\"100%\"\r\n                                                    src={`https://www.youtube.com/embed/${youtubeId}`}\r\n                                                    title=\"YouTube video player\"\r\n                                                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                                                    allowFullScreen\r\n                                                    className=\"border-none\"\r\n                                                ></iframe>\r\n                                            </div>\r\n                                        );\r\n                                    }\r\n\r\n                                    if (block.trim().match(/^https?:\\/\\/.*\\.(jpeg|jpg|gif|png|webp)$/i)) {\r\n                                        return (\r\n                                            <img key={index} src={block.trim()} alt=\"Article content\" className=\"w-full rounded-xl my-6 shadow-md\" />\r\n                                        );\r\n                                    }\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={index}\r\n                                            className=\"mb-6 whitespace-pre-wrap font-serif\"\r\n                                            dangerouslySetInnerHTML={{ __html: linkifyText(block) }}\r\n                                        />\r\n                                    );\r\n                                });\r\n                            })()\r\n                        ) : (\r\n                            <>\r\n                                <p className=\"lead text-2xl font-serif text-slate-600 dark:text-slate-200 mb-8 border-l-4 border-amber-500 pl-6 italic\">\r\n                                    {article.excerpt}\r\n                                </p>\r\n                                <p>\r\n                                    Este art├¡culo est├í en proceso de redacci├│n. Vuelve pronto para leer el contenido completo sobre {article.title}.\r\n                                </p>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 mt-12 mb-16 pt-8 border-t border-slate-200 dark:border-white/10\">\r\n                        {(article.tags && article.tags.length > 0 ? article.tags : []).map(tag => (\r\n                            <span key={tag} className=\"px-4 py-2 rounded-xl bg-slate-100 dark:bg-white/5 text-slate-600 dark:text-slate-400 text-sm font-bold hover:bg-amber-500/10 hover:text-amber-500 cursor-pointer transition-colors border border-transparent hover:border-amber-500/20\">\r\n                                #{tag}\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Comments Section */}\r\n                    <CommentsSection\r\n                        comments={comments}\r\n                        isLoading={isLoadingComments}\r\n                        contentAuthorId={article.authorId}\r\n                        onAddComment={async (text) => {\r\n                            if (!article?.id || !state.user) return;\r\n                            await addCommentToArticle(article.id, {\r\n                                authorId: state.user.id,\r\n                                authorName: state.user.name || 'Usuario',\r\n                                authorUsername: state.user.username || '',\r\n                                authorAvatar: state.user.avatar || '',\r\n                                text\r\n                            });\r\n                            refreshComments();\r\n                        }}\r\n                        onDeleteComment={async (commentId) => {\r\n                            if (!article?.id) return;\r\n                            await articlesService.deleteComment(article.id, commentId);\r\n                            refreshComments();\r\n                        }}\r\n                        onLikeComment={handleCommentLike}\r\n                        onAddReply={async (parentId, text) => {\r\n                            if (!article?.id || !state.user) return;\r\n                            await addCommentToArticle(article.id, {\r\n                                authorId: state.user.id,\r\n                                authorName: state.user.name || 'Usuario',\r\n                                authorUsername: state.user.username || '',\r\n                                authorAvatar: state.user.avatar || '',\r\n                                text,\r\n                                parentId\r\n                            });\r\n                            refreshComments();\r\n                        }}\r\n                        commentLikes={commentLikes}\r\n                    />\r\n\r\n                </article>\r\n\r\n                {/* Right Sidebar - Recommended */}\r\n                <aside className=\"lg:col-span-3 space-y-10\">\r\n                    <div className=\"sticky top-24\">\r\n                        <div className=\"bg-white dark:bg-white/[0.02] rounded-2xl border border-slate-200 dark:border-white/5 p-6 shadow-xl\">\r\n                            <h3 className=\"text-lg font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                                <div className=\"h-6 w-1 bg-amber-500 rounded-full\"></div>\r\n                                Recomendados\r\n                            </h3>\r\n\r\n                            <div className=\"flex flex-col gap-6\">\r\n                                {recArticles.map((item) => (\r\n                                    <div\r\n                                        key={item.id}\r\n                                        onClick={() => onArticleSelect(item.id)}\r\n                                        className=\"group flex gap-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-white/5 p-2 -mx-2 rounded-xl transition-colors\"\r\n                                    >\r\n                                        <div className=\"shrink-0 w-24 h-24 rounded-lg overflow-hidden bg-slate-200 dark:bg-white/5 relative\">\r\n                                            <img src={item.image} alt={item.title} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" />\r\n                                        </div>\r\n                                        <div className=\"flex flex-col justify-center\">\r\n                                            <span className=\"text-[10px] font-bold text-amber-600 dark:text-amber-500 uppercase tracking-wide mb-1\">\r\n                                                {item.category}\r\n                                            </span>\r\n                                            <h4 className=\"text-sm font-bold text-slate-900 dark:text-white line-clamp-2 leading-snug group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors mb-2\">\r\n                                                {item.title}\r\n                                            </h4>\r\n                                            <span className=\"text-xs text-slate-500 dark:text-slate-400 font-medium flex items-center gap-1\">\r\n                                                <Clock className=\"h-3 w-3\" />\r\n                                                {new Date(item.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' })}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </aside>\r\n            </div>\r\n\r\n            <ConfirmationModal\r\n                isOpen={isDeleteModalOpen}\r\n                onClose={() => setIsDeleteModalOpen(false)}\r\n                onConfirm={handleConfirmDelete}\r\n                title=\"Eliminar Art├¡culo\"\r\n                message=\"┬┐Est├ís seguro de que deseas eliminar este art├¡culo? Esta acci├│n no se puede deshacer.\"\r\n                confirmText=\"Eliminar\"\r\n                cancelText=\"Cancelar\"\r\n                type=\"danger\"\r\n                loading={isDeleting}\r\n            />\r\n\r\n            <ReportModal\r\n                isOpen={isReportModalOpen}\r\n                onClose={() => setIsReportModalOpen(false)}\r\n                contentType=\"article\"\r\n                contentId={article?.id || ''}\r\n                contentTitle={article?.title}\r\n            />\r\n        </div >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\BlogView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Palette' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sortOption' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accentColor' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accentBg' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":34,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accentBgHover' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":35,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Plus, Newspaper, Loader2, ArrowLeft, ArrowRight, Code, Palette } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useArticles } from '../../hooks/useFirebase';\r\nimport { BlogCard } from '../../components/cards/BlogCard';\r\nimport { NAV_SECTIONS, NAV_SECTIONS_DEV } from '../../data/navigation';\r\nimport { BlogCategorySection } from './BlogCategorySection';\r\n\r\ninterface BlogViewProps {\r\n  activeCategory: string;\r\n  onArticleSelect?: (id: string) => void;\r\n  onCreateClick?: () => void;\r\n  onSave?: (id: string, image: string) => void;\r\n}\r\n\r\nexport const BlogView: React.FC<BlogViewProps> = ({ activeCategory, onArticleSelect, onSave, onCreateClick }) => {\r\n  const { state, actions } = useAppStore();\r\n  const { articles: blogPosts, loading, hasMore, currentPage, nextPage, prevPage } = useArticles();\r\n  const { sortOption } = state.blogState;\r\n  const { contentMode } = state;\r\n\r\n  // Select navigation sections based on mode\r\n  const currentSections = contentMode === 'dev' ? NAV_SECTIONS_DEV : NAV_SECTIONS;\r\n\r\n  // Filter articles by domain (default to 'creative' for legacy articles)\r\n  const filteredPosts = blogPosts.filter(article =>\r\n    (article.domain || 'creative') === contentMode\r\n  );\r\n\r\n  // Mode-specific styling\r\n  const isDev = contentMode === 'dev';\r\n  const accentColor = isDev ? 'blue' : 'rose';\r\n  const accentText = isDev ? 'text-blue-400' : 'text-rose-400';\r\n  const accentBg = isDev ? 'bg-blue-600' : 'bg-rose-600';\r\n  const accentBgHover = isDev ? 'hover:bg-blue-500' : 'hover:bg-rose-500';\r\n  const accentBorder = isDev ? 'border-blue-500/30' : 'border-rose-500/30';\r\n  const accentBgLight = isDev ? 'bg-blue-500/10' : 'bg-rose-500/10';\r\n\r\n  const isHomeView = activeCategory === 'Home';\r\n\r\n  return (\r\n    <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-0 pb-16 transition-colors animate-fade-in bg-[#1c1c21] min-h-screen relative\">\r\n\r\n\r\n\r\n      {/* Cinematic Hero Banner */}\r\n      <div className=\"relative -mx-6 md:-mx-10 2xl:-mx-16 min-h-[450px] md:h-[500px] flex items-center justify-center overflow-hidden mb-8 md:mb-12\">\r\n        {/* Background Layer */}\r\n        <div className=\"absolute inset-0 z-0\">\r\n          <img\r\n            src=\"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=2000&auto=format&fit=crop\"\r\n            className=\"absolute inset-0 w-full h-full object-cover opacity-40 animate-subtle-zoom\"\r\n            alt=\"Blog Hero\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-b from-black/60 via-[#1c1c21]/80 to-[#1c1c21]\"></div>\r\n\r\n          {/* Vibrant Glows - Dynamic based on mode */}\r\n          <div className={`absolute top-0 right-0 w-[300px] md:w-[600px] h-[300px] md:h-[600px] ${isDev ? 'bg-blue-600/20' : 'bg-rose-600/20'} rounded-full blur-[100px] md:blur-[150px] pointer-events-none mix-blend-screen`}></div>\r\n          <div className={`absolute bottom-0 left-0 w-[250px] md:w-[500px] h-[250px] md:h-[500px] ${isDev ? 'bg-cyan-900/10' : 'bg-red-900/10'} rounded-full blur-[100px] md:blur-[150px] pointer-events-none mix-blend-screen`}></div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 px-6 w-full max-w-5xl text-center pt-10 md:pt-0\">\r\n          <span className={`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 ${accentText} text-xs font-bold uppercase tracking-wider mb-6 backdrop-blur-md shadow-lg`}>\r\n            {isDev ? <Code className=\"h-3 w-3\" /> : <Newspaper className=\"h-3 w-3\" />} {isDev ? 'Dev Blog' : 'Blog & Noticias'}\r\n          </span>\r\n          <h1 className=\"text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 leading-tight drop-shadow-2xl\">\r\n            {isDev ? 'C├│digo que' : 'Historias que'} <br /><span className={`text-transparent bg-clip-text bg-gradient-to-r ${isDev ? 'from-blue-400 to-cyan-300' : 'from-rose-400 to-red-300'}`}>{isDev ? 'Transforma Ideas' : 'Inspiran Creaci├│n'}</span>\r\n          </h1>\r\n          <p className=\"text-base md:text-xl text-slate-300 mb-8 md:mb-10 max-w-2xl mx-auto leading-relaxed font-light\">\r\n            {isDev ? 'Tutoriales de programaci├│n, arquitectura de software y las ├║ltimas tendencias en desarrollo.' : 'Tutoriales en profundidad, entrevistas a expertos y las ├║ltimas novedades de la industria creativa y tecnol├│gica.'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation & Toolbar */}\r\n      <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-end gap-6 mb-8 border-b border-white/10 pb-6\">\r\n        <div className=\"flex flex-wrap items-center gap-3\">\r\n          <button\r\n            onClick={onCreateClick}\r\n            className={`flex items-center gap-2 px-4 py-2.5 rounded-xl border ${accentBorder} ${accentBgLight} ${accentText} hover:opacity-80 transition-all font-bold text-sm`}\r\n          >\r\n            <Plus className=\"h-4 w-4\" /> Escribir Art├¡culo\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n          {isDev ? <Code className={`h-6 w-6 text-blue-500`} /> : <Newspaper className={`h-6 w-6 text-rose-500`} />}\r\n          {activeCategory === 'Home' ? 'Explora por Categor├¡a' : `Art├¡culos de ${activeCategory}`}\r\n        </h2>\r\n        <p className=\"text-slate-400 mt-1 text-sm\">\r\n          {activeCategory === 'Home' ? (isDev ? 'Descubre lo ├║ltimo en desarrollo.' : 'Descubre lo ├║ltimo en cada ├írea creativa.') : `${filteredPosts.length} historias curadas para ti.`}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Render Sections if Home, else render Feed */}\r\n      {isHomeView ? (\r\n        <div className=\"space-y-4\">\r\n          {/* Recent News Section (Always first) */}\r\n          <BlogCategorySection\r\n            title=\"Lo ├║ltimo\"\r\n            onArticleSelect={onArticleSelect}\r\n            onSave={onSave}\r\n            contentMode={contentMode}\r\n          />\r\n\r\n          {/* Render Sections from Navigation - use currentSections based on mode */}\r\n          {currentSections.filter(s => s.title !== 'Descubrir').map((section, idx) => {\r\n            // Flatten all subItems and labels to capture all potential category tags\r\n            const allCategories = section.items.flatMap(item => [item.label, ...(item.subItems || [])]);\r\n\r\n            return (\r\n              <BlogCategorySection\r\n                key={idx}\r\n                title={section.title}\r\n                categories={allCategories}\r\n                onArticleSelect={onArticleSelect}\r\n                onSave={onSave}\r\n                contentMode={contentMode}\r\n              />\r\n            );\r\n          })}\r\n\r\n          <div className=\"text-center text-slate-500 mt-12 pb-20\">\r\n            <p>Selecciona una categor├¡a del men├║ lateral para ver m├ís.</p>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 mb-16\">\r\n            {/* Filter out drafts and scheduled from public feed */}\r\n            {blogPosts\r\n              .filter(article => !article.status || article.status === 'published')\r\n              .map((article) => (\r\n                <BlogCard\r\n                  key={article.id}\r\n                  article={article}\r\n                  onClick={() => onArticleSelect?.(article.id)}\r\n                  onSave={onSave}\r\n                />\r\n              ))}\r\n\r\n            {loading && blogPosts.length === 0 && Array.from({ length: 6 }).map((_, i) => (\r\n              <div key={i} className=\"animate-pulse flex flex-col gap-4\">\r\n                <div className=\"aspect-[4/3] w-full bg-white/5 rounded-2xl\"></div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"h-4 w-20 bg-white/5 rounded\"></div>\r\n                  <div className=\"h-6 w-full bg-white/5 rounded\"></div>\r\n                  <div className=\"h-4 w-2/3 bg-white/5 rounded\"></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"flex justify-center items-center gap-6 mt-12 pb-20\">\r\n            <button\r\n              onClick={prevPage}\r\n              disabled={currentPage === 1 || loading}\r\n              className=\"flex items-center gap-2 px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold transition-all disabled:opacity-30 disabled:cursor-not-allowed\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" /> Anterior\r\n            </button>\r\n\r\n            <span className=\"text-slate-400 font-bold bg-white/5 px-4 py-2 rounded-lg border border-white/5\">\r\n              P├ígina {currentPage}\r\n            </span>\r\n\r\n            <button\r\n              onClick={nextPage}\r\n              disabled={!hasMore || loading}\r\n              className=\"flex items-center gap-2 px-6 py-3 rounded-xl bg-rose-600 hover:bg-rose-500 text-white font-bold transition-all shadow-lg hover:shadow-rose-500/20 disabled:opacity-50 disabled:bg-white/5 disabled:shadow-none disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? (\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <>Siguiente <ArrowRight className=\"h-4 w-4\" /></>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {!hasMore && blogPosts.length > 0 && (\r\n            <div className=\"text-center text-slate-500 mt-12 pb-20\">\r\n              <p>Has llegado al final. ┬íVuelve pronto por m├ís!</p>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\CreateArticleView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":116,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":121},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":123,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":136},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Share2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":138,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":144},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bookmark' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":146,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":154},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":156,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":168},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArticleSidebar' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MobileActionBar' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":73},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setScheduledDate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":233,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9980,9983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9980,9983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10078,10081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10078,10081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":235,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10182,10185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10182,10185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":251,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10784,10787],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10784,10787],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":327,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":327,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13622,13625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13622,13625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport { Image as ImageIcon, Type, Youtube, X, ChevronUp, ChevronDown, Trash2, Eye, Edit3, Layers, Save, Calendar, Heart, MessageCircle, Share2, Bookmark, CheckCircle2, Check, Hash } from 'lucide-react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { NAV_SECTIONS, NAV_SECTIONS_DEV } from '../../data/navigation';\r\nimport { useCreateArticle, useArticle, useUpdateArticle } from '../../hooks/useFirebase';\r\nimport { RichTextEditor, ArticlePreview, ArticleSidebar, MobileActionBar, ContentBlock } from './components';\r\nimport { EmailVerificationBanner } from '../../hooks/useContentVerification';\r\n\r\ninterface CreateArticleViewProps {\r\n  onBack: () => void;\r\n}\r\n\r\ntype BlockType = 'text' | 'image' | 'video';\r\n\r\nexport const CreateArticleView: React.FC<CreateArticleViewProps> = ({ onBack }) => {\r\n  const { actions, state } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  // Edit Mode Logic\r\n  const [searchParams] = useSearchParams();\r\n  const editId = searchParams.get('edit');\r\n  const isEditMode = !!editId;\r\n\r\n  const { article: existingArticle, loading: isLoadingExisting } = useArticle(editId || undefined);\r\n\r\n  const { create } = useCreateArticle();\r\n  const { update } = useUpdateArticle();\r\n\r\n  const [isPublishing, setIsPublishing] = useState(false);\r\n  const [publishStatus, setPublishStatus] = useState<'draft' | 'published' | 'scheduled'>('published');\r\n  const [scheduledDate, setScheduledDate] = useState('');\r\n  const [blocks, setBlocks] = useState<ContentBlock[]>([\r\n    { id: '1', type: 'text', content: '' }\r\n  ]);\r\n  const [title, setTitle] = useState('');\r\n  const [coverImage, setCoverImage] = useState<string | null>(null);\r\n  const [coverImageFile, setCoverImageFile] = useState<File | null>(null);\r\n\r\n  // Pre-fill data if editing\r\n  useEffect(() => {\r\n    if (existingArticle && isEditMode) {\r\n      setTitle(existingArticle.title);\r\n      setCategory(existingArticle.category);\r\n      setTags(existingArticle.tags || []);\r\n      setCoverImage(existingArticle.image);\r\n\r\n      // Preserve the original status when editing (don't auto-publish drafts)\r\n      if (existingArticle.status) {\r\n        setPublishStatus(existingArticle.status as 'draft' | 'published' | 'scheduled');\r\n      }\r\n\r\n      // Parse content back to blocks (simple heuristic: split by \\n\\n)\r\n      // Ideally we would store blocks structure in DB, but for now we reconstruct\r\n      // This assumes the plain text structure we saved. \r\n      // FUTURE TODO: Save 'blocks' JSON in Firestore for perfect fidelity.\r\n\r\n      // For now, let's treat the whole content as one text block if strict structure is lost, \r\n      // or try to split if we saved with specific delimiters. \r\n      // Since we saved as .join('\\n\\n'), we can try to split, but images/videos \r\n      // might be hard to distinguish exactly without parsing.\r\n\r\n      // Let's rely on the regex we used in BlogPostView to detect media\r\n      const splitContent = existingArticle.content.split('\\n\\n');\r\n      const reconstructedBlocks: ContentBlock[] = splitContent.map((chunk, index) => {\r\n        const getYoutubeId = (url: string) => {\r\n          const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n          const match = url.match(regExp);\r\n          return (match && match[2].length === 11) ? match[2] : null;\r\n        };\r\n\r\n        if (getYoutubeId(chunk.trim())) {\r\n          return { id: `restored-${index}`, type: 'video', content: chunk.trim() };\r\n        }\r\n        if (chunk.trim().match(/^https?:\\/\\/.*\\.(jpeg|jpg|gif|png|webp)$/i)) {\r\n          return { id: `restored-${index}`, type: 'image', content: chunk.trim() };\r\n        }\r\n        return { id: `restored-${index}`, type: 'text', content: chunk };\r\n      });\r\n\r\n      if (reconstructedBlocks.length > 0) {\r\n        setBlocks(reconstructedBlocks);\r\n      }\r\n    }\r\n  }, [existingArticle, isEditMode]);\r\n\r\n  // UX State\r\n  const [category, setCategory] = useState('');\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [tagInput, setTagInput] = useState('');\r\n  const [isPreview, setIsPreview] = useState(false);\r\n  const [isCategoryOpen, setIsCategoryOpen] = useState(false);\r\n  const categoryRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Dynamic Categories based on Content Mode\r\n  const sections = state.contentMode === 'dev' ? NAV_SECTIONS_DEV : NAV_SECTIONS;\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (categoryRef.current && !categoryRef.current.contains(event.target as Node)) {\r\n        setIsCategoryOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Find current category object to get related tags (subItems)\r\n  const currentCategoryData = useMemo(() => {\r\n    for (const section of sections) {\r\n      const found = section.items.find(item => item.label === category);\r\n      if (found) return found;\r\n    }\r\n    return null;\r\n  }, [category, sections]);\r\n\r\n  // Suggested tags are the subItems of the selected category\r\n  const suggestedTags = currentCategoryData?.subItems || [];\r\n\r\n  const addBlock = (type: BlockType) => {\r\n    const newBlock: ContentBlock = {\r\n      id: Date.now().toString(),\r\n      type,\r\n      content: ''\r\n    };\r\n    setBlocks([...blocks, newBlock]);\r\n  };\r\n\r\n  const updateBlock = (id: string, content: string) => {\r\n    setBlocks(blocks.map(b => b.id === id ? { ...b, content } : b));\r\n  };\r\n\r\n  const removeBlock = (id: string) => {\r\n    setBlocks(blocks.filter(b => b.id !== id));\r\n  };\r\n\r\n  const moveBlock = (index: number, direction: 'up' | 'down') => {\r\n    if (\r\n      (direction === 'up' && index === 0) ||\r\n      (direction === 'down' && index === blocks.length - 1)\r\n    ) return;\r\n\r\n    const newBlocks = [...blocks];\r\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n    [newBlocks[index], newBlocks[targetIndex]] = [newBlocks[targetIndex], newBlocks[index]];\r\n    setBlocks(newBlocks);\r\n  };\r\n\r\n  const getYoutubeId = (url: string) => {\r\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n    const match = url.match(regExp);\r\n    return (match && match[2].length === 11) ? match[2] : null;\r\n  };\r\n\r\n  // Convert URLs in text to clickable links\r\n  const linkifyText = (html: string): string => {\r\n    // URL regex pattern\r\n    const urlPattern = /(\\bhttps?:\\/\\/[^\\s<>\"']+)/gi;\r\n\r\n    // Check if the URL is already inside an anchor tag\r\n    return html.replace(urlPattern, (url) => {\r\n      // Create a safe URL\r\n      const safeUrl = url.replace(/\"/g, '&quot;');\r\n      return `<a href=\"${safeUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-rose-400 hover:text-rose-300 underline underline-offset-2 transition-colors\">${url}</a>`;\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>, onSuccess: (url: string) => void) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      // If this is for the cover (we check if onSuccess is setCoverImage), save the file\r\n      if (onSuccess === setCoverImage) {\r\n        setCoverImageFile(file);\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        onSuccess(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    if (!title.trim()) {\r\n      actions.showToast('Por favor escribe un t├¡tulo', 'error');\r\n      return;\r\n    }\r\n    if (!category) {\r\n      actions.showToast('Selecciona una categor├¡a', 'error');\r\n      return;\r\n    }\r\n    if (blocks.length === 0 || (blocks.length === 1 && !blocks[0].content.trim())) {\r\n      actions.showToast('El art├¡culo no puede estar vac├¡o', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsPublishing(true);\r\n\r\n    // Helper to strip HTML tags for excerpt\r\n    const stripHtml = (html: string) => {\r\n      const tmp = document.createElement(\"DIV\");\r\n      tmp.innerHTML = html;\r\n      return tmp.textContent || tmp.innerText || \"\";\r\n    };\r\n\r\n    const firstTextBlock = blocks.find(b => b.type === 'text')?.content || '';\r\n    const plainTextExcerpt = stripHtml(firstTextBlock);\r\n\r\n    // Construct the article item\r\n    const articleData = {\r\n      title,\r\n      excerpt: plainTextExcerpt.substring(0, 150) + (plainTextExcerpt.length > 150 ? '...' : '') || '',\r\n      image: coverImage || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=1000&auto=format&fit=crop',\r\n      author: state.user?.name || 'Usuario An├│nimo',\r\n      authorId: state.user?.id || 'anonymous',\r\n      authorUsername: state.user?.username || '',\r\n      authorAvatar: state.user?.avatar || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=100&auto=format&fit=crop',\r\n      // keep original date if editing\r\n      date: isEditMode && existingArticle ? existingArticle.date : new Date().toLocaleDateString('es-ES', { day: 'numeric', month: 'short', year: 'numeric' }),\r\n      readTime: Math.ceil((blocks.filter(b => b.type === 'text').reduce((acc, curr) => acc + curr.content.length, 0) / 500)) + ' min',\r\n      category: category,\r\n      // keep original stats\r\n      likes: isEditMode && existingArticle ? existingArticle.likes : 0,\r\n      comments: isEditMode && existingArticle ? existingArticle.comments : 0,\r\n      content: blocks.map(b => b.content).join('\\n\\n'),\r\n      tags: tags,\r\n      domain: state.contentMode,\r\n      // Publication status - preserve existing status when editing, otherwise use selected\r\n      status: isEditMode && existingArticle ? existingArticle.status : publishStatus,\r\n      scheduledAt: publishStatus === 'scheduled' ? scheduledDate : null,\r\n      // Preserve special fields from n8n automation\r\n      source: isEditMode && existingArticle ? (existingArticle as any).source : undefined,\r\n      previewToken: isEditMode && existingArticle ? (existingArticle as any).previewToken : undefined,\r\n      originalLink: isEditMode && existingArticle ? (existingArticle as any).originalLink : undefined\r\n    };\r\n\r\n    try {\r\n      if (isEditMode && editId) {\r\n        // UPDATE MODE\r\n        await update(editId, articleData, coverImageFile || undefined);\r\n        actions.showToast('Art├¡culo actualizado correctamente', 'success');\r\n        onBack();\r\n      } else {\r\n        // CREATE MODE\r\n        const result = await create(articleData, coverImageFile || undefined);\r\n        actions.showToast('Art├¡culo publicado correctamente', 'success');\r\n        // Navigate to the new article using its slug\r\n        navigate(`/blog/${result.slug}`);\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Publish/Update failed:\", error);\r\n      actions.showToast(error.message || 'Error al guardar el art├¡culo', 'error');\r\n    } finally {\r\n      setIsPublishing(false);\r\n    }\r\n  };\r\n\r\n  const handleAddTag = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && tagInput.trim()) {\r\n      e.preventDefault();\r\n      addTag(tagInput.trim());\r\n    }\r\n  };\r\n\r\n  const addTag = (tag: string) => {\r\n    if (!tags.includes(tag)) {\r\n      setTags([...tags, tag]);\r\n    }\r\n    setTagInput('');\r\n  };\r\n\r\n  const removeTag = (tagToRemove: string) => {\r\n    setTags(tags.filter(tag => tag !== tagToRemove));\r\n  };\r\n\r\n  /**\r\n   * Save as draft without publishing\r\n   */\r\n  const handleSaveDraft = async () => {\r\n    if (!title.trim()) {\r\n      actions.showToast('Por favor escribe un t├¡tulo', 'error');\r\n      return;\r\n    }\r\n\r\n    setPublishStatus('draft');\r\n    setIsPublishing(true);\r\n\r\n    const stripHtml = (html: string) => {\r\n      const tmp = document.createElement(\"DIV\");\r\n      tmp.innerHTML = html;\r\n      return tmp.textContent || tmp.innerText || \"\";\r\n    };\r\n\r\n    const firstTextBlock = blocks.find(b => b.type === 'text')?.content || '';\r\n    const plainTextExcerpt = stripHtml(firstTextBlock);\r\n\r\n    const articleData = {\r\n      title,\r\n      excerpt: plainTextExcerpt.substring(0, 150) + (plainTextExcerpt.length > 150 ? '...' : '') || '',\r\n      image: coverImage || 'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=1000&auto=format&fit=crop',\r\n      author: state.user?.name || 'Usuario An├│nimo',\r\n      authorId: state.user?.id || 'anonymous',\r\n      authorUsername: state.user?.username || '',\r\n      authorAvatar: state.user?.avatar || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=100&auto=format&fit=crop',\r\n      date: isEditMode && existingArticle ? existingArticle.date : new Date().toLocaleDateString('es-ES', { day: 'numeric', month: 'short', year: 'numeric' }),\r\n      readTime: Math.ceil((blocks.filter(b => b.type === 'text').reduce((acc, curr) => acc + curr.content.length, 0) / 500)) + ' min',\r\n      category: category || 'Sin categor├¡a',\r\n      likes: isEditMode && existingArticle ? existingArticle.likes : 0,\r\n      comments: isEditMode && existingArticle ? existingArticle.comments : 0,\r\n      content: blocks.map(b => b.content).join('\\n\\n'),\r\n      tags: tags,\r\n      domain: state.contentMode,\r\n      status: 'draft' as const,\r\n      scheduledAt: null\r\n    };\r\n\r\n    try {\r\n      if (isEditMode && editId) {\r\n        await update(editId, articleData, coverImageFile || undefined);\r\n        actions.showToast('Borrador actualizado', 'success');\r\n      } else {\r\n        await create(articleData, coverImageFile || undefined);\r\n        actions.showToast('Borrador guardado', 'success');\r\n      }\r\n      onBack();\r\n    } catch (error: any) {\r\n      console.error(\"Error saving draft:\", error);\r\n      actions.showToast(error.message || 'Error al guardar borrador', 'error');\r\n    } finally {\r\n      setIsPublishing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0d0d0f] text-slate-300 flex flex-col font-sans selection:bg-rose-500/30\">\r\n\r\n      {/* Header - Fixed & Minimal via Glassmorphism */}\r\n      <header className=\"sticky top-0 z-50 bg-[#0d0d0f]/80 backdrop-blur-xl border-b border-white/[0.06] h-16 flex items-center justify-between px-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <button onClick={onBack} className=\"text-slate-400 hover:text-white transition-colors flex items-center gap-2 group\">\r\n            <X className=\"h-5 w-5\" />\r\n            <span className=\"font-medium text-sm hidden md:inline\">Cancelar</span>\r\n          </button>\r\n          <div className=\"h-6 w-px bg-white/[0.06] hidden md:block\"></div>\r\n          <span className=\"font-bold text-white tracking-wide\">{isEditMode ? 'Editar Art├¡culo' : 'Escribir Art├¡culo'}</span>\r\n        </div>\r\n\r\n        {/* Preview Toggle */}\r\n        <button\r\n          onClick={() => setIsPreview(!isPreview)}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-sm font-medium hover:bg-white/10 transition-all\"\r\n        >\r\n          {isPreview ? (\r\n            <><Edit3 className=\"h-4 w-4\" /> Editar</>\r\n          ) : (\r\n            <><Eye className=\"h-4 w-4\" /> Vista Previa</>\r\n          )}\r\n        </button>\r\n      </header>\r\n\r\n      {/* Email Verification Banner */}\r\n      <div className=\"max-w-[1600px] w-full mx-auto px-6 pt-4\">\r\n        <EmailVerificationBanner />\r\n      </div>\r\n\r\n      {/* PREVIEW MODE - Render like BlogPostView */}\r\n      {isPreview ? (\r\n        <ArticlePreview\r\n          title={title}\r\n          category={category}\r\n          tags={tags}\r\n          coverImage={coverImage}\r\n          blocks={blocks}\r\n          user={state.user}\r\n          linkifyText={linkifyText}\r\n          getYoutubeId={getYoutubeId}\r\n        />\r\n      ) : (\r\n        /* EDIT MODE */\r\n        <main className=\"flex-1 max-w-[1600px] w-full mx-auto p-6 md:p-8 pb-28 lg:pb-8 grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-10\">\r\n\r\n          {/* LEFT COLUMN: Main Content */}\r\n          <div className=\"flex flex-col gap-8 min-w-0 animate-fade-in\">\r\n\r\n            {/* Loading Overlay */}\r\n            {isLoadingExisting && (\r\n              <div className=\"fixed inset-0 bg-slate-900/50 z-50 flex items-center justify-center\">\r\n                <div className=\"text-white font-bold animate-pulse\">Cargando art├¡culo...</div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Title Section - First */}\r\n            <div className=\"bg-[#18181b] border border-white/[0.06] rounded-2xl p-6 shadow-xl shadow-black/20\">\r\n              <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2 mb-4\">\r\n                <Type className=\"h-4 w-4\" /> T├¡tulo del Art├¡culo\r\n              </h3>\r\n              <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                placeholder=\"Escribe el t├¡tulo de tu art├¡culo...\"\r\n                className=\"w-full text-2xl md:text-3xl font-bold bg-transparent border-none placeholder-slate-700 text-white focus:outline-none focus:ring-0 px-0 leading-tight\"\r\n              />\r\n            </div>\r\n\r\n            {/* Category & Tags - Mobile Only */}\r\n            <div className=\"lg:hidden bg-[#18181b] border border-white/[0.06] rounded-2xl p-6 shadow-xl shadow-black/20 space-y-4\">\r\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Layers className=\"h-3 w-3\" /> Categor├¡a y Etiquetas\r\n              </h3>\r\n\r\n              {/* Mobile Category Select */}\r\n              <div className=\"relative\" ref={categoryRef}>\r\n                <div\r\n                  onClick={() => setIsCategoryOpen(!isCategoryOpen)}\r\n                  className={`w-full bg-white/5 border rounded-xl px-4 py-3 flex items-center justify-between cursor-pointer transition-all ${isCategoryOpen\r\n                    ? 'border-rose-500 ring-2 ring-rose-500/20'\r\n                    : 'border-white/10 hover:border-white/20'\r\n                    }`}\r\n                >\r\n                  <span className={category ? 'text-white' : 'text-slate-500'}>\r\n                    {category || 'Seleccionar tema...'}\r\n                  </span>\r\n                  <ChevronDown className={`h-4 w-4 text-slate-400 transition-transform ${isCategoryOpen ? 'rotate-180' : ''}`} />\r\n                </div>\r\n\r\n                {/* Dropdown */}\r\n                {isCategoryOpen && (\r\n                  <div className=\"absolute top-full left-0 right-0 mt-2 max-h-64 overflow-y-auto bg-[#1A1A1C] border border-white/10 rounded-xl shadow-2xl z-50 animate-fade-in custom-scrollbar\">\r\n                    {sections.map(section => (\r\n                      <div key={section.title} className=\"py-2\">\r\n                        <div className=\"px-4 py-1 text-[10px] font-bold text-slate-400 uppercase tracking-wider sticky top-0 bg-[#1A1A1C]/95 backdrop-blur-sm z-10\">\r\n                          {section.title}\r\n                        </div>\r\n                        {section.items.map(item => (\r\n                          <button\r\n                            key={item.label}\r\n                            onClick={() => {\r\n                              setCategory(item.label);\r\n                              setIsCategoryOpen(false);\r\n                            }}\r\n                            className=\"w-full text-left px-4 py-2.5 text-sm hover:bg-white/5 flex items-center justify-between group transition-colors\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"p-1.5 rounded-md bg-white/5 text-slate-500 group-hover:text-rose-500 group-hover:bg-rose-500/10 transition-colors\">\r\n                                <item.icon className=\"h-4 w-4\" />\r\n                              </div>\r\n                              <span className=\"text-slate-200 group-hover:text-white\">\r\n                                {item.label}\r\n                              </span>\r\n                            </div>\r\n                            {category === item.label && <Check className=\"h-4 w-4 text-rose-500\" />}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Mobile Tags */}\r\n              <div className=\"space-y-2 pt-4 border-t border-white/[0.06]\">\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                  <Hash className=\"h-3 w-3\" /> Etiquetas\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2 min-h-[32px]\">\r\n                  {tags.map(tag => (\r\n                    <span key={tag} className=\"flex items-center gap-1 px-2 py-1 bg-rose-500/20 text-rose-300 rounded-lg text-sm font-medium animate-fade-in\">\r\n                      {tag}\r\n                      <button onClick={() => removeTag(tag)} className=\"hover:text-red-500 ml-1\"><X className=\"h-3 w-3\" /></button>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  value={tagInput}\r\n                  onChange={(e) => setTagInput(e.target.value)}\r\n                  onKeyDown={handleAddTag}\r\n                  placeholder=\"Escribe y presiona Enter...\"\r\n                  className=\"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-rose-500\"\r\n                />\r\n                {/* Suggested Tags */}\r\n                {suggestedTags.length > 0 && (\r\n                  <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                    {suggestedTags.slice(0, 5).map(tag => (\r\n                      <button\r\n                        key={tag}\r\n                        onClick={() => addTag(tag)}\r\n                        disabled={tags.includes(tag)}\r\n                        className={`text-xs px-2 py-1 rounded-md border transition-colors ${tags.includes(tag)\r\n                          ? 'bg-white/5 text-slate-500 border-transparent cursor-default'\r\n                          : 'border-white/10 text-slate-400 hover:border-rose-400 hover:text-rose-400'\r\n                          }`}\r\n                      >\r\n                        + {tag}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cover Image Section - Second */}\r\n            <div className=\"bg-[#18181b] border border-white/[0.06] rounded-2xl p-6 shadow-xl shadow-black/20\">\r\n              <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2 mb-4\">\r\n                <ImageIcon className=\"h-4 w-4\" /> Portada del Art├¡culo\r\n              </h3>\r\n              {coverImage ? (\r\n                <div className=\"relative w-full aspect-video rounded-xl overflow-hidden group transition-all duration-500\">\r\n                  <img src={coverImage} alt=\"Cover\" className=\"w-full h-full object-cover\" />\r\n                  <>\r\n                    <button\r\n                      onClick={() => setCoverImage(null)}\r\n                      className=\"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10\"\r\n                    >\r\n                      <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <label\r\n                      htmlFor=\"cover-upload-change\"\r\n                      className=\"absolute inset-0 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 transition-opacity cursor-pointer\"\r\n                    >\r\n                      <span className=\"font-bold text-white shadow-sm\">Cambiar Portada</span>\r\n                      <span className=\"text-xs text-white/90 mt-1 font-medium shadow-sm\">Recomendado: 1920x1080px</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"cover-upload-change\"\r\n                      className=\"hidden\"\r\n                      accept=\"image/*\"\r\n                      onChange={(e) => handleImageChange(e, setCoverImage)}\r\n                    />\r\n                  </>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <label\r\n                    htmlFor=\"cover-upload\"\r\n                    className=\"w-full aspect-video rounded-xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center cursor-pointer hover:bg-white/5 transition-all group\"\r\n                  >\r\n                    <ImageIcon className=\"h-10 w-10 text-slate-500 mb-2 group-hover:text-rose-500\" />\r\n                    <span className=\"text-slate-400 font-medium group-hover:text-rose-400\">A├▒adir portada</span>\r\n                    <span className=\"text-xs text-slate-500 mt-2 group-hover:text-rose-400 transition-colors\">Recomendado: 1920x1080px</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"cover-upload\"\r\n                    className=\"hidden\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => handleImageChange(e, setCoverImage)}\r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Content Blocks Section - Third */}\r\n            <div className=\"bg-[#18181b] border border-white/[0.06] rounded-2xl p-8 shadow-xl shadow-black/20 space-y-6\">\r\n              <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Layers className=\"h-4 w-4\" /> Contenido del Art├¡culo\r\n              </h3>\r\n\r\n              {/* Content Blocks */}\r\n              <div className=\"space-y-6 pt-4 border-t border-white/[0.06]\">\r\n                {blocks.map((block, index) => (\r\n                  <div key={block.id} className=\"group relative transition-all\">\r\n\r\n                    {/* Block Controls - Top right, always visible on all devices */}\r\n                    {!isPreview && (\r\n                      <div className=\"flex items-center justify-end gap-2 mb-3\">\r\n                        <div className=\"flex items-center bg-white/5 rounded-lg overflow-hidden border border-white/10\">\r\n                          <button\r\n                            onClick={() => moveBlock(index, 'up')}\r\n                            disabled={index === 0}\r\n                            className=\"p-2 text-slate-400 hover:text-rose-500 hover:bg-white/10 active:bg-white/15 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\"\r\n                            title=\"Mover arriba\"\r\n                          >\r\n                            <ChevronUp className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <div className=\"w-px h-6 bg-white/10\" />\r\n                          <button\r\n                            onClick={() => moveBlock(index, 'down')}\r\n                            disabled={index === blocks.length - 1}\r\n                            className=\"p-2 text-slate-400 hover:text-rose-500 hover:bg-white/10 active:bg-white/15 disabled:opacity-30 disabled:cursor-not-allowed transition-colors\"\r\n                            title=\"Mover abajo\"\r\n                          >\r\n                            <ChevronDown className=\"h-4 w-4\" />\r\n                          </button>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => removeBlock(block.id)}\r\n                          className=\"p-2 bg-red-500/10 text-red-400 hover:bg-red-500/20 active:bg-red-500/30 rounded-lg transition-colors\"\r\n                          title=\"Eliminar bloque\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Block Content */}\r\n                    <div className=\"w-full\">\r\n                      {block.type === 'text' && (\r\n                        isPreview ? (\r\n                          <div\r\n                            className=\"text-lg leading-relaxed text-slate-300 font-serif whitespace-pre-wrap\"\r\n                            dangerouslySetInnerHTML={{ __html: block.content }}\r\n                          />\r\n                        ) : (\r\n                          <RichTextEditor\r\n                            initialContent={block.content}\r\n                            onChange={(newContent) => updateBlock(block.id, newContent)}\r\n                            placeholder=\"Escribe aqu├¡...\"\r\n                          />\r\n                        )\r\n                      )}\r\n\r\n                      {block.type === 'image' && (\r\n                        <div className=\"w-full my-6\">\r\n                          {block.content ? (\r\n                            <div className={`relative rounded-xl overflow-hidden ${!isPreview && 'group/img'}`}>\r\n                              <img src={block.content} alt=\"Content\" className=\"w-full rounded-xl shadow-md\" />\r\n                              {!isPreview && (\r\n                                <button\r\n                                  onClick={() => updateBlock(block.id, '')}\r\n                                  className=\"absolute top-2 right-2 p-1.5 bg-black/60 text-white rounded-full opacity-0 group-hover/img:opacity-100 transition-opacity hover:bg-red-500\"\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4\" />\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            !isPreview && (\r\n                              <>\r\n                                <label\r\n                                  htmlFor={`upload-${block.id}`}\r\n                                  className=\"h-48 rounded-xl bg-white/5 border-2 border-dashed border-white/10 flex flex-col items-center justify-center gap-2 cursor-pointer hover:border-rose-400 hover:bg-rose-500/10 transition-all group/upload\"\r\n                                >\r\n                                  <ImageIcon className=\"h-8 w-8 text-slate-400 group-hover/upload:text-rose-500\" />\r\n                                  <span className=\"text-sm font-medium text-slate-500 group-hover/upload:text-rose-400\">Haz click para subir una imagen</span>\r\n                                </label>\r\n                                <input\r\n                                  type=\"file\"\r\n                                  id={`upload-${block.id}`}\r\n                                  className=\"hidden\"\r\n                                  accept=\"image/*\"\r\n                                  onChange={(e) => handleImageChange(e, (url) => updateBlock(block.id, url))}\r\n                                />\r\n                              </>\r\n                            )\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {block.type === 'video' && (\r\n                        <div className=\"w-full my-6\">\r\n                          {getYoutubeId(block.content) ? (\r\n                            <div className=\"space-y-3\">\r\n                              <div className=\"aspect-video rounded-xl overflow-hidden bg-black shadow-lg\">\r\n                                <iframe\r\n                                  width=\"100%\"\r\n                                  height=\"100%\"\r\n                                  src={`https://www.youtube.com/embed/${getYoutubeId(block.content)}`}\r\n                                  title=\"YouTube video player\"\r\n                                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                                  allowFullScreen\r\n                                  className=\"border-none\"\r\n                                ></iframe>\r\n                              </div>\r\n                              {!isPreview && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <input\r\n                                    type=\"text\"\r\n                                    value={block.content}\r\n                                    onChange={(e) => updateBlock(block.id, e.target.value)}\r\n                                    className=\"flex-1 bg-white/5 border-none rounded-lg py-2 px-3 text-sm text-slate-400\"\r\n                                  />\r\n                                  <button onClick={() => updateBlock(block.id, '')} className=\"p-2 text-slate-400 hover:text-red-500\">\r\n                                    <X className=\"h-4 w-4\" />\r\n                                  </button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            !isPreview && (\r\n                              <div className=\"h-32 rounded-xl bg-white/5 border border-white/10 flex items-center px-6 gap-4\">\r\n                                <Youtube className=\"h-8 w-8 text-red-500 shrink-0\" />\r\n                                <input\r\n                                  type=\"text\"\r\n                                  placeholder=\"Pega el enlace de YouTube aqu├¡...\"\r\n                                  value={block.content}\r\n                                  onChange={(e) => updateBlock(block.id, e.target.value)}\r\n                                  className=\"flex-1 bg-transparent border-none text-lg text-white placeholder-slate-500 focus:outline-none focus:ring-0\"\r\n                                  autoFocus\r\n                                />\r\n                              </div>\r\n                            )\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Add Blocks Bar - Hide in Preview */}\r\n              {!isPreview && (\r\n                <div className=\"flex justify-center py-4 border-t border-white/[0.06]\">\r\n                  <div className=\"flex items-center gap-2 p-1.5 bg-white/5 rounded-xl border border-white/5\">\r\n                    <span className=\"text-xs font-bold text-slate-500 px-2 uppercase tracking-wider\">A├▒adir</span>\r\n                    <div className=\"h-4 w-px bg-white/10 mx-1\" />\r\n\r\n                    <button\r\n                      onClick={() => addBlock('text')}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-white/10 text-slate-400 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <Type className=\"h-4 w-4\" /> Texto\r\n                    </button>\r\n                    <button\r\n                      onClick={() => addBlock('image')}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-white/10 text-slate-400 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <ImageIcon className=\"h-4 w-4\" /> Imagen\r\n                    </button>\r\n                    <button\r\n                      onClick={() => addBlock('video')}\r\n                      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-white/10 text-slate-400 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <Youtube className=\"h-4 w-4 text-red-500\" /> Video\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/* RIGHT COLUMN: Sidebar */}\r\n          <aside className=\"hidden lg:flex flex-col gap-6 sticky top-24 h-fit\">\r\n\r\n            {/* Publish Actions Panel */}\r\n            <div className=\"bg-[#18181b] p-6 rounded-xl border border-white/[0.06] shadow-xl shadow-black/20 space-y-4\">\r\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Publicaci├│n</h3>\r\n\r\n              {/* Publish Button (Primary) */}\r\n              <button\r\n                onClick={handlePublish}\r\n                disabled={isPublishing}\r\n                className=\"w-full py-3 bg-rose-600 hover:bg-rose-500 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-lg shadow-rose-500/20 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {isPublishing ? (\r\n                  <>\r\n                    <div className=\"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                    <span>Publicando...</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Save className=\"h-4 w-4\" />\r\n                    <span>{isEditMode ? 'Guardar Cambios' : 'Publicar'}</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n\r\n              {/* Save Draft Button */}\r\n              <button\r\n                onClick={handleSaveDraft}\r\n                disabled={isPublishing}\r\n                className=\"w-full py-3 bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/30 text-blue-400 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n              >\r\n                <Save className=\"h-4 w-4\" />\r\n                Guardar Borrador\r\n              </button>\r\n\r\n              {/* Schedule (PRO) */}\r\n              <div className=\"relative group\">\r\n                <button\r\n                  disabled\r\n                  className=\"w-full py-3 bg-transparent border border-white/[0.06] text-slate-500 rounded-xl font-bold text-sm flex items-center justify-center gap-2 cursor-not-allowed opacity-60\"\r\n                >\r\n                  <Calendar className=\"h-4 w-4\" />\r\n                  Programar\r\n                </button>\r\n                <span className=\"absolute top-1/2 -translate-y-1/2 right-4 bg-rose-500 text-white text-[10px] font-bold px-2 py-0.5 rounded\">\r\n                  PRO\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Category & Tags Panel */}\r\n            <div className=\"bg-[#18181b] p-6 rounded-xl border border-white/[0.06] shadow-xl shadow-black/20 space-y-4\">\r\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Layers className=\"h-3 w-3\" /> Categor├¡a\r\n              </h3>\r\n\r\n              {/* Category Select */}\r\n              <div className=\"relative\" ref={categoryRef}>\r\n                <div\r\n                  onClick={() => setIsCategoryOpen(!isCategoryOpen)}\r\n                  className={`w-full bg-white/5 border rounded-xl px-4 py-3 flex items-center justify-between cursor-pointer transition-all ${isCategoryOpen\r\n                    ? 'border-rose-500 ring-2 ring-rose-500/20'\r\n                    : 'border-white/10 hover:border-white/20'\r\n                    }`}\r\n                >\r\n                  <span className={category ? 'text-white' : 'text-slate-500'}>\r\n                    {category || 'Seleccionar tema...'}\r\n                  </span>\r\n                  <ChevronDown className={`h-4 w-4 text-slate-400 transition-transform ${isCategoryOpen ? 'rotate-180' : ''}`} />\r\n                </div>\r\n\r\n                {/* Dropdown */}\r\n                {isCategoryOpen && (\r\n                  <div className=\"absolute top-full left-0 right-0 mt-2 max-h-64 overflow-y-auto bg-[#1A1A1C] border border-white/10 rounded-xl shadow-2xl z-50 animate-fade-in custom-scrollbar\">\r\n                    {sections.map(section => (\r\n                      <div key={section.title} className=\"py-2\">\r\n                        <div className=\"px-4 py-1 text-[10px] font-bold text-slate-400 uppercase tracking-wider sticky top-0 bg-[#1A1A1C]/95 backdrop-blur-sm z-10\">\r\n                          {section.title}\r\n                        </div>\r\n                        {section.items.map(item => (\r\n                          <button\r\n                            key={item.label}\r\n                            onClick={() => {\r\n                              setCategory(item.label);\r\n                              setIsCategoryOpen(false);\r\n                            }}\r\n                            className=\"w-full text-left px-4 py-2.5 text-sm hover:bg-white/5 flex items-center justify-between group transition-colors\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"p-1.5 rounded-md bg-white/5 text-slate-500 group-hover:text-rose-500 group-hover:bg-rose-500/10 transition-colors\">\r\n                                <item.icon className=\"h-4 w-4\" />\r\n                              </div>\r\n                              <span className=\"text-slate-200 group-hover:text-white\">\r\n                                {item.label}\r\n                              </span>\r\n                            </div>\r\n                            {category === item.label && <Check className=\"h-4 w-4 text-rose-500\" />}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Tags */}\r\n              <div className=\"space-y-2 pt-4 border-t border-white/[0.06]\">\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                  <Hash className=\"h-3 w-3\" /> Etiquetas\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2 min-h-[40px]\">\r\n                  {tags.map(tag => (\r\n                    <span key={tag} className=\"flex items-center gap-1 px-2 py-1 bg-rose-500/20 text-rose-300 rounded-lg text-sm font-medium animate-fade-in\">\r\n                      {tag}\r\n                      <button onClick={() => removeTag(tag)} className=\"hover:text-red-500 ml-1\"><X className=\"h-3 w-3\" /></button>\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  value={tagInput}\r\n                  onChange={(e) => setTagInput(e.target.value)}\r\n                  onKeyDown={handleAddTag}\r\n                  placeholder=\"Escribe y presiona Enter...\"\r\n                  className=\"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-rose-500\"\r\n                />\r\n                {/* Suggested Tags */}\r\n                {suggestedTags.length > 0 && (\r\n                  <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                    {suggestedTags.slice(0, 5).map(tag => (\r\n                      <button\r\n                        key={tag}\r\n                        onClick={() => addTag(tag)}\r\n                        disabled={tags.includes(tag)}\r\n                        className={`text-xs px-2 py-1 rounded-md border transition-colors ${tags.includes(tag)\r\n                          ? 'bg-white/5 text-slate-500 border-transparent cursor-default'\r\n                          : 'border-white/10 text-slate-400 hover:border-rose-400 hover:text-rose-400'\r\n                          }`}\r\n                      >\r\n                        + {tag}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n          </aside>\r\n\r\n          {/* Mobile Action Bar (Fixed Bottom) - Only on smaller screens */}\r\n          <div className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-[#0d0d0f]/90 backdrop-blur-xl border-t border-white/[0.06] py-4 px-6 z-30\">\r\n            <div className=\"flex items-center justify-center gap-4\">\r\n              <button\r\n                onClick={handlePublish}\r\n                disabled={isPublishing}\r\n                className=\"flex-1 py-3 bg-rose-600 hover:bg-rose-500 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n              >\r\n                {isPublishing ? 'Publicando...' : (isEditMode ? 'Guardar' : 'Publicar')}\r\n              </button>\r\n              <button\r\n                onClick={handleSaveDraft}\r\n                disabled={isPublishing}\r\n                className=\"py-3 px-4 bg-blue-500/10 border border-blue-500/30 text-blue-400 rounded-xl font-bold text-sm\"\r\n              >\r\n                <Save className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n        </main>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\PreviewPost.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authorUsername' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":100,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":268,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10552,10555],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10552,10555],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PreviewPost Component\r\n * \r\n * Secure preview page for draft articles generated by n8n automation.\r\n * Validates previewToken from URL against stored token in Firestore.\r\n * Shows 403 Forbidden if token is invalid or missing.\r\n * \r\n * Usage: /preview/:id?token=abc123\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { db } from '../../lib/firebase';\r\nimport { ArticleItem } from '../../types';\r\nimport {\r\n    ShieldAlert,\r\n    ArrowLeft,\r\n    ExternalLink,\r\n    AlertTriangle,\r\n    Loader2,\r\n    Clock,\r\n    Eye,\r\n    CheckCircle2,\r\n    Bot,\r\n    Send,\r\n    Edit,\r\n    Trash2,\r\n    Check\r\n} from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport { useAuthorInfo } from '../../hooks/useAuthorInfo';\r\n\r\ntype PreviewState = 'loading' | 'authorized' | 'forbidden' | 'not_found' | 'error';\r\n\r\nexport const PreviewPost: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const token = searchParams.get('token');\r\n\r\n    const [article, setArticle] = useState<ArticleItem | null>(null);\r\n    const [state, setState] = useState<PreviewState>('loading');\r\n    const [errorMessage, setErrorMessage] = useState<string>('');\r\n    const [actionLoading, setActionLoading] = useState<'publish' | 'reject' | null>(null);\r\n    const [actionSuccess, setActionSuccess] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchArticle = async () => {\r\n            if (!id) {\r\n                setState('not_found');\r\n                setErrorMessage('ID de art├¡culo no proporcionado');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const docRef = doc(db, 'articles', id);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                if (!docSnap.exists()) {\r\n                    setState('not_found');\r\n                    setErrorMessage('Art├¡culo no encontrado');\r\n                    return;\r\n                }\r\n\r\n                const data = docSnap.data() as ArticleItem;\r\n                const articleData = { ...data, id: docSnap.id };\r\n\r\n                // Security validation for drafts\r\n                if (data.status === 'draft' || data.status === 'rejected') {\r\n                    if (!token) {\r\n                        setState('forbidden');\r\n                        setErrorMessage('Token de acceso requerido');\r\n                        return;\r\n                    }\r\n\r\n                    if (data.previewToken !== token) {\r\n                        setState('forbidden');\r\n                        setErrorMessage('Token de acceso inv├ílido');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                setArticle(articleData);\r\n                setState('authorized');\r\n\r\n            } catch (err) {\r\n                console.error('Error fetching preview:', err);\r\n                setState('error');\r\n                setErrorMessage('Error al cargar el art├¡culo');\r\n            }\r\n        };\r\n\r\n        fetchArticle();\r\n    }, [id, token]);\r\n\r\n    // Live author lookup - must be called before any conditional returns (React hooks rules)\r\n    // Uses safe fallbacks when article is not yet loaded\r\n    const { authorName, authorUsername, authorAvatar } = useAuthorInfo(\r\n        article?.authorId,\r\n        article?.author,\r\n        article?.authorAvatar\r\n    );\r\n\r\n    // Handle Publish Action\r\n    const handlePublish = async () => {\r\n        if (!id || !token || !article) return;\r\n\r\n        setActionLoading('publish');\r\n        try {\r\n            const docRef = doc(db, 'articles', id);\r\n            await updateDoc(docRef, {\r\n                status: 'published',\r\n                publishedAt: new Date().toISOString(),\r\n                previewToken: token // Include token for Firestore rule validation\r\n            });\r\n\r\n            setArticle({ ...article, status: 'published' });\r\n            setActionSuccess('┬íArt├¡culo publicado exitosamente!');\r\n\r\n            // Redirect to published article after 2 seconds\r\n            setTimeout(() => {\r\n                navigate(`/blog/${id}`);\r\n            }, 2000);\r\n        } catch (error) {\r\n            console.error('Error publishing:', error);\r\n            setErrorMessage('Error al publicar. Intenta de nuevo.');\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    // Handle Reject Action\r\n    const handleReject = async () => {\r\n        if (!id || !token || !article) return;\r\n\r\n        setActionLoading('reject');\r\n        try {\r\n            const docRef = doc(db, 'articles', id);\r\n            await updateDoc(docRef, {\r\n                status: 'rejected',\r\n                previewToken: token // Include token for Firestore rule validation\r\n            });\r\n\r\n            setArticle({ ...article, status: 'rejected' });\r\n            setActionSuccess('Art├¡culo rechazado.');\r\n        } catch (error) {\r\n            console.error('Error rejecting:', error);\r\n            setErrorMessage('Error al rechazar. Intenta de nuevo.');\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    // Handle Edit - Redirect to editor\r\n    const handleEdit = () => {\r\n        navigate(`/create/article?edit=${id}`);\r\n    };\r\n\r\n    // Loading State\r\n    if (state === 'loading') {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#0d0d0f] flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <Loader2 className=\"h-12 w-12 animate-spin text-amber-500 mx-auto mb-4\" />\r\n                    <p className=\"text-slate-400\">Cargando preview...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // 403 Forbidden State\r\n    if (state === 'forbidden') {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-b from-red-950/30 to-[#0d0d0f] flex items-center justify-center p-6\">\r\n                <div className=\"max-w-md w-full text-center\">\r\n                    <div className=\"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6 ring-4 ring-red-500/10\">\r\n                        <ShieldAlert className=\"h-12 w-12 text-red-500\" />\r\n                    </div>\r\n                    <h1 className=\"text-4xl font-bold text-red-400 mb-3\">403</h1>\r\n                    <h2 className=\"text-2xl font-bold text-white mb-4\">Acceso Denegado</h2>\r\n                    <p className=\"text-slate-400 mb-8\">\r\n                        {errorMessage || 'No tienes permiso para ver este contenido.'}\r\n                    </p>\r\n                    <div className=\"p-4 bg-red-500/10 border border-red-500/20 rounded-xl mb-8\">\r\n                        <p className=\"text-sm text-red-300\">\r\n                            Este art├¡culo es un <strong>borrador</strong> y requiere un token de acceso v├ílido\r\n                            para ser visualizado.\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => navigate('/')}\r\n                        className=\"inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/15 \r\n                                   text-white font-semibold rounded-xl transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"h-4 w-4\" />\r\n                        Volver al inicio\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // 404 Not Found State\r\n    if (state === 'not_found') {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#0d0d0f] flex items-center justify-center p-6\">\r\n                <div className=\"max-w-md w-full text-center\">\r\n                    <div className=\"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                        <Eye className=\"h-10 w-10 text-slate-500\" />\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-white mb-4\">Art├¡culo no encontrado</h1>\r\n                    <p className=\"text-slate-400 mb-8\">{errorMessage}</p>\r\n                    <button\r\n                        onClick={() => navigate('/blog')}\r\n                        className=\"inline-flex items-center gap-2 px-6 py-3 bg-amber-600 hover:bg-amber-500 \r\n                                   text-white font-semibold rounded-xl transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"h-4 w-4\" />\r\n                        Ir al Blog\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Error State\r\n    if (state === 'error') {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#0d0d0f] flex items-center justify-center p-6\">\r\n                <div className=\"max-w-md w-full text-center\">\r\n                    <div className=\"w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                        <AlertTriangle className=\"h-10 w-10 text-amber-500\" />\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-white mb-4\">Error</h1>\r\n                    <p className=\"text-slate-400 mb-8\">{errorMessage}</p>\r\n                    <button\r\n                        onClick={() => window.location.reload()}\r\n                        className=\"inline-flex items-center gap-2 px-6 py-3 bg-amber-600 hover:bg-amber-500 \r\n                                   text-white font-semibold rounded-xl transition-colors\"\r\n                    >\r\n                        Reintentar\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Authorized - Render Article Preview\r\n    if (!article) return null;\r\n\r\n    const isDraft = article.status === 'draft';\r\n    const isRejected = article.status === 'rejected';\r\n    const isAutomated = article.source === 'n8n';\r\n\r\n    // Get content text - handle nested structure from n8n\r\n    const getContentText = (): string => {\r\n        if (!article.content) return '';\r\n\r\n        // If content is a string, return it directly\r\n        if (typeof article.content === 'string') {\r\n            return article.content;\r\n        }\r\n\r\n        // If content has nested parts structure from Gemini\r\n        if (typeof article.content === 'object') {\r\n            const content = article.content as any;\r\n            if (content.parts && Array.isArray(content.parts) && content.parts[0]?.text) {\r\n                return content.parts[0].text;\r\n            }\r\n        }\r\n\r\n        return String(article.content);\r\n    };\r\n\r\n    const contentText = getContentText();\r\n\r\n    return (\r\n        <div className=\"max-w-[1800px] mx-auto transition-colors animate-fade-in pb-20 bg-[#0d0d0f] min-h-screen\">\r\n            {/* Preview Banner - Sticky */}\r\n            <div className={`sticky top-0 z-50 py-3 px-4 text-center font-bold shadow-lg ${isRejected\r\n                ? 'bg-red-600 text-white'\r\n                : isDraft\r\n                    ? 'bg-amber-500 text-black'\r\n                    : 'bg-green-600 text-white'\r\n                }`}>\r\n                <div className=\"flex items-center justify-center gap-2\">\r\n                    <AlertTriangle className=\"h-4 w-4\" />\r\n                    <span>\r\n                        {isRejected\r\n                            ? '­ƒùæ´©Å RECHAZADO - Este art├¡culo fue descartado'\r\n                            : isDraft\r\n                                ? '­ƒöì MODO PREVIEW - Este art├¡culo es un borrador'\r\n                                : 'Ô£à PUBLICADO - Vista p├║blica'}\r\n                    </span>\r\n                </div>\r\n                {isAutomated && (\r\n                    <p className=\"text-xs opacity-80 mt-1\">\r\n                        Contenido generado autom├íticamente por n8n\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Top Navigation Bar */}\r\n            <div className=\"sticky top-12 z-20 bg-[#0d0d0f]/90 backdrop-blur-xl border-b border-white/[0.06] px-6 py-4 flex items-center justify-between\">\r\n                <button\r\n                    onClick={() => navigate('/blog')}\r\n                    className=\"flex items-center gap-2 text-sm font-medium text-slate-400 hover:text-white transition-colors\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" />\r\n                    Volver al Blog\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8 px-6 md:px-10 py-10 relative\">\r\n\r\n                {/* Left Sidebar - Status Info & Actions (Sticky) */}\r\n                <aside className=\"hidden lg:flex lg:col-span-1 flex-col items-center gap-6 sticky top-36 h-fit\">\r\n                    <div className=\"flex flex-col gap-4 bg-white/5 p-3 rounded-2xl border border-white/10 w-full items-center\">\r\n                        {/* Status Indicators */}\r\n                        {isDraft && (\r\n                            <div className=\"p-3 rounded-xl bg-amber-500/10 text-amber-500 flex flex-col items-center gap-1\">\r\n                                <AlertTriangle className=\"h-5 w-5\" />\r\n                                <span className=\"text-[10px] font-bold uppercase\">Borrador</span>\r\n                            </div>\r\n                        )}\r\n                        {isRejected && (\r\n                            <div className=\"p-3 rounded-xl bg-red-500/10 text-red-500 flex flex-col items-center gap-1\">\r\n                                <Trash2 className=\"h-5 w-5\" />\r\n                                <span className=\"text-[10px] font-bold uppercase\">Rechazado</span>\r\n                            </div>\r\n                        )}\r\n                        {isAutomated && (\r\n                            <div className=\"p-3 rounded-xl bg-blue-500/10 text-blue-400 flex flex-col items-center gap-1\">\r\n                                <Bot className=\"h-5 w-5\" />\r\n                                <span className=\"text-[10px] font-bold uppercase\">Auto</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Action Buttons - Only for drafts with valid token */}\r\n                        {isDraft && token && (\r\n                            <>\r\n                                <div className=\"h-px w-8 bg-white/10 my-1\" />\r\n\r\n                                {/* Publish Button */}\r\n                                <button\r\n                                    onClick={handlePublish}\r\n                                    disabled={actionLoading !== null}\r\n                                    className={`w-full p-3 rounded-xl bg-green-500/20 text-green-400 hover:bg-green-500/30 \r\n                                               transition-all flex flex-col items-center gap-1 \r\n                                               ${actionLoading === 'publish' ? 'opacity-50 cursor-wait' : 'hover:scale-105'}`}\r\n                                    title=\"Publicar art├¡culo\"\r\n                                >\r\n                                    {actionLoading === 'publish' ? (\r\n                                        <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                    ) : (\r\n                                        <Send className=\"h-5 w-5\" />\r\n                                    )}\r\n                                    <span className=\"text-[10px] font-bold uppercase\">Publicar</span>\r\n                                </button>\r\n\r\n                                {/* Edit Button */}\r\n                                <button\r\n                                    onClick={handleEdit}\r\n                                    disabled={actionLoading !== null}\r\n                                    className=\"w-full p-3 rounded-xl bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 \r\n                                               transition-all flex flex-col items-center gap-1 hover:scale-105\"\r\n                                    title=\"Editar art├¡culo\"\r\n                                >\r\n                                    <Edit className=\"h-5 w-5\" />\r\n                                    <span className=\"text-[10px] font-bold uppercase\">Editar</span>\r\n                                </button>\r\n\r\n                                {/* Reject Button */}\r\n                                <button\r\n                                    onClick={handleReject}\r\n                                    disabled={actionLoading !== null}\r\n                                    className={`w-full p-3 rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 \r\n                                               transition-all flex flex-col items-center gap-1 \r\n                                               ${actionLoading === 'reject' ? 'opacity-50 cursor-wait' : 'hover:scale-105'}`}\r\n                                    title=\"Rechazar art├¡culo\"\r\n                                >\r\n                                    {actionLoading === 'reject' ? (\r\n                                        <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                    ) : (\r\n                                        <Trash2 className=\"h-5 w-5\" />\r\n                                    )}\r\n                                    <span className=\"text-[10px] font-bold uppercase\">Rechazar</span>\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Success Message */}\r\n                    {actionSuccess && (\r\n                        <div className=\"p-4 bg-green-500/20 border border-green-500/30 rounded-xl text-center animate-fade-in\">\r\n                            <Check className=\"h-6 w-6 text-green-400 mx-auto mb-2\" />\r\n                            <p className=\"text-xs text-green-300 font-medium\">{actionSuccess}</p>\r\n                        </div>\r\n                    )}\r\n                </aside>\r\n\r\n                {/* Center Column - Article Content */}\r\n                <article className=\"lg:col-span-8 lg:px-8\">\r\n                    <div className=\"mb-10 text-center lg:text-left\">\r\n                        {article.category && (\r\n                            <>\r\n                                <span className=\"px-3 py-1 rounded-full bg-amber-500/10 text-amber-400 text-xs font-bold uppercase tracking-wider border border-amber-500/20\">\r\n                                    {article.category}\r\n                                </span>\r\n                                <span className=\"text-slate-500 text-sm mx-2\">ÔÇó</span>\r\n                            </>\r\n                        )}\r\n                        <span className=\"text-slate-400 text-sm font-medium inline-flex items-center gap-1\">\r\n                            <Clock className=\"h-3.5 w-3.5\" />\r\n                            {article.date ? new Date(article.date).toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' }) : 'Fecha no disponible'}\r\n                        </span>\r\n                        {article.readTime && (\r\n                            <>\r\n                                <span className=\"text-slate-500 text-sm mx-2\">ÔÇó</span>\r\n                                <span className=\"text-slate-400 text-sm\">{article.readTime} de lectura</span>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight mb-8 font-display\">\r\n                        {article.title || 'Sin t├¡tulo'}\r\n                    </h1>\r\n\r\n                    {/* Author Section */}\r\n                    <div className=\"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-6 border-y border-white/10 py-6 mb-8\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"h-12 w-12 rounded-full overflow-hidden ring-2 ring-white/10\">\r\n                                <img\r\n                                    src={authorAvatar || 'https://via.placeholder.com/100?text=?'}\r\n                                    alt={authorName || 'Autor'}\r\n                                    className=\"h-full w-full object-cover\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-col\">\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                    <h3 className=\"font-bold text-lg text-white leading-none\">\r\n                                        {authorName || 'Autor desconocido'}\r\n                                    </h3>\r\n                                    <CheckCircle2 className=\"h-4 w-4 text-amber-500 fill-amber-500/20\" />\r\n                                    {isAutomated && (\r\n                                        <span className=\"ml-2 px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 text-[10px] font-bold uppercase\">\r\n                                            Bot\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                                <span className=\"text-xs text-slate-400 font-medium\">Contenido de vista previa</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Cover Image */}\r\n                    <div className=\"mb-12 rounded-3xl overflow-hidden aspect-video shadow-2xl ring-1 ring-white/10 relative\">\r\n                        <img\r\n                            src={article.image || 'https://via.placeholder.com/1200x630?text=Sin+Imagen'}\r\n                            alt={article.title}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={(e) => {\r\n                                (e.target as HTMLImageElement).src = 'https://via.placeholder.com/1200x630?text=Sin+Imagen';\r\n                            }}\r\n                        />\r\n                        {isDraft && (\r\n                            <div className=\"absolute top-4 right-4 px-3 py-1.5 bg-amber-500 text-black text-xs font-bold rounded-full shadow-lg\">\r\n                                BORRADOR\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Article Content */}\r\n                    <div className=\"prose prose-lg prose-invert max-w-none text-slate-300 leading-loose\r\n                                    prose-headings:font-bold prose-headings:text-white\r\n                                    prose-p:text-slate-300 prose-p:leading-relaxed\r\n                                    prose-a:text-amber-400 prose-a:no-underline hover:prose-a:underline\r\n                                    prose-strong:text-white prose-strong:font-semibold\r\n                                    prose-em:text-slate-300\r\n                                    prose-code:bg-black/40 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-amber-300 prose-code:text-sm\r\n                                    prose-pre:bg-black/40 prose-pre:rounded-xl prose-pre:border prose-pre:border-white/10\r\n                                    prose-blockquote:border-amber-500 prose-blockquote:bg-amber-500/5 prose-blockquote:rounded-r-xl\r\n                                    prose-ul:text-slate-300 prose-ol:text-slate-300\r\n                                    prose-img:rounded-xl prose-img:ring-1 prose-img:ring-white/10\">\r\n                        {contentText ? (\r\n                            contentText.trim().startsWith('<') ? (\r\n                                <div dangerouslySetInnerHTML={{ __html: contentText }} />\r\n                            ) : (\r\n                                <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n                                    {contentText}\r\n                                </ReactMarkdown>\r\n                            )\r\n                        ) : (\r\n                            <p className=\"text-slate-500 italic\">Sin contenido disponible.</p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Tags */}\r\n                    {article.tags && article.tags.length > 0 && (\r\n                        <div className=\"flex flex-wrap gap-2 mt-12 pt-8 border-t border-white/10\">\r\n                            {article.tags.map((tag, idx) => (\r\n                                <span\r\n                                    key={idx}\r\n                                    className=\"px-4 py-2 rounded-xl bg-white/5 text-slate-400 text-sm font-bold border border-white/5\"\r\n                                >\r\n                                    #{tag}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Original Source Link */}\r\n                    {article.originalLink && (\r\n                        <div className=\"mt-12 p-6 bg-white/5 rounded-2xl border border-white/10\">\r\n                            <h4 className=\"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3\">\r\n                                ­ƒô░ Fuente Original\r\n                            </h4>\r\n                            <a\r\n                                href={article.originalLink}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 hover:underline transition-colors break-all\"\r\n                            >\r\n                                {article.originalLink}\r\n                                <ExternalLink className=\"h-4 w-4 shrink-0\" />\r\n                            </a>\r\n                            <p className=\"text-xs text-slate-500 mt-2\">\r\n                                Este contenido fue adaptado/traducido de la fuente original.\r\n                                Todos los derechos pertenecen a sus respectivos autores.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Back Button */}\r\n                    <div className=\"mt-12 pt-8 border-t border-white/10\">\r\n                        <button\r\n                            onClick={() => navigate(-1)}\r\n                            className=\"inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/15 \r\n                                       text-white font-semibold rounded-xl transition-colors\"\r\n                        >\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                            Volver\r\n                        </button>\r\n                    </div>\r\n                </article>\r\n\r\n                {/* Right Sidebar - Preview Info */}\r\n                <aside className=\"lg:col-span-3 space-y-6\">\r\n                    <div className=\"sticky top-36\">\r\n                        <div className=\"bg-white/[0.02] rounded-2xl border border-white/5 p-6 shadow-xl\">\r\n                            <h3 className=\"text-lg font-bold text-white mb-6 flex items-center gap-2\">\r\n                                <div className=\"h-6 w-1 bg-amber-500 rounded-full\"></div>\r\n                                Informaci├│n del Preview\r\n                            </h3>\r\n\r\n                            <div className=\"space-y-4 text-sm\">\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-slate-500\">Estado:</span>\r\n                                    <span className={`font-bold ${isDraft ? 'text-amber-400' : isRejected ? 'text-red-400' : 'text-green-400'}`}>\r\n                                        {isDraft ? 'Borrador' : isRejected ? 'Rechazado' : 'Publicado'}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-slate-500\">Fuente:</span>\r\n                                    <span className=\"text-slate-300 font-medium\">{article.source || 'manual'}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-slate-500\">Categor├¡a:</span>\r\n                                    <span className=\"text-slate-300 font-medium\">{article.category || '-'}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-slate-500\">Dominio:</span>\r\n                                    <span className=\"text-slate-300 font-medium\">{article.domain || '-'}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {isDraft && (\r\n                                <div className=\"mt-6 p-4 bg-amber-500/10 rounded-xl border border-amber-500/20\">\r\n                                    <p className=\"text-xs text-amber-300\">\r\n                                        <strong>Nota:</strong> Este art├¡culo est├í pendiente de revisi├│n.\r\n                                        Solo es visible con el token de preview.\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </aside>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PreviewPost;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\components\\ArticlePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\components\\ArticleSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect } from 'react';\r\nimport { Save, Calendar, ChevronDown, Check, X, Layers, Hash } from 'lucide-react';\r\n\r\n/**\r\n * Item de navegaci├│n para dropdown de categor├¡as\r\n */\r\ninterface NavItem {\r\n    label: string;\r\n    icon: React.FC<{ className?: string }>;\r\n    subItems?: string[];\r\n}\r\n\r\ninterface NavSection {\r\n    title: string;\r\n    items: NavItem[];\r\n}\r\n\r\n/**\r\n * Props para el componente ArticleSidebar\r\n */\r\ninterface ArticleSidebarProps {\r\n    /** Si el art├¡culo est├í siendo editado (vs creado) */\r\n    isEditMode: boolean;\r\n    /** Si una operaci├│n de publicar/guardar est├í en progreso */\r\n    isPublishing: boolean;\r\n    /** Categor├¡a seleccionada actualmente */\r\n    category: string;\r\n    /** Si el dropdown de categor├¡a est├í abierto */\r\n    isCategoryOpen: boolean;\r\n    /** Callback para alternar dropdown de categor├¡a */\r\n    setIsCategoryOpen: (open: boolean) => void;\r\n    /** Callback cuando se selecciona categor├¡a */\r\n    setCategory: (cat: string) => void;\r\n    /** Referencia para dropdown de categor├¡a (para clic afuera) */\r\n    categoryRef: React.RefObject<HTMLDivElement>;\r\n    /** Secciones de categor├¡as disponibles */\r\n    sections: NavSection[];\r\n    /** Tags actuales */\r\n    tags: string[];\r\n    /** Valor del input de tag */\r\n    tagInput: string;\r\n    /** Callback cuando cambia el input de tag */\r\n    setTagInput: (val: string) => void;\r\n    /** Callback cuando se presiona tecla en input de tag */\r\n    handleAddTag: (e: React.KeyboardEvent) => void;\r\n    /** Callback para agregar un tag */\r\n    addTag: (tag: string) => void;\r\n    /** Callback para eliminar un tag */\r\n    removeTag: (tag: string) => void;\r\n    /** Tags sugeridos basados en categor├¡a */\r\n    suggestedTags: string[];\r\n    /** Callback para bot├│n de publicar */\r\n    handlePublish: () => void;\r\n    /** Callback para bot├│n de guardar borrador */\r\n    handleSaveDraft: () => void;\r\n}\r\n\r\n/**\r\n * Componente sidebar para el editor de art├¡culos.\r\n * Contiene:\r\n * - Botones de Publicar/Borrador/Programar\r\n * - Selector de categor├¡a con dropdown\r\n * - Input de tags con sugerencias\r\n */\r\nexport const ArticleSidebar: React.FC<ArticleSidebarProps> = ({\r\n    isEditMode,\r\n    isPublishing,\r\n    category,\r\n    isCategoryOpen,\r\n    setIsCategoryOpen,\r\n    setCategory,\r\n    categoryRef,\r\n    sections,\r\n    tags,\r\n    tagInput,\r\n    setTagInput,\r\n    handleAddTag,\r\n    addTag,\r\n    removeTag,\r\n    suggestedTags,\r\n    handlePublish,\r\n    handleSaveDraft\r\n}) => {\r\n    return (\r\n        <aside className=\"hidden lg:flex flex-col gap-6 sticky top-24 h-fit\">\r\n\r\n            {/* Publish Actions Panel */}\r\n            <div className=\"bg-[#18181b] p-6 rounded-xl border border-white/[0.06] shadow-xl shadow-black/20 space-y-4\">\r\n                <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Publicaci├│n</h3>\r\n\r\n                {/* Publish Button */}\r\n                <button\r\n                    onClick={handlePublish}\r\n                    disabled={isPublishing}\r\n                    className=\"w-full py-3 bg-rose-600 hover:bg-rose-500 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-lg shadow-rose-500/20 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {isPublishing ? (\r\n                        <>\r\n                            <div className=\"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                            <span>Publicando...</span>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Save className=\"h-4 w-4\" />\r\n                            <span>{isEditMode ? 'Guardar Cambios' : 'Publicar'}</span>\r\n                        </>\r\n                    )}\r\n                </button>\r\n\r\n                {/* Save Draft Button */}\r\n                <button\r\n                    onClick={handleSaveDraft}\r\n                    disabled={isPublishing}\r\n                    className=\"w-full py-3 bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/30 text-blue-400 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                >\r\n                    <Save className=\"h-4 w-4\" />\r\n                    Guardar Borrador\r\n                </button>\r\n\r\n                {/* Schedule (PRO) */}\r\n                <div className=\"relative group\">\r\n                    <button\r\n                        disabled\r\n                        className=\"w-full py-3 bg-transparent border border-white/[0.06] text-slate-500 rounded-xl font-bold text-sm flex items-center justify-center gap-2 cursor-not-allowed opacity-60\"\r\n                    >\r\n                        <Calendar className=\"h-4 w-4\" />\r\n                        Programar\r\n                    </button>\r\n                    <span className=\"absolute top-1/2 -translate-y-1/2 right-4 bg-rose-500 text-white text-[10px] font-bold px-2 py-0.5 rounded\">\r\n                        PRO\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Category & Tags Panel */}\r\n            <div className=\"bg-[#18181b] p-6 rounded-xl border border-white/[0.06] shadow-xl shadow-black/20 space-y-4\">\r\n                <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                    <Layers className=\"h-3 w-3\" /> Categor├¡a\r\n                </h3>\r\n\r\n                {/* Category Select */}\r\n                <div className=\"relative\" ref={categoryRef}>\r\n                    <div\r\n                        onClick={() => setIsCategoryOpen(!isCategoryOpen)}\r\n                        className={`w-full bg-white/5 border rounded-xl px-4 py-3 flex items-center justify-between cursor-pointer transition-all ${isCategoryOpen\r\n                            ? 'border-rose-500 ring-2 ring-rose-500/20'\r\n                            : 'border-white/10 hover:border-white/20'\r\n                            }`}\r\n                    >\r\n                        <span className={category ? 'text-white' : 'text-slate-500'}>\r\n                            {category || 'Seleccionar tema...'}\r\n                        </span>\r\n                        <ChevronDown className={`h-4 w-4 text-slate-400 transition-transform ${isCategoryOpen ? 'rotate-180' : ''}`} />\r\n                    </div>\r\n\r\n                    {/* Dropdown */}\r\n                    {isCategoryOpen && (\r\n                        <div className=\"absolute top-full left-0 right-0 mt-2 max-h-64 overflow-y-auto bg-[#1A1A1C] border border-white/10 rounded-xl shadow-2xl z-50 animate-fade-in custom-scrollbar\">\r\n                            {sections.map(section => (\r\n                                <div key={section.title} className=\"py-2\">\r\n                                    <div className=\"px-4 py-1 text-[10px] font-bold text-slate-400 uppercase tracking-wider sticky top-0 bg-[#1A1A1C]/95 backdrop-blur-sm z-10\">\r\n                                        {section.title}\r\n                                    </div>\r\n                                    {section.items.map(item => (\r\n                                        <button\r\n                                            key={item.label}\r\n                                            onClick={() => {\r\n                                                setCategory(item.label);\r\n                                                setIsCategoryOpen(false);\r\n                                            }}\r\n                                            className=\"w-full text-left px-4 py-2.5 text-sm hover:bg-white/5 flex items-center justify-between group transition-colors\"\r\n                                        >\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"p-1.5 rounded-md bg-white/5 text-slate-500 group-hover:text-rose-500 group-hover:bg-rose-500/10 transition-colors\">\r\n                                                    <item.icon className=\"h-4 w-4\" />\r\n                                                </div>\r\n                                                <span className=\"text-slate-200 group-hover:text-white\">\r\n                                                    {item.label}\r\n                                                </span>\r\n                                            </div>\r\n                                            {category === item.label && <Check className=\"h-4 w-4 text-rose-500\" />}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Tags */}\r\n                <div className=\"space-y-2 pt-4 border-t border-white/[0.06]\">\r\n                    <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                        <Hash className=\"h-3 w-3\" /> Etiquetas\r\n                    </label>\r\n                    <div className=\"flex flex-wrap gap-2 min-h-[40px]\">\r\n                        {tags.map(tag => (\r\n                            <span key={tag} className=\"flex items-center gap-1 px-2 py-1 bg-rose-500/20 text-rose-300 rounded-lg text-sm font-medium animate-fade-in\">\r\n                                {tag}\r\n                                <button onClick={() => removeTag(tag)} className=\"hover:text-red-500 ml-1\"><X className=\"h-3 w-3\" /></button>\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={tagInput}\r\n                        onChange={(e) => setTagInput(e.target.value)}\r\n                        onKeyDown={handleAddTag}\r\n                        placeholder=\"Escribe y presiona Enter...\"\r\n                        className=\"w-full bg-white/5 border border-white/10 rounded-lg py-2 px-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-rose-500\"\r\n                    />\r\n                    {/* Suggested Tags */}\r\n                    {suggestedTags.length > 0 && (\r\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                            {suggestedTags.slice(0, 5).map(tag => (\r\n                                <button\r\n                                    key={tag}\r\n                                    onClick={() => addTag(tag)}\r\n                                    disabled={tags.includes(tag)}\r\n                                    className={`text-xs px-2 py-1 rounded-md border transition-colors ${tags.includes(tag)\r\n                                        ? 'bg-white/5 text-slate-500 border-transparent cursor-default'\r\n                                        : 'border-white/10 text-slate-400 hover:border-rose-400 hover:text-rose-400'\r\n                                        }`}\r\n                                >\r\n                                    + {tag}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n        </aside>\r\n    );\r\n};\r\n\r\n/**\r\n * Barra de acciones m├│vil para pantallas peque├▒as (fija en la parte inferior)\r\n */\r\ninterface MobileActionBarProps {\r\n    isEditMode: boolean;\r\n    isPublishing: boolean;\r\n    handlePublish: () => void;\r\n    handleSaveDraft: () => void;\r\n}\r\n\r\nexport const MobileActionBar: React.FC<MobileActionBarProps> = ({\r\n    isEditMode,\r\n    isPublishing,\r\n    handlePublish,\r\n    handleSaveDraft\r\n}) => {\r\n    return (\r\n        <div className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-[#0d0d0f]/90 backdrop-blur-xl border-t border-white/[0.06] py-4 px-6 z-30\">\r\n            <div className=\"flex items-center justify-center gap-4\">\r\n                <button\r\n                    onClick={handlePublish}\r\n                    disabled={isPublishing}\r\n                    className=\"flex-1 py-3 bg-rose-600 hover:bg-rose-500 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                >\r\n                    {isPublishing ? 'Publicando...' : (isEditMode ? 'Guardar' : 'Publicar')}\r\n                </button>\r\n                <button\r\n                    onClick={handleSaveDraft}\r\n                    disabled={isPublishing}\r\n                    className=\"py-3 px-4 bg-blue-500/10 border border-blue-500/30 text-blue-400 rounded-xl font-bold text-sm\"\r\n                >\r\n                    <Save className=\"h-4 w-4\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\components\\RichTextEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\blog\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\forum\\CreateThreadView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\forum\\EditThreadView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\forum\\ForumView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ForumView - Main Forum Page\r\n * \r\n * P├ígina principal del foro que muestra categor├¡as y listado de hilos.\r\n */\r\nimport React, { useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n    Plus,\r\n    MessageCircleQuestion,\r\n    Loader2,\r\n    Filter,\r\n    Hash,\r\n    ChevronLeft,\r\n    ChevronRight\r\n} from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useForumThreads } from '../../hooks/useForumHooks';\r\nimport { ThreadCard, ForumCategoryCard, ForumStats } from '../../components/forum';\r\nimport { FORUM_CATEGORIES } from '../../data/forumCategories';\r\nimport { ThreadSortOption } from '../../types/forum';\r\n\r\ninterface ForumViewProps {\r\n    activeCategory?: string;\r\n    onThreadSelect?: (id: string) => void;\r\n    onCreateClick?: () => void;\r\n}\r\n\r\nexport const ForumView: React.FC<ForumViewProps> = ({\r\n    activeCategory: propCategory,\r\n    onThreadSelect,\r\n    onCreateClick\r\n}) => {\r\n    const navigate = useNavigate();\r\n    const { slug: categorySlug } = useParams<{ slug?: string }>();\r\n    const { state } = useAppStore();\r\n\r\n    // Use URL category or prop category\r\n    const activeCategory = categorySlug || propCategory || 'all';\r\n\r\n    // Sort state\r\n    const [sortBy, setSortBy] = useState<ThreadSortOption>('activity');\r\n    const [showAllCategories, setShowAllCategories] = useState(false);\r\n\r\n    // Fetch threads\r\n    const {\r\n        threads,\r\n        loading,\r\n        error,\r\n        hasMore,\r\n        page,\r\n        nextPage,\r\n        prevPage,\r\n        refresh\r\n    } = useForumThreads(activeCategory === 'all' ? undefined : activeCategory, sortBy);\r\n\r\n    const handleCreateClick = () => {\r\n        if (onCreateClick) {\r\n            onCreateClick();\r\n        } else {\r\n            navigate('/forum/new');\r\n        }\r\n    };\r\n\r\n    const handleCategoryChange = (categoryId: string) => {\r\n        if (categoryId === 'all') {\r\n            navigate('/forum');\r\n        } else {\r\n            const category = FORUM_CATEGORIES.find(c => c.id === categoryId);\r\n            if (category) {\r\n                navigate(`/forum/categoria/${category.slug}`);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Get current category info\r\n    const currentCategory = FORUM_CATEGORIES.find(c => c.slug === activeCategory || c.id === activeCategory);\r\n    const displayedCategories = showAllCategories ? FORUM_CATEGORIES : FORUM_CATEGORIES.slice(0, 6);\r\n\r\n    return (\r\n        <div className=\"min-h-screen pb-12 px-4 md:px-8 lg:px-12 pt-6\">\r\n            {/* Header */}\r\n            <div className=\"mb-8\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"p-3 bg-purple-500/20 rounded-xl\">\r\n                            <MessageCircleQuestion className=\"w-8 h-8 text-purple-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold text-white\">\r\n                                {activeCategory === 'all' ? 'Foro' : currentCategory?.name || 'Foro'}\r\n                            </h1>\r\n                            <p className=\"text-gray-400\">\r\n                                {activeCategory === 'all'\r\n                                    ? 'Conecta con la comunidad creativa'\r\n                                    : currentCategory?.description || 'Discusiones'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Create Thread Button */}\r\n                    {state.user && (\r\n                        <button\r\n                            onClick={handleCreateClick}\r\n                            className=\"flex items-center gap-2 px-5 py-2.5 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-xl transition-colors shadow-lg shadow-purple-500/20\"\r\n                        >\r\n                            <Plus className=\"w-5 h-5\" />\r\n                            Nuevo Hilo\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Breadcrumb for category view */}\r\n                {activeCategory !== 'all' && (\r\n                    <button\r\n                        onClick={() => navigate('/forum')}\r\n                        className=\"flex items-center gap-1 text-sm text-gray-400 hover:text-white mt-3 transition-colors\"\r\n                    >\r\n                        <ChevronLeft className=\"w-4 h-4\" />\r\n                        Volver a todas las categor├¡as\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Main Content */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {/* Categories Grid (shown on main forum page) */}\r\n                    {activeCategory === 'all' && (\r\n                        <div className=\"mb-8\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h2 className=\"text-xl font-semibold text-white flex items-center gap-2\">\r\n                                    <Hash className=\"w-5 h-5 text-purple-400\" />\r\n                                    Categor├¡as\r\n                                </h2>\r\n                                {FORUM_CATEGORIES.length > 6 && (\r\n                                    <button\r\n                                        onClick={() => setShowAllCategories(!showAllCategories)}\r\n                                        className=\"text-sm text-purple-400 hover:text-purple-300 transition-colors\"\r\n                                    >\r\n                                        {showAllCategories ? 'Ver menos' : 'Ver todas'}\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                {displayedCategories.map(category => (\r\n                                    <ForumCategoryCard\r\n                                        key={category.id}\r\n                                        category={category}\r\n                                        onClick={() => handleCategoryChange(category.id)}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Sort Tabs */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2 p-1 bg-[#1a1a2e]/60 rounded-lg\">\r\n                            {[\r\n                                { value: 'activity' as const, label: 'Recientes' },\r\n                                { value: 'popular' as const, label: 'Populares' },\r\n                                { value: 'unanswered' as const, label: 'Sin Resolver' }\r\n                            ].map(option => (\r\n                                <button\r\n                                    key={option.value}\r\n                                    onClick={() => setSortBy(option.value)}\r\n                                    className={`px-4 py-2 text-sm font-medium rounded-md transition-all ${sortBy === option.value\r\n                                        ? 'bg-purple-600 text-white'\r\n                                        : 'text-gray-400 hover:text-white hover:bg-white/5'\r\n                                        }`}\r\n                                >\r\n                                    {option.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Category filter (on category pages) */}\r\n                        {activeCategory !== 'all' && (\r\n                            <select\r\n                                value={activeCategory}\r\n                                onChange={(e) => handleCategoryChange(e.target.value)}\r\n                                className=\"px-4 py-2 bg-[#1a1a2e]/60 border border-white/10 rounded-lg text-gray-300 focus:outline-none focus:border-purple-500\"\r\n                            >\r\n                                <option value=\"all\">Todas las categor├¡as</option>\r\n                                {FORUM_CATEGORIES.map(cat => (\r\n                                    <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                                ))}\r\n                            </select>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Threads List */}\r\n                    <div className=\"space-y-4\">\r\n                        {loading && threads.length === 0 ? (\r\n                            <div className=\"flex items-center justify-center py-12\">\r\n                                <Loader2 className=\"w-8 h-8 text-purple-400 animate-spin\" />\r\n                            </div>\r\n                        ) : error ? (\r\n                            <div className=\"text-center py-12\">\r\n                                <p className=\"text-red-400 mb-4\">{error}</p>\r\n                                <button\r\n                                    onClick={refresh}\r\n                                    className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\"\r\n                                >\r\n                                    Reintentar\r\n                                </button>\r\n                            </div>\r\n                        ) : threads.length === 0 ? (\r\n                            <div className=\"text-center py-16 bg-[#1a1a2e]/40 rounded-xl border border-white/5\">\r\n                                <MessageCircleQuestion className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\r\n                                <h3 className=\"text-xl font-semibold text-white mb-2\">\r\n                                    No hay hilos a├║n\r\n                                </h3>\r\n                                <p className=\"text-gray-400 mb-6\">\r\n                                    S├® el primero en iniciar una conversaci├│n\r\n                                </p>\r\n                                {state.user && (\r\n                                    <button\r\n                                        onClick={handleCreateClick}\r\n                                        className=\"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-xl transition-colors\"\r\n                                    >\r\n                                        Crear el primer hilo\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {threads.map(thread => (\r\n                                    <ThreadCard\r\n                                        key={thread.id}\r\n                                        thread={thread}\r\n                                        onClick={() => {\r\n                                            if (onThreadSelect) {\r\n                                                onThreadSelect(thread.id);\r\n                                            } else {\r\n                                                navigate(`/forum/${thread.slug || thread.id}`);\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                ))}\r\n\r\n                                {/* Pagination */}\r\n                                {(hasMore || page > 1) && (\r\n                                    <div className=\"flex items-center justify-center gap-4 pt-6\">\r\n                                        <button\r\n                                            onClick={prevPage}\r\n                                            disabled={page === 1}\r\n                                            className=\"flex items-center gap-1 px-4 py-2 bg-[#1a1a2e]/60 border border-white/10 rounded-lg text-gray-300 hover:text-white hover:border-white/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                                        >\r\n                                            <ChevronLeft className=\"w-4 h-4\" />\r\n                                            Anterior\r\n                                        </button>\r\n                                        <span className=\"text-gray-400\">\r\n                                            P├ígina {page}\r\n                                        </span>\r\n                                        <button\r\n                                            onClick={nextPage}\r\n                                            disabled={!hasMore}\r\n                                            className=\"flex items-center gap-1 px-4 py-2 bg-[#1a1a2e]/60 border border-white/10 rounded-lg text-gray-300 hover:text-white hover:border-white/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                                        >\r\n                                            Siguiente\r\n                                            <ChevronRight className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sidebar */}\r\n                <div className=\"lg:col-span-1\">\r\n                    <div className=\"sticky top-6\">\r\n                        <ForumStats showRecentThreads={true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ForumView;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\forum\\ThreadView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showReportModal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":185,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":185,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'moderationLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":193,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":193,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ThreadView - Single Thread Page\r\n * \r\n * P├ígina de un hilo individual con sus respuestas.\r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n    ArrowLeft,\r\n    Heart,\r\n    Eye,\r\n    MessageSquare,\r\n    Clock,\r\n    Share2,\r\n    Flag,\r\n    MoreVertical,\r\n    Edit2,\r\n    Trash2,\r\n    Pin,\r\n    Lock,\r\n    CheckCircle2,\r\n    Loader2,\r\n    AlertTriangle\r\n} from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport {\r\n    useForumThread,\r\n    useForumReplies,\r\n    useAddReply,\r\n    useThreadLike,\r\n    useThreadModeration,\r\n    useReplyActions,\r\n    useDeleteThread\r\n} from '../../hooks/useForumHooks';\r\nimport { useAuthorInfo } from '../../hooks/useAuthorInfo';\r\nimport { ReplyCard, ForumEditor, ForumStats } from '../../components/forum';\r\nimport { getCategoryById, CATEGORY_COLOR_CLASSES } from '../../data/forumCategories';\r\nimport { ReplySortOption } from '../../types/forum';\r\n\r\ninterface ThreadViewProps {\r\n    threadId?: string;\r\n    onBack?: () => void;\r\n}\r\n\r\n/**\r\n * Calcula el tiempo transcurrido desde una fecha\r\n */\r\nfunction getTimeAgo(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return 'ahora';\r\n    if (diffMins < 60) return `hace ${diffMins} minutos`;\r\n    if (diffHours < 24) return `hace ${diffHours} horas`;\r\n    if (diffDays < 30) return `hace ${diffDays} d├¡as`;\r\n    return new Date(dateString).toLocaleDateString('es-ES', {\r\n        day: 'numeric',\r\n        month: 'long',\r\n        year: 'numeric'\r\n    });\r\n}\r\n\r\n/**\r\n * Detecta si el contenido es HTML (del editor WYSIWYG)\r\n */\r\nfunction isHtmlContent(content: string): boolean {\r\n    // Check for common HTML tags from TipTap\r\n    return /<(p|div|h[1-6]|ul|ol|li|blockquote|img|a|strong|em|code|pre)[^>]*>/i.test(content);\r\n}\r\n\r\n/**\r\n * Renderiza contenido HTML (del editor WYSIWYG)\r\n */\r\nfunction renderHtmlContent(content: string): React.ReactNode {\r\n    return (\r\n        <div\r\n            className=\"prose prose-invert prose-sm max-w-none text-gray-300\r\n                       prose-p:mb-3 prose-p:leading-relaxed\r\n                       prose-headings:text-white prose-headings:font-semibold\r\n                       prose-a:text-purple-400 prose-a:no-underline hover:prose-a:underline\r\n                       prose-strong:text-white prose-strong:font-semibold\r\n                       prose-code:bg-black/30 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-purple-400 prose-code:text-sm\r\n                       prose-pre:bg-black/40 prose-pre:rounded-lg prose-pre:p-4\r\n                       prose-img:max-w-full prose-img:rounded-lg prose-img:my-2\r\n                       prose-blockquote:border-l-4 prose-blockquote:border-purple-500/50 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:text-gray-400\r\n                       prose-ul:list-disc prose-ul:pl-6 prose-ol:list-decimal prose-ol:pl-6\"\r\n            dangerouslySetInnerHTML={{ __html: content }}\r\n        />\r\n    );\r\n}\r\n\r\n/**\r\n * Renderiza contenido Markdown (del editor Markdown para programaci├│n)\r\n */\r\nfunction renderMarkdownContent(content: string): React.ReactNode {\r\n    const lines = content.split('\\n');\r\n    const elements: React.ReactNode[] = [];\r\n    let inCodeBlock = false;\r\n    let codeContent = '';\r\n\r\n    lines.forEach((line, index) => {\r\n        if (line.startsWith('```')) {\r\n            if (inCodeBlock) {\r\n                elements.push(\r\n                    <pre key={`code-${index}`} className=\"bg-black/40 rounded-lg p-4 my-3 overflow-x-auto\">\r\n                        <code className=\"text-sm text-green-400 font-mono whitespace-pre-wrap\">\r\n                            {codeContent.trim()}\r\n                        </code>\r\n                    </pre>\r\n                );\r\n                codeContent = '';\r\n                inCodeBlock = false;\r\n            } else {\r\n                inCodeBlock = true;\r\n            }\r\n        } else if (inCodeBlock) {\r\n            codeContent += line + '\\n';\r\n        } else {\r\n            // Process inline formatting\r\n            let processedLine = line\r\n                // Images\r\n                .replace(/!\\[([^\\]]*)\\]\\(([^)]+)\\)/g, '<img src=\"$2\" alt=\"$1\" class=\"max-w-full rounded-lg my-2 inline-block\" />')\r\n                // Links\r\n                .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" class=\"text-purple-400 hover:underline\" target=\"_blank\" rel=\"noopener\">$1</a>')\r\n                // Bold\r\n                .replace(/\\*\\*([^*]+)\\*\\*/g, '<strong class=\"text-white font-semibold\">$1</strong>')\r\n                // Italic\r\n                .replace(/\\*([^*]+)\\*/g, '<em class=\"italic\">$1</em>')\r\n                // Inline code\r\n                .replace(/`([^`]+)`/g, '<code class=\"bg-black/30 px-1.5 py-0.5 rounded text-purple-400 text-sm font-mono\">$1</code>');\r\n\r\n            // Handle quotes\r\n            if (line.startsWith('> ')) {\r\n                processedLine = `<span class=\"border-l-4 border-purple-500/50 pl-4 italic text-gray-400 block\">${processedLine.slice(2)}</span>`;\r\n            }\r\n\r\n            // Handle list items\r\n            if (line.startsWith('- ')) {\r\n                processedLine = `<span class=\"block ml-4\">ÔÇó ${processedLine.slice(2)}</span>`;\r\n            }\r\n\r\n            if (line.trim()) {\r\n                elements.push(\r\n                    <p\r\n                        key={index}\r\n                        className=\"text-gray-300 mb-3 leading-relaxed\"\r\n                        dangerouslySetInnerHTML={{ __html: processedLine }}\r\n                    />\r\n                );\r\n            } else {\r\n                elements.push(<br key={index} />);\r\n            }\r\n        }\r\n    });\r\n\r\n    return elements;\r\n}\r\n\r\n/**\r\n * Renderiza contenido - detecta autom├íticamente HTML vs Markdown\r\n */\r\nfunction renderContent(content: string): React.ReactNode {\r\n    if (isHtmlContent(content)) {\r\n        return renderHtmlContent(content);\r\n    }\r\n    return renderMarkdownContent(content);\r\n}\r\n\r\nexport const ThreadView: React.FC<ThreadViewProps> = ({ threadId: propThreadId, onBack }) => {\r\n    const navigate = useNavigate();\r\n    const { slug } = useParams<{ slug: string }>();\r\n    const { state } = useAppStore();\r\n\r\n    const threadSlugOrId = propThreadId || slug || '';\r\n\r\n    // State\r\n    const [replySort, setReplySort] = useState<ReplySortOption>('oldest');\r\n    const [replyContent, setReplyContent] = useState('');\r\n    const [showThreadMenu, setShowThreadMenu] = useState(false);\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n    const [showReportModal, setShowReportModal] = useState(false);\r\n    const [replyToId, setReplyToId] = useState<string | null>(null);\r\n\r\n    // Hooks\r\n    const { thread, loading: threadLoading, error: threadError } = useForumThread(threadSlugOrId);\r\n    const { replies, loading: repliesLoading, refresh: refreshReplies } = useForumReplies(thread?.id, replySort);\r\n    const { addReply, loading: addingReply } = useAddReply();\r\n    const { liked, toggleLike, loading: likeLoading } = useThreadLike(thread?.id, state.user?.uid);\r\n    const { markBestAnswer, close, pin, loading: moderationLoading } = useThreadModeration();\r\n    const { remove: removeReply } = useReplyActions();\r\n    const { deleteThread, loading: deletingThread } = useDeleteThread();\r\n\r\n    // Category info\r\n    const category = thread ? getCategoryById(thread.category) : null;\r\n    const colorClasses = CATEGORY_COLOR_CLASSES[category?.color || 'gray'];\r\n\r\n    // Live author lookup - fetches current name/avatar from user profile\r\n    const { authorName, authorUsername, authorAvatar } = useAuthorInfo(\r\n        thread?.authorId,\r\n        thread?.authorName,\r\n        thread?.authorAvatar\r\n    );\r\n\r\n    // Permissions\r\n    const isAuthor = state.user?.uid === thread?.authorId;\r\n    const isAdmin = state.user?.isAdmin;\r\n    const canModerate = isAuthor || isAdmin;\r\n\r\n    const handleBack = () => {\r\n        if (onBack) {\r\n            onBack();\r\n        } else {\r\n            navigate('/forum');\r\n        }\r\n    };\r\n\r\n    const handleSubmitReply = async () => {\r\n        if (!thread || !replyContent.trim()) return;\r\n\r\n        const result = await addReply(thread.id, replyContent, replyToId || undefined);\r\n        if (result) {\r\n            setReplyContent('');\r\n            setReplyToId(null);\r\n            refreshReplies();\r\n        }\r\n    };\r\n\r\n    const handleDeleteThread = async () => {\r\n        if (!thread) return;\r\n\r\n        setShowDeleteConfirm(false); // Close modal immediately\r\n        const success = await deleteThread(thread.id);\r\n        if (success) {\r\n            navigate('/forum');\r\n        } else {\r\n            // Re-show modal if failed\r\n            setShowDeleteConfirm(true);\r\n        }\r\n    };\r\n\r\n    const handleMarkBestAnswer = async (replyId: string, isBest: boolean) => {\r\n        if (!thread) return;\r\n        await markBestAnswer(thread.id, replyId, isBest);\r\n        refreshReplies();\r\n    };\r\n\r\n    const handleDeleteReply = async (replyId: string) => {\r\n        if (!thread) return;\r\n        await removeReply(thread.id, replyId);\r\n        refreshReplies();\r\n    };\r\n\r\n    const handleShareThread = () => {\r\n        if (navigator.share && thread) {\r\n            navigator.share({\r\n                title: thread.title,\r\n                url: window.location.href\r\n            });\r\n        } else {\r\n            navigator.clipboard.writeText(window.location.href);\r\n            // Could show a toast here\r\n        }\r\n    };\r\n\r\n    // Loading state\r\n    if (threadLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center py-24\">\r\n                <Loader2 className=\"w-10 h-10 text-purple-400 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Error or not found\r\n    if (threadError || !thread) {\r\n        return (\r\n            <div className=\"text-center py-24\">\r\n                <AlertTriangle className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\r\n                <h2 className=\"text-2xl font-bold text-white mb-2\">Hilo no encontrado</h2>\r\n                <p className=\"text-gray-400 mb-6\">El hilo que buscas no existe o fue eliminado</p>\r\n                <button\r\n                    onClick={handleBack}\r\n                    className=\"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-colors\"\r\n                >\r\n                    Volver al foro\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen pb-12 px-4 md:px-8 lg:px-12 pt-6\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"flex items-center gap-2 text-sm text-gray-400 mb-6\">\r\n                <button\r\n                    onClick={handleBack}\r\n                    className=\"flex items-center gap-1 hover:text-white transition-colors\"\r\n                >\r\n                    <ArrowLeft className=\"w-4 h-4\" />\r\n                    Foro\r\n                </button>\r\n                <span>/</span>\r\n                <button\r\n                    onClick={() => navigate(`/forum/categoria/${category?.slug || thread.category}`)}\r\n                    className=\"hover:text-white transition-colors\"\r\n                >\r\n                    {category?.name || thread.category}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Main Content */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {/* Thread Header */}\r\n                    <article className=\"bg-[#1a1a2e]/60 border border-white/5 rounded-xl overflow-hidden\">\r\n                        {/* Badges */}\r\n                        <div className=\"flex items-center gap-2 px-6 pt-5 pb-3\">\r\n                            {thread.isPinned && (\r\n                                <span className=\"flex items-center gap-1 px-2.5 py-1 bg-amber-500/20 text-amber-400 text-xs font-medium rounded-full\">\r\n                                    <Pin className=\"w-3 h-3\" />\r\n                                    Fijado\r\n                                </span>\r\n                            )}\r\n                            {thread.isClosed && (\r\n                                <span className=\"flex items-center gap-1 px-2.5 py-1 bg-red-500/20 text-red-400 text-xs font-medium rounded-full\">\r\n                                    <Lock className=\"w-3 h-3\" />\r\n                                    Cerrado\r\n                                </span>\r\n                            )}\r\n                            {thread.isResolved && (\r\n                                <span className=\"flex items-center gap-1 px-2.5 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded-full\">\r\n                                    <CheckCircle2 className=\"w-3 h-3\" />\r\n                                    Resuelto\r\n                                </span>\r\n                            )}\r\n                            <span className={`px-2.5 py-1 text-xs font-medium rounded-full border ${colorClasses.bg} ${colorClasses.text} ${colorClasses.border}`}>\r\n                                {category?.name || thread.category}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Title */}\r\n                        <h1 className=\"text-2xl md:text-3xl font-bold text-white px-6 mb-4\">\r\n                            {thread.title}\r\n                        </h1>\r\n\r\n                        {/* Author */}\r\n                        <div className=\"flex items-center justify-between px-6 pb-4 border-b border-white/5\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <img\r\n                                    src={authorAvatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(authorName)}&background=6366f1&color=fff`}\r\n                                    alt={authorName}\r\n                                    onClick={() => authorUsername && navigate(`/user/${authorUsername}`)}\r\n                                    className=\"w-10 h-10 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-purple-500 transition-all\"\r\n                                />\r\n                                <div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span\r\n                                            onClick={() => authorUsername && navigate(`/user/${authorUsername}`)}\r\n                                            className=\"text-white font-medium hover:text-purple-400 cursor-pointer transition-colors\"\r\n                                        >\r\n                                            {authorName}\r\n                                        </span>\r\n                                        {thread.authorRole && (\r\n                                            <span className=\"text-xs text-gray-500\">\r\n                                                {thread.authorRole}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n                                        <Clock className=\"w-3 h-3\" />\r\n                                        {getTimeAgo(thread.createdAt)}\r\n                                        {thread.updatedAt && thread.updatedAt !== thread.createdAt && (\r\n                                            <span>(editado)</span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Thread Actions Menu */}\r\n                            {state.user && (\r\n                                <div className=\"relative\">\r\n                                    <button\r\n                                        onClick={() => setShowThreadMenu(!showThreadMenu)}\r\n                                        className=\"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                                    >\r\n                                        <MoreVertical className=\"w-5 h-5\" />\r\n                                    </button>\r\n\r\n                                    {showThreadMenu && (\r\n                                        <>\r\n                                            <div\r\n                                                className=\"fixed inset-0 z-10\"\r\n                                                onClick={() => setShowThreadMenu(false)}\r\n                                            />\r\n                                            <div className=\"absolute right-0 top-10 z-20 w-52 bg-[#1a1a2e] border border-white/10 rounded-xl shadow-xl overflow-hidden\">\r\n                                                {isAuthor && (\r\n                                                    <button\r\n                                                        onClick={() => { navigate(`/forum/edit/${thread.id}`); setShowThreadMenu(false); }}\r\n                                                        className=\"flex items-center gap-2 w-full px-4 py-3 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                                    >\r\n                                                        <Edit2 className=\"w-4 h-4\" />\r\n                                                        Editar hilo\r\n                                                    </button>\r\n                                                )}\r\n                                                {canModerate && (\r\n                                                    <>\r\n                                                        {isAdmin && (\r\n                                                            <button\r\n                                                                onClick={() => { pin(thread.id, !thread.isPinned); setShowThreadMenu(false); }}\r\n                                                                className=\"flex items-center gap-2 w-full px-4 py-3 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                                            >\r\n                                                                <Pin className=\"w-4 h-4\" />\r\n                                                                {thread.isPinned ? 'Desfijar' : 'Fijar hilo'}\r\n                                                            </button>\r\n                                                        )}\r\n                                                        <button\r\n                                                            onClick={() => { close(thread.id, !thread.isClosed); setShowThreadMenu(false); }}\r\n                                                            className=\"flex items-center gap-2 w-full px-4 py-3 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                                        >\r\n                                                            <Lock className=\"w-4 h-4\" />\r\n                                                            {thread.isClosed ? 'Abrir hilo' : 'Cerrar hilo'}\r\n                                                        </button>\r\n                                                    </>\r\n                                                )}\r\n                                                {isAuthor && (\r\n                                                    <button\r\n                                                        onClick={() => { setShowDeleteConfirm(true); setShowThreadMenu(false); }}\r\n                                                        className=\"flex items-center gap-2 w-full px-4 py-3 text-sm text-red-400 hover:bg-red-500/10 transition-colors\"\r\n                                                    >\r\n                                                        <Trash2 className=\"w-4 h-4\" />\r\n                                                        Eliminar hilo\r\n                                                    </button>\r\n                                                )}\r\n                                                {!isAuthor && (\r\n                                                    <button\r\n                                                        onClick={() => { setShowReportModal(true); setShowThreadMenu(false); }}\r\n                                                        className=\"flex items-center gap-2 w-full px-4 py-3 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors\"\r\n                                                    >\r\n                                                        <Flag className=\"w-4 h-4\" />\r\n                                                        Reportar\r\n                                                    </button>\r\n                                                )}\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"px-6 py-5\">\r\n                            {renderContent(thread.content)}\r\n                        </div>\r\n\r\n                        {/* Tags */}\r\n                        {thread.tags && thread.tags.length > 0 && (\r\n                            <div className=\"flex flex-wrap gap-2 px-6 pb-4\">\r\n                                {thread.tags.map((tag, index) => (\r\n                                    <span\r\n                                        key={index}\r\n                                        className=\"px-2.5 py-1 bg-white/5 text-gray-400 text-xs rounded-md hover:bg-white/10 cursor-pointer transition-colors\"\r\n                                    >\r\n                                        #{tag}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Footer Actions */}\r\n                        <div className=\"flex items-center justify-between px-6 py-4 border-t border-white/5 bg-black/20\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <button\r\n                                    onClick={toggleLike}\r\n                                    disabled={likeLoading || !state.user}\r\n                                    className={`flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all ${liked\r\n                                        ? 'bg-pink-500/20 text-pink-400'\r\n                                        : 'text-gray-400 hover:text-pink-400 hover:bg-pink-500/10'\r\n                                        } ${!state.user ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                                >\r\n                                    <Heart className={`w-5 h-5 ${liked ? 'fill-current' : ''}`} />\r\n                                    <span>{thread.likes}</span>\r\n                                </button>\r\n                                <span className=\"flex items-center gap-1.5 px-3 py-2 text-gray-400\">\r\n                                    <Eye className=\"w-5 h-5\" />\r\n                                    <span>{thread.views}</span>\r\n                                </span>\r\n                                <span className=\"flex items-center gap-1.5 px-3 py-2 text-gray-400\">\r\n                                    <MessageSquare className=\"w-5 h-5\" />\r\n                                    <span>{thread.replies}</span>\r\n                                </span>\r\n                            </div>\r\n                            <button\r\n                                onClick={handleShareThread}\r\n                                className=\"flex items-center gap-1.5 px-3 py-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                            >\r\n                                <Share2 className=\"w-5 h-5\" />\r\n                                Compartir\r\n                            </button>\r\n                        </div>\r\n                    </article>\r\n\r\n                    {/* Replies Section */}\r\n                    <div className=\"space-y-4\">\r\n                        {/* Replies Header */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h2 className=\"text-xl font-semibold text-white\">\r\n                                {thread.replies} {thread.replies === 1 ? 'Respuesta' : 'Respuestas'}\r\n                            </h2>\r\n                            <select\r\n                                value={replySort}\r\n                                onChange={(e) => setReplySort(e.target.value as ReplySortOption)}\r\n                                className=\"px-3 py-2 bg-[#1a1a2e]/60 border border-white/10 rounded-lg text-gray-300 text-sm focus:outline-none focus:border-purple-500\"\r\n                            >\r\n                                <option value=\"oldest\">M├ís antiguos</option>\r\n                                <option value=\"newest\">M├ís recientes</option>\r\n                                <option value=\"likes\">M├ís votados</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Replies List */}\r\n                        {repliesLoading ? (\r\n                            <div className=\"flex items-center justify-center py-12\">\r\n                                <Loader2 className=\"w-8 h-8 text-purple-400 animate-spin\" />\r\n                            </div>\r\n                        ) : replies.length === 0 ? (\r\n                            <div className=\"text-center py-12 bg-[#1a1a2e]/40 rounded-xl border border-white/5\">\r\n                                <MessageSquare className=\"w-12 h-12 text-gray-600 mx-auto mb-3\" />\r\n                                <p className=\"text-gray-400\">\r\n                                    No hay respuestas a├║n. ┬íS├® el primero en responder!\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-4\">\r\n                                {replies.map(reply => (\r\n                                    <ReplyCard\r\n                                        key={reply.id}\r\n                                        reply={reply}\r\n                                        threadAuthorId={thread.authorId}\r\n                                        isThreadAuthor={isAuthor}\r\n                                        onMarkBestAnswer={isAuthor ? handleMarkBestAnswer : undefined}\r\n                                        onDelete={\r\n                                            (state.user?.uid === reply.authorId || isAuthor)\r\n                                                ? handleDeleteReply\r\n                                                : undefined\r\n                                        }\r\n                                        onReply={!thread.isClosed ? setReplyToId : undefined}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Reply Editor */}\r\n                        {state.user && !thread.isClosed ? (\r\n                            <div className=\"mt-6\">\r\n                                {replyToId && (\r\n                                    <div className=\"flex items-center gap-2 mb-2 text-sm text-gray-400\">\r\n                                        <span>Respondiendo a un comentario</span>\r\n                                        <button\r\n                                            onClick={() => setReplyToId(null)}\r\n                                            className=\"text-purple-400 hover:text-purple-300\"\r\n                                        >\r\n                                            Cancelar\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                                <ForumEditor\r\n                                    value={replyContent}\r\n                                    onChange={setReplyContent}\r\n                                    placeholder=\"Escribe tu respuesta...\"\r\n                                    minHeight=\"120px\"\r\n                                    onSubmit={handleSubmitReply}\r\n                                    submitLabel=\"Responder\"\r\n                                    isSubmitting={addingReply}\r\n                                />\r\n                            </div>\r\n                        ) : thread.isClosed ? (\r\n                            <div className=\"text-center py-6 bg-[#1a1a2e]/40 rounded-xl border border-white/5\">\r\n                                <Lock className=\"w-8 h-8 text-gray-600 mx-auto mb-2\" />\r\n                                <p className=\"text-gray-400\">Este hilo est├í cerrado y no acepta nuevas respuestas.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"text-center py-6 bg-[#1a1a2e]/40 rounded-xl border border-white/5\">\r\n                                <p className=\"text-gray-400\">\r\n                                    <button\r\n                                        onClick={() => navigate('/auth')}\r\n                                        className=\"text-purple-400 hover:text-purple-300\"\r\n                                    >\r\n                                        Inicia sesi├│n\r\n                                    </button>\r\n                                    {' '}para responder a este hilo\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sidebar */}\r\n                <div className=\"lg:col-span-1\">\r\n                    <div className=\"sticky top-6\">\r\n                        <ForumStats showRecentThreads={true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            {showDeleteConfirm && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\">\r\n                    <div className=\"bg-[#1a1a2e] border border-white/10 rounded-2xl p-6 max-w-md w-full\">\r\n                        <h3 className=\"text-xl font-bold text-white mb-3\">┬┐Eliminar hilo?</h3>\r\n                        <p className=\"text-gray-400 mb-6\">\r\n                            Esta acci├│n no se puede deshacer. Se eliminar├ín todas las respuestas asociadas.\r\n                        </p>\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => setShowDeleteConfirm(false)}\r\n                                className=\"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors\"\r\n                            >\r\n                                Cancelar\r\n                            </button>\r\n                            <button\r\n                                onClick={handleDeleteThread}\r\n                                disabled={deletingThread}\r\n                                className=\"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50\"\r\n                            >\r\n                                {deletingThread ? 'Eliminando...' : 'Eliminar'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ThreadView;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\forum\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\AboutView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'services' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { ImageIcon, GraduationCap, Store, Newspaper, Users, ArrowRight, Zap, Globe, Shield, Briefcase, Quote } from 'lucide-react';\r\n\r\ninterface AboutViewProps {\r\n    onNavigate: (moduleId: string) => void;\r\n}\r\n\r\nexport const AboutView: React.FC<AboutViewProps> = ({ onNavigate }) => {\r\n    const services = [\r\n        {\r\n            id: 'portfolio',\r\n            title: 'Portafolio',\r\n            desc: 'Muestra tu trabajo al mundo e insp├¡rate.',\r\n            icon: ImageIcon,\r\n            color: 'text-pink-500',\r\n            bg: 'bg-pink-500/10',\r\n            border: 'hover:border-pink-500/50'\r\n        },\r\n        {\r\n            id: 'education',\r\n            title: 'Educaci├│n',\r\n            desc: 'Aprende nuevas habilidades con cursos expertos.',\r\n            icon: GraduationCap,\r\n            color: 'text-blue-500',\r\n            bg: 'bg-blue-500/10',\r\n            border: 'hover:border-blue-500/50'\r\n        },\r\n        {\r\n            id: 'market',\r\n            title: 'Mercado',\r\n            desc: 'Compra y vende assets de alta calidad.',\r\n            icon: Store,\r\n            color: 'text-emerald-500',\r\n            bg: 'bg-emerald-500/10',\r\n            border: 'hover:border-emerald-500/50'\r\n        },\r\n        {\r\n            id: 'freelance',\r\n            title: 'Freelance',\r\n            desc: 'Contrata expertos o vende tus servicios.',\r\n            icon: Briefcase,\r\n            color: 'text-cyan-500',\r\n            bg: 'bg-cyan-500/10',\r\n            border: 'hover:border-cyan-500/50'\r\n        },\r\n        {\r\n            id: 'community',\r\n            title: 'Proyectos',\r\n            desc: 'Encuentra equipo y colabora en proyectos.',\r\n            icon: Users,\r\n            color: 'text-purple-500',\r\n            bg: 'bg-purple-500/10',\r\n            border: 'hover:border-purple-500/50'\r\n        },\r\n        {\r\n            id: 'blog',\r\n            title: 'Blog',\r\n            desc: 'Noticias, tutoriales y art├¡culos de la industria.',\r\n            icon: Newspaper,\r\n            color: 'text-amber-500',\r\n            bg: 'bg-amber-500/10',\r\n            border: 'hover:border-amber-500/50'\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"animate-fade-in\">\r\n\r\n            <div className=\"max-w-7xl 2xl:max-w-[1600px] mx-auto pb-20 px-4 md:px-6 transition-all duration-300\">\r\n\r\n                {/* Hero Section */}\r\n                <div className=\"relative overflow-hidden rounded-3xl bg-[#18181b] border border-white/10 mt-6 min-h-[500px] flex items-center shadow-2xl\">\r\n\r\n                    {/* Mobile Background Image (Subtle) */}\r\n                    <img\r\n                        src=\"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1000&fit=crop\"\r\n                        className=\"absolute inset-0 w-full h-full object-cover opacity-20 lg:hidden\"\r\n                        alt=\"Background\"\r\n                    />\r\n\r\n                    {/* Background Gradients */}\r\n                    <div className=\"absolute top-0 right-0 w-[600px] h-[600px] bg-amber-500/10 rounded-full blur-[120px] -mr-32 -mt-32 pointer-events-none\"></div>\r\n                    <div className=\"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-[100px] -ml-32 -mb-32 pointer-events-none\"></div>\r\n\r\n                    <div className=\"relative z-10 px-6 md:px-16 w-full max-w-4xl py-12\">\r\n                        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-xs font-bold uppercase tracking-widest mb-6 backdrop-blur-md shadow-lg\">\r\n                            <Zap className=\"h-3 w-3 text-amber-500\" /> Sobre Nosotros\r\n                        </div>\r\n                        <h1 className=\"text-4xl md:text-5xl lg:text-6xl 2xl:text-7xl font-bold text-white mb-6 leading-tight drop-shadow-lg transition-all duration-300\">\r\n                            La plataforma definitiva para <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-600\">Creativos en Latam</span>\r\n                        </h1>\r\n                        <p className=\"text-lg md:text-xl text-slate-300 mb-10 max-w-2xl leading-relaxed drop-shadow-md\">\r\n                            Nuestra misi├│n es conectar, educar y potenciar a la pr├│xima generaci├│n de artistas digitales en Latinoam├®rica.\r\n                        </p>\r\n                        <div className=\"flex flex-wrap gap-4\">\r\n                            <button\r\n                                onClick={() => onNavigate('/')}\r\n                                className=\"px-8 py-4 bg-white text-black font-bold rounded-xl hover:bg-slate-200 transition-colors shadow-lg shadow-white/10 w-full md:w-auto\"\r\n                            >\r\n                                Ver Servicios\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Decorative Grid/Image on Right (Hidden on mobile) */}\r\n                    <div className=\"absolute right-0 top-0 bottom-0 w-1/3 hidden lg:block mask-linear-fade pointer-events-none\">\r\n                        <div className=\"grid grid-cols-2 gap-4 opacity-40 transform rotate-12 scale-125 translate-x-20 -translate-y-20\">\r\n                            {[...Array(6)].map((_, i) => (\r\n                                <div key={i} className=\"aspect-[3/4] rounded-2xl overflow-hidden bg-slate-800 shadow-xl\">\r\n                                    <img src={`https://images.unsplash.com/photo-${1550000000000 + i * 100000}-a83a8bd57fbe?q=80&w=400&fit=crop`} className=\"w-full h-full object-cover\" alt=\"\" />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Stats Bar */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8 px-6 md:px-10 py-12 border-b border-slate-200 dark:border-white/5\">\r\n                    <div className=\"text-center md:text-left\">\r\n                        <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">50k+</div>\r\n                        <div className=\"text-xs text-slate-500 uppercase tracking-widest mt-1\">Artistas Activos</div>\r\n                    </div>\r\n                    <div className=\"text-center md:text-left\">\r\n                        <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">1200+</div>\r\n                        <div className=\"text-xs text-slate-500 uppercase tracking-widest mt-1\">Cursos Online</div>\r\n                    </div>\r\n                    <div className=\"text-center md:text-left\">\r\n                        <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">$2M+</div>\r\n                        <div className=\"text-xs text-slate-500 uppercase tracking-widest mt-1\">Pagado a Creadores</div>\r\n                    </div>\r\n                    <div className=\"text-center md:text-left\">\r\n                        <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">25+</div>\r\n                        <div className=\"text-xs text-slate-500 uppercase tracking-widest mt-1\">Pa├¡ses</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Testimonials */}\r\n                <div className=\"py-10 mb-10\">\r\n                    <h2 className=\"text-3xl font-bold text-slate-900 dark:text-white text-center mb-12\">Lo que dicen los artistas</h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                        {[\r\n                            { text: \"Latam Creativa ha cambiado mi carrera. Consegu├¡ mi primer trabajo en un estudio AAA gracias a la secci├│n de empleos.\", author: \"Sof├¡a Mart├¡nez\", role: \"3D Artist @ Ubisoft\" },\r\n                            { text: \"La calidad de los cursos es incre├¡ble. He aprendido m├ís aqu├¡ en un mes que en dos a├▒os de universidad.\", author: \"Juan P├®rez\", role: \"Indie Dev\" },\r\n                            { text: \"Vender mis assets aqu├¡ es mucho m├ís rentable que en otras tiendas. La comunidad es s├║per solidaria.\", author: \"Diego L├│pez\", role: \"Texture Artist\" }\r\n                        ].map((testimonio, i) => (\r\n                            <div key={i} className=\"bg-slate-100 dark:bg-white/5 p-8 rounded-3xl border border-slate-200 dark:border-white/5 relative\">\r\n                                <Quote className=\"h-8 w-8 text-amber-500 mb-4 opacity-50\" />\r\n                                <p className=\"text-slate-700 dark:text-slate-300 mb-6 leading-relaxed italic\">\"{testimonio.text}\"</p>\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"h-10 w-10 rounded-full bg-slate-300 dark:bg-slate-700 overflow-hidden\">\r\n                                        <img src={`https://ui-avatars.com/api/?name=${testimonio.author}&background=random`} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"font-bold text-slate-900 dark:text-white text-sm\">{testimonio.author}</div>\r\n                                        <div className=\"text-xs text-slate-500 dark:text-slate-400\">{testimonio.role}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Trust/Footer Section */}\r\n                <div className=\"pb-10\">\r\n                    <div className=\"rounded-3xl bg-slate-100 dark:bg-white/5 p-8 md:p-12 text-center\">\r\n                        <Shield className=\"h-12 w-12 text-slate-400 mx-auto mb-6\" />\r\n                        <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">Construido para la comunidad</h2>\r\n                        <p className=\"text-slate-500 max-w-xl mx-auto mb-8\">\r\n                            Latam Creativa un proyecto dedicado a potenciar el talento en Latinoam├®rica. Sin algoritmos ocultos, solo arte puro.\r\n                        </p>\r\n                        <div className=\"flex flex-wrap justify-center gap-6 md:gap-10 opacity-50 grayscale hover:grayscale-0 transition-all\">\r\n                            <span className=\"font-bold text-lg md:text-xl text-slate-600 dark:text-slate-400\">UNREAL ENGINE</span>\r\n                            <span className=\"font-bold text-lg md:text-xl text-slate-600 dark:text-slate-400\">BLENDER</span>\r\n                            <span className=\"font-bold text-lg md:text-xl text-slate-600 dark:text-slate-400\">UNITY</span>\r\n                            <span className=\"font-bold text-lg md:text-xl text-slate-600 dark:text-slate-400\">ADOBE</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\ComingSoonView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":7,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { ArrowLeft, Bell, Rocket, Timer } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ComingSoonView: React.FC = () => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div className=\"relative min-h-[80vh] flex items-center justify-center p-6 overflow-hidden animate-fade-in\">\r\n            {/* Background Gradients */}\r\n            <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-[120px] -z-10 animate-pulse\"></div>\r\n            <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-amber-500/10 rounded-full blur-[120px] -z-10 animate-pulse delay-75\"></div>\r\n\r\n            <div className=\"text-center max-w-2xl relative z-10 glass-panel p-12 rounded-3xl border border-white/5 shadow-2xl bg-black/40 backdrop-blur-xl\">\r\n                <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-amber-400 text-xs font-bold uppercase tracking-widest mb-8 animate-slide-up\">\r\n                    <Timer className=\"h-3 w-3\" /> En Construcci├│n\r\n                </div>\r\n\r\n                <h1 className=\"text-5xl md:text-7xl font-bold text-white mb-6 font-display leading-tight animate-slide-up delay-100\">\r\n                    Algo ├®pico <br />\r\n                    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-600\">est├í llegando</span>\r\n                </h1>\r\n\r\n                <p className=\"text-lg text-slate-400 mb-10 leading-relaxed max-w-lg mx-auto animate-slide-up delay-200\">\r\n                    Estamos trabajando duro para traerte esta funcionalidad.\r\n                    ├Ünete a la lista de espera para ser el primero en probarlo.\r\n                </p>\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 animate-slide-up delay-300\">\r\n                    <div className=\"relative w-full max-w-xs\">\r\n                        <Bell className=\"absolute left-4 top-3.5 h-5 w-5 text-slate-500\" />\r\n                        <input\r\n                            type=\"email\"\r\n                            placeholder=\"tucorreo@ejemplo.com\"\r\n                            className=\"w-full bg-white/5 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50 focus:bg-white/10 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <button className=\"w-full sm:w-auto px-8 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-amber-500/20 hover:scale-105 transition-all flex items-center justify-center gap-2\">\r\n                        <Rocket className=\"h-4 w-4\" />\r\n                        Notificarme\r\n                    </button>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={() => window.history.back()}\r\n                    className=\"mt-12 text-slate-500 hover:text-white text-sm font-medium transition-colors flex items-center gap-2 mx-auto animate-slide-up delay-400\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" /> Volver atr├ís\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComingSoonView;","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\CoursesView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\FreelanceView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\HomeView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useRef, useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  ArrowRight, Layers, Newspaper, Move3d, MonitorPlay, Palette, Gamepad2, Globe, Users,\r\n  Code, Server, Database, Cloud, ChevronLeft, ChevronRight, PenTool, Box, Smartphone, Shield, TestTube, Cpu,\r\n  Building2, Terminal, Camera, Layout, Music, Video, Shirt, BookOpen, Aperture, Bitcoin, Wifi, Activity,\r\n  Glasses, ServerCog, Bot, PenLine, Loader2\r\n} from 'lucide-react';\r\nimport { PortfolioCard } from '../../components/cards/PortfolioCard';\r\nimport { BlogCard } from '../../components/cards/BlogCard';\r\nimport { ContentMode, useAppStore } from '../../hooks/useAppStore';\r\nimport { projectsService } from '../../services/modules/projects';\r\nimport { articlesService } from '../../services/modules/articles';\r\nimport { PortfolioItem, ArticleItem } from '../../types';\r\n\r\ninterface HomeViewProps {\r\n  onNavigateToModule: (moduleId: string) => void;\r\n  onItemSelect: (id: string, type: 'portfolio' | 'blog') => void;\r\n  contentMode: ContentMode;\r\n}\r\n\r\nexport const HomeView: React.FC<HomeViewProps> = ({ onNavigateToModule, onItemSelect, contentMode }) => {\r\n  const { state } = useAppStore();\r\n  const navigate = useNavigate();\r\n  const categoriesScrollRef = useRef<HTMLDivElement>(null);\r\n  const portfolioScrollRef = useRef<HTMLDivElement>(null);\r\n  const blogScrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Filter content based on mode (default 'creative')\r\n  const mode = contentMode || 'creative';\r\n\r\n  // State for Firebase data\r\n  const [projects, setProjects] = useState<PortfolioItem[]>([]);\r\n  const [articles, setArticles] = useState<ArticleItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch data from Firebase on mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch projects and articles in parallel\r\n        const [projectsResult, articlesResult] = await Promise.all([\r\n          projectsService.getProjects(null, 10),\r\n          articlesService.getRecentArticles(10)\r\n        ]);\r\n\r\n        setProjects(projectsResult.data || []);\r\n        setArticles(articlesResult || []);\r\n      } catch (error) {\r\n        console.error('Error fetching home data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Filter by mode and limit display\r\n  const displayPortfolio = projects.filter(i => (i.domain || 'creative') === mode).slice(0, 6);\r\n  const displayBlog = articles.filter(i => (i.domain || 'creative') === mode).slice(0, 5);\r\n\r\n  // Extended Categories for Scrolling\r\n  const creativeCategories = [\r\n    { label: 'Modelado 3D', icon: Move3d, color: 'from-blue-500 to-cyan-500' },\r\n    { label: 'Animaci├│n', icon: MonitorPlay, color: 'from-purple-500 to-pink-500' },\r\n    { label: 'Concept Art', icon: Palette, color: 'from-amber-500 to-orange-500' },\r\n    { label: 'Game Dev', icon: Gamepad2, color: 'from-green-500 to-emerald-500' },\r\n    { label: 'VFX', icon: Box, color: 'from-red-500 to-pink-600' },\r\n    { label: 'ArchViz', icon: Building2, color: 'from-slate-500 to-gray-600' },\r\n    { label: 'Ilustraci├│n', icon: PenTool, color: 'from-pink-500 to-rose-500' },\r\n    { label: 'VR / AR', icon: Globe, color: 'from-cyan-500 to-blue-600' },\r\n    { label: 'Fotograf├¡a', icon: Camera, color: 'from-indigo-500 to-blue-600' },\r\n    { label: 'Dise├▒o Gr├ífico', icon: Layout, color: 'from-orange-400 to-red-500' },\r\n    { label: 'M├║sica & SFX', icon: Music, color: 'from-rose-500 to-pink-600' },\r\n    { label: 'Edici├│n Video', icon: Video, color: 'from-blue-600 to-indigo-600' },\r\n    { label: 'Moda 3D', icon: Shirt, color: 'from-fuchsia-500 to-purple-600' },\r\n    { label: 'Escritura', icon: BookOpen, color: 'from-emerald-600 to-teal-500' },\r\n    { label: 'Motion', icon: Aperture, color: 'from-yellow-500 to-orange-500' },\r\n  ];\r\n\r\n  const devCategories = [\r\n    { label: 'Frontend', icon: Code, color: 'from-blue-500 to-cyan-500' },\r\n    { label: 'Backend', icon: Server, color: 'from-green-500 to-emerald-500' },\r\n    { label: 'DevOps', icon: Cloud, color: 'from-orange-500 to-red-500' },\r\n    { label: 'Database', icon: Database, color: 'from-purple-500 to-pink-500' },\r\n    { label: 'Mobile', icon: Smartphone, color: 'from-teal-500 to-green-400' },\r\n    { label: 'Seguridad', icon: Shield, color: 'from-red-600 to-red-400' },\r\n    { label: 'QA Testing', icon: TestTube, color: 'from-yellow-500 to-amber-500' },\r\n    { label: 'AI & ML', icon: Cpu, color: 'from-indigo-500 to-purple-500' },\r\n    { label: 'Terminal', icon: Terminal, color: 'from-gray-600 to-gray-400' },\r\n    { label: 'Blockchain', icon: Bitcoin, color: 'from-orange-400 to-yellow-500' },\r\n    { label: 'IoT', icon: Wifi, color: 'from-cyan-600 to-blue-600' },\r\n    { label: 'Data Science', icon: Activity, color: 'from-emerald-500 to-teal-600' },\r\n    { label: 'XR Dev', icon: Glasses, color: 'from-violet-500 to-fuchsia-500' },\r\n    { label: 'SysAdmin', icon: ServerCog, color: 'from-slate-600 to-gray-500' },\r\n    { label: 'Rob├│tica', icon: Bot, color: 'from-red-500 to-orange-600' },\r\n    { label: 'System Design', icon: PenLine, color: 'from-blue-400 to-indigo-500' },\r\n  ];\r\n\r\n  const categories = mode === 'dev' ? devCategories : creativeCategories;\r\n\r\n  // Generic Scroll Handler\r\n  const scrollContainer = (ref: React.RefObject<HTMLDivElement | null>, direction: 'left' | 'right') => {\r\n    if (ref.current) {\r\n      const container = ref.current;\r\n      const scrollAmount = container.clientWidth * 0.75;\r\n      container.scrollBy({\r\n        left: direction === 'left' ? -scrollAmount : scrollAmount,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  };\r\n\r\n  // Legacy scroll for categories (uses smaller amount)\r\n  const scrollCategories = (direction: 'left' | 'right') => {\r\n    if (categoriesScrollRef.current) {\r\n      const { current } = categoriesScrollRef;\r\n      const scrollAmount = 300;\r\n      if (direction === 'left') {\r\n        current.scrollBy({ left: -scrollAmount, behavior: 'smooth' });\r\n      } else {\r\n        current.scrollBy({ left: scrollAmount, behavior: 'smooth' });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Theme colors\r\n  const accentText = mode === 'dev' ? 'text-blue-500' : 'text-amber-500';\r\n  const accentHoverText = mode === 'dev' ? 'hover:text-blue-500' : 'hover:text-amber-500';\r\n  const accentHoverBg = mode === 'dev' ? 'hover:bg-blue-500' : 'hover:bg-amber-500';\r\n  const gradientTitle = mode === 'dev'\r\n    ? 'from-blue-400 to-cyan-500'\r\n    : 'from-amber-400 to-orange-500';\r\n\r\n  const badgeBg = mode === 'dev' ? 'bg-blue-500/20 border-blue-500/20 text-blue-400' : 'bg-amber-500/20 border-amber-500/20 text-amber-400';\r\n\r\n  return (\r\n    <div className=\"animate-fade-in pb-20\">\r\n\r\n      {/* Cinematic Hero Section */}\r\n      <div className=\"relative w-full min-h-[300px] md:h-[400px] overflow-hidden\">\r\n        <div className=\"absolute inset-0\">\r\n          <img\r\n            src={mode === 'dev' ? \"https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=2000&auto=format&fit=crop\" : \"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2000&auto=format&fit=crop\"}\r\n            alt=\"Latam Creativa Hero\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-t from-[#0d0d0f] via-[#0d0d0f]/60 to-transparent\"></div>\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#0d0d0f] via-[#0d0d0f]/80 to-transparent\"></div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 h-full w-full max-w-[2560px] mx-auto px-4 md:px-12 2xl:px-16 flex flex-col justify-center py-12 md:py-0\">\r\n          <div className=\"max-w-3xl animate-slide-up\">\r\n            <span className={`inline-flex items-center gap-2 px-3 py-1 rounded-full ${badgeBg} text-[10px] md:text-xs font-bold uppercase tracking-widest mb-4 md:mb-6 border backdrop-blur-md`}>\r\n              <Globe className=\"h-3 w-3\" /> Comunidad Oficial\r\n            </span>\r\n            <h1 className=\"text-3xl md:text-6xl font-bold text-white mb-4 md:mb-6 leading-tight font-display\">\r\n              Latam Creativa <span className={`text-transparent bg-clip-text bg-gradient-to-r ${gradientTitle}`}>{mode === 'dev' ? 'Developers' : 'Originals'}</span>\r\n            </h1>\r\n            <p className={`text-sm md:text-lg text-slate-300 mb-6 md:mb-8 max-w-xl leading-relaxed border-l-4 ${mode === 'dev' ? 'border-blue-500' : 'border-amber-500'} pl-4 md:pl-6`}>\r\n              {mode === 'dev'\r\n                ? 'Recursos, librer├¡as y tutoriales para desarrolladores de software en Latinoam├®rica.'\r\n                : 'Descubre las historias, tutoriales y proyectos exclusivos producidos por y para la comunidad.'\r\n              }\r\n            </p>\r\n\r\n            <div className=\"flex flex-wrap gap-4\">\r\n              <button\r\n                onClick={() => onNavigateToModule('blog')}\r\n                className={`px-6 py-3 bg-white text-black font-bold rounded-xl ${accentHoverBg} hover:text-white transition-colors shadow-lg text-sm md:text-base`}\r\n              >\r\n                Leer Art├¡culos\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"w-full max-w-[2560px] mx-auto px-4 md:px-12 2xl:px-16 -mt-8 relative z-20\">\r\n\r\n        {/* Main Layout Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-10\">\r\n\r\n          {/* Main Content (Feed) - Full Width */}\r\n          <div className=\"lg:col-span-12 space-y-16\">\r\n\r\n            {/* Quick Categories Carousel */}\r\n            <div className=\"relative group\">\r\n              {/* Left Gradient/Arrow */}\r\n              <div className=\"hidden md:block absolute left-0 top-0 bottom-0 w-24 bg-gradient-to-r from-slate-50 dark:from-[#0d0d0f] to-transparent z-10 pointer-events-none\"></div>\r\n              <button\r\n                onClick={() => scrollCategories('left')}\r\n                className=\"hidden md:block absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/80 dark:bg-black/50 backdrop-blur-md rounded-full shadow-lg text-slate-900 dark:text-white opacity-0 group-hover:opacity-100 transition-opacity hover:scale-110 -ml-3\"\r\n              >\r\n                <ChevronLeft className=\"h-6 w-6\" />\r\n              </button>\r\n\r\n              {/* Scroll Container */}\r\n              <div\r\n                ref={categoriesScrollRef}\r\n                className=\"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth pb-4 px-1\"\r\n              >\r\n                {categories.map((cat, idx) => (\r\n                  <div\r\n                    key={idx}\r\n                    className=\"flex-shrink-0 w-36 md:w-44 group/card relative h-20 rounded-xl bg-[#18181b] border border-white/10 overflow-hidden cursor-pointer hover:-translate-y-1 transition-transform shadow-lg\"\r\n                    onClick={() => navigate(`/search?q=${encodeURIComponent(cat.label)}`)}\r\n                  >\r\n                    <div className={`absolute inset-0 opacity-0 group-hover/card:opacity-10 bg-gradient-to-br ${cat.color} transition-opacity`}></div>\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center gap-1.5 p-4\">\r\n                      <cat.icon className=\"h-6 w-6 text-white group-hover/card:scale-110 transition-transform\" />\r\n                      <span className=\"text-xs font-bold text-slate-400 group-hover/card:text-white transition-colors\">{cat.label}</span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Right Gradient/Arrow */}\r\n              <div className=\"hidden md:block absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-slate-50 dark:from-[#0d0d0f] to-transparent z-10 pointer-events-none\"></div>\r\n              <button\r\n                onClick={() => scrollCategories('right')}\r\n                className=\"hidden md:block absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/80 dark:bg-black/50 backdrop-blur-md rounded-full shadow-lg text-slate-900 dark:text-white opacity-0 group-hover:opacity-100 transition-opacity hover:scale-110 -mr-3\"\r\n              >\r\n                <ChevronRight className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Featured Portfolio - Carousel */}\r\n            <section className=\"relative group/portfolio\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3\">\r\n                  <Layers className={`h-5 w-5 md:h-6 md:w-6 ${accentText}`} />\r\n                  {mode === 'dev' ? 'Repositorios & Proyectos' : 'Portafolios'}\r\n                </h2>\r\n                <button onClick={() => onNavigateToModule('portfolio')} className={`text-xs md:text-sm font-bold text-slate-500 ${accentHoverText} transition-colors`}>Ver todo</button>\r\n              </div>\r\n\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center py-16\">\r\n                  <Loader2 className={`h-10 w-10 animate-spin ${accentText}`} />\r\n                </div>\r\n              ) : displayPortfolio.length > 0 ? (\r\n                <div className=\"relative\">\r\n                  {/* Left Arrow */}\r\n                  <button\r\n                    onClick={() => scrollContainer(portfolioScrollRef, 'left')}\r\n                    className=\"hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/portfolio:opacity-100 transition-opacity hover:bg-amber-600 -ml-4 items-center justify-center backdrop-blur-md\"\r\n                  >\r\n                    <ChevronLeft className=\"h-5 w-5\" />\r\n                  </button>\r\n\r\n                  {/* Scrollable Container */}\r\n                  <div\r\n                    ref={portfolioScrollRef}\r\n                    className=\"flex overflow-x-auto gap-4 md:gap-5 pb-4 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide snap-x scroll-smooth\"\r\n                    style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n                  >\r\n                    {displayPortfolio.map(item => (\r\n                      <div key={item.id} className=\"flex-none w-[calc(50%-8px)] md:w-[calc(20%-12px)] snap-start\">\r\n                        <PortfolioCard item={item} onClick={() => onItemSelect(item.id, 'portfolio')} />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Right Arrow */}\r\n                  <button\r\n                    onClick={() => scrollContainer(portfolioScrollRef, 'right')}\r\n                    className=\"hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/portfolio:opacity-100 transition-opacity hover:bg-amber-600 -mr-4 items-center justify-center backdrop-blur-md\"\r\n                  >\r\n                    <ChevronRight className=\"h-5 w-5\" />\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-10 text-slate-500 bg-white/5 rounded-2xl border border-white/5\">\r\n                  No hay portafolios para mostrar en este momento.\r\n                </div>\r\n              )}\r\n            </section>\r\n\r\n            {/* Blog Articles - Carousel */}\r\n            <section className=\"relative group/blog\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3\">\r\n                  <Newspaper className=\"h-5 w-5 md:h-6 md:w-6 text-rose-500\" />\r\n                  Art├¡culos de Blog\r\n                </h2>\r\n                <button onClick={() => onNavigateToModule('blog')} className=\"text-xs md:text-sm font-bold text-slate-500 hover:text-rose-500 transition-colors\">Ver m├ís</button>\r\n              </div>\r\n\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center py-16\">\r\n                  <Loader2 className=\"h-10 w-10 animate-spin text-rose-500\" />\r\n                </div>\r\n              ) : displayBlog.length > 0 ? (\r\n                <div className=\"relative\">\r\n                  {/* Left Arrow */}\r\n                  <button\r\n                    onClick={() => scrollContainer(blogScrollRef, 'left')}\r\n                    className=\"hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/blog:opacity-100 transition-opacity hover:bg-rose-600 -ml-4 items-center justify-center backdrop-blur-md\"\r\n                  >\r\n                    <ChevronLeft className=\"h-5 w-5\" />\r\n                  </button>\r\n\r\n                  {/* Scrollable Container */}\r\n                  <div\r\n                    ref={blogScrollRef}\r\n                    className=\"flex overflow-x-auto gap-4 md:gap-5 pb-4 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide snap-x scroll-smooth\"\r\n                    style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n                  >\r\n                    {displayBlog.map(article => (\r\n                      <div key={article.id} className=\"flex-none w-[calc(50%-8px)] md:w-[calc(20%-12px)] snap-start\">\r\n                        <BlogCard\r\n                          article={article}\r\n                          onClick={() => onItemSelect(article.id, 'blog')}\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Right Arrow */}\r\n                  <button\r\n                    onClick={() => scrollContainer(blogScrollRef, 'right')}\r\n                    className=\"hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/50 border border-white/10 text-white opacity-0 group-hover/blog:opacity-100 transition-opacity hover:bg-rose-600 -mr-4 items-center justify-center backdrop-blur-md\"\r\n                  >\r\n                    <ChevronRight className=\"h-5 w-5\" />\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-10 text-slate-500 bg-white/5 rounded-2xl border border-white/5\">No hay art├¡culos disponibles.</div>\r\n              )}\r\n            </section>\r\n\r\n            {/* Banner */}\r\n            <div className=\"rounded-2xl bg-gradient-to-r from-purple-900 to-indigo-900 p-6 md:p-8 relative overflow-hidden flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\r\n              <div className=\"relative z-10 max-w-lg\">\r\n                <h2 className=\"text-xl md:text-2xl font-bold text-white mb-2\">┬┐Listo para compartir tu trabajo?</h2>\r\n                <p className=\"text-purple-200 text-sm mb-4\">├Ünete a miles de {mode === 'dev' ? 'desarrolladores' : 'creativos'} en nuestra plataforma.</p>\r\n                <button onClick={() => onNavigateToModule('portfolio')} className=\"px-6 py-2 bg-white text-purple-900 font-bold rounded-lg hover:scale-105 transition-transform text-sm w-full md:w-auto\">\r\n                  Explorar Portafolios\r\n                </button>\r\n              </div>\r\n              <div className=\"hidden md:block relative z-10\">\r\n                <Users className=\"h-24 w-24 text-white/20\" />\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\InfoView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[527,530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[527,530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { ArrowLeft, Shield, FileText, Info, Mail, HelpCircle } from 'lucide-react';\r\n\r\ninterface InfoViewProps {\r\n  pageId: string;\r\n  onBack: () => void;\r\n}\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport const InfoView: React.FC<InfoViewProps> = ({ pageId, onBack }) => {\r\n  const { pageId: paramPageId } = useParams<{ pageId: string }>();\r\n  const activePageId = pageId || paramPageId || 'about';\r\n\r\n  // Content Dictionary\r\n  const contentMap: Record<string, { title: string; icon: any; content: React.ReactNode }> = {\r\n    'about': {\r\n      title: 'Sobre Nosotros',\r\n      icon: Info,\r\n      content: (\r\n        <>\r\n          <p className=\"text-lg leading-relaxed mb-4\">\r\n            Latam Creativa naci├│ con una misi├│n simple: <strong>Democratizar el acceso a la industria creativa en Latinoam├®rica.</strong>\r\n          </p>\r\n          <p className=\"mb-4\">\r\n            Somos un equipo de artistas, desarrolladores y so├▒adores que creen que el talento no tiene fronteras, pero las oportunidades a veces s├¡. Creamos este ecosistema para romper esas barreras.\r\n          </p>\r\n          <p>\r\n            Desde nuestra fundaci├│n en 2023, hemos ayudado a m├ís de 50,000 artistas a conectar, aprender y trabajar en proyectos que aman.\r\n          </p>\r\n        </>\r\n      )\r\n    },\r\n    'careers': {\r\n      title: 'Trabaja con Nosotros',\r\n      icon: Info,\r\n      content: (\r\n        <>\r\n          <p className=\"text-lg leading-relaxed mb-4\">\r\n            ┬┐Quieres construir el futuro de la econom├¡a creativa? Estamos buscando talento.\r\n          </p>\r\n          <p className=\"mb-6\">\r\n            Actualmente somos un equipo 100% remoto distribuido por toda Am├®rica Latina y Espa├▒a. Valoramos la autonom├¡a, la pasi├│n por el arte y el c├│digo limpio.\r\n          </p>\r\n          <h3 className=\"text-xl font-bold text-white mb-3\">Posiciones Abiertas</h3>\r\n          <ul className=\"list-disc pl-5 space-y-2 mb-6\">\r\n            <li>Senior React Developer</li>\r\n            <li>Product Designer (UI/UX)</li>\r\n            <li>Community Manager (Brasil)</li>\r\n          </ul>\r\n          <p>Env├¡a tu CV a <span className=\"text-amber-500\">talento@latamcreativa.com</span></p>\r\n        </>\r\n      )\r\n    },\r\n    'press': {\r\n      title: 'Prensa y Medios',\r\n      icon: FileText,\r\n      content: (\r\n        <>\r\n          <p className=\"mb-4\">Gracias por tu inter├®s en Latam Creativa.</p>\r\n          <p className=\"mb-6\">\r\n            Aqu├¡ puedes descargar nuestro Brand Kit (Logos, colores, capturas de pantalla) y leer nuestros ├║ltimos comunicados de prensa.\r\n          </p>\r\n          <button className=\"px-6 py-2 bg-slate-100 dark:bg-white/10 rounded-lg font-bold text-slate-900 dark:text-white hover:bg-slate-200 transition-colors\">\r\n            Descargar Media Kit (.zip)\r\n          </button>\r\n        </>\r\n      )\r\n    },\r\n    'contact': {\r\n      title: 'Contacto',\r\n      icon: Mail,\r\n      content: (\r\n        <>\r\n          <p className=\"mb-6\">\r\n            ┬┐Tienes alguna duda, sugerencia o propuesta de colaboraci├│n? Nos encantar├¡a escucharte.\r\n          </p>\r\n          <div className=\"bg-slate-50 dark:bg-white/5 p-6 rounded-xl border border-slate-200 dark:border-white/10 max-w-lg\">\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-bold mb-2\">Asunto</label>\r\n              <select className=\"w-full bg-white dark:bg-black/20 border border-slate-300 dark:border-white/10 rounded-lg p-2.5 outline-none\">\r\n                <option>Soporte T├®cnico</option>\r\n                <option>Ventas / Enterprise</option>\r\n                <option>Reportar Abuso</option>\r\n                <option>Otro</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-bold mb-2\">Mensaje</label>\r\n              <textarea rows={4} className=\"w-full bg-white dark:bg-black/20 border border-slate-300 dark:border-white/10 rounded-lg p-2.5 outline-none\"></textarea>\r\n            </div>\r\n            <button className=\"w-full py-3 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition-colors\">Enviar Mensaje</button>\r\n          </div>\r\n        </>\r\n      )\r\n    },\r\n    'terms': {\r\n      title: 'T├®rminos de Servicio',\r\n      icon: Shield,\r\n      content: (\r\n        <div className=\"space-y-8\">\r\n          <div className=\"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10\">\r\n            <p className=\"text-sm text-slate-500\">├Ültima actualizaci├│n: 1 de Diciembre, 2024</p>\r\n            <p className=\"mt-2\">Bienvenido a Latam Creativa. Estos t├®rminos rigen el uso de nuestra plataforma y servicios.</p>\r\n          </div>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">1. Aceptaci├│n de los T├®rminos</h3>\r\n            <p className=\"leading-relaxed\">\r\n              Al acceder y utilizar Latam Creativa (\"la Plataforma\"), aceptas cumplir y estar legalmente vinculado por estos T├®rminos de Servicio. Si no est├ís de acuerdo con alguno de estos t├®rminos, te pedimos abstenerte de usar nuestros servicios.\r\n            </p>\r\n          </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">2. Cuentas de Usuario</h3>\r\n            <ul className=\"list-disc pl-5 space-y-2 marker:text-amber-500\">\r\n              <li>Debes proporcionar informaci├│n precisa y completa al registrarte.</li>\r\n              <li>Eres responsable de mantener la seguridad de tu contrase├▒a.</li>\r\n              <li>Nos reservamos el derecho de suspender cuentas que violen nuestras normas comunitarias.</li>\r\n            </ul>\r\n          </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">3. Propiedad Intelectual</h3>\r\n            <p className=\"leading-relaxed mb-4\">\r\n              <strong>Tus Contenidos:</strong> Conservas todos los derechos de propiedad sobre el contenido que publicas (portafolios, proyectos, assets). Al subir contenido, otorgas a Latam Creativa una licencia no exclusiva para mostrarlo y promocionarlo dentro de la plataforma.\r\n            </p>\r\n            <p className=\"leading-relaxed\">\r\n              <strong>Nuestros Contenidos:</strong> El dise├▒o de la plataforma, el c├│digo, el logotipo y la marca \"Latam Creativa\" son propiedad exclusiva nuestra.\r\n            </p>\r\n          </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">4. Conducta Prohibida</h3>\r\n            <p className=\"leading-relaxed\">\r\n              Queda estrictamente prohibido usar la plataforma para difundir malware, realizar scraping de datos, acosar a otros usuarios, o publicar contenido ilegal o expl├¡cito.\r\n            </p>\r\n          </section>\r\n        </div>\r\n      )\r\n    },\r\n    'privacy': {\r\n      title: 'Pol├¡tica de Privacidad',\r\n      icon: Shield,\r\n      content: (\r\n        <div className=\"space-y-8\">\r\n          <p className=\"text-lg leading-relaxed\">\r\n            En Latam Creativa, la privacidad de tus datos es una prioridad. Esta pol├¡tica detalla qu├® informaci├│n recopilamos y c├│mo la protegemos.\r\n          </p>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">1. Datos que Recopilamos</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div className=\"p-4 bg-slate-50 dark:bg-white/5 rounded-lg\">\r\n                <h4 className=\"font-bold mb-2 text-amber-500\">Informaci├│n Directa</h4>\r\n                <p className=\"text-sm\">Nombre, correo electr├│nico, portafolio y datos de pago proporcionados al registrarte.</p>\r\n              </div>\r\n              <div className=\"p-4 bg-slate-50 dark:bg-white/5 rounded-lg\">\r\n                <h4 className=\"font-bold mb-2 text-blue-500\">Informaci├│n Autom├ítica</h4>\r\n                <p className=\"text-sm\">Direcci├│n IP, tipo de dispositivo, y patrones de navegaci├│n para an├ílisis de UX.</p>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">2. Uso de la Informaci├│n</h3>\r\n            <p className=\"leading-relaxed mb-4\">Utilizamos tus datos para:</p>\r\n            <ul className=\"list-disc pl-5 space-y-2\">\r\n              <li>Proporcionar y mantener el servicio.</li>\r\n              <li>Procesar transacciones de compras en el Mercado.</li>\r\n              <li>Enviarte notificaciones relevantes (puedes darte de baja en cualquier momento).</li>\r\n              <li>Prevenir el fraude y garantizar la seguridad.</li>\r\n            </ul>\r\n          </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4\">3. Tus Derechos (GDPR/ARCO)</h3>\r\n            <p className=\"leading-relaxed\">\r\n              Tienes derecho a acceder, rectificar o eliminar tus datos personales en cualquier momento. Puedes ejercer estos derechos desde la configuraci├│n de tu cuenta o contactando a soporte.\r\n            </p>\r\n          </section>\r\n        </div>\r\n      )\r\n    },\r\n    'cookies': {\r\n      title: 'Pol├¡tica de Cookies',\r\n      icon: Info,\r\n      content: (\r\n        <div className=\"space-y-6\">\r\n          <p className=\"text-lg leading-relaxed\">\r\n            Utilizamos cookies y tecnolog├¡as similares para mejorar tu experiencia, personalizar contenido y analizar nuestro tr├ífico.\r\n          </p>\r\n\r\n          <div className=\"overflow-hidden rounded-xl border border-slate-200 dark:border-white/10\">\r\n            <table className=\"w-full text-left text-sm\">\r\n              <thead className=\"bg-slate-100 dark:bg-white/5 font-bold uppercase tracking-wider text-xs\">\r\n                <tr>\r\n                  <th className=\"p-4\">Tipo</th>\r\n                  <th className=\"p-4\">Prop├│sito</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-slate-200 dark:divide-white/10\">\r\n                <tr>\r\n                  <td className=\"p-4 font-bold text-amber-500\">Esenciales</td>\r\n                  <td className=\"p-4 text-slate-500\">Necesarias para el funcionamiento b├ísico (ej. mantener sesi├│n iniciada).</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"p-4 font-bold text-blue-500\">Anal├¡ticas</td>\r\n                  <td className=\"p-4 text-slate-500\">Nos ayudan a entender c├│mo usas el sitio para mejorarlo.</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className=\"p-4 font-bold text-purple-500\">Publicitarias</td>\r\n                  <td className=\"p-4 text-slate-500\">Usadas para mostrar anuncios relevantes en sitios de terceros.</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    'licenses': {\r\n      title: 'Licencias de Assets',\r\n      icon: FileText,\r\n      content: (\r\n        <>\r\n          <p className=\"mb-6\">\r\n            Entender nuestros tipos de licencia es crucial tanto para vendedores como para compradores en el Mercado.\r\n          </p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div className=\"bg-slate-50 dark:bg-white/5 p-6 rounded-xl border border-slate-200 dark:border-white/10\">\r\n              <h4 className=\"font-bold text-lg mb-2\">Licencia Standard</h4>\r\n              <p className=\"text-sm mb-4\">Para uso personal y proyectos comerciales peque├▒os.</p>\r\n              <ul className=\"list-disc pl-4 text-sm space-y-1\">\r\n                <li>1 Proyecto Comercial</li>\r\n                <li>Uso personal ilimitado</li>\r\n                <li>No redistribuible</li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"bg-slate-50 dark:bg-white/5 p-6 rounded-xl border border-slate-200 dark:border-white/10\">\r\n              <h4 className=\"font-bold text-lg mb-2\">Licencia Extendida</h4>\r\n              <p className=\"text-sm mb-4\">Para estudios y proyectos a gran escala.</p>\r\n              <ul className=\"list-disc pl-4 text-sm space-y-1\">\r\n                <li>Proyectos comerciales ilimitados</li>\r\n                <li>Uso en m├║ltiples sedes</li>\r\n                <li>Permite modificaci├│n de assets</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )\r\n    },\r\n    'help': {\r\n      title: 'Centro de Ayuda',\r\n      icon: HelpCircle,\r\n      content: (\r\n        <>\r\n          <p className=\"mb-6\">┬┐C├│mo podemos ayudarte hoy?</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {['Problemas con pagos', 'Subir mi primer curso', 'Verificar mi cuenta', 'Reportar un bug'].map(item => (\r\n              <button key={item} className=\"p-4 text-left bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl hover:border-amber-500 transition-colors font-medium\">\r\n                {item}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <p className=\"mt-8\">\r\n            ┬┐No encuentras lo que buscas? <button className=\"text-amber-500 underline\">Contacta a soporte</button>.\r\n          </p>\r\n        </>\r\n      )\r\n    },\r\n    'guides': {\r\n      title: 'Gu├¡as de la Comunidad',\r\n      icon: FileText,\r\n      content: (\r\n        <>\r\n          <p className=\"mb-4\">\r\n            Recursos para sacar el m├íximo provecho a Latam Creativa.\r\n          </p>\r\n          <ul className=\"space-y-4\">\r\n            <li className=\"p-4 bg-slate-50 dark:bg-white/5 rounded-xl\">\r\n              <h4 className=\"font-bold\">C├│mo crear un portafolio de alto impacto</h4>\r\n              <p className=\"text-sm text-slate-500\">Consejos de directores de arte para destacar.</p>\r\n            </li>\r\n            <li className=\"p-4 bg-slate-50 dark:bg-white/5 rounded-xl\">\r\n              <h4 className=\"font-bold\">Gu├¡a para vender en el Mercado</h4>\r\n              <p className=\"text-sm text-slate-500\">Mejores pr├ícticas para miniaturas, descripciones y precios.</p>\r\n            </li>\r\n          </ul>\r\n        </>\r\n      )\r\n    }\r\n  };\r\n\r\n  const currentData = contentMap[activePageId] || contentMap['about'];\r\n  const Icon = currentData.icon;\r\n\r\n  return (\r\n    <div className=\"max-w-[1000px] mx-auto animate-fade-in pb-20\">\r\n\r\n      {/* Header */}\r\n      <div className=\"sticky top-0 z-30 bg-white/90 dark:bg-[#0d0d0f]/90 backdrop-blur-xl border-b border-slate-200 dark:border-white/[0.06] px-6 h-16 flex items-center gap-4\">\r\n        <button\r\n          onClick={onBack}\r\n          className=\"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 text-slate-600 dark:text-slate-400 transition-colors\"\r\n        >\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </button>\r\n        <h1 className=\"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2\">\r\n          <Icon className=\"h-5 w-5 text-amber-500\" />\r\n          {currentData.title}\r\n        </h1>\r\n      </div>\r\n\r\n      <div className=\"p-6 md:p-12\">\r\n        <div className=\"prose prose-lg prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-300\">\r\n          {currentData.content}\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\NotFoundView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\SearchResultsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1559,1562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1559,1562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { Search, Loader2, Layers, Newspaper, User, Filter, ArrowLeft, X } from 'lucide-react';\r\nimport { searchService, SearchResult } from '../../services/modules/search';\r\nimport { PortfolioCard } from '../../components/cards/PortfolioCard';\r\nimport { BlogCard } from '../../components/cards/BlogCard';\r\nimport { projectsService } from '../../services/modules/projects';\r\nimport { articlesService } from '../../services/modules/articles';\r\nimport { usersService } from '../../services/modules/users';\r\nimport { PortfolioItem, ArticleItem } from '../../types';\r\n\r\ntype FilterType = 'all' | 'project' | 'article' | 'user';\r\n\r\ninterface SearchResultsViewProps {\r\n  query?: string;\r\n  onItemSelect?: (id: string, type: 'portfolio' | 'blog' | 'user') => void;\r\n}\r\n\r\nexport const SearchResultsView: React.FC<SearchResultsViewProps> = ({ onItemSelect }) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const query = searchParams.get('q') || '';\r\n\r\n  const [searchQuery, setSearchQuery] = useState(query);\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [activeFilter, setActiveFilter] = useState<FilterType>('all');\r\n\r\n  // Full data for cards\r\n  const [projects, setProjects] = useState<PortfolioItem[]>([]);\r\n  const [articles, setArticles] = useState<ArticleItem[]>([]);\r\n  const [users, setUsers] = useState<any[]>([]);\r\n  const [loadingDetails, setLoadingDetails] = useState(false);\r\n\r\n  // Search on query change\r\n  useEffect(() => {\r\n    const performSearch = async () => {\r\n      if (!query || query.trim().length < 2) {\r\n        setResults([]);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      try {\r\n        const searchResults = await searchService.search(query.trim(), {\r\n          maxResults: 50,\r\n          type: activeFilter\r\n        });\r\n        setResults(searchResults);\r\n\r\n        // Fetch full details for each type\r\n        await fetchFullDetails(searchResults);\r\n      } catch (error) {\r\n        console.error('Search error:', error);\r\n        setResults([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    performSearch();\r\n  }, [query, activeFilter]);\r\n\r\n  // Fetch full details for display in cards\r\n  const fetchFullDetails = async (searchResults: SearchResult[]) => {\r\n    setLoadingDetails(true);\r\n    try {\r\n      const projectIds = searchResults.filter(r => r.type === 'project').map(r => r.id);\r\n      const articleIds = searchResults.filter(r => r.type === 'article').map(r => r.id);\r\n      const userResults = searchResults.filter(r => r.type === 'user');\r\n\r\n      // Fetch projects\r\n      if (projectIds.length > 0) {\r\n        const projectsData = await projectsService.getProjectsByIds(projectIds);\r\n        setProjects(projectsData);\r\n      } else {\r\n        setProjects([]);\r\n      }\r\n\r\n      // Fetch articles\r\n      if (articleIds.length > 0) {\r\n        const articlesData = await articlesService.getArticlesByIds(articleIds);\r\n        setArticles(articlesData);\r\n      } else {\r\n        setArticles([]);\r\n      }\r\n\r\n      // For users, we already have basic info from search, but fetch full profiles\r\n      if (userResults.length > 0) {\r\n        const userProfiles = await Promise.all(\r\n          userResults.map(u => usersService.getUserProfile(u.id))\r\n        );\r\n        setUsers(userProfiles.filter(u => u !== null));\r\n      } else {\r\n        setUsers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching details:', error);\r\n    } finally {\r\n      setLoadingDetails(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (searchQuery.trim()) {\r\n      setSearchParams({ q: searchQuery.trim() });\r\n    }\r\n  };\r\n\r\n  const handleFilterChange = (filter: FilterType) => {\r\n    setActiveFilter(filter);\r\n  };\r\n\r\n  const projectResults = results.filter(r => r.type === 'project');\r\n  const articleResults = results.filter(r => r.type === 'article');\r\n  const userResults = results.filter(r => r.type === 'user');\r\n\r\n  const filterOptions: { id: FilterType; label: string; icon: typeof Layers; count: number }[] = [\r\n    { id: 'all', label: 'Todos', icon: Search, count: results.length },\r\n    { id: 'project', label: 'Proyectos', icon: Layers, count: projectResults.length },\r\n    { id: 'article', label: 'Art├¡culos', icon: Newspaper, count: articleResults.length },\r\n    { id: 'user', label: 'Usuarios', icon: User, count: userResults.length },\r\n  ];\r\n\r\n  const hasResults = results.length > 0;\r\n\r\n  return (\r\n    <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-8 pb-16 transition-colors animate-fade-in bg-[#1c1c21] min-h-screen\">\r\n\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <button\r\n          onClick={() => navigate(-1)}\r\n          className=\"flex items-center gap-2 text-slate-400 hover:text-white transition-colors mb-6\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4\" />\r\n          <span className=\"text-sm\">Volver</span>\r\n        </button>\r\n\r\n        <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-2\">\r\n          Resultados de b├║squeda\r\n        </h1>\r\n        {query && (\r\n          <p className=\"text-slate-400\">\r\n            {loading ? 'Buscando...' : `${results.length} resultados para`}{' '}\r\n            <span className=\"text-amber-500 font-semibold\">\"{query}\"</span>\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <form onSubmit={handleSearch} className=\"relative max-w-2xl mb-8\">\r\n        <div className=\"absolute inset-y-0 left-4 flex items-center pointer-events-none\">\r\n          {loading ? (\r\n            <Loader2 className=\"h-5 w-5 text-amber-500 animate-spin\" />\r\n          ) : (\r\n            <Search className=\"h-5 w-5 text-slate-400\" />\r\n          )}\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          placeholder=\"Buscar proyectos, art├¡culos, usuarios, programas...\"\r\n          className=\"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-32 text-white placeholder-slate-400 focus:outline-none focus:bg-white/10 focus:ring-2 focus:ring-amber-500/30 focus:border-amber-500/50 transition-all\"\r\n        />\r\n        {searchQuery && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setSearchQuery('')}\r\n            className=\"absolute right-24 top-1/2 -translate-y-1/2 p-2 text-slate-400 hover:text-white transition-colors\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white font-bold rounded-xl transition-colors\"\r\n        >\r\n          Buscar\r\n        </button>\r\n      </form>\r\n\r\n      {/* Filter Tabs */}\r\n      <div className=\"flex flex-wrap gap-2 mb-10 border-b border-white/10 pb-6\">\r\n        {filterOptions.map((filter) => (\r\n          <button\r\n            key={filter.id}\r\n            onClick={() => handleFilterChange(filter.id)}\r\n            className={`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${activeFilter === filter.id\r\n              ? 'bg-amber-500 text-white shadow-lg shadow-amber-500/20'\r\n              : 'bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white'\r\n              }`}\r\n          >\r\n            <filter.icon className=\"h-4 w-4\" />\r\n            <span>{filter.label}</span>\r\n            <span className={`ml-1 px-1.5 py-0.5 rounded text-xs ${activeFilter === filter.id\r\n              ? 'bg-white/20 text-white'\r\n              : 'bg-white/10 text-slate-500'\r\n              }`}>\r\n              {filter.count}\r\n            </span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Loading State */}\r\n      {(loading || loadingDetails) && (\r\n        <div className=\"flex justify-center items-center py-20\">\r\n          <Loader2 className=\"h-12 w-12 animate-spin text-amber-500\" />\r\n        </div>\r\n      )}\r\n\r\n      {/* No Query State */}\r\n      {!query && !loading && (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n          <div className=\"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mb-6\">\r\n            <Search className=\"h-10 w-10 text-slate-500\" />\r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-white mb-2\">┬┐Qu├® est├ís buscando?</h2>\r\n          <p className=\"text-slate-400 max-w-md\">\r\n            Escribe el nombre de un proyecto, art├¡culo, usuario, programa (como ZBrush, Blender) o categor├¡a.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* No Results State */}\r\n      {query && !loading && !loadingDetails && !hasResults && (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n          <div className=\"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mb-6\">\r\n            <Search className=\"h-10 w-10 text-slate-400\" />\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-white mb-2\">\r\n            No encontramos resultados para \"{query}\"\r\n          </h2>\r\n          <p className=\"text-slate-400 max-w-md mb-6\">\r\n            Intenta con otras palabras clave o revisa la ortograf├¡a. Tambi├®n puedes navegar por las categor├¡as.\r\n          </p>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => navigate('/portfolio')}\r\n              className=\"px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white hover:bg-white/10 transition-colors\"\r\n            >\r\n              Ver Portafolio\r\n            </button>\r\n            <button\r\n              onClick={() => navigate('/blog')}\r\n              className=\"px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white hover:bg-white/10 transition-colors\"\r\n            >\r\n              Ver Blog\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Results */}\r\n      {!loading && !loadingDetails && hasResults && (\r\n        <div className=\"space-y-12\">\r\n\r\n          {/* Projects Section */}\r\n          {(activeFilter === 'all' || activeFilter === 'project') && projects.length > 0 && (\r\n            <section>\r\n              <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-2 rounded-lg bg-amber-500/10\">\r\n                  <Layers className=\"h-5 w-5 text-amber-500\" />\r\n                </div>\r\n                <h2 className=\"text-xl font-bold text-white\">\r\n                  Proyectos <span className=\"text-slate-500 font-normal\">({projects.length})</span>\r\n                </h2>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\r\n                {projects.map((project) => (\r\n                  <PortfolioCard\r\n                    key={project.id}\r\n                    item={project}\r\n                    onClick={() => {\r\n                      onItemSelect?.(project.id, 'portfolio');\r\n                      navigate(`/portfolio/${project.slug || project.id}`);\r\n                    }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </section>\r\n          )}\r\n\r\n          {/* Articles Section */}\r\n          {(activeFilter === 'all' || activeFilter === 'article') && articles.length > 0 && (\r\n            <section>\r\n              <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-2 rounded-lg bg-rose-500/10\">\r\n                  <Newspaper className=\"h-5 w-5 text-rose-500\" />\r\n                </div>\r\n                <h2 className=\"text-xl font-bold text-white\">\r\n                  Art├¡culos <span className=\"text-slate-500 font-normal\">({articles.length})</span>\r\n                </h2>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n                {articles.map((article) => (\r\n                  <BlogCard\r\n                    key={article.id}\r\n                    article={article}\r\n                    onClick={() => {\r\n                      onItemSelect?.(article.id, 'blog');\r\n                      navigate(`/blog/${article.slug || article.id}`);\r\n                    }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </section>\r\n          )}\r\n\r\n          {/* Users Section */}\r\n          {(activeFilter === 'all' || activeFilter === 'user') && users.length > 0 && (\r\n            <section>\r\n              <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"p-2 rounded-lg bg-blue-500/10\">\r\n                  <User className=\"h-5 w-5 text-blue-500\" />\r\n                </div>\r\n                <h2 className=\"text-xl font-bold text-white\">\r\n                  Usuarios <span className=\"text-slate-500 font-normal\">({users.length})</span>\r\n                </h2>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n                {users.map((user) => (\r\n                  <button\r\n                    key={user.id}\r\n                    onClick={() => {\r\n                      onItemSelect?.(user.id, 'user');\r\n                      navigate(`/user/${user.username || user.id}`);\r\n                    }}\r\n                    className=\"group flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl transition-all text-left\"\r\n                  >\r\n                    <img\r\n                      src={user.avatar || user.profileImage || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name || 'User')}&background=random`}\r\n                      alt={user.name}\r\n                      className=\"w-14 h-14 rounded-full object-cover ring-2 ring-white/10 group-hover:ring-blue-500/50 transition-all\"\r\n                    />\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <h3 className=\"text-white font-semibold truncate group-hover:text-blue-400 transition-colors\">\r\n                        {user.name}\r\n                      </h3>\r\n                      <p className=\"text-sm text-slate-400 truncate\">\r\n                        @{user.username || user.id?.slice(0, 8)}\r\n                      </p>\r\n                      {user.role || user.profession ? (\r\n                        <p className=\"text-xs text-slate-500 truncate mt-1\">\r\n                          {user.role || user.profession}\r\n                        </p>\r\n                      ) : null}\r\n                      {user.skills && user.skills.length > 0 && (\r\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                          {user.skills.slice(0, 3).map((skill: string, idx: number) => (\r\n                            <span\r\n                              key={idx}\r\n                              className={`px-1.5 py-0.5 text-[10px] rounded ${skill.toLowerCase().includes(query.toLowerCase())\r\n                                ? 'bg-amber-500/20 text-amber-400'\r\n                                : 'bg-white/5 text-slate-400'\r\n                                }`}\r\n                            >\r\n                              {skill}\r\n                            </span>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </section>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\ServicePages.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\general\\SuccessView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect } from 'react';\r\nimport { Check, ShoppingBag, ArrowRight } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\n\r\nexport const SuccessView: React.FC = () => {\r\n  const { actions } = useAppStore();\r\n\r\n  useEffect(() => {\r\n    // Clear cart on mount\r\n    actions.clearCart();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-[80vh] px-6 text-center animate-fade-in w-full max-w-4xl mx-auto\">\r\n      <div className=\"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mb-8 shadow-2xl shadow-green-500/30 animate-enter-up\">\r\n        <Check className=\"h-12 w-12 text-white animate-bounce\" strokeWidth={3} />\r\n      </div>\r\n      \r\n      <h1 className=\"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-4 animate-fade-in delay-100\">\r\n        ┬íPago Exitoso!\r\n      </h1>\r\n      \r\n      <p className=\"text-lg text-slate-500 dark:text-slate-400 max-w-md mb-10 leading-relaxed animate-fade-in delay-200\">\r\n        ┬íGracias por tu compra! Hemos enviado el recibo y los enlaces de acceso a tu correo electr├│nico.\r\n      </p>\r\n\r\n      <div className=\"flex flex-col sm:flex-row gap-4 w-full max-w-md animate-fade-in delay-300\">\r\n        <button \r\n          onClick={() => actions.handleModuleSelect('home')}\r\n          className=\"flex-1 px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-black font-bold rounded-xl hover:scale-[1.02] transition-transform shadow-lg flex items-center justify-center gap-2\"\r\n        >\r\n          Volver al Inicio\r\n        </button>\r\n        <button \r\n          onClick={() => actions.handleModuleSelect('market')}\r\n          className=\"flex-1 px-8 py-4 bg-transparent border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-white/5 transition-colors flex items-center justify-center gap-2\"\r\n        >\r\n          <ShoppingBag className=\"h-5 w-5\" /> Seguir explorando\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\legal\\PrivacyView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\legal\\TermsView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\CreatePortfolioView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCategoryOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":96,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsCategoryOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":96,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5499,5502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5499,5502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDropGallery' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":273,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":273,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":434,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":434,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15714,15717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15714,15717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":463,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16865,16868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16865,16868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":520,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":520,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18532,18535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18532,18535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport ReactCrop, { Crop, PixelCrop, centerCrop, makeAspectCrop } from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport {\r\n  ArrowLeft,\r\n  Upload,\r\n  X,\r\n  Plus,\r\n  Image as ImageIcon,\r\n  Loader2,\r\n  Monitor,\r\n  Layers,\r\n  Trash2,\r\n  Type,\r\n  Save,\r\n  Calendar,\r\n  Globe,\r\n  ChevronDown,\r\n  Users\r\n} from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useCreateProject, useProject, useUpdateProject } from '../../hooks/useFirebase';\r\nimport { GalleryItemCard, GalleryItem, MediaUploader } from './components';\r\nimport { EmailVerificationBanner } from '../../hooks/useContentVerification';\r\n\r\ninterface CreatePortfolioViewProps {\r\n  onBack: () => void;\r\n}\r\n\r\nconst PORTFOLIO_CATEGORIES = [\r\n  'Modelado 3D', 'Concept Art', 'Animaci├│n', 'Ilustraci├│n', 'UI/UX Design', 'Environment Art', 'Character Design'\r\n];\r\n\r\nconst COMMON_SOFTWARE = [\r\n  'Blender', 'Maya', 'ZBrush', 'Substance Painter', 'Unreal Engine', 'Unity', 'Photoshop', 'Illustrator', 'Figma'\r\n];\r\n\r\n// Definimos los l├¡mites de tama├▒o (en bytes)\r\nconst MAX_SIZE_FREE = 10 * 1024 * 1024; // 10MB para usuarios gratuitos (Suficiente para 1080p/2K alta calidad)\r\nconst MAX_SIZE_PRO = 50 * 1024 * 1024;  // 50MB para usuarios Pro (Soporte para 4K/8K sin compresi├│n agresiva)\r\n\r\nexport const CreatePortfolioView: React.FC<CreatePortfolioViewProps> = ({ onBack }) => {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const galleryInputRef = useRef<HTMLInputElement>(null);\r\n  const [searchParams] = useSearchParams();\r\n  const editId = searchParams.get('edit');\r\n\r\n  // Form State\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [softwares, setSoftwares] = useState<string[]>([]);\r\n  const [tags, setTags] = useState<string[]>([]);\r\n  const [collaborators, setCollaborators] = useState<string[]>([]);\r\n\r\n  // Media State\r\n  const [coverFile, setCoverFile] = useState<File | null>(null);\r\n  const [coverPreview, setCoverPreview] = useState<string | null>(null);\r\n  const [originalCoverImage, setOriginalCoverImage] = useState<string | null>(null);\r\n\r\n  // Crop State\r\n  const [imageToCrop, setImageToCrop] = useState<string | null>(null);\r\n  const [crop, setCrop] = useState<Crop>();\r\n  const [completedCrop, setCompletedCrop] = useState<PixelCrop | null>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const descriptionRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // GalleryItem type is now imported from './components'\r\n  const [galleryItems, setGalleryItems] = useState<GalleryItem[]>([]);\r\n\r\n  // YouTube Input State\r\n  const [isAddingYoutube, setIsAddingYoutube] = useState(false);\r\n  const [youtubeLink, setYoutubeLink] = useState('');\r\n\r\n  // Sketchfab Input State\r\n  const [isAddingSketchfab, setIsAddingSketchfab] = useState(false);\r\n  const [sketchfabLink, setSketchfabLink] = useState('');\r\n\r\n  // Publishing State\r\n  const [publishStatus, setPublishStatus] = useState<'draft' | 'published' | 'scheduled'>('published');\r\n  const [scheduledDate, setScheduledDate] = useState<string>('');\r\n  const [isStatusOpen, setIsStatusOpen] = useState(false);\r\n\r\n  // UX State\r\n  const { create: createProject, loading: isCreating, progress: createProgress } = useCreateProject();\r\n  const { update: updateProject, loading: isUpdating, progress: updateProgress } = useUpdateProject();\r\n  const { project: projectToEdit, loading: isLoadingEdit } = useProject(editId || undefined);\r\n\r\n  const [softwareInput, setSoftwareInput] = useState('');\r\n  const [tagInput, setTagInput] = useState('');\r\n  const [collaboratorInput, setCollaboratorInput] = useState('');\r\n  const [isCategoryOpen, setIsCategoryOpen] = useState(false);\r\n\r\n  const isSubmitting = isCreating || isUpdating;\r\n  const progress = isCreating ? createProgress : updateProgress;\r\n\r\n  // L├│gica de L├¡mite Inteligente\r\n  // Aqu├¡ verificamos si el usuario tiene un rol premium.\r\n  // En el futuro, esto podr├¡a verificar 'state.user.subscriptionStatus === \"active\"'\r\n  const isProUser = state.user?.role === 'Pro' || state.user?.role === 'Master' || state.user?.role === 'Expert';\r\n  const maxFileSize = isProUser ? MAX_SIZE_PRO : MAX_SIZE_FREE;\r\n\r\n  // --- Effect: Load Data for Editing ---\r\n  useEffect(() => {\r\n    if (projectToEdit) {\r\n      setTitle(projectToEdit.title);\r\n      setDescription(projectToEdit.description || '');\r\n      // Auto-resize description textarea after data loads\r\n      setTimeout(() => {\r\n        if (descriptionRef.current) {\r\n          descriptionRef.current.style.height = 'auto';\r\n          descriptionRef.current.style.height = `${descriptionRef.current.scrollHeight}px`;\r\n        }\r\n      }, 0);\r\n      setCategory(projectToEdit.category);\r\n      setSoftwares(projectToEdit.software || []);\r\n      setTags(projectToEdit.tags || []);\r\n      setCollaborators(projectToEdit.collaborators || []);\r\n\r\n      // Set Cover\r\n      if (projectToEdit.image) {\r\n        setCoverPreview(projectToEdit.image);\r\n        setOriginalCoverImage(projectToEdit.image); // For cropping existing image (might need CORS handling)\r\n      }\r\n\r\n      // Set Gallery\r\n      if (projectToEdit.gallery) {\r\n        const mappedItems: GalleryItem[] = projectToEdit.gallery.map((item: any) => {\r\n          let preview = item.url;\r\n          if (item.type === 'youtube') {\r\n            const videoId = getYoutubeVideoId(item.url);\r\n            preview = videoId ? `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg` : '';\r\n          }\r\n          return {\r\n            id: Math.random().toString(36).substr(2, 9),\r\n            url: item.url, // Keep URL for existing items\r\n            preview: preview,\r\n            caption: item.caption || '',\r\n            type: item.type\r\n          };\r\n        });\r\n        setGalleryItems(mappedItems);\r\n      }\r\n    }\r\n  }, [projectToEdit]);\r\n\r\n  const validateFile = (file: File): boolean => {\r\n    if (file.size > maxFileSize) {\r\n      const limitMb = maxFileSize / (1024 * 1024);\r\n      actions.showToast(`El archivo \"${file.name}\" excede el l├¡mite de ${limitMb} MB.${!isProUser ? 'Suscr├¡bete a Pro para subir en 4K.' : ''} `, 'error');\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // --- Helpers: Cropping ---\r\n  function onImageLoad(e: React.SyntheticEvent<HTMLImageElement>) {\r\n    const { width, height } = e.currentTarget;\r\n    const newCrop = centerCrop(\r\n      makeAspectCrop(\r\n        {\r\n          unit: '%',\r\n          width: 90,\r\n        },\r\n        1, // Aspect Ratio 1:1\r\n        width,\r\n        height,\r\n      ),\r\n      width,\r\n      height,\r\n    );\r\n    setCrop(newCrop);\r\n    setCompletedCrop(newCrop);\r\n  }\r\n\r\n  const getCroppedImg = (image: HTMLImageElement, crop: PixelCrop, fileName: string): Promise<File> => {\r\n    const canvas = document.createElement('canvas');\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    canvas.width = crop.width * scaleX;\r\n    canvas.height = crop.height * scaleY;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    if (!ctx) {\r\n      throw new Error('No 2d context');\r\n    }\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY\r\n    );\r\n\r\n    return new Promise((resolve, reject) => {\r\n      canvas.toBlob(blob => {\r\n        if (!blob) {\r\n          reject(new Error('Canvas is empty'));\r\n          return;\r\n        }\r\n        const file = new File([blob], fileName, { type: 'image/jpeg' });\r\n        resolve(file);\r\n      }, 'image/jpeg', 0.95);\r\n    });\r\n  };\r\n\r\n  const handleCropConfirm = async () => {\r\n    if (imgRef.current && completedCrop?.width && completedCrop?.height) {\r\n      try {\r\n        const croppedFile = await getCroppedImg(imgRef.current, completedCrop, 'thumbnail.jpg');\r\n        setCoverFile(croppedFile);\r\n        setCoverPreview(URL.createObjectURL(croppedFile));\r\n        setImageToCrop(null); // Cerrar modal\r\n      } catch (e) {\r\n        console.error(e);\r\n        actions.showToast('Error al recortar la imagen', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- Handlers: Cover Image ---\r\n  const handleCoverSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      if (!validateFile(file)) return;\r\n      // En lugar de guardar directamente, abrimos el cropper\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        const result = reader.result as string;\r\n        setImageToCrop(result);\r\n        setOriginalCoverImage(result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n    e.target.value = ''; // Reset para permitir re-seleccionar el mismo archivo\r\n  };\r\n\r\n  const handleDropCover = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const file = e.dataTransfer.files?.[0];\r\n    if (file && file.type.startsWith('image/')) {\r\n      if (!validateFile(file)) return;\r\n      // En lugar de guardar directamente, abrimos el cropper\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        const result = reader.result as string;\r\n        setImageToCrop(result);\r\n        setOriginalCoverImage(result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // --- Handlers: Gallery ---\r\n  const handleGallerySelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const rawFiles = Array.from(e.target.files) as File[];\r\n      const files = rawFiles.filter(validateFile); // Filtrar archivos que exceden el peso\r\n      await addGalleryFiles(files);\r\n      e.target.value = ''; // Reset input to allow selecting same files again\r\n    }\r\n  };\r\n\r\n  const handleDropGallery = async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files) {\r\n      const files = (Array.from(e.dataTransfer.files) as File[])\r\n        .filter(f => f.type.startsWith('image/'))\r\n        .filter(validateFile); // Filtrar archivos que exceden el peso\r\n      await addGalleryFiles(files);\r\n    }\r\n  };\r\n\r\n  const addGalleryFiles = async (files: File[]) => {\r\n    // Filter out duplicates based on name and size\r\n    const newFiles = files.filter(file =>\r\n      !galleryItems.some(existing =>\r\n        existing.file?.name === file.name && existing.file?.size === file.size\r\n      )\r\n    );\r\n\r\n    if (newFiles.length === 0) return;\r\n\r\n    const newItems = await Promise.all(newFiles.map(async (file) => {\r\n      const preview = await new Promise<string>((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve(reader.result as string);\r\n        reader.readAsDataURL(file);\r\n      });\r\n      return {\r\n        id: Math.random().toString(36).substr(2, 9), // Simple unique ID\r\n        file,\r\n        preview,\r\n        caption: '',\r\n        type: 'image' as const\r\n      };\r\n    }));\r\n\r\n    setGalleryItems(prev => [...prev, ...newItems]);\r\n  };\r\n\r\n  // --- Helpers: YouTube ---\r\n  const getYoutubeVideoId = (url: string) => {\r\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n    const match = url.match(regExp);\r\n    return (match && match[2].length === 11) ? match[2] : null;\r\n  };\r\n\r\n  const handleAddYoutube = () => {\r\n    const videoId = getYoutubeVideoId(youtubeLink);\r\n    if (!videoId) {\r\n      actions.showToast('Enlace de YouTube inv├ílido', 'error');\r\n      return;\r\n    }\r\n\r\n    const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;\r\n    // Use standard mq if maxres doesn't exist (can't check easily client side without try/catch fetch, assuming maxres for now or user can update?)\r\n    // Actually standard fallback is safest visually if we don't check. \r\n    // User won't see it if we use simple img tag.\r\n\r\n    const newItem: GalleryItem = {\r\n      id: Math.random().toString(36).substr(2, 9),\r\n      url: youtubeLink,\r\n      preview: thumbnailUrl,\r\n      caption: '',\r\n      type: 'youtube'\r\n    };\r\n\r\n    setGalleryItems(prev => [...prev, newItem]);\r\n    setYoutubeLink('');\r\n    setIsAddingYoutube(false);\r\n  };\r\n\r\n  // --- Helpers: Sketchfab ---\r\n  const getSketchfabModelId = (url: string): string | null => {\r\n    if (!url) return null;\r\n\r\n    // Pattern: Extract the ID from common Sketchfab URL formats\r\n    // Supports:\r\n    // - https://sketchfab.com/3d-models/model-name-{ID}\r\n    // - https://sketchfab.com/models/{ID}\r\n    // - https://sketchfab.com/models/{ID}/embed\r\n    // Note: .*- is greedy, so it captures everything up to the LAST hyphen before the ID\r\n    const pattern = /sketchfab\\.com\\/(?:3d-models\\/.*-|models\\/)([a-zA-Z0-9]+)/i;\r\n    const match = url.match(pattern);\r\n    if (match && match[1]) return match[1];\r\n\r\n    return null;\r\n  };\r\n\r\n  const handleAddSketchfab = () => {\r\n    const modelId = getSketchfabModelId(sketchfabLink);\r\n    if (!modelId) {\r\n      actions.showToast('Enlace de Sketchfab inv├ílido. Usa el formato: sketchfab.com/3d-models/nombre-{id}', 'error');\r\n      return;\r\n    }\r\n\r\n    const newItem: GalleryItem = {\r\n      id: Math.random().toString(36).substr(2, 9),\r\n      url: sketchfabLink,\r\n      preview: `https://media.sketchfab.com/models/${modelId}/thumbnails/7c9a634f7a1c41dbae28c7e1a591d42e/a2a63d3104434ad9b68f7abac59f9ba9.jpeg`, // Generic placeholder - actual thumbnail requires API\r\n      caption: '',\r\n      type: 'sketchfab'\r\n    };\r\n\r\n    setGalleryItems(prev => [...prev, newItem]);\r\n    setSketchfabLink('');\r\n    setIsAddingSketchfab(false);\r\n  };\r\n\r\n  const removeGalleryItem = (id: string) => {\r\n    setGalleryItems(prev => prev.filter(item => item.id !== id));\r\n  };\r\n\r\n  const moveGalleryItem = (index: number, direction: 'up' | 'down') => {\r\n    if ((direction === 'up' && index === 0) || (direction === 'down' && index === galleryItems.length - 1)) return;\r\n\r\n    setGalleryItems(prev => {\r\n      const newItems = [...prev];\r\n      const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n      [newItems[index], newItems[targetIndex]] = [newItems[targetIndex], newItems[index]];\r\n      return newItems;\r\n    });\r\n  };\r\n\r\n  const updateGalleryCaption = (id: string, caption: string) => {\r\n    setGalleryItems(prev => prev.map(item =>\r\n      item.id === id ? { ...item, caption } : item\r\n    ));\r\n  };\r\n\r\n  // --- Handlers: Inputs ---\r\n  const addSoftware = (soft: string) => {\r\n    const trimmed = soft.trim();\r\n    if (trimmed && !softwares.includes(trimmed)) {\r\n      setSoftwares([...softwares, trimmed]);\r\n    }\r\n    setSoftwareInput('');\r\n  };\r\n\r\n  const addTag = (tag: string) => {\r\n    const trimmed = tag.trim();\r\n    if (trimmed && !tags.includes(trimmed)) {\r\n      setTags([...tags, trimmed]);\r\n    }\r\n    setTagInput('');\r\n  };\r\n\r\n  const addCollaborator = (name: string) => {\r\n    const trimmed = name.trim();\r\n    if (trimmed && !collaborators.includes(trimmed)) {\r\n      setCollaborators([...collaborators, trimmed]);\r\n    }\r\n    setCollaboratorInput('');\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!title.trim()) return actions.showToast('El t├¡tulo es obligatorio', 'error');\r\n    if (!coverFile && !coverPreview) return actions.showToast('La portada es obligatoria', 'error'); // Allow optional no-cover if user really wants? No, better require it.\r\n    if (!category) return actions.showToast('Selecciona una categor├¡a', 'error');\r\n\r\n    try {\r\n      if (!state.user) throw new Error(\"No user authenticated\");\r\n\r\n      const projectData: any = {\r\n        title,\r\n        description,\r\n        category,\r\n        software: softwares,\r\n        tags,\r\n        artist: state.user.name,\r\n        authorId: state.user.id,\r\n        artistAvatar: state.user.avatar,\r\n        artistHeadline: state.user.role,\r\n        artistRole: state.user.role,\r\n        artistUsername: state.user.username,\r\n        location: state.user.location,\r\n        domain: state.contentMode, // Pass the current content mode as the domain\r\n        collaborators, // Added collaborators field\r\n        status: publishStatus, // Publication status\r\n        scheduledAt: publishStatus === 'scheduled' && scheduledDate ? scheduledDate : null\r\n      };\r\n\r\n      // Si estamos editando y no se sube una nueva portada, nos aseguramos de conservar la URL de la imagen existente.\r\n      if (editId && !coverFile && projectToEdit) {\r\n        projectData.image = projectToEdit.image;\r\n      }\r\n\r\n      // Separation of concerns:\r\n      // 1. Files to upload (only where type === 'image' and file is present)\r\n      // 2. Metadata map to reconstruct the order\r\n\r\n      const filesToUpload: File[] = [];\r\n      const galleryMetadata: any[] = [];\r\n\r\n      galleryItems.forEach(item => {\r\n        // Case 1: New Image File\r\n        if (item.type === 'image' && item.file) {\r\n          filesToUpload.push(item.file);\r\n          galleryMetadata.push({\r\n            type: 'image',\r\n            caption: item.caption,\r\n            fileIndex: filesToUpload.length - 1 // 0-based index in the 'filesToUpload' array\r\n          });\r\n        }\r\n        // Case 2: Existing Image (Editing) or YouTube Video\r\n        else if (item.url) {\r\n          galleryMetadata.push({\r\n            type: item.type,\r\n            caption: item.caption,\r\n            url: item.url\r\n          });\r\n        }\r\n      });\r\n\r\n      if (editId) {\r\n        // UPDATE MODE\r\n        await updateProject(\r\n          editId,\r\n          projectData,\r\n          {\r\n            cover: coverFile,\r\n            gallery: filesToUpload\r\n          },\r\n          {\r\n            maxSizeMB: maxFileSize / (1024 * 1024),\r\n            galleryMetadata\r\n          }\r\n        );\r\n        actions.showToast('Proyecto actualizado con ├®xito', 'success');\r\n      } else {\r\n        // CREATE MODE\r\n        const result = await createProject(\r\n          projectData,\r\n          {\r\n            cover: coverFile,\r\n            gallery: filesToUpload\r\n          },\r\n          {\r\n            maxSizeMB: maxFileSize / (1024 * 1024),\r\n            galleryMetadata // We pass this new config to the service\r\n          }\r\n        );\r\n        actions.showToast('Proyecto publicado con ├®xito', 'success');\r\n        // Navigate to the new project using its slug\r\n        navigate(`/portfolio/${result.slug}`);\r\n        return;\r\n      }\r\n\r\n      onBack();\r\n    } catch (error: any) {\r\n      console.error(error);\r\n      const errorMessage = error instanceof Error ? error.message : 'Error al publicar el proyecto';\r\n      actions.showToast(errorMessage, 'error');\r\n    }\r\n  };\r\n\r\n  // Handler for saving as draft\r\n  const handleSaveDraft = () => {\r\n    setPublishStatus('draft');\r\n    // Use setTimeout to ensure state is updated before submit\r\n    setTimeout(() => handleSubmit(), 0);\r\n  };\r\n\r\n  // Handler for scheduling publication\r\n  const handleSchedule = () => {\r\n    if (!scheduledDate) {\r\n      actions.showToast('Selecciona una fecha para programar', 'error');\r\n      return;\r\n    }\r\n    setPublishStatus('scheduled');\r\n    setTimeout(() => handleSubmit(), 0);\r\n  };\r\n\r\n  const handleThumbnailClick = () => {\r\n    if (originalCoverImage) {\r\n      setImageToCrop(originalCoverImage);\r\n    } else {\r\n      fileInputRef.current?.click();\r\n    }\r\n  };\r\n\r\n  if (isLoadingEdit) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0d0d0f] flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 text-amber-500 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0d0d0f] text-slate-300 flex flex-col font-sans selection:bg-indigo-500/30\">\r\n\r\n      {/* Header - Fixed & Minimal via Glassmorphism */}\r\n      <header className=\"sticky top-0 z-50 bg-[#0d0d0f]/80 backdrop-blur-xl border-b border-white/[0.06] h-16 flex items-center justify-between px-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <button onClick={onBack} className=\"text-slate-400 hover:text-white transition-colors flex items-center gap-2 group\">\r\n            <ArrowLeft className=\"h-5 w-5 group-hover:-translate-x-1 transition-transform\" />\r\n            <span className=\"font-medium text-sm hidden md:inline\">Cancelar</span>\r\n          </button>\r\n          <div className=\"h-6 w-px bg-white/[0.06] hidden md:block\"></div>\r\n          <span className=\"font-bold text-white tracking-wide\">{editId ? 'Editar Proyecto' : 'Publicar en Portafolio'}</span>\r\n        </div>\r\n\r\n        {/* Header Actions removed in favor of Sidebar Panel */}\r\n      </header>\r\n\r\n      <main className=\"flex-1 max-w-[1600px] w-full mx-auto p-6 md:p-8 pb-28 lg:pb-8 grid grid-cols-1 lg:grid-cols-[1fr_350px] gap-10\">\r\n\r\n        {/* Email Verification Banner */}\r\n        <div className=\"lg:col-span-2\">\r\n          <EmailVerificationBanner />\r\n        </div>\r\n\r\n        {/* LEFT COLUMN: Main Content */}\r\n        <div className=\"flex flex-col gap-8 min-w-0 animate-fade-in\">\r\n\r\n          {/* Title & Description Section (Moved to Main) */}\r\n          <div className=\"space-y-6 bg-[#18181b] border border-white/[0.06] rounded-2xl p-8 shadow-xl shadow-black/20\">\r\n            <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2 mb-2\">\r\n              <Type className=\"h-4 w-4\" /> Informaci├│n del Proyecto\r\n            </h3>\r\n            <input\r\n              type=\"text\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              placeholder=\"T├¡tulo del Proyecto\"\r\n              className=\"w-full bg-transparent text-4xl md:text-5xl font-bold text-white border-none px-0 py-2 focus:ring-0 placeholder-slate-700 transition-colors\"\r\n            />\r\n            <textarea\r\n              ref={descriptionRef}\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              onInput={(e) => {\r\n                const target = e.target as HTMLTextAreaElement;\r\n                target.style.height = 'auto';\r\n                target.style.height = `${target.scrollHeight}px`;\r\n              }}\r\n              placeholder=\"Describe tu proceso, herramientas y objetivo...\"\r\n              rows={3}\r\n              className=\"w-full bg-transparent text-lg text-slate-300 border-none px-0 py-2 focus:ring-0 placeholder-slate-600 resize-none leading-relaxed overflow-hidden\"\r\n              style={{ minHeight: '80px' }}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"h-px bg-white/[0.06] w-full\" />\r\n\r\n          {/* Gallery Section - Vertical Stack */}\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between px-1\">\r\n              <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Layers className=\"h-4 w-4\" /> Contenido del Proyecto\r\n              </h3>\r\n              <span className=\"text-xs text-slate-600 font-mono\">{galleryItems.length} items</span>\r\n            </div>\r\n\r\n            <div className=\"space-y-8\">\r\n              {/* Existing Items - Vertical Stack */}\r\n              {galleryItems.map((item, index) => (\r\n                <GalleryItemCard\r\n                  key={item.id}\r\n                  item={item}\r\n                  index={index}\r\n                  totalItems={galleryItems.length}\r\n                  onRemove={removeGalleryItem}\r\n                  onMove={moveGalleryItem}\r\n                  onUpdateCaption={updateGalleryCaption}\r\n                />\r\n              ))}\r\n\r\n              {/* Media Uploader Component */}\r\n              <MediaUploader\r\n                mode={isAddingYoutube ? 'youtube' : isAddingSketchfab ? 'sketchfab' : 'none'}\r\n                youtubeLink={youtubeLink}\r\n                sketchfabLink={sketchfabLink}\r\n                onYoutubeLinkChange={setYoutubeLink}\r\n                onSketchfabLinkChange={setSketchfabLink}\r\n                onUploadClick={() => galleryInputRef.current?.click()}\r\n                onYoutubeClick={() => setIsAddingYoutube(true)}\r\n                onSketchfabClick={() => setIsAddingSketchfab(true)}\r\n                onAddYoutube={handleAddYoutube}\r\n                onAddSketchfab={handleAddSketchfab}\r\n                onCancel={() => { setIsAddingYoutube(false); setIsAddingSketchfab(false); }}\r\n              />\r\n\r\n              <input ref={galleryInputRef} type=\"file\" multiple accept=\"image/*\" onChange={handleGallerySelect} className=\"hidden\" />\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n        </div>\r\n\r\n        {/* RIGHT COLUMN: Settings Sidebar */}\r\n        <div className=\"space-y-6\">\r\n\r\n          {/* Publishing Options (New) */}\r\n          <div className=\"bg-[#18181b] rounded-2xl border border-white/[0.06] shadow-xl shadow-black/20 overflow-hidden\">\r\n            <div className=\"bg-white/[0.02] border-b border-white/[0.06] px-6 py-4\">\r\n              <h3 className=\"text-sm font-bold text-slate-300\">Opciones de Publicaci├│n</h3>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Estado</label>\r\n                <div className=\"relative\">\r\n                  <button\r\n                    onClick={() => setIsStatusOpen(!isStatusOpen)}\r\n                    className={`w-full text-left px-4 py-2.5 bg-[#0d0d0f] border rounded-xl text-sm transition-all flex items-center justify-between ${isStatusOpen\r\n                      ? 'border-indigo-500/50 ring-1 ring-indigo-500/20 text-white'\r\n                      : 'border-white/[0.06] text-slate-300 hover:border-white/20 hover:text-white'\r\n                      }`}\r\n                  >\r\n                    <span>{publishStatus === 'draft' ? 'No publicado' : 'Publicado'}</span>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className={`w-2 h-2 rounded-full ${publishStatus === 'published' ? 'bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)]' : 'bg-slate-600'}`} />\r\n                      <ChevronDown className={`h-4 w-4 text-slate-500 transition-transform ${isStatusOpen ? 'rotate-180' : ''}`} />\r\n                    </div>\r\n                  </button>\r\n\r\n                  {/* Custom Dropdown Menu */}\r\n                  {isStatusOpen && (\r\n                    <>\r\n                      <div className=\"fixed inset-0 z-10\" onClick={() => setIsStatusOpen(false)} />\r\n                      <div className=\"absolute top-full left-0 right-0 mt-1 bg-[#18181b] border border-white/[0.06] rounded-xl shadow-2xl overflow-hidden z-20 animate-fade-in\">\r\n                        <button\r\n                          onClick={() => { setPublishStatus('draft'); setIsStatusOpen(false); }}\r\n                          className=\"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-white/[0.05] hover:text-white transition-colors flex items-center justify-between group\"\r\n                        >\r\n                          <span>No publicado</span>\r\n                          {publishStatus === 'draft' && <span className=\"w-1.5 h-1.5 rounded-full bg-slate-500\" />}\r\n                        </button>\r\n                        <button\r\n                          onClick={() => { setPublishStatus('published'); setIsStatusOpen(false); }}\r\n                          className=\"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-white/[0.05] hover:text-white transition-colors flex items-center justify-between group\"\r\n                        >\r\n                          <span>Publicado</span>\r\n                          {publishStatus === 'published' && <span className=\"w-1.5 h-1.5 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.4)]\" />}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n\r\n                {/* Publish Button (Primary) */}\r\n                <button\r\n                  onClick={handleSubmit}\r\n                  disabled={isSubmitting}\r\n                  className=\"w-full py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden\"\r\n                >\r\n                  {isSubmitting && (\r\n                    <div\r\n                      className=\"absolute inset-0 bg-green-700 transition-all duration-300 ease-out\"\r\n                      style={{ width: `${progress}%` }}\r\n                    />\r\n                  )}\r\n                  <div className=\"relative flex items-center gap-2 z-10\">\r\n                    {isSubmitting ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Globe className=\"h-4 w-4\" />}\r\n                    <span>{isSubmitting ? `Subiendo ${progress}%` : (editId ? 'Guardar Cambios' : 'Publicar')}</span>\r\n                  </div>\r\n                </button>\r\n\r\n                {/* Save Draft Button (Secondary) */}\r\n                <button\r\n                  onClick={handleSaveDraft}\r\n                  disabled={isSubmitting}\r\n                  className=\"w-full py-3 bg-[#3B82F6]/10 hover:bg-[#3B82F6]/20 border border-[#3B82F6]/30 text-[#60A5FA] rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                >\r\n                  <Save className=\"h-4 w-4\" />\r\n                  Guardar Borrador\r\n                </button>\r\n\r\n                {/* Schedule Section */}\r\n                <div className=\"space-y-2\">\r\n                  {isProUser ? (\r\n                    <>\r\n                      <input\r\n                        type=\"datetime-local\"\r\n                        value={scheduledDate}\r\n                        onChange={(e) => setScheduledDate(e.target.value)}\r\n                        min={new Date().toISOString().slice(0, 16)}\r\n                        className=\"w-full px-4 py-2 bg-[#0d0d0f] border border-white/10 rounded-lg text-sm text-white focus:outline-none focus:border-amber-500 transition-colors\"\r\n                      />\r\n                      <button\r\n                        onClick={handleSchedule}\r\n                        disabled={isSubmitting || !scheduledDate}\r\n                        className=\"w-full py-3 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 text-amber-400 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        <Calendar className=\"h-4 w-4\" />\r\n                        Programar Publicaci├│n\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <div className=\"relative group\">\r\n                      <button\r\n                        disabled\r\n                        className=\"w-full py-3 bg-transparent border border-white/[0.06] text-slate-500 rounded-xl font-bold text-sm flex items-center justify-center gap-2 cursor-not-allowed opacity-60\"\r\n                      >\r\n                        <Calendar className=\"h-4 w-4\" />\r\n                        Programar\r\n                      </button>\r\n                      <span className=\"absolute top-1/2 -translate-y-1/2 right-4 bg-[#3B82F6] text-white text-[10px] font-bold px-2 py-0.5 rounded\">\r\n                        PRO\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Thumbnail / Cover Setting (Moved to Sidebar) */}\r\n          <div className=\"bg-[#18181b] p-4 rounded-xl border border-white/[0.06] shadow-xl shadow-black/20\">\r\n            <span className=\"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-4 flex items-center justify-between\">\r\n              <span>Miniatura del Feed</span>\r\n              {coverPreview && (\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setCoverFile(null);\r\n                    setCoverPreview(null);\r\n                    setOriginalCoverImage(null);\r\n                  }}\r\n                  className=\"text-slate-500 hover:text-red-400 text-xs font-bold uppercase transition-colors\"\r\n                >\r\n                  Remover\r\n                </button>\r\n              )}\r\n            </span>\r\n\r\n            <div\r\n              onClick={handleThumbnailClick}\r\n              onDragOver={(e) => e.preventDefault()}\r\n              onDrop={handleDropCover}\r\n              className=\"aspect-square w-full rounded-lg border-2 border-dashed border-white/[0.1] hover:border-white/20 hover:bg-white/[0.02] cursor-pointer relative overflow-hidden group transition-all\"\r\n            >\r\n              {coverPreview ? (\r\n                <>\r\n                  <img src={coverPreview} alt=\"Thumbnail\" className=\"w-full h-full object-cover\" />\r\n                  <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                    <span className=\"text-xs font-bold text-white bg-black/50 px-2 py-1 rounded\">Modificar Recorte</span>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className=\"flex flex-col items-center justify-center h-full text-slate-500 gap-2\">\r\n                  <ImageIcon className=\"h-6 w-6\" />\r\n                  <span className=\"text-xs font-medium\">Subir Cover</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"mt-3 text-[10px] text-slate-500 leading-relaxed space-y-1\">\r\n              <p>Esta imagen se usar├í **solo** como miniatura en el feed. No aparecer├í en el detalle del proyecto.</p>\r\n              <p className=\"text-slate-400 font-medium\">ÔÇó Recomendado: 1080x1080px. Es el balance ideal entre calidad y peso para el feed.</p>\r\n            </div>\r\n            <input ref={fileInputRef} type=\"file\" accept=\"image/*\" onChange={handleCoverSelect} className=\"hidden\" />\r\n          </div>\r\n\r\n          {/* Classification */}\r\n          <div className=\"bg-[#18181b] p-6 rounded-2xl border border-white/[0.06] space-y-6 shadow-xl shadow-black/20\">\r\n\r\n            {/* Category */}\r\n            <div className=\"space-y-3\">\r\n              <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Categor├¡a</label>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {PORTFOLIO_CATEGORIES.map(cat => (\r\n                  <button\r\n                    key={cat}\r\n                    onClick={() => setCategory(cat)}\r\n                    className={`px-3 py-2.5 text-xs font-bold border rounded-lg transition-all text-left ${category === cat\r\n                      ? 'bg-amber-500 text-black border-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.4)]'\r\n                      : 'bg-[#0d0d0f] border-white/[0.06] text-slate-400 hover:border-white/20 hover:text-white'\r\n                      }`}\r\n                  >\r\n                    {cat}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <hr className=\"border-white/[0.06]\" />\r\n\r\n            {/* Software */}\r\n            <div className=\"space-y-3\">\r\n              <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Monitor className=\"h-3 w-3\" /> Software Usado\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {softwares.map(soft => (\r\n                  <span key={soft} className=\"inline-flex items-center gap-1.5 px-3 py-1 bg-white/[0.05] border border-white/[0.06] text-slate-200 text-xs font-medium rounded-full hover:bg-white/[0.1] transition-colors\">\r\n                    {soft}\r\n                    <button onClick={() => setSoftwares(s => s.filter(i => i !== soft))} className=\"text-slate-500 hover:text-red-400\">\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <div className=\"relative group\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={softwareInput}\r\n                  onChange={(e) => setSoftwareInput(e.target.value)}\r\n                  onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), addSoftware(softwareInput))}\r\n                  placeholder=\"+ A├▒adir Software\"\r\n                  className=\"w-full bg-[#0d0d0f] border border-white/[0.06] text-sm text-white rounded-xl px-4 py-2.5 focus:border-indigo-500/50 focus:outline-none focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder-slate-600 peer\"\r\n                />\r\n\r\n                {/* Custom Autocomplete Dropdown */}\r\n                <div className=\"absolute top-full left-0 right-0 mt-1 bg-[#18181b] border border-white/[0.06] rounded-xl shadow-2xl overflow-hidden z-20 hidden peer-focus:block hover:block animate-fade-in max-h-60 overflow-y-auto custom-scrollbar\">\r\n                  {COMMON_SOFTWARE.filter(s => s.toLowerCase().includes(softwareInput.toLowerCase()) && !softwares.includes(s)).map(soft => (\r\n                    <button\r\n                      key={soft}\r\n                      onMouseDown={(e) => { e.preventDefault(); addSoftware(soft); }}\r\n                      className=\"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-white/[0.05] hover:text-white transition-colors flex items-center gap-2\"\r\n                    >\r\n                      <img\r\n                        src={`https://cdn.worldvectorlogo.com/logos/${soft.toLowerCase().replace(/\\s+/g, '-')}.svg`}\r\n                        onError={(e) => (e.currentTarget.style.display = 'none')}\r\n                        className=\"w-4 h-4 object-contain opacity-70\"\r\n                        alt=\"\"\r\n                      />\r\n                      <span>{soft}</span>\r\n                    </button>\r\n                  ))}\r\n\r\n                  {softwareInput && !COMMON_SOFTWARE.some(s => s.toLowerCase() === softwareInput.toLowerCase()) && (\r\n                    <button\r\n                      onMouseDown={(e) => { e.preventDefault(); addSoftware(softwareInput); }}\r\n                      className=\"w-full text-left px-4 py-3 text-sm text-indigo-400 hover:bg-indigo-500/10 transition-colors border-t border-white/[0.06]\"\r\n                    >\r\n                      <span className=\"font-bold\">+ A├▒adir \"{softwareInput}\"</span>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tags */}\r\n            <div className=\"space-y-3\">\r\n              <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Etiquetas</label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {tags.map(tag => (\r\n                  <span key={tag} className=\"inline-flex items-center gap-1.5 px-3 py-1 bg-white/[0.05] border border-white/[0.06] text-slate-300 text-xs font-medium rounded-full hover:bg-white/[0.1] transition-colors\">\r\n                    #{tag}\r\n                    <button onClick={() => setTags(t => t.filter(i => i !== tag))} className=\"text-slate-500 hover:text-red-400\">\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={tagInput}\r\n                onChange={(e) => setTagInput(e.target.value)}\r\n                onKeyDown={(e) => (e.key === 'Enter' || e.key === ',') && (e.preventDefault(), addTag(tagInput))}\r\n                placeholder=\"+ A├▒adir Etiquetas\"\r\n                className=\"w-full bg-[#0d0d0f] border border-white/[0.06] text-sm text-white rounded-xl px-4 py-2.5 focus:border-indigo-500/50 focus:outline-none focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder-slate-600\"\r\n              />\r\n            </div>\r\n\r\n            {/* Collaborators */}\r\n            <div className=\"space-y-3\">\r\n              <label className=\"text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2\">\r\n                <Users className=\"h-3 w-3\" /> Colaboradores\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {collaborators.map(person => (\r\n                  <span key={person} className=\"inline-flex items-center gap-1.5 px-3 py-1 bg-white/[0.05] border border-white/[0.06] text-slate-300 text-xs font-medium rounded-full hover:bg-white/[0.1] transition-colors\">\r\n                    @{person}\r\n                    <button onClick={() => setCollaborators(c => c.filter(i => i !== person))} className=\"text-slate-500 hover:text-red-400\">\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={collaboratorInput}\r\n                onChange={(e) => setCollaboratorInput(e.target.value)}\r\n                onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), addCollaborator(collaboratorInput))}\r\n                placeholder=\"+ Etiquetar perfil\"\r\n                className=\"w-full bg-[#0d0d0f] border border-white/[0.06] text-sm text-white rounded-xl px-4 py-2.5 focus:border-indigo-500/50 focus:outline-none focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder-slate-600\"\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </main>\r\n\r\n      {/* Crop Modal */}\r\n      {imageToCrop && (\r\n        <div className=\"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in\">\r\n          <div className=\"bg-[#18181b] border border-white/10 rounded-2xl p-6 max-w-2xl w-full flex flex-col gap-6 shadow-2xl\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-bold text-white\">Recortar Miniatura (1:1)</h3>\r\n              <button onClick={() => setImageToCrop(null)} className=\"text-slate-400 hover:text-white\">\r\n                <X className=\"h-5 w-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"relative flex-1 min-h-[300px] bg-black/50 rounded-xl overflow-hidden flex items-center justify-center\">\r\n              <ReactCrop\r\n                crop={crop}\r\n                onChange={(_, percentCrop) => setCrop(percentCrop)}\r\n                onComplete={(c) => setCompletedCrop(c)}\r\n                aspect={1}\r\n                minWidth={50}\r\n                keepSelection\r\n                className=\"max-h-[60vh]\"\r\n              >\r\n                <img\r\n                  ref={imgRef}\r\n                  src={imageToCrop}\r\n                  alt=\"Crop me\"\r\n                  onLoad={onImageLoad}\r\n                  crossOrigin=\"anonymous\"\r\n                  className=\"max-w-full max-h-[60vh] object-contain\"\r\n                />\r\n              </ReactCrop>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-3\">\r\n              <button onClick={() => setImageToCrop(null)} className=\"px-4 py-2 text-slate-300 hover:text-white font-medium text-sm\">Cancelar</button>\r\n              <button onClick={handleCropConfirm} className=\"px-6 py-2 bg-amber-500 hover:bg-amber-600 text-black font-bold rounded-lg text-sm transition-colors\">\r\n                Confirmar Recorte\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Mobile Floating Action Bar */}\r\n      <div className=\"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-[#0d0d0f]/95 backdrop-blur-xl border-t border-white/10 p-4 flex gap-3 animate-slide-up\">\r\n        <button\r\n          onClick={() => actions.showToast('Guardado como borrador', 'success')}\r\n          disabled={isSubmitting}\r\n          className=\"flex-1 py-3 bg-[#18181b] border border-white/10 text-slate-300 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2\"\r\n        >\r\n          <Save className=\"h-4 w-4\" />\r\n          Borrador\r\n        </button>\r\n        <button\r\n          onClick={handleSubmit}\r\n          disabled={isSubmitting || !title.trim() || !coverPreview}\r\n          className=\"flex-[2] relative py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {isSubmitting && (\r\n            <div\r\n              className=\"absolute inset-0 bg-green-700 transition-all duration-300\"\r\n              style={{ width: `${progress}%` }}\r\n            />\r\n          )}\r\n          <div className=\"relative flex items-center gap-2 z-10\">\r\n            {isSubmitting ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Globe className=\"h-4 w-4\" />}\r\n            <span>{isSubmitting ? `${progress}%` : (editId ? 'Guardar' : 'Publicar')}</span>\r\n          </div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\PortfolioPostView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Briefcase' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserPlus' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":62,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":84},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":118,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":122},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'timeAgo' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":35,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAddingComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2901,2904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2901,2904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'replyingTo' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":58,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAddingReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":60,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3669,3672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3669,3672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3712,3715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3712,3715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3961,3964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3961,3964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAddComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":205,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":205,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8152,8155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8152,8155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDeleteComment' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":215,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8455,8458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8455,8458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":239,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":239,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleStartReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":247,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":247,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleCancelReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":256,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":256,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSubmitReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":261,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":261,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10162,10165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10162,10165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getReplies' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":284,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rootComments' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":289,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":289,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, Heart, Share2, MessageSquare, Briefcase, UserPlus, CheckCircle2, Maximize2, X, Bookmark, Trash2, Edit } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { useDeleteProject, useProject, useProjectComments, useAddProjectComment, useDeleteProjectComment } from '../../hooks/useFirebase';\r\nimport { useUserProfileData } from '../../hooks/useUserProfileData';\r\nimport { ConfirmationModal } from '../../components/modals/ConfirmationModal';\r\nimport { ReportModal } from '../../components/modals/ReportModal';\r\nimport { Flag } from 'lucide-react';\r\nimport { projectsService } from '../../services/modules/projects';\r\nimport { usersService } from '../../services/modules/users';\r\nimport { timeAgo, getYoutubeVideoId, getSketchfabModelId, renderDescriptionWithLinks } from '../../utils/helpers';\r\nimport { shouldCountView } from '../../utils/viewTracking';\r\nimport { PortfolioItem } from '../../types';\r\nimport { PortfolioSidebar } from './components';\r\nimport { CommentsSection } from '../../components/CommentsSection';\r\nimport { SEOHead } from '../../components/SEOHead';\r\n\r\n/** Helper para obtener el ID del autor */\r\nconst getAuthorId = (item: PortfolioItem | null | undefined): string | undefined =>\r\n  item?.authorId;\r\n\r\n\r\ninterface PortfolioPostViewProps {\r\n  itemId?: string;\r\n  onBack: () => void;\r\n  onAuthorClick?: (authorName: string) => void;\r\n  onSave?: (id: string, image: string, type?: string) => void;\r\n  onShare?: () => void;\r\n}\r\n\r\nexport const PortfolioPostView: React.FC<PortfolioPostViewProps> = ({ itemId, onBack, onAuthorClick, onSave, onShare }) => {\r\n  const { state, actions } = useAppStore();\r\n  const navigate = useNavigate();\r\n\r\n  const { id: paramId } = useParams<{ id: string }>();\r\n  const id = itemId || paramId;\r\n\r\n  const { deleteProject, loading: isDeleting } = useDeleteProject();\r\n  const { project: fetchedProject, loading: isFetching } = useProject(id);\r\n  const { comments, loading: isLoadingComments } = useProjectComments(id);\r\n  const { add: addComment, loading: isAddingComment } = useAddProjectComment();\r\n  const { remove: deleteComment } = useDeleteProjectComment();\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isReportModalOpen, setIsReportModalOpen] = useState(false);\r\n  const [newComment, setNewComment] = useState('');\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [likeCount, setLikeCount] = useState(0);\r\n  const [isLikeLoading, setIsLikeLoading] = useState(false);\r\n  const [isFollowing, setIsFollowing] = useState(false);\r\n  const [isFollowLoading, setIsFollowLoading] = useState(false);\r\n  const [lightboxImage, setLightboxImage] = useState<string | null>(null);\r\n  const [relatedProjects, setRelatedProjects] = useState<any[]>([]);\r\n\r\n  // Comment interaction state\r\n  const [commentLikes, setCommentLikes] = useState<Record<string, boolean>>({});\r\n  const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n  const [replyText, setReplyText] = useState('');\r\n  const [isAddingReply, setIsAddingReply] = useState(false);\r\n\r\n  // La ├║nica fuente de la verdad es el proyecto tra├¡do desde Firebase.\r\n  const item = fetchedProject;\r\n\r\n  // Memoized author ID with backward compatibility\r\n  const itemAuthorId = useMemo(() => getAuthorId(item), [item]);\r\n\r\n  // Use robust user profile data fetching\r\n  const { displayUser: authorProfile } = useUserProfileData(\r\n    item ? {\r\n      name: item.artist,\r\n      id: itemAuthorId,\r\n      avatar: item.artistAvatar,\r\n      role: (item as any).artistRole,\r\n      location: (item as any).location\r\n    } : null,\r\n    undefined, // authorName\r\n    { preventRedirect: true }\r\n  );\r\n\r\n  // --- Efecto 1: Contabilizar Vistas (Solo una vez cada 24h por proyecto) ---\r\n  useEffect(() => {\r\n    if (item && item.id) {\r\n      if (!(item as any).isLocal && shouldCountView('project', item.id)) {\r\n        projectsService.incrementProjectView(item.id);\r\n      }\r\n    }\r\n  }, [item?.id]); // Dependencia solo del ID del proyecto, no del usuario\r\n\r\n  // --- Efecto 2: Datos dependientes del Usuario y Relacionados ---\r\n  useEffect(() => {\r\n    if (item && item.id) {\r\n      // Verificar Like (Solo si hay usuario)\r\n      if (state.user) {\r\n        projectsService.getProjectLikeStatus(item.id, state.user.id).then(setIsLiked);\r\n\r\n        // Verificar Follow status\r\n        if (itemAuthorId) {\r\n          usersService.getSubscriptionStatus(itemAuthorId, state.user.id).then(setIsFollowing);\r\n        }\r\n      }\r\n\r\n      // Inicializar contador\r\n      setLikeCount(Number(item.likes || 0));\r\n\r\n      // Cargar Proyectos Relacionados\r\n      if (itemAuthorId) {\r\n        // Optimized: Fetch only 5 projects (Current + 4 Related)\r\n        projectsService.getUserProjects(itemAuthorId, 5).then(projects => {\r\n          // Filtrar el proyecto actual y tomar los primeros 4\r\n          setRelatedProjects(projects.filter(p => p.id !== item.id).slice(0, 4));\r\n        });\r\n      }\r\n    }\r\n  }, [item?.id, state.user?.id]);\r\n\r\n  // --- Efecto 3: Cargar estado de likes de comentarios ---\r\n  useEffect(() => {\r\n    if (item?.id && state.user?.id && comments.length > 0) {\r\n      const commentIds = comments.map(c => c.id);\r\n      projectsService.getCommentsLikeStatuses(item.id, commentIds, state.user.id)\r\n        .then(statuses => setCommentLikes(statuses));\r\n    }\r\n  }, [item?.id, state.user?.id, comments]);\r\n\r\n  if (isFetching) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0d0d0f] flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleFollowToggle = async () => {\r\n    if (!state.user) {\r\n      actions.showToast('Inicia sesi├│n para seguir a creadores', 'info');\r\n      return;\r\n    }\r\n\r\n    if (!itemAuthorId) return;\r\n\r\n    // Prevent rapid clicks\r\n    if (isFollowLoading) return;\r\n\r\n    setIsFollowLoading(true);\r\n\r\n    // Optimistic UI\r\n    const prevFollowing = isFollowing;\r\n    setIsFollowing(!prevFollowing);\r\n\r\n    try {\r\n      if (prevFollowing) {\r\n        await usersService.unsubscribeFromUser(itemAuthorId, state.user.id);\r\n      } else {\r\n        await usersService.subscribeToUser(itemAuthorId, state.user.id);\r\n      }\r\n      // Update global subscription state to reflect changes in sidebar/other views\r\n      actions.triggerSubscriptionUpdate();\r\n    } catch (error) {\r\n      console.error(\"Error toggling follow:\", error);\r\n      // Rollback\r\n      setIsFollowing(prevFollowing);\r\n      actions.showToast('Error al actualizar seguimiento', 'error');\r\n    } finally {\r\n      setIsFollowLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleLike = async () => {\r\n    if (!state.user) {\r\n      actions.showToast('Inicia sesi├│n para dar like', 'info');\r\n      return;\r\n    }\r\n\r\n    // Prevent rapid clicks - if already processing, ignore\r\n    if (isLikeLoading) return;\r\n\r\n    setIsLikeLoading(true);\r\n\r\n    // Store previous state for rollback\r\n    const prevLiked = isLiked;\r\n    const prevCount = likeCount;\r\n\r\n    // Optimistic UI: Actualizar visualmente antes de la petici├│n\r\n    setIsLiked(!prevLiked);\r\n    setLikeCount(prevLiked ? prevCount - 1 : prevCount + 1);\r\n\r\n    try {\r\n      const newStatus = await projectsService.toggleProjectLike(item.id, state.user.id);\r\n      // Sync with server response\r\n      setIsLiked(newStatus);\r\n      // Adjust count based on actual server status\r\n      setLikeCount(newStatus ? prevCount + 1 : prevCount - 1);\r\n    } catch (error) {\r\n      console.error(\"Error toggling like:\", error);\r\n      // Rollback to previous state\r\n      setIsLiked(prevLiked);\r\n      setLikeCount(prevCount);\r\n      actions.showToast('Error al dar like', 'error');\r\n    } finally {\r\n      setIsLikeLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim() || !item?.id) return;\r\n    try {\r\n      await addComment(item.id, newComment.trim());\r\n      setNewComment(''); // Clear input on success\r\n    } catch (error: any) {\r\n      actions.showToast(error.message, 'error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteComment = async (commentId: string) => {\r\n    if (!item?.id) return;\r\n    try {\r\n      await deleteComment(item.id, commentId);\r\n      actions.showToast('Comentario eliminado', 'success');\r\n    } catch (error: any) {\r\n      actions.showToast(error.message, 'error');\r\n    }\r\n  };\r\n\r\n  // --- Comment Like Handler ---\r\n  const handleCommentLike = async (commentId: string) => {\r\n    if (!state.user) {\r\n      actions.showToast('Inicia sesi├│n para dar like', 'info');\r\n      return;\r\n    }\r\n    if (!item?.id) return;\r\n\r\n    // Optimistic UI update\r\n    const wasLiked = commentLikes[commentId] || false;\r\n    setCommentLikes(prev => ({ ...prev, [commentId]: !wasLiked }));\r\n\r\n    try {\r\n      await projectsService.toggleCommentLike(item.id, commentId, state.user.id);\r\n    } catch (error) {\r\n      // Rollback on error\r\n      setCommentLikes(prev => ({ ...prev, [commentId]: wasLiked }));\r\n      actions.showToast('Error al dar like', 'error');\r\n    }\r\n  };\r\n\r\n  // --- Reply Handlers ---\r\n  const handleStartReply = (commentId: string) => {\r\n    if (!state.user) {\r\n      actions.showToast('Inicia sesi├│n para responder', 'info');\r\n      return;\r\n    }\r\n    setReplyingTo(commentId);\r\n    setReplyText('');\r\n  };\r\n\r\n  const handleCancelReply = () => {\r\n    setReplyingTo(null);\r\n    setReplyText('');\r\n  };\r\n\r\n  const handleSubmitReply = async (parentCommentId: string) => {\r\n    if (!replyText.trim() || !item?.id || !state.user) return;\r\n\r\n    setIsAddingReply(true);\r\n    try {\r\n      await projectsService.addCommentReply(item.id, parentCommentId, {\r\n        authorId: state.user.id,\r\n        authorName: state.user.name || 'Usuario',\r\n        authorUsername: state.user.username || '',\r\n        authorAvatar: state.user.avatar || '',\r\n        text: replyText.trim()\r\n      });\r\n      setReplyingTo(null);\r\n      setReplyText('');\r\n      actions.showToast('Respuesta publicada', 'success');\r\n    } catch (error: any) {\r\n      actions.showToast(error.message || 'Error al publicar respuesta', 'error');\r\n    } finally {\r\n      setIsAddingReply(false);\r\n    }\r\n  };\r\n\r\n  // Helper: Get replies for a comment\r\n  const getReplies = (parentId: string) => {\r\n    return comments.filter(c => c.parentId === parentId);\r\n  };\r\n\r\n  // Helper: Get root comments (no parentId)\r\n  const rootComments = comments.filter(c => !c.parentId);\r\n\r\n  if (!item) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0d0d0f] flex flex-col items-center justify-center p-8 text-center\">\r\n        <h2 className=\"text-2xl font-bold text-white mb-4\">Proyecto no encontrado</h2>\r\n        <p className=\"text-slate-400 mb-8\">El proyecto que buscas no existe o ha sido eliminado.</p>\r\n        <button onClick={onBack} className=\"px-6 py-2 bg-amber-500 text-white font-bold rounded-xl hover:bg-amber-600 transition-colors\">\r\n          Volver\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleDeleteClick = () => {\r\n    setIsDeleteModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmDelete = async () => {\r\n    if (!item) return;\r\n    try {\r\n      await deleteProject(item.id);\r\n      actions.showToast('Proyecto eliminado correctamente', 'success');\r\n      setIsDeleteModalOpen(false);\r\n      onBack();\r\n    } catch (error) {\r\n      console.error(\"Error deleting project:\", error);\r\n      actions.showToast('Error al eliminar el proyecto', 'error');\r\n      setIsDeleteModalOpen(false);\r\n    }\r\n  };\r\n\r\n  // Usar solo los proyectos relacionados que vienen del servicio.\r\n  const displayRelated = relatedProjects;\r\n\r\n  // Construye la galer├¡a, dando prioridad a la nueva estructura `gallery` pero con fallback a `images` para datos antiguos.\r\n  const galleryContent = (item.gallery && item.gallery.length > 0)\r\n    ? item.gallery\r\n    : (item.images || []).map(url => ({ url, caption: '', type: 'image' as const }));\r\n\r\n  const heroContent = galleryContent.length > 0 ? galleryContent[0] : null;\r\n  const additionalContent = galleryContent.slice(1);\r\n  // Colors for software tags\r\n  const getSoftwareColor = (name: string) => {\r\n    const map: Record<string, string> = {\r\n      'Blender': 'text-orange-500 bg-orange-500/10 border-orange-500/20',\r\n      'Substance Painter': 'text-green-500 bg-green-500/10 border-green-500/20',\r\n      'Photoshop': 'text-blue-500 bg-blue-500/10 border-blue-500/20',\r\n      'Unreal Engine': 'text-slate-200 bg-white/10 border-white/20',\r\n      'Maya': 'text-teal-500 bg-teal-500/10 border-teal-500/20',\r\n      'ZBrush': 'text-purple-500 bg-purple-500/10 border-purple-500/20',\r\n    };\r\n    return map[name] || 'text-slate-400 bg-slate-500/10 border-slate-500/20';\r\n  };\r\n\r\n  const softwares = item.software || [];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0d0d0f] animate-fade-in relative\">\r\n      <SEOHead\r\n        title={item.title}\r\n        description={item.description?.substring(0, 150) || `Proyecto de ${item.artist}`}\r\n        image={item.image}\r\n        url={`/portfolio/${item.id}`}\r\n        type=\"website\"\r\n        author={item.artist}\r\n        keywords={item.software || []}\r\n      />\r\n\r\n      {/* LIGHTBOX */}\r\n      {lightboxImage && (\r\n        <div className=\"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in\" onClick={() => setLightboxImage(null)}>\r\n          <button\r\n            onClick={() => setLightboxImage(null)}\r\n            className=\"absolute top-6 right-6 p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors z-50\"\r\n          >\r\n            <X className=\"h-6 w-6\" />\r\n          </button>\r\n          <img src={lightboxImage} alt=\"Fullscreen\" className=\"max-w-full max-h-[95vh] object-contain rounded shadow-2xl\" />\r\n        </div>\r\n      )}\r\n\r\n      {/* STICKY HEADER */}\r\n      <div className=\"sticky top-0 z-40 bg-[#0d0d0f]/80 backdrop-blur-xl border-b border-white/5 h-16 flex items-center justify-between px-4 md:px-8 transition-all\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </button>\r\n          <div className=\"hidden md:flex flex-col\">\r\n            <h1 className=\"text-sm font-bold text-white leading-tight line-clamp-1\">{item.title}</h1>\r\n            <div className=\"flex items-center gap-2 text-[10px] text-slate-400\">\r\n              <span className=\"hover:text-amber-500 cursor-pointer transition-colors\" onClick={() => onAuthorClick?.(authorProfile?.username || item.artistUsername || item.artist)}>{authorProfile?.name || item.artist}</span>\r\n              <span>ÔÇó</span>\r\n              <span className=\"text-amber-500\">{item.category}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Like Button */}\r\n          <button\r\n            onClick={handleToggleLike}\r\n            disabled={isLikeLoading}\r\n            className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border disabled:opacity-50 disabled:cursor-not-allowed ${isLiked\r\n              ? 'bg-amber-500 border-amber-500 text-black'\r\n              : 'bg-white/5 border-white/5 text-slate-300 hover:bg-white/10'\r\n              }`}\r\n          >\r\n            <Heart className={`h-4 w-4 ${isLiked ? 'fill-current' : ''}`} />\r\n            <span className=\"hidden sm:inline\">{isLiked ? 'Te gusta' : 'Me gusta'}</span>\r\n          </button>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex bg-white/5 rounded-full p-1 border border-white/5\">\r\n            <button\r\n              onClick={() => onSave?.(item.id, item.image, 'project')}\r\n              className=\"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\r\n              title=\"Guardar en colecci├│n\"\r\n            >\r\n              <Bookmark className=\"h-4 w-4\" />\r\n            </button>\r\n            <div className=\"w-px bg-white/10 my-1 mx-1\"></div>\r\n            <button\r\n              onClick={onShare}\r\n              className=\"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\r\n              title=\"Compartir\"\r\n            >\r\n              <Share2 className=\"h-4 w-4\" />\r\n            </button>\r\n            {state.user && state.user.id !== itemAuthorId && (\r\n              <>\r\n                <div className=\"w-px bg-white/10 my-1 mx-1\"></div>\r\n                <button\r\n                  onClick={() => setIsReportModalOpen(true)}\r\n                  className=\"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-red-400 transition-colors\"\r\n                  title=\"Reportar\"\r\n                >\r\n                  <Flag className=\"h-4 w-4\" />\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {/* Author Actions */}\r\n            {state.user?.name === item.artist && (\r\n              <>\r\n                <div className=\"w-px bg-white/10 my-1 mx-1\"></div>\r\n\r\n                <button\r\n                  onClick={handleDeleteClick}\r\n                  className=\"p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-red-500 transition-colors\"\r\n                  title=\"Eliminar Proyecto\"\r\n                >\r\n                  <Trash2 className=\"h-4 w-4\" />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-[1800px] mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 p-4 md:p-8\">\r\n\r\n        {/* --- LEFT: MAIN CONTENT --- */}\r\n        <div className=\"lg:col-span-9 space-y-12\">\r\n\r\n          {/* Title and Metadata (Moved to Top) */}\r\n          <div className=\"mb-6\">\r\n            <h1 className=\"text-4xl md:text-5xl font-bold text-white mb-4 leading-tight\">{item.title}</h1>\r\n            {item.createdAt && (\r\n              <p className=\"text-slate-400 text-sm mb-4\">Publicado el {new Date(item.createdAt).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}</p>\r\n            )}\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {softwares.map(soft => (\r\n                <div key={soft} className={`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-bold border ${getSoftwareColor(soft)}`}>\r\n                  {soft}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Description Block */}\r\n          {item.description && (\r\n            <div className=\"prose prose-invert prose-lg max-w-none text-slate-300 font-light\">\r\n              <p className=\"whitespace-pre-wrap\">{renderDescriptionWithLinks(item.description)}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Main Hero Content */}\r\n          {heroContent && (\r\n            <div className=\"space-y-4\">\r\n              <div\r\n                className={`group relative w-full bg-black rounded-sm overflow-hidden shadow-2xl shadow-black/50 ${heroContent.type === 'image' ? 'cursor-zoom-in' : ''}`}\r\n                onClick={() => heroContent.type === 'image' && heroContent.url && setLightboxImage(heroContent.url)}\r\n              >\r\n                {heroContent.type === 'youtube' ? (\r\n                  <div className=\"relative pt-[56.25%] w-full\">\r\n                    <iframe\r\n                      className=\"absolute inset-0 w-full h-full\"\r\n                      src={`https://www.youtube.com/embed/${getYoutubeVideoId(heroContent.url || '') || ''}`}\r\n                      title={heroContent.caption || \"YouTube video\"}\r\n                      frameBorder=\"0\"\r\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                      allowFullScreen\r\n                    ></iframe>\r\n                  </div>\r\n                ) : heroContent.type === 'sketchfab' ? (\r\n                  <div className=\"relative pt-[56.25%] w-full\">\r\n                    <iframe\r\n                      className=\"absolute inset-0 w-full h-full\"\r\n                      src={`https://sketchfab.com/models/${getSketchfabModelId(heroContent.url || '')}/embed?autostart=1&ui_theme=dark`}\r\n                      title={heroContent.caption || \"Sketchfab 3D Model\"}\r\n                      frameBorder=\"0\"\r\n                      allow=\"autoplay; fullscreen; xr-spatial-tracking\"\r\n                      allowFullScreen\r\n                    ></iframe>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <img\r\n                      src={heroContent.url}\r\n                      alt=\"Main View\"\r\n                      className=\"w-full h-auto object-cover\"\r\n                    />\r\n                    <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                      <button className=\"bg-black/60 backdrop-blur-md text-white p-2.5 rounded-lg hover:bg-black/80 transition-colors\">\r\n                        <Maximize2 className=\"h-5 w-5\" />\r\n                      </button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              {heroContent.caption && (\r\n                <div className=\"bg-[#18181b] border-l-2 border-amber-500 pl-4 py-2\">\r\n                  <p className=\"text-slate-300 text-sm italic\">{heroContent.caption}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Additional Content Grid */}\r\n          {additionalContent.length > 0 && (\r\n            <div className=\"grid grid-cols-1 gap-8\">\r\n              {additionalContent.map((imgItem, index) => (\r\n                <div key={index} className=\"space-y-4\">\r\n                  {/* Media Container */}\r\n                  <div\r\n                    className={`group relative w-full bg-black rounded-sm overflow-hidden shadow-xl ${imgItem.type === 'image' ? 'cursor-zoom-in' : ''}`}\r\n                    onClick={() => imgItem.type === 'image' && imgItem.url && setLightboxImage(imgItem.url)}\r\n                  >\r\n                    {/* YouTube Render */}\r\n                    {imgItem.type === 'youtube' ? (\r\n                      <div className=\"relative pt-[56.25%] w-full\">\r\n                        <iframe\r\n                          className=\"absolute inset-0 w-full h-full\"\r\n                          src={`https://www.youtube.com/embed/${getYoutubeVideoId(imgItem.url || '') || ''}`}\r\n                          title={imgItem.caption || \"YouTube video\"}\r\n                          frameBorder=\"0\"\r\n                          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                          allowFullScreen\r\n                        ></iframe>\r\n                      </div>\r\n                    ) : imgItem.type === 'sketchfab' ? (\r\n                      /* Sketchfab 3D Model Render */\r\n                      <div className=\"relative pt-[56.25%] w-full\">\r\n                        <iframe\r\n                          className=\"absolute inset-0 w-full h-full\"\r\n                          src={`https://sketchfab.com/models/${getSketchfabModelId(imgItem.url || '')}/embed?autostart=1&ui_theme=dark`}\r\n                          title={imgItem.caption || \"Sketchfab 3D Model\"}\r\n                          frameBorder=\"0\"\r\n                          allow=\"autoplay; fullscreen; xr-spatial-tracking\"\r\n                          allowFullScreen\r\n                        ></iframe>\r\n                      </div>\r\n                    ) : (\r\n                      /* Image Render */\r\n                      <>\r\n                        <img src={imgItem.url || ''} alt={`Detail ${index + 1}`} className=\"w-full h-auto object-cover\" loading=\"lazy\" />\r\n                        <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                          <button className=\"bg-black/60 backdrop-blur-md text-white p-2 rounded-lg hover:bg-black/80\">\r\n                            <Maximize2 className=\"h-4 w-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  {/* Caption Display */}\r\n                  {imgItem.caption && (\r\n                    <div className=\"border-l-2 border-white/10 pl-4\">\r\n                      <p className=\"text-slate-400 text-sm italic\">{imgItem.caption}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Comments Section */}\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <CommentsSection\r\n              comments={comments}\r\n              isLoading={isLoadingComments}\r\n              contentAuthorId={item.authorId}\r\n              onAddComment={async (text) => {\r\n                if (!item?.id) return;\r\n                await addComment(item.id, text);\r\n              }}\r\n              onDeleteComment={async (commentId) => {\r\n                if (!item?.id) return;\r\n                await deleteComment(item.id, commentId);\r\n                actions.showToast('Comentario eliminado', 'success');\r\n              }}\r\n              onLikeComment={handleCommentLike}\r\n              onAddReply={async (parentId, text) => {\r\n                if (!item?.id || !state.user) return;\r\n                await projectsService.addCommentReply(item.id, parentId, {\r\n                  authorId: state.user.id,\r\n                  authorName: state.user.name || 'Usuario',\r\n                  authorUsername: state.user.username || '',\r\n                  authorAvatar: state.user.avatar || '',\r\n                  text\r\n                });\r\n                actions.showToast('Respuesta publicada', 'success');\r\n              }}\r\n              commentLikes={commentLikes}\r\n            />\r\n          </div>\r\n\r\n\r\n        </div>\r\n\r\n        {/* --- RIGHT: SIDEBAR --- */}\r\n        <PortfolioSidebar\r\n          item={item}\r\n          authorProfile={authorProfile}\r\n          isOwner={state.user?.id === itemAuthorId}\r\n          isFollowing={isFollowing}\r\n          isFollowLoading={isFollowLoading}\r\n          likeCount={likeCount}\r\n          commentsCount={comments.length}\r\n          relatedProjects={displayRelated}\r\n          onAuthorClick={onAuthorClick}\r\n          onFollowToggle={handleFollowToggle}\r\n        />\r\n\r\n      </div>\r\n\r\n\r\n\r\n      <ConfirmationModal\r\n        isOpen={isDeleteModalOpen}\r\n        onClose={() => setIsDeleteModalOpen(false)}\r\n        onConfirm={handleConfirmDelete}\r\n        title=\"Eliminar Proyecto\"\r\n        message=\"┬┐Est├ís seguro de que deseas eliminar este proyecto? Esta acci├│n no se puede deshacer.\"\r\n        confirmText=\"Eliminar\"\r\n        cancelText=\"Cancelar\"\r\n        type=\"danger\"\r\n        loading={isDeleting}\r\n      />\r\n\r\n      <ReportModal\r\n        isOpen={isReportModalOpen}\r\n        onClose={() => setIsReportModalOpen(false)}\r\n        contentType=\"project\"\r\n        contentId={item?.id || ''}\r\n        contentTitle={item?.title}\r\n      />\r\n\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\PortfolioView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2886,2889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2886,2889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useSearchParams, useParams } from 'react-router-dom';\r\nimport { Layers, Plus, Image as ImageIcon, Filter, ArrowUpDown, Loader2, ArrowLeft, ArrowRight } from 'lucide-react';\r\nimport { PortfolioCard } from '../../components/cards/PortfolioCard';\r\nimport { ContentMode, useAppStore } from '../../hooks/useAppStore';\r\nimport { projectsService } from '../../services/modules/projects';\r\nimport { PortfolioItem } from '../../types';\r\nimport { QueryDocumentSnapshot, DocumentData } from 'firebase/firestore';\r\nimport { NAV_SECTIONS, NAV_SECTIONS_DEV } from '../../data/navigation';\r\n\r\ninterface PortfolioViewProps {\r\n  activeCategory: string;\r\n  onItemSelect?: (id: string) => void;\r\n  onCreateClick?: () => void;\r\n  onSave?: (id: string, image: string) => void;\r\n  contentMode: ContentMode;\r\n}\r\n\r\nexport const PortfolioView: React.FC<PortfolioViewProps> = ({ activeCategory, onItemSelect, onCreateClick, onSave, contentMode }) => {\r\n  const { state } = useAppStore();\r\n  const mode = contentMode || 'creative';\r\n  const { slug } = useParams<{ slug?: string }>();\r\n\r\n  // Get category label from slug\r\n  const categoryFromSlug = useMemo(() => {\r\n    if (!slug) return null;\r\n    const sections = mode === 'dev' ? NAV_SECTIONS_DEV : NAV_SECTIONS;\r\n    for (const section of sections) {\r\n      const item = section.items.find(i => i.slug === slug);\r\n      if (item) return item.label;\r\n    }\r\n    return null;\r\n  }, [slug, mode]);\r\n\r\n  // Active category: use slug-derived category if available, otherwise prop\r\n  const effectiveCategory = categoryFromSlug || activeCategory;\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const currentPage = Number(searchParams.get('page')) || 1;\r\n\r\n  const [projects, setProjects] = useState<PortfolioItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  // State to store the cursors for Firestore pagination\r\n  const [pageCursors, setPageCursors] = useState<(QueryDocumentSnapshot<DocumentData> | null)[]>([null]);\r\n\r\n  const fetchProjects = useCallback(async (pageNumber: number) => {\r\n    if (pageNumber > pageCursors.length) {\r\n      console.warn(\"Cannot jump to a non-sequential page. Fetching page 1.\");\r\n      setSearchParams({ page: '1' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    window.scrollTo(0, 0); // Scroll to top on new page\r\n\r\n    try {\r\n      const cursor = pageCursors[pageNumber - 1];\r\n      const result = await projectsService.getProjects(cursor, 20);\r\n\r\n      setProjects(result.data);\r\n      setHasMore(result.hasMore);\r\n\r\n      if (result.hasMore && pageNumber >= pageCursors.length) {\r\n        setPageCursors(prev => [...prev, result.lastDoc]);\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || 'Error loading projects');\r\n      setProjects([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [pageCursors, setSearchParams]);\r\n\r\n  useEffect(() => {\r\n    fetchProjects(currentPage);\r\n  }, [currentPage, fetchProjects]);\r\n\r\n  // Filter items by mode and status (only show published projects in public feed)\r\n  const filteredItems = projects.filter(item => {\r\n    // Default to 'creative' if domain is not set for backward compatibility\r\n    const itemDomain = item.domain || 'creative';\r\n    // Default to 'published' for backward compatibility with existing projects\r\n    const itemStatus = item.status || 'published';\r\n    // Only show published projects in the public feed\r\n    return itemDomain === mode && itemStatus === 'published';\r\n  });\r\n\r\n  const handleNextPage = () => {\r\n    if (!hasMore || loading) return;\r\n    setSearchParams({ page: String(currentPage + 1) });\r\n  };\r\n\r\n  const handlePrevPage = () => {\r\n    if (currentPage <= 1 || loading) return;\r\n    setSearchParams({ page: String(currentPage - 1) });\r\n  };\r\n\r\n  // Apply Category Filter - use effectiveCategory (from slug or prop)\r\n  const displayItems = effectiveCategory === 'Home' || !effectiveCategory\r\n    ? filteredItems\r\n    : filteredItems.filter(item => item.category === effectiveCategory);\r\n\r\n  const accentText = mode === 'dev' ? 'text-blue-500' : 'text-pink-500';\r\n  const accentBg = mode === 'dev' ? 'bg-blue-600' : 'bg-pink-600';\r\n  const accentGradient = mode === 'dev' ? 'from-blue-400 to-cyan-300' : 'from-pink-400 to-rose-300';\r\n\r\n  // New vibrant background setup\r\n  const heroImage = mode === 'dev'\r\n    ? 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2000&auto=format&fit=crop'\r\n    : 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2000&auto=format&fit=crop';\r\n\r\n  return (\r\n    <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-0 pb-16 transition-colors animate-fade-in bg-[#1c1c21] min-h-screen\">\r\n\r\n      {/* Cinematic Hero Banner - Full Width */}\r\n      <div className=\"relative -mx-6 md:-mx-10 2xl:-mx-16 h-[500px] flex items-center justify-center overflow-hidden mb-12\">\r\n        {/* Background Layer */}\r\n        <div className=\"absolute inset-0 z-0\">\r\n          <img\r\n            src={heroImage}\r\n            className=\"absolute inset-0 w-full h-full object-cover opacity-40 animate-subtle-zoom\"\r\n            alt=\"Portfolio Hero\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-b from-black/60 via-[#1c1c21]/80 to-[#1c1c21]\"></div>\r\n\r\n          {/* Vibrant Glows */}\r\n          <div className={`absolute top-0 right-0 w-[600px] h-[600px] ${mode === 'dev' ? 'bg-blue-600/20' : 'bg-pink-600/20'} rounded-full blur-[150px] pointer-events-none mix-blend-screen`}></div>\r\n          <div className={`absolute bottom-0 left-0 w-[500px] h-[500px] ${mode === 'dev' ? 'bg-cyan-600/10' : 'bg-purple-600/10'} rounded-full blur-[150px] pointer-events-none mix-blend-screen`}></div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 px-6 w-full max-w-5xl text-center\">\r\n          <span className={`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 ${mode === 'dev' ? 'text-blue-400' : 'text-pink-400'} text-xs font-bold uppercase tracking-wider mb-6 backdrop-blur-md shadow-lg`}>\r\n            <ImageIcon className=\"h-3 w-3\" /> {mode === 'dev' ? 'Showcase Developer' : 'Inspiraci├│n Visual'}\r\n          </span>\r\n          <h1 className=\"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight drop-shadow-2xl\">\r\n            Descubre <span className={`text-transparent bg-clip-text bg-gradient-to-r ${accentGradient}`}>Obras Maestras</span>\r\n          </h1>\r\n          <p className=\"text-xl text-slate-300 mb-10 max-w-2xl mx-auto leading-relaxed font-light\">\r\n            Explora {mode === 'dev' ? 'repositorios y snippets' : 'modelos 3D, concept art y animaciones'} creados por la comunidad m├ís talentosa de Latam.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Toolbar & Filters */}\r\n      <div className=\"relative z-10 mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6 border-b border-white/10 pb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n            <Layers className={`h-6 w-6 ${accentText}`} />\r\n            {effectiveCategory === 'Home' || !effectiveCategory ? 'Feed de Proyectos' : effectiveCategory}\r\n          </h2>\r\n          <p className=\"text-slate-400 mt-1 text-sm\">\r\n            {loading ? 'Cargando proyectos...' : `Mostrando ${displayItems.length} resultados`}\r\n            {slug && ` en \"${effectiveCategory}\"`}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap items-center gap-3\">\r\n          <button\r\n            onClick={onCreateClick}\r\n            className={`flex items-center gap-2 px-6 py-2.5 ${accentBg} text-white font-bold rounded-xl hover:scale-105 transition-all shadow-lg hover:shadow-${mode === 'dev' ? 'blue' : 'pink'}-500/20`}\r\n          >\r\n            <Plus className=\"h-4 w-4\" /> {mode === 'dev' ? 'Compartir C├│digo' : 'Subir Proyecto'}\r\n          </button>\r\n\r\n          <div className=\"h-8 w-px bg-white/10 hidden md:block mx-2\"></div>\r\n\r\n          <button className=\"flex items-center gap-2 px-4 py-2.5 rounded-xl border border-white/10 bg-white/5 text-slate-300 hover:bg-white/10 transition-colors backdrop-blur-sm\">\r\n            <Filter className=\"h-4 w-4\" /> Filtrar\r\n          </button>\r\n\r\n          <button className=\"flex items-center gap-1.5 px-4 py-2.5 rounded-xl border border-white/10 bg-white/5 text-slate-300 hover:bg-white/10 transition-colors backdrop-blur-sm\">\r\n            <span className=\"text-slate-500 text-xs uppercase font-bold mr-1\">Ordenar:</span>Tendencia <ArrowUpDown className=\"h-3.5 w-3.5 ml-1\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Grid */}\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center py-20\">\r\n          <Loader2 className={`h-12 w-12 animate-spin ${accentText}`} />\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 mb-16\">\r\n          {displayItems.length > 0 ? (\r\n            displayItems.map((item) => (\r\n              <PortfolioCard\r\n                key={item.id}\r\n                item={item}\r\n                onClick={() => onItemSelect?.(item.id)}\r\n                onSave={onSave}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"col-span-full py-20 text-center border border-dashed border-white/10 rounded-3xl bg-white/5\">\r\n              <div className=\"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Layers className=\"h-8 w-8 text-slate-500\" />\r\n              </div>\r\n              <p className=\"text-slate-400 text-lg\">No hay proyectos para mostrar en esta categor├¡a.</p>\r\n              <button onClick={onCreateClick} className={`mt-4 ${accentText} font-bold hover:underline`}>S├® el primero en subir uno</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination Controls */}\r\n      {!loading && (projects.length > 0 || currentPage > 1) && (\r\n        <div className=\"mt-12 md:mt-16 flex justify-center items-center gap-4\">\r\n          <button\r\n            onClick={handlePrevPage}\r\n            disabled={currentPage === 1 || loading}\r\n            className=\"flex items-center gap-2 px-6 py-3 rounded-xl border border-white/10 bg-white/5 text-white font-semibold hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" /> Anterior\r\n          </button>\r\n          <span className=\"font-bold text-slate-400 text-sm\">P├ígina {currentPage}</span>\r\n          <button\r\n            onClick={handleNextPage}\r\n            disabled={!hasMore || loading}\r\n            className=\"flex items-center gap-2 px-6 py-3 rounded-xl border border-white/10 bg-white/5 text-white font-semibold hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            Siguiente <ArrowRight className=\"h-4 w-4\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\components\\GalleryItemCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\components\\MediaUploader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\components\\PortfolioSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\portfolio\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\CollectionDetailView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3392,3395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3392,3395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5392,5395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5392,5395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6243,6246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6243,6246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { ArrowLeft, Lock, Globe, Share2, Trash2, Edit3, X, Check, Loader2, Plus } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { PortfolioCard } from '../../components/cards/PortfolioCard';\r\nimport { projectsService } from '../../services/modules/projects';\r\nimport { articlesService } from '../../services/modules/articles';\r\nimport { collectionsService } from '../../services/modules/collections';\r\nimport { PortfolioItem, CollectionItem } from '../../types';\r\n\r\ninterface CollectionDetailViewProps {\r\n    collectionId: string;\r\n    onBack: () => void;\r\n    onItemSelect: (id: string) => void;\r\n    onShare?: () => void;\r\n}\r\n\r\n// Extended type for mixed content display\r\ntype DisplayItem = PortfolioItem & { itemType: 'project' | 'article' };\r\n\r\nexport const CollectionDetailView: React.FC<CollectionDetailViewProps> = ({ collectionId, onBack, onItemSelect, onShare }) => {\r\n    const { state, actions } = useAppStore();\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const ownerId = searchParams.get('owner');\r\n\r\n    // First try to find in user's own collections\r\n    const ownCollection = state.collections.find(c => c.id === collectionId);\r\n    // State for external (other user's) collection\r\n    const [externalCollection, setExternalCollection] = useState<CollectionItem | null>(null);\r\n    const [loadingCollection, setLoadingCollection] = useState(false);\r\n\r\n    // Use own collection if found, otherwise use external\r\n    const collection = ownCollection || externalCollection;\r\n\r\n    const [collectionItems, setCollectionItems] = useState<DisplayItem[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [removingId, setRemovingId] = useState<string | null>(null);\r\n\r\n    // Edit/Delete modal states\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n    const [editTitle, setEditTitle] = useState('');\r\n    const [editIsPrivate, setEditIsPrivate] = useState(false);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    // Check if current user is the owner\r\n    const isOwner = state.user && ownCollection;\r\n\r\n    // Fetch external collection if not found in own collections\r\n    useEffect(() => {\r\n        const fetchExternalCollection = async () => {\r\n            if (!ownCollection && ownerId) {\r\n                setLoadingCollection(true);\r\n                try {\r\n                    const col = await collectionsService.getCollectionById(ownerId, collectionId);\r\n                    setExternalCollection(col);\r\n                } catch (error) {\r\n                    console.error('Error fetching external collection:', error);\r\n                } finally {\r\n                    setLoadingCollection(false);\r\n                }\r\n            }\r\n        };\r\n        fetchExternalCollection();\r\n    }, [ownCollection, ownerId, collectionId]);\r\n\r\n    useEffect(() => {\r\n        const fetchItems = async () => {\r\n            if (collection?.items && collection.items.length > 0) {\r\n                setLoading(true);\r\n                try {\r\n                    const allIds = collection.items.map((item: any) => typeof item === 'string' ? item : item.id);\r\n\r\n                    // 2. Fetch from BOTH services for all IDs to be robust against type mismatches\r\n                    // This handles cases where an item is saved as 'project' but is actually an 'article' (or vice versa)\r\n                    const [projects, articles] = await Promise.all([\r\n                        allIds.length > 0 ? projectsService.getProjectsByIds(allIds) : Promise.resolve([]),\r\n                        allIds.length > 0 ? articlesService.getArticlesByIds(allIds) : Promise.resolve([])\r\n                    ]);\r\n\r\n                    // Merge with local items from state (for optimistic updates)\r\n                    const localProjects = state.createdItems || [];\r\n                    const localArticles = state.blogPosts || [];\r\n\r\n                    const allProjects = [...projects];\r\n                    // Add local projects if matched by ID and not already in fetched list\r\n                    localProjects.forEach(lp => {\r\n                        if (allIds.includes(lp.id) && !allProjects.find(p => p.id === lp.id)) {\r\n                            allProjects.push(lp);\r\n                        }\r\n                    });\r\n\r\n                    const allArticles = [...articles];\r\n                    localArticles.forEach(la => {\r\n                        if (allIds.includes(la.id) && !allArticles.find(a => a.id === la.id)) {\r\n                            allArticles.push(la);\r\n                        }\r\n                    });\r\n\r\n                    // 3. Normalize Articles to match PortfolioItem shape for the Card\r\n                    const normalizedArticles: DisplayItem[] = allArticles.map(a => ({\r\n                        id: a.id,\r\n                        title: a.title,\r\n                        image: a.image,\r\n                        views: String(a.views || 0),\r\n                        likes: String(a.likes || 0),\r\n                        artist: typeof a.author === 'object' ? (a.author as any).name || 'Unknown' : a.author || 'Unknown',\r\n                        artistAvatar: a.authorAvatar,\r\n                        category: a.category,\r\n                        isPrivate: a.isExclusive,\r\n                        itemType: 'article' as const\r\n                    } as unknown as DisplayItem));\r\n\r\n                    const normalizedProjects: DisplayItem[] = allProjects.map(p => ({\r\n                        ...p,\r\n                        itemType: 'project' as const\r\n                    }));\r\n\r\n                    // 4. Merge and Restore Order\r\n                    const projectMap = new Map(normalizedProjects.map(p => [p.id, p]));\r\n                    const articleMap = new Map(normalizedArticles.map(a => [a.id, a]));\r\n                    const finalItems: DisplayItem[] = [];\r\n\r\n                    collection.items.forEach((ref: any) => {\r\n                        const id = typeof ref === 'string' ? ref : ref.id;\r\n                        // Determine expected type to look in correct map\r\n                        const type = typeof ref === 'string' ? 'project' : ref.type || 'project';\r\n\r\n                        if (type === 'article') {\r\n                            if (articleMap.has(id)) {\r\n                                finalItems.push(articleMap.get(id)!);\r\n                            } else if (projectMap.has(id)) {\r\n                                // Fallback: Saved as article but is project\r\n                                const item = projectMap.get(id)!;\r\n                                finalItems.push({ ...item, itemType: 'project' });\r\n                            }\r\n                        } else {\r\n                            if (projectMap.has(id)) {\r\n                                finalItems.push(projectMap.get(id)!);\r\n                            } else if (articleMap.has(id)) {\r\n                                // Fallback: Saved as project (or undefined) but is article\r\n                                const item = articleMap.get(id)!;\r\n                                finalItems.push({ ...item, itemType: 'article' });\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    setCollectionItems(finalItems);\r\n                } catch (e) {\r\n                    console.error(\"Error loading collection items\", e);\r\n                } finally {\r\n                    setLoading(false);\r\n                }\r\n            } else {\r\n                setCollectionItems([]);\r\n            }\r\n        };\r\n\r\n        fetchItems();\r\n    }, [collection]);\r\n\r\n    // Show loading while fetching external collection\r\n    if (loadingCollection) {\r\n        return (\r\n            <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-8 pb-16 flex items-center justify-center min-h-[400px]\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-amber-500\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!collection) {\r\n        return (\r\n            <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-8 pb-16\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-slate-900 dark:hover:text-white transition-colors w-fit mb-8\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" /> Volver\r\n                </button>\r\n                <div className=\"text-center py-20\">\r\n                    <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Colecci├│n no encontrada</h2>\r\n                    <p className=\"text-slate-500\">La colecci├│n que buscas no existe o es privada.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleItemClick = (item: DisplayItem) => {\r\n        onItemSelect(item.id, item.itemType);\r\n    };\r\n\r\n    const handleRemoveItem = async (itemId: string) => {\r\n        if (!state.user || removingId) return;\r\n\r\n        setRemovingId(itemId);\r\n\r\n        // Optimistic UI update\r\n        setCollectionItems(prev => prev.filter(item => item.id !== itemId));\r\n\r\n        try {\r\n            await collectionsService.removeFromCollection(state.user.id, collectionId, itemId);\r\n            actions.showToast('Elemento eliminado de la colecci├│n', 'success');\r\n            // Refetch collections to update the count in sidebar/other views\r\n            actions.fetchCollections();\r\n        } catch (error) {\r\n            console.error('Error removing item:', error);\r\n            actions.showToast('Error al eliminar elemento', 'error');\r\n            // Rollback - refetch items\r\n            // For simplicity, we'll just show error; a full rollback would require re-fetching\r\n        } finally {\r\n            setRemovingId(null);\r\n        }\r\n    };\r\n\r\n    // Open edit modal with current values\r\n    const handleOpenEdit = () => {\r\n        setEditTitle(collection.title);\r\n        setEditIsPrivate(collection.isPrivate || false);\r\n        setIsEditModalOpen(true);\r\n    };\r\n\r\n    // Save edited collection\r\n    const handleSaveEdit = async () => {\r\n        if (!state.user || !editTitle.trim()) return;\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            await collectionsService.updateCollection(state.user.id, collectionId, {\r\n                title: editTitle.trim(),\r\n                isPrivate: editIsPrivate\r\n            });\r\n            actions.showToast('Colecci├│n actualizada', 'success');\r\n            actions.fetchCollections();\r\n            setIsEditModalOpen(false);\r\n        } catch (error) {\r\n            console.error('Error updating collection:', error);\r\n            actions.showToast('Error al actualizar colecci├│n', 'error');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    // Delete entire collection\r\n    const handleDeleteCollection = async () => {\r\n        if (!state.user) return;\r\n\r\n        setIsDeleting(true);\r\n        try {\r\n            await actions.deleteCollection(collectionId);\r\n            setIsDeleteModalOpen(false);\r\n            navigate('/profile');\r\n        } catch (error) {\r\n            console.error('Error deleting collection:', error);\r\n            actions.showToast('Error al eliminar colecci├│n', 'error');\r\n        } finally {\r\n            setIsDeleting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-8 pb-16 transition-colors animate-fade-in\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col gap-6 mb-10\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-slate-900 dark:hover:text-white transition-colors w-fit\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" /> Volver a Colecciones\r\n                </button>\r\n\r\n                <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-3\">{collection.title}</h1>\r\n                        <div className=\"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400\">\r\n                            <span className=\"flex items-center gap-1.5\">\r\n                                {collection.isPrivate ? <Lock className=\"h-4 w-4\" /> : <Globe className=\"h-4 w-4\" />}\r\n                                {collection.isPrivate ? 'Privada' : 'P├║blica'}\r\n                            </span>\r\n                            <span>ÔÇó</span>\r\n                            <span>{collectionItems.length} elementos guardados</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {isOwner && (\r\n                            <>\r\n                                <button\r\n                                    onClick={handleOpenEdit}\r\n                                    className=\"p-2.5 rounded-xl border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors\"\r\n                                    title=\"Editar colecci├│n\"\r\n                                >\r\n                                    <Edit3 className=\"h-5 w-5\" />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setIsDeleteModalOpen(true)}\r\n                                    className=\"p-2.5 rounded-xl border border-red-200 dark:border-red-500/30 text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors\"\r\n                                    title=\"Eliminar colecci├│n\"\r\n                                >\r\n                                    <Trash2 className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                        <button\r\n                            onClick={onShare}\r\n                            className=\"p-2.5 rounded-xl border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors\"\r\n                            title=\"Compartir\"\r\n                        >\r\n                            <Share2 className=\"h-5 w-5\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"h-px w-full bg-slate-200 dark:bg-white/10 mb-8\"></div>\r\n\r\n            {/* Grid */}\r\n            {loading ? (\r\n                <div className=\"py-20 text-center text-slate-500\">Cargando elementos...</div>\r\n            ) : collectionItems.length > 0 ? (\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6\">\r\n                    {collectionItems.map((item) => (\r\n                        <PortfolioCard\r\n                            key={item.id}\r\n                            item={item}\r\n                            itemType={item.itemType}\r\n                            showTypeBadge={true}\r\n                            hideSaveButton={true}\r\n                            onClick={() => handleItemClick(item)}\r\n                            extraAction={\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        handleRemoveItem(item.id);\r\n                                    }}\r\n                                    disabled={removingId === item.id}\r\n                                    className={`pointer-events-auto p-2 rounded-full transition-all shadow-lg ${removingId === item.id\r\n                                        ? 'bg-slate-500/90 cursor-wait'\r\n                                        : 'bg-red-500/90 hover:bg-red-600 hover:scale-110'\r\n                                        } text-white`}\r\n                                    title=\"Eliminar de colecci├│n\"\r\n                                >\r\n                                    <Trash2 className={`h-4 w-4 ${removingId === item.id ? 'animate-pulse' : ''}`} />\r\n                                </button>\r\n                            }\r\n                        />\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div className=\"flex flex-col items-center justify-center py-20 text-slate-500 dark:text-slate-400\">\r\n                    <div className=\"w-20 h-20 bg-slate-100 dark:bg-white/5 rounded-full flex items-center justify-center mb-4\">\r\n                        <Plus className=\"h-8 w-8 opacity-50\" />\r\n                    </div>\r\n                    <p className=\"text-lg font-medium\">Esta colecci├│n est├í vac├¡a</p>\r\n                    <p className=\"text-sm\">Explora el feed para guardar contenido aqu├¡.</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Edit Collection Modal */}\r\n            {isEditModalOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n                    <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={() => !isSaving && setIsEditModalOpen(false)}></div>\r\n                    <div className=\"relative bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-slide-up\">\r\n                        <div className=\"p-4 border-b border-slate-200 dark:border-white/10 flex justify-between items-center\">\r\n                            <h3 className=\"font-bold text-slate-900 dark:text-white\">Editar Colecci├│n</h3>\r\n                            <button onClick={() => !isSaving && setIsEditModalOpen(false)} className=\"p-1 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg transition-colors\">\r\n                                <X className=\"h-5 w-5\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-5 space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\">Nombre</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={editTitle}\r\n                                    onChange={(e) => setEditTitle(e.target.value)}\r\n                                    className=\"w-full px-4 py-3 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50\"\r\n                                    placeholder=\"Nombre de la colecci├│n\"\r\n                                />\r\n                            </div>\r\n                            <label className=\"flex items-center gap-3 cursor-pointer\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={editIsPrivate}\r\n                                    onChange={(e) => setEditIsPrivate(e.target.checked)}\r\n                                    className=\"w-5 h-5 rounded border-slate-300 dark:border-white/20 text-amber-500 focus:ring-amber-500/50\"\r\n                                />\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Lock className=\"h-4 w-4 text-slate-500\" />\r\n                                    <span className=\"text-sm text-slate-700 dark:text-slate-300\">Colecci├│n privada</span>\r\n                                </div>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"p-4 border-t border-slate-200 dark:border-white/10 flex gap-3\">\r\n                            <button\r\n                                onClick={() => setIsEditModalOpen(false)}\r\n                                disabled={isSaving}\r\n                                className=\"flex-1 py-2.5 text-slate-600 dark:text-slate-300 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition-colors\"\r\n                            >\r\n                                Cancelar\r\n                            </button>\r\n                            <button\r\n                                onClick={handleSaveEdit}\r\n                                disabled={isSaving || !editTitle.trim()}\r\n                                className=\"flex-1 py-2.5 bg-amber-500 text-white font-bold rounded-xl hover:bg-amber-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\r\n                            >\r\n                                {isSaving ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Check className=\"h-5 w-5\" />}\r\n                                Guardar\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Delete Collection Modal */}\r\n            {isDeleteModalOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n                    <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={() => !isDeleting && setIsDeleteModalOpen(false)}></div>\r\n                    <div className=\"relative bg-white dark:bg-[#1A1A1C] border border-slate-200 dark:border-white/10 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-slide-up\">\r\n                        <div className=\"p-4 border-b border-slate-200 dark:border-white/10 flex justify-between items-center\">\r\n                            <h3 className=\"font-bold text-red-500\">Eliminar Colecci├│n</h3>\r\n                            <button onClick={() => !isDeleting && setIsDeleteModalOpen(false)} className=\"p-1 text-slate-500 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg transition-colors\">\r\n                                <X className=\"h-5 w-5\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-5\">\r\n                            <p className=\"text-slate-600 dark:text-slate-300\">\r\n                                ┬┐Est├ís seguro de que deseas eliminar la colecci├│n <strong className=\"text-slate-900 dark:text-white\">\"{collection.title}\"</strong>?\r\n                            </p>\r\n                            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-2\">\r\n                                Esta acci├│n es permanente. Los elementos guardados no ser├ín eliminados, solo la colecci├│n.\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"p-4 border-t border-slate-200 dark:border-white/10 flex gap-3\">\r\n                            <button\r\n                                onClick={() => setIsDeleteModalOpen(false)}\r\n                                disabled={isDeleting}\r\n                                className=\"flex-1 py-2.5 text-slate-600 dark:text-slate-300 font-bold hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl transition-colors\"\r\n                            >\r\n                                Cancelar\r\n                            </button>\r\n                            <button\r\n                                onClick={handleDeleteCollection}\r\n                                disabled={isDeleting}\r\n                                className=\"flex-1 py-2.5 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\r\n                            >\r\n                                {isDeleting ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Trash2 className=\"h-5 w-5\" />}\r\n                                Eliminar\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\CollectionsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { Bookmark, Plus, Lock, Globe, MoreHorizontal, Image as ImageIcon, Search, Trash2 } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { ConfirmationModal } from '../../components/modals/ConfirmationModal';\r\n\r\ninterface CollectionsViewProps {\r\n    onCreateClick?: () => void;\r\n    onCollectionSelect?: (id: string) => void;\r\n}\r\n\r\nexport const CollectionsView: React.FC<CollectionsViewProps> = ({ onCreateClick, onCollectionSelect }) => {\r\n    const { state, actions } = useAppStore();\r\n    const collections = state.collections || [];\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = React.useState(false);\r\n    const [collectionToDelete, setCollectionToDelete] = React.useState<string | null>(null);\r\n\r\n    const handleDeleteClick = (bgId: string) => {\r\n        setCollectionToDelete(bgId);\r\n        setIsDeleteModalOpen(true);\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        if (collectionToDelete) {\r\n            await actions.deleteCollection(collectionToDelete);\r\n            setIsDeleteModalOpen(false);\r\n            setCollectionToDelete(null);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        actions.fetchCollections();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"w-full max-w-[2560px] mx-auto px-6 md:px-10 2xl:px-16 pt-8 pb-16 transition-colors animate-fade-in\">\r\n\r\n            {/* Cinematic Hero Banner */}\r\n            <div className=\"relative rounded-3xl overflow-hidden min-h-[400px] flex items-center mb-12 group shadow-2xl\">\r\n                <img\r\n                    src=\"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2000&auto=format&fit=crop\"\r\n                    className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105 saturate-0 group-hover:saturate-100\"\r\n                    alt=\"Collections Hero\"\r\n                />\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-slate-950/95 via-slate-900/80 to-slate-900/40\"></div>\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-transparent to-transparent\"></div>\r\n\r\n                <div className=\"relative z-10 px-8 md:px-16 w-full max-w-5xl py-12\">\r\n                    <span className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-700 text-white text-xs font-bold uppercase tracking-wider mb-6 shadow-lg border border-slate-600 backdrop-blur-md\">\r\n                        <Bookmark className=\"h-3 w-3\" /> Biblioteca Personal\r\n                    </span>\r\n                    <h1 className=\"text-4xl md:text-6xl font-bold text-white mb-6 leading-tight font-display drop-shadow-lg\">\r\n                        Organiza tu <br /><span className=\"text-amber-400\">Inspiraci├│n</span>\r\n                    </h1>\r\n                    <p className=\"text-lg md:text-xl text-slate-300 mb-8 max-w-xl leading-relaxed drop-shadow-md\">\r\n                        Guarda referencias, crea moodboards y organiza los mejores proyectos de la comunidad en colecciones tem├íticas.\r\n                    </p>\r\n\r\n                    <div className=\"flex flex-wrap items-center gap-4\">\r\n                        <button\r\n                            onClick={onCreateClick}\r\n                            className=\"px-8 py-4 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-colors shadow-xl shadow-black/20 flex items-center gap-2\"\r\n                        >\r\n                            <Plus className=\"h-5 w-5\" /> Nueva Colecci├│n\r\n                        </button>\r\n                        <div className=\"relative flex-1 min-w-[260px] max-w-sm\">\r\n                            <Search className=\"absolute left-4 top-4 h-5 w-5 text-white/70\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Buscar en tus colecciones...\"\r\n                                className=\"w-full bg-white/10 border border-white/20 rounded-xl py-4 pl-12 pr-4 text-white placeholder-white/70 focus:outline-none focus:bg-black/30 transition-all backdrop-blur-md\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-8\">\r\n                {/* Create New Card */}\r\n                <div\r\n                    onClick={onCreateClick}\r\n                    className=\"aspect-[4/5] sm:aspect-square rounded-2xl border-2 border-dashed border-slate-300 dark:border-white/10 flex flex-col items-center justify-center gap-4 text-slate-400 hover:text-amber-500 hover:border-amber-500/50 hover:bg-amber-500/5 transition-all cursor-pointer group\"\r\n                >\r\n                    <div className=\"h-16 w-16 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm\">\r\n                        <Plus className=\"h-8 w-8\" />\r\n                    </div>\r\n                    <span className=\"font-bold\">Crear nueva colecci├│n</span>\r\n                </div>\r\n\r\n                {collections.map((col) => (\r\n                    <div\r\n                        key={col.id}\r\n                        className=\"group cursor-pointer\"\r\n                        onClick={() => onCollectionSelect?.(col.id)}\r\n                    >\r\n                        {/* Grid Preview */}\r\n                        <div className=\"aspect-square bg-slate-100 dark:bg-white/5 rounded-2xl overflow-hidden mb-4 grid grid-cols-2 gap-1 p-1 hover:ring-2 ring-amber-500/50 transition-all shadow-sm hover:shadow-lg relative\">\r\n                            {col.thumbnails.slice(0, 4).map((thumb, i) => (\r\n                                <div key={i} className=\"relative overflow-hidden bg-slate-200 dark:bg-slate-800 rounded-lg\">\r\n                                    <img\r\n                                        src={thumb}\r\n                                        alt=\"\"\r\n                                        className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\"\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                            {/* Fill empty spots if less than 4 */}\r\n                            {Array.from({ length: Math.max(0, 4 - col.thumbnails.length) }).map((_, i) => (\r\n                                <div key={`empty-${i}`} className=\"bg-slate-200 dark:bg-white/5 rounded-lg flex items-center justify-center\">\r\n                                    <ImageIcon className=\"h-6 w-6 text-slate-300 dark:text-slate-600\" />\r\n                                </div>\r\n                            ))}\r\n\r\n                            <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-2xl pointer-events-none\"></div>\r\n                        </div>\r\n\r\n                        {/* Info */}\r\n                        <div className=\"flex justify-between items-start px-1\">\r\n                            <div>\r\n                                <h3 className=\"font-bold text-slate-900 dark:text-white text-lg group-hover:text-amber-500 transition-colors mb-1\">{col.title}</h3>\r\n                                <div className=\"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400\">\r\n                                    <span className=\"font-medium bg-slate-100 dark:bg-white/10 px-2 py-0.5 rounded\">{col.itemCount} items</span>\r\n                                    <div className=\"flex items-center gap-1 opacity-70\">\r\n                                        {col.isPrivate ? <Lock className=\"h-3 w-3\" /> : <Globe className=\"h-3 w-3\" />}\r\n                                        <span>{col.isPrivate ? 'Privado' : 'P├║blico'}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    handleDeleteClick(col.id);\r\n                                }}\r\n                                className=\"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full text-slate-400 hover:text-red-500 transition-colors\"\r\n                                title=\"Eliminar colecci├│n\"\r\n                            >\r\n                                <Trash2 className=\"h-5 w-5\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n\r\n            <ConfirmationModal\r\n                isOpen={isDeleteModalOpen}\r\n                onClose={() => setIsDeleteModalOpen(false)}\r\n                onConfirm={confirmDelete}\r\n                title=\"Eliminar Colecci├│n\"\r\n                message=\"┬┐Est├ís seguro de que quieres eliminar esta colecci├│n? Esta acci├│n no se puede deshacer y perder├ís todos los elementos guardados en ella.\"\r\n                confirmText=\"Eliminar\"\r\n                type=\"danger\"\r\n            />\r\n        </div >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\ProUpgradeView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Rocket' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { ArrowLeft, Check, Star, Zap, Crown, Shield, Download, Rocket } from 'lucide-react';\r\n\r\ninterface ProUpgradeViewProps {\r\n  onBack: () => void;\r\n}\r\n\r\nexport const ProUpgradeView: React.FC<ProUpgradeViewProps> = ({ onBack }) => {\r\n  const [billingCycle, setBillingCycle] = useState<'monthly' | 'yearly'>('yearly');\r\n\r\n  const features = [\r\n    { icon: Zap, title: \"Velocidad Ilimitada\", desc: \"Descargas de assets sin restricciones de velocidad.\" },\r\n    { icon: Download, title: \"Acceso Offline\", desc: \"Descarga cursos completos para ver sin internet.\" },\r\n    { icon: Shield, title: \"Licencia Comercial\", desc: \"Uso comercial incluido en todos los assets gratuitos.\" },\r\n    { icon: Star, title: \"Contenido Exclusivo\", desc: \"Acceso a tutoriales y recursos solo para miembros.\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"max-w-[1400px] mx-auto animate-fade-in pb-20\">\r\n      \r\n      {/* Navbar Overlay */}\r\n      <div className=\"sticky top-0 z-30 bg-white/90 dark:bg-[#0d0d0f]/90 backdrop-blur-xl border-b border-slate-200 dark:border-white/[0.06] px-6 h-16 flex items-center justify-between\">\r\n        <button \r\n          onClick={onBack}\r\n          className=\"flex items-center gap-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4\" />\r\n          Volver\r\n        </button>\r\n        <div className=\"flex items-center gap-2 text-amber-500 font-bold\">\r\n            <Crown className=\"h-5 w-5 fill-current\" />\r\n            <span>Latam Creativa PRO</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-6 py-12 md:py-20 flex flex-col items-center text-center relative overflow-hidden\">\r\n         {/* Background Effects */}\r\n         <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-3xl h-[500px] bg-amber-500/10 blur-[120px] rounded-full pointer-events-none\"></div>\r\n\r\n         <div className=\"relative z-10 max-w-2xl mx-auto mb-16\">\r\n             <span className=\"inline-block py-1 px-3 rounded-full bg-amber-500/10 border border-amber-500/20 text-amber-600 dark:text-amber-400 text-xs font-bold uppercase tracking-widest mb-6\">\r\n                 Sube de Nivel\r\n             </span>\r\n             <h1 className=\"text-4xl md:text-6xl font-bold text-slate-900 dark:text-white mb-6 leading-tight\">\r\n                 Desbloquea tu m├íximo potencial creativo\r\n             </h1>\r\n             <p className=\"text-lg text-slate-600 dark:text-slate-300 leading-relaxed\">\r\n                 ├Ünete a los profesionales que usan Latam Creativa Pro para acelerar su carrera, acceder a recursos premium y conectar con la ├®lite de la industria.\r\n             </p>\r\n         </div>\r\n\r\n         {/* Features Grid */}\r\n         <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto mb-20 relative z-10\">\r\n             {features.map((feat, idx) => (\r\n                 <div key={idx} className=\"bg-white dark:bg-white/[0.02] p-6 rounded-2xl border border-slate-200 dark:border-white/10 flex flex-col items-center text-center hover:bg-slate-50 dark:hover:bg-white/5 transition-colors\">\r\n                     <div className=\"h-12 w-12 rounded-xl bg-amber-500/10 flex items-center justify-center text-amber-500 mb-4\">\r\n                         <feat.icon className=\"h-6 w-6\" />\r\n                     </div>\r\n                     <h3 className=\"font-bold text-slate-900 dark:text-white mb-2\">{feat.title}</h3>\r\n                     <p className=\"text-sm text-slate-500 dark:text-slate-400\">{feat.desc}</p>\r\n                 </div>\r\n             ))}\r\n         </div>\r\n\r\n         {/* Pricing Section */}\r\n         <div className=\"w-full max-w-5xl mx-auto relative z-10\">\r\n             \r\n             {/* Toggle */}\r\n             <div className=\"flex justify-center mb-10\">\r\n                 <div className=\"bg-slate-100 dark:bg-white/5 p-1 rounded-xl flex relative\">\r\n                     <button \r\n                        onClick={() => setBillingCycle('monthly')}\r\n                        className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${\r\n                            billingCycle === 'monthly' \r\n                            ? 'bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-md' \r\n                            : 'text-slate-500 hover:text-slate-900 dark:hover:text-white'\r\n                        }`}\r\n                     >\r\n                         Mensual\r\n                     </button>\r\n                     <button \r\n                        onClick={() => setBillingCycle('yearly')}\r\n                        className={`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${\r\n                            billingCycle === 'yearly' \r\n                            ? 'bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-md' \r\n                            : 'text-slate-500 hover:text-slate-900 dark:hover:text-white'\r\n                        }`}\r\n                     >\r\n                         Anual <span className=\"text-[10px] bg-green-500 text-white px-1.5 rounded py-0.5\">-20%</span>\r\n                     </button>\r\n                 </div>\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 items-center\">\r\n                 \r\n                 {/* Free Plan */}\r\n                 <div className=\"bg-white dark:bg-white/[0.02] p-8 rounded-3xl border border-slate-200 dark:border-white/10\">\r\n                     <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Gratis</h3>\r\n                     <p className=\"text-sm text-slate-500 mb-6\">Para entusiastas que est├ín empezando.</p>\r\n                     <div className=\"text-3xl font-bold text-slate-900 dark:text-white mb-6\">$0 <span className=\"text-sm font-normal text-slate-500\">/mes</span></div>\r\n                     <button className=\"w-full py-3 rounded-xl border-2 border-slate-200 dark:border-white/10 font-bold text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-white/5 transition-colors mb-8\">\r\n                         Plan Actual\r\n                     </button>\r\n                     <ul className=\"space-y-4 text-left\">\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Acceso a cursos gratuitos\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Portafolio b├ísico\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Comunidad p├║blica\r\n                         </li>\r\n                     </ul>\r\n                 </div>\r\n\r\n                 {/* PRO Plan */}\r\n                 <div className=\"bg-[#18181b] dark:bg-black p-8 rounded-3xl border-2 border-amber-500 relative transform md:scale-110 shadow-2xl shadow-amber-500/20\">\r\n                     <div className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-amber-500 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg\">\r\n                         M├ís Popular\r\n                     </div>\r\n                     <h3 className=\"text-xl font-bold text-white mb-2 flex items-center gap-2\">\r\n                         <Crown className=\"h-5 w-5 text-amber-500 fill-current\" /> Pro\r\n                     </h3>\r\n                     <p className=\"text-sm text-slate-400 mb-6\">Para artistas que buscan la excelencia.</p>\r\n                     <div className=\"text-4xl font-bold text-white mb-6\">\r\n                         ${billingCycle === 'yearly' ? '12' : '15'} \r\n                         <span className=\"text-sm font-normal text-slate-500\">/mes</span>\r\n                     </div>\r\n                     <button className=\"w-full py-3 rounded-xl bg-amber-500 font-bold text-white hover:bg-amber-600 transition-colors mb-8 shadow-lg shadow-amber-500/25\">\r\n                         Mejorar Ahora\r\n                     </button>\r\n                     <ul className=\"space-y-4 text-left\">\r\n                         <li className=\"flex items-start gap-3 text-sm text-white\">\r\n                             <div className=\"bg-amber-500/20 p-0.5 rounded-full\"><Check className=\"h-3.5 w-3.5 text-amber-500 shrink-0\" /></div> \r\n                             Todo lo de Gratis\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-white\">\r\n                             <div className=\"bg-amber-500/20 p-0.5 rounded-full\"><Check className=\"h-3.5 w-3.5 text-amber-500 shrink-0\" /></div>\r\n                             Streaming en 4K\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-white\">\r\n                             <div className=\"bg-amber-500/20 p-0.5 rounded-full\"><Check className=\"h-3.5 w-3.5 text-amber-500 shrink-0\" /></div>\r\n                             Descargas ilimitadas de Assets\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-white\">\r\n                             <div className=\"bg-amber-500/20 p-0.5 rounded-full\"><Check className=\"h-3.5 w-3.5 text-amber-500 shrink-0\" /></div>\r\n                             Insignia Pro en perfil\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-white\">\r\n                             <div className=\"bg-amber-500/20 p-0.5 rounded-full\"><Check className=\"h-3.5 w-3.5 text-amber-500 shrink-0\" /></div>\r\n                             0% comisi├│n en ventas\r\n                         </li>\r\n                     </ul>\r\n                 </div>\r\n\r\n                 {/* Studio Plan */}\r\n                 <div className=\"bg-white dark:bg-white/[0.02] p-8 rounded-3xl border border-slate-200 dark:border-white/10\">\r\n                     <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Studio</h3>\r\n                     <p className=\"text-sm text-slate-500 mb-6\">Para equipos y agencias peque├▒as.</p>\r\n                     <div className=\"text-3xl font-bold text-slate-900 dark:text-white mb-6\">$49 <span className=\"text-sm font-normal text-slate-500\">/mes</span></div>\r\n                     <button className=\"w-full py-3 rounded-xl border-2 border-slate-200 dark:border-white/10 font-bold text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-white/5 transition-colors mb-8\">\r\n                         Contactar Ventas\r\n                     </button>\r\n                     <ul className=\"space-y-4 text-left\">\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> 5 Cuentas Pro\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Panel de administraci├│n\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Facturaci├│n centralizada\r\n                         </li>\r\n                         <li className=\"flex items-start gap-3 text-sm text-slate-600 dark:text-slate-300\">\r\n                             <Check className=\"h-5 w-5 text-slate-400 shrink-0\" /> Soporte prioritario 24/7\r\n                         </li>\r\n                     </ul>\r\n                 </div>\r\n\r\n             </div>\r\n         </div>\r\n\r\n         {/* FAQ CTA */}\r\n         <div className=\"mt-20 relative z-10\">\r\n             <p className=\"text-slate-500 dark:text-slate-400 text-sm\">\r\n                 ┬┐Tienes preguntas? <a href=\"#\" className=\"text-amber-500 hover:underline\">Revisa nuestras preguntas frecuentes</a> o contacta a soporte.\r\n             </p>\r\n         </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\SettingsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4854,4857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4854,4857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6357,6360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6357,6360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7288,7291],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7288,7291],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Bell, Shield, CreditCard, LogOut, Mail, Lock, ArrowLeft, Loader2, CheckCircle, Receipt, Eye, EyeOff } from 'lucide-react';\r\n\r\ninterface SettingsViewProps {\r\n  onBack?: () => void;\r\n}\r\n\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { usersService } from '../../services/modules/users';\r\n\r\nexport const SettingsView: React.FC<SettingsViewProps> = ({ onBack }) => {\r\n  const { state } = useAppStore();\r\n  const { contentMode } = state;\r\n  const [activeTab, setActiveTab] = useState('account');\r\n\r\n  const tabs = [\r\n    { id: 'account', label: 'Cuenta', icon: Shield },\r\n    { id: 'notifications', label: 'Notificaciones', icon: Bell },\r\n    { id: 'billing', label: 'Facturaci├│n', icon: CreditCard },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto px-6 py-12 animate-fade-in pb-24\">\r\n      <div className=\"flex items-center gap-4 mb-8\">\r\n        {onBack && (\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"h-6 w-6\" />\r\n          </button>\r\n        )}\r\n        <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white\">Configuraci├│n</h1>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n        {/* Sidebar Navigation */}\r\n        <div className=\"md:col-span-1 space-y-1\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium text-sm ${activeTab === tab.id\r\n                ? (contentMode === 'dev' ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/20' : 'bg-amber-500 text-white shadow-lg shadow-amber-500/20')\r\n                : 'text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white'\r\n                }`}\r\n            >\r\n              <tab.icon className=\"h-5 w-5\" />\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n          <div className=\"h-px bg-slate-200 dark:bg-white/10 my-4 mx-2\"></div>\r\n          <button className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-500/10 transition-colors font-medium text-sm\">\r\n            <LogOut className=\"h-5 w-5\" /> Cerrar Sesi├│n\r\n          </button>\r\n        </div>\r\n\r\n        {/* Main Content Area */}\r\n        <div className=\"md:col-span-3 bg-white dark:bg-white/[0.02] border border-slate-200 dark:border-white/10 rounded-2xl p-8 min-h-[600px]\">\r\n          {activeTab === 'account' && <AccountSettings />}\r\n          {activeTab === 'notifications' && <NotificationSettings />}\r\n          {activeTab === 'billing' && <BillingSettings />}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst AccountSettings = () => {\r\n  const { state, actions } = useAppStore();\r\n  const { contentMode, user } = state;\r\n  const navigate = useNavigate();\r\n\r\n  const focusClass = contentMode === 'dev' ? 'focus:border-blue-500 focus:ring-blue-500' : 'focus:border-amber-500 focus:ring-amber-500';\r\n  const buttonClass = contentMode === 'dev' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-amber-500 hover:bg-amber-600';\r\n\r\n  // Email change state\r\n  const [newEmail, setNewEmail] = useState('');\r\n  const [emailPassword, setEmailPassword] = useState('');\r\n  const [isChangingEmail, setIsChangingEmail] = useState(false);\r\n\r\n  // Password change state\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [isChangingPassword, setIsChangingPassword] = useState(false);\r\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false);\r\n  const [showNewPassword, setShowNewPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n\r\n  // Delete account state\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [deletePassword, setDeletePassword] = useState('');\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  // Handle email change\r\n  const handleEmailChange = async () => {\r\n    if (!newEmail.trim() || !emailPassword) {\r\n      actions.showToast('Completa todos los campos', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsChangingEmail(true);\r\n    try {\r\n      await usersService.updateUserEmail(newEmail.trim(), emailPassword);\r\n      actions.showToast('Email actualizado. Revisa tu correo para verificar.', 'success');\r\n      setNewEmail('');\r\n      setEmailPassword('');\r\n    } catch (error: any) {\r\n      console.error('Error changing email:', error);\r\n      if (error.code === 'auth/wrong-password') {\r\n        actions.showToast('Contrase├▒a incorrecta', 'error');\r\n      } else if (error.code === 'auth/email-already-in-use') {\r\n        actions.showToast('Este email ya est├í en uso', 'error');\r\n      } else if (error.code === 'auth/invalid-email') {\r\n        actions.showToast('Email inv├ílido', 'error');\r\n      } else {\r\n        actions.showToast(error.message || 'Error al cambiar email', 'error');\r\n      }\r\n    } finally {\r\n      setIsChangingEmail(false);\r\n    }\r\n  };\r\n\r\n  // Handle password change\r\n  const handlePasswordChange = async () => {\r\n    if (!currentPassword || !newPassword || !confirmPassword) {\r\n      actions.showToast('Completa todos los campos', 'error');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      actions.showToast('Las contrase├▒as no coinciden', 'error');\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 8 || !/[A-Z]/.test(newPassword) || !/[0-9]/.test(newPassword) || !/[^A-Za-z0-9]/.test(newPassword)) {\r\n      actions.showToast('La contrase├▒a no cumple con los requisitos m├¡nimos', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsChangingPassword(true);\r\n    try {\r\n      await usersService.updateUserPassword(currentPassword, newPassword);\r\n      actions.showToast('Contrase├▒a actualizada correctamente', 'success');\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n    } catch (error: any) {\r\n      console.error('Error changing password:', error);\r\n      if (error.code === 'auth/wrong-password') {\r\n        actions.showToast('Contrase├▒a actual incorrecta', 'error');\r\n      } else if (error.code === 'auth/weak-password') {\r\n        actions.showToast('La contrase├▒a es muy d├®bil', 'error');\r\n      } else {\r\n        actions.showToast(error.message || 'Error al cambiar contrase├▒a', 'error');\r\n      }\r\n    } finally {\r\n      setIsChangingPassword(false);\r\n    }\r\n  };\r\n\r\n  // Handle account deletion\r\n  const handleDeleteAccount = async () => {\r\n    if (!deletePassword) {\r\n      actions.showToast('Ingresa tu contrase├▒a para confirmar', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      await usersService.deleteUserAccount(deletePassword);\r\n      actions.setUser(null);\r\n      actions.showToast('Cuenta eliminada correctamente', 'success');\r\n      navigate('/');\r\n    } catch (error: any) {\r\n      console.error('Error deleting account:', error);\r\n      if (error.code === 'auth/wrong-password') {\r\n        actions.showToast('Contrase├▒a incorrecta', 'error');\r\n      } else {\r\n        actions.showToast(error.message || 'Error al eliminar cuenta', 'error');\r\n      }\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fade-in\">\r\n      <div>\r\n        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-1\">Cuenta & Seguridad</h2>\r\n        <p className=\"text-sm text-slate-500 dark:text-slate-400\">Gestiona tus credenciales y acceso.</p>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* Current Email Display */}\r\n        <div className=\"p-4 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10\">\r\n          <p className=\"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1\">Email Actual</p>\r\n          <p className=\"text-slate-900 dark:text-white font-medium\">{user?.email || 'No disponible'}</p>\r\n        </div>\r\n\r\n        {/* Change Email Section */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">Cambiar Email</h3>\r\n          <div className=\"space-y-4 max-w-md\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Nuevo Email</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  type=\"email\"\r\n                  value={newEmail}\r\n                  onChange={(e) => setNewEmail(e.target.value)}\r\n                  placeholder=\"nuevo@email.com\"\r\n                  className={`w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${focusClass}`}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Contrase├▒a Actual</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  type=\"password\"\r\n                  value={emailPassword}\r\n                  onChange={(e) => setEmailPassword(e.target.value)}\r\n                  placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                  className={`w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${focusClass}`}\r\n                />\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={handleEmailChange}\r\n              disabled={isChangingEmail || !newEmail || !emailPassword}\r\n              className={`px-6 py-2.5 text-white font-bold rounded-xl text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 ${buttonClass}`}\r\n            >\r\n              {isChangingEmail ? (\r\n                <><Loader2 className=\"h-4 w-4 animate-spin\" /> Actualizando...</>\r\n              ) : (\r\n                'Actualizar Email'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-6 border-t border-slate-200 dark:border-white/10\">\r\n          <h3 className=\"text-lg font-bold text-slate-900 dark:text-white mb-4\">Cambiar Contrase├▒a</h3>\r\n          <div className=\"space-y-4 max-w-md\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Contrase├▒a Actual</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  type={showCurrentPassword ? \"text\" : \"password\"}\r\n                  value={currentPassword}\r\n                  onChange={(e) => setCurrentPassword(e.target.value)}\r\n                  placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                  className={`w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-12 py-2.5 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${focusClass}`}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCurrentPassword(!showCurrentPassword)}\r\n                  className=\"absolute right-3 top-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-0.5\"\r\n                >\r\n                  {showCurrentPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Nueva Contrase├▒a</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  type={showNewPassword ? \"text\" : \"password\"}\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                  placeholder=\"M├¡nimo 8 caracteres\"\r\n                  className={`w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-12 py-2.5 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${focusClass}`}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowNewPassword(!showNewPassword)}\r\n                  className=\"absolute right-3 top-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-0.5\"\r\n                >\r\n                  {showNewPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                </button>\r\n              </div>\r\n              {/* Password Requirements Checklist */}\r\n              {newPassword && (\r\n                <div className=\"grid grid-cols-2 gap-2 mt-2\">\r\n                  {[\r\n                    { label: '8+ Caracteres', valid: newPassword.length >= 8 },\r\n                    { label: 'May├║scula', valid: /[A-Z]/.test(newPassword) },\r\n                    { label: 'N├║mero', valid: /[0-9]/.test(newPassword) },\r\n                    { label: 'S├¡mbolo', valid: /[^A-Za-z0-9]/.test(newPassword) }\r\n                  ].map((req, index) => (\r\n                    <div key={index} className=\"flex items-center gap-1.5\">\r\n                      <div className={`h-1.5 w-1.5 rounded-full ${req.valid ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-700'}`}></div>\r\n                      <span className={`text-[10px] font-medium ${req.valid ? 'text-green-500' : 'text-slate-500 dark:text-slate-400'}`}>\r\n                        {req.label}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Confirmar Nueva Contrase├▒a</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  type={showConfirmPassword ? \"text\" : \"password\"}\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  placeholder=\"Repite la nueva contrase├▒a\"\r\n                  className={`w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-12 py-2.5 text-slate-900 dark:text-white outline-none transition-all focus:ring-1 ${focusClass}`}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                  className=\"absolute right-3 top-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-0.5\"\r\n                >\r\n                  {showConfirmPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                </button>\r\n              </div>\r\n              {newPassword && confirmPassword && newPassword !== confirmPassword && (\r\n                <p className=\"text-xs text-red-500 mt-1\">Las contrase├▒as no coinciden</p>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={handlePasswordChange}\r\n              disabled={isChangingPassword || !currentPassword || !newPassword || !confirmPassword || newPassword !== confirmPassword || newPassword.length < 8 || !/[A-Z]/.test(newPassword) || !/[0-9]/.test(newPassword) || !/[^A-Za-z0-9]/.test(newPassword)}\r\n              className={`px-6 py-2.5 text-white font-bold rounded-xl text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 ${buttonClass}`}\r\n            >\r\n              {isChangingPassword ? (\r\n                <><Loader2 className=\"h-4 w-4 animate-spin\" /> Actualizando...</>\r\n              ) : (\r\n                'Actualizar Contrase├▒a'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-6 border-t border-slate-200 dark:border-white/10\">\r\n          <h3 className=\"text-lg font-bold text-red-500 mb-2\">Zona de Peligro</h3>\r\n          <p className=\"text-sm text-slate-500 mb-4\">Una vez que elimines tu cuenta, no hay vuelta atr├ís. Todos tus datos ser├ín eliminados permanentemente.</p>\r\n          <button\r\n            onClick={() => setShowDeleteModal(true)}\r\n            className=\"px-6 py-2.5 border border-red-500 text-red-500 font-bold rounded-xl text-sm hover:bg-red-500/10 transition-colors\"\r\n          >\r\n            Eliminar Cuenta\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Delete Account Modal */}\r\n      {showDeleteModal && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in\">\r\n          <div className=\"bg-white dark:bg-[#1A1A1C] rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-slate-200 dark:border-white/10\">\r\n            <h3 className=\"text-xl font-bold text-red-500 mb-2\">┬┐Eliminar cuenta?</h3>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mb-6\">\r\n              Esta acci├│n es irreversible. Se eliminar├ín todos tus datos, incluyendo tu perfil, proyectos y art├¡culos.\r\n            </p>\r\n            <div className=\"space-y-4 mb-6\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Confirma tu contrase├▒a</label>\r\n                <div className=\"relative\">\r\n                  <Lock className=\"absolute left-3 top-3 h-5 w-5 text-slate-400\" />\r\n                  <input\r\n                    type=\"password\"\r\n                    value={deletePassword}\r\n                    onChange={(e) => setDeletePassword(e.target.value)}\r\n                    placeholder=\"ÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇóÔÇó\"\r\n                    className=\"w-full bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-slate-900 dark:text-white outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowDeleteModal(false);\r\n                  setDeletePassword('');\r\n                }}\r\n                className=\"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-white/10 text-slate-700 dark:text-white font-bold rounded-xl text-sm hover:bg-slate-200 dark:hover:bg-white/20 transition-colors\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={handleDeleteAccount}\r\n                disabled={isDeleting || !deletePassword}\r\n                className=\"flex-1 px-4 py-2.5 bg-red-500 text-white font-bold rounded-xl text-sm hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n              >\r\n                {isDeleting ? (\r\n                  <><Loader2 className=\"h-4 w-4 animate-spin\" /> Eliminando...</>\r\n                ) : (\r\n                  'Eliminar Cuenta'\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst NotificationSettings = () => {\r\n  const { state, actions } = useAppStore();\r\n  const { contentMode, user } = state;\r\n  const activeColorFull = contentMode === 'dev' ? 'bg-blue-600' : 'bg-amber-500';\r\n\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [lastSaved, setLastSaved] = useState<Date | null>(null);\r\n\r\n  // Default notification preferences\r\n  const defaultPreferences = {\r\n    emailDigest: true,\r\n    newFollower: true,\r\n    comments: true,\r\n    likes: false,\r\n    projectUpdates: true,\r\n    platformNews: false\r\n  };\r\n\r\n  // Load preferences from user profile or use defaults\r\n  const [preferences, setPreferences] = useState(() => {\r\n    if (user?.notificationPreferences) {\r\n      return { ...defaultPreferences, ...user.notificationPreferences };\r\n    }\r\n    return defaultPreferences;\r\n  });\r\n\r\n  // Save preferences to Firestore\r\n  const savePreferences = async (newPreferences: typeof preferences) => {\r\n    if (!user?.id) return;\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      await usersService.updateUserProfile(user.id, {\r\n        notificationPreferences: newPreferences\r\n      });\r\n      setLastSaved(new Date());\r\n      // Update local state\r\n      actions.setUser({ ...user, notificationPreferences: newPreferences });\r\n    } catch (error) {\r\n      console.error('Error saving notification preferences:', error);\r\n      actions.showToast('Error al guardar preferencias', 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // Toggle a preference and save\r\n  const togglePreference = (key: keyof typeof preferences) => {\r\n    const newPreferences = { ...preferences, [key]: !preferences[key] };\r\n    setPreferences(newPreferences);\r\n    savePreferences(newPreferences);\r\n  };\r\n\r\n  const notificationOptions = [\r\n    {\r\n      category: 'Actividad Social',\r\n      items: [\r\n        { key: 'newFollower', title: 'Nuevos Seguidores', desc: 'Cuando alguien comience a seguirte.' },\r\n        { key: 'comments', title: 'Comentarios', desc: 'Cuando alguien comente en tus proyectos o art├¡culos.' },\r\n        { key: 'likes', title: 'Me Gusta', desc: 'Cuando alguien le d├® like a tu contenido.' },\r\n      ]\r\n    },\r\n    {\r\n      category: 'Contenido',\r\n      items: [\r\n        { key: 'projectUpdates', title: 'Actualizaciones de Proyectos', desc: 'Cuando artistas que sigues publiquen nuevo contenido.' },\r\n      ]\r\n    },\r\n    {\r\n      category: 'Email',\r\n      items: [\r\n        { key: 'emailDigest', title: 'Resumen Semanal', desc: 'Un correo semanal con los mejores proyectos y art├¡culos.' },\r\n        { key: 'platformNews', title: 'Novedades de la Plataforma', desc: 'Anuncios sobre nuevas funciones de Latam Creativa.' },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fade-in\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-1\">Preferencias de Notificaci├│n</h2>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">Elige c├│mo y cu├índo quieres que te contactemos.</p>\r\n        </div>\r\n        {/* Save Status Indicator */}\r\n        <div className=\"flex items-center gap-2 text-xs\">\r\n          {isSaving ? (\r\n            <span className=\"flex items-center gap-1.5 text-slate-500\">\r\n              <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n              Guardando...\r\n            </span>\r\n          ) : lastSaved ? (\r\n            <span className=\"text-green-500 flex items-center gap-1\">\r\n              <CheckCircle className=\"h-3 w-3\" />\r\n              Guardado\r\n            </span>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-8\">\r\n        {notificationOptions.map((section) => (\r\n          <div key={section.category}>\r\n            <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4\">{section.category}</h3>\r\n            <div className=\"space-y-3\">\r\n              {section.items.map((item) => (\r\n                <div\r\n                  key={item.key}\r\n                  className=\"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/5 hover:border-slate-300 dark:hover:border-white/10 transition-colors\"\r\n                >\r\n                  <div>\r\n                    <h4 className=\"font-bold text-slate-900 dark:text-white text-sm\">{item.title}</h4>\r\n                    <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">{item.desc}</p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => togglePreference(item.key as keyof typeof preferences)}\r\n                    disabled={isSaving}\r\n                    className={`w-12 h-6 rounded-full transition-colors relative ${preferences[item.key as keyof typeof preferences] ? activeColorFull : 'bg-slate-300 dark:bg-white/10'} ${isSaving ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                  >\r\n                    <div className={`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform shadow-sm ${preferences[item.key as keyof typeof preferences] ? 'translate-x-6' : 'translate-x-0'}`}></div>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Info Note */}\r\n      <div className=\"p-4 rounded-xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20 text-sm text-blue-700 dark:text-blue-300\">\r\n        <p>\r\n          <strong>Nota:</strong> Las notificaciones en la app siempre estar├ín activas para mantener la comunicaci├│n esencial.\r\n          Aqu├¡ puedes controlar las notificaciones por email y las no esenciales.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst BillingSettings = () => {\r\n  const { state } = useAppStore();\r\n  const { contentMode, user } = state;\r\n  const navigate = useNavigate();\r\n\r\n  const buttonClass = contentMode === 'dev' ? 'bg-blue-600 hover:bg-blue-700' : 'bg-amber-500 hover:bg-amber-600';\r\n  const gradientBlob = contentMode === 'dev' ? 'bg-blue-500/20' : 'bg-amber-500/20';\r\n  const accentColor = contentMode === 'dev' ? 'text-blue-500' : 'text-amber-500';\r\n  const accentBorder = contentMode === 'dev' ? 'border-blue-500/30' : 'border-amber-500/30';\r\n\r\n  // Check if user is Pro (could be stored in user profile)\r\n  const isPro = user?.role === 'Pro' || user?.role === 'Administrator';\r\n\r\n  return (\r\n    <div className=\"space-y-8 animate-fade-in\">\r\n      <div>\r\n        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-1\">Facturaci├│n y Planes</h2>\r\n        <p className=\"text-sm text-slate-500 dark:text-slate-400\">Gestiona tu suscripci├│n y m├®todos de pago.</p>\r\n      </div>\r\n\r\n      {/* Current Plan Card */}\r\n      <div className=\"p-6 rounded-2xl bg-gradient-to-br from-slate-900 to-slate-800 text-white relative overflow-hidden shadow-xl\">\r\n        <div className={`absolute top-0 right-0 w-64 h-64 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none ${gradientBlob}`}></div>\r\n        <div className=\"relative z-10 flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4\">\r\n          <div>\r\n            <p className=\"text-slate-400 text-xs font-bold uppercase tracking-widest mb-2\">Plan Actual</p>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{isPro ? 'Pro' : 'Gratuito'}</h3>\r\n            <p className=\"text-slate-300 text-sm\">\r\n              {isPro\r\n                ? 'Acceso completo a todas las funciones premium.'\r\n                : 'Funciones b├ísicas para comenzar a crear.'}\r\n            </p>\r\n          </div>\r\n          {!isPro && (\r\n            <button\r\n              onClick={() => navigate('/pro')}\r\n              className={`px-6 py-2.5 text-white font-bold rounded-xl text-sm shadow-lg transition-colors whitespace-nowrap ${buttonClass}`}\r\n            >\r\n              Mejorar a Pro\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Plan Features */}\r\n        <div className=\"relative z-10 mt-6 pt-6 border-t border-white/10\">\r\n          <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3\">Tu plan incluye:</p>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            {(isPro ? [\r\n              'Proyectos ilimitados',\r\n              'Sin marca de agua',\r\n              'Estad├¡sticas avanzadas',\r\n              'Soporte prioritario',\r\n              'Badge Pro en perfil',\r\n              'Acceso anticipado a nuevas funciones'\r\n            ] : [\r\n              'Hasta 10 proyectos',\r\n              'Portafolio b├ísico',\r\n              'Estad├¡sticas b├ísicas',\r\n              'Soporte por email'\r\n            ]).map((feature, index) => (\r\n              <div key={index} className=\"flex items-center gap-2 text-sm text-slate-300\">\r\n                <CheckCircle className=\"h-4 w-4 text-green-400 shrink-0\" />\r\n                {feature}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Payment Methods - Coming Soon */}\r\n      <div>\r\n        <h3 className=\"text-lg font-bold text-slate-900 dark:text-white mb-4\">M├®todos de Pago</h3>\r\n        <div className={`p-6 border-2 border-dashed ${accentBorder} rounded-xl text-center`}>\r\n          <div className={`mx-auto w-12 h-12 rounded-full flex items-center justify-center mb-3 ${contentMode === 'dev' ? 'bg-blue-500/10' : 'bg-amber-500/10'}`}>\r\n            <CreditCard className={`h-6 w-6 ${accentColor}`} />\r\n          </div>\r\n          <h4 className=\"font-bold text-slate-900 dark:text-white mb-1\">Pr├│ximamente</h4>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400 max-w-sm mx-auto\">\r\n            Estamos trabajando en integrar pagos seguros. Pronto podr├ís agregar tarjetas y gestionar tu suscripci├│n.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Billing History - Coming Soon */}\r\n      <div>\r\n        <h3 className=\"text-lg font-bold text-slate-900 dark:text-white mb-4\">Historial de Facturas</h3>\r\n        <div className=\"border border-slate-200 dark:border-white/10 rounded-xl overflow-hidden\">\r\n          <div className=\"p-8 text-center bg-slate-50 dark:bg-white/[0.02]\">\r\n            <div className=\"mx-auto w-12 h-12 rounded-full bg-slate-200 dark:bg-white/10 flex items-center justify-center mb-3\">\r\n              <Receipt className=\"h-6 w-6 text-slate-400\" />\r\n            </div>\r\n            <h4 className=\"font-bold text-slate-700 dark:text-slate-300 mb-1\">Sin facturas a├║n</h4>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n              {isPro\r\n                ? 'Tus facturas aparecer├ín aqu├¡ cuando proceses un pago.'\r\n                : 'Cuando actualices a Pro, tus facturas aparecer├ín aqu├¡.'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Info Note */}\r\n      <div className={`p-4 rounded-xl border text-sm ${contentMode === 'dev' ? 'bg-blue-50 dark:bg-blue-500/10 border-blue-200 dark:border-blue-500/20 text-blue-700 dark:text-blue-300' : 'bg-amber-50 dark:bg-amber-500/10 border-amber-200 dark:border-amber-500/20 text-amber-700 dark:text-amber-300'}`}>\r\n        <p>\r\n          <strong>┬┐Tienes preguntas?</strong> Contacta a nuestro equipo en <span className=\"font-bold\">soporte@latamcreativa.com</span> para cualquier consulta sobre facturaci├│n.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\UserProfileView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onItemSelect' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":95,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":107},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1683,1686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1683,1686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6828,6831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6828,6831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'articlesLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":171,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":171,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useAppStore } from '../../hooks/useAppStore';\r\nimport { EditProfileModal } from '../../components/modals/EditProfileModal';\r\nimport { ConfirmationModal } from '../../components/modals/ConfirmationModal';\r\nimport { useUserArticles, useDeleteProject, useUserProjects } from '../../hooks/useFirebase';\r\nimport { usersService } from '../../services/modules/users';\r\nimport { collectionsService } from '../../services/modules/collections';\r\nimport { useUserProfileData } from '../../hooks/useUserProfileData';\r\nimport { shouldCountView } from '../../utils/viewTracking';\r\nimport { UserProfileHeader } from './components/UserProfileHeader';\r\nimport { UserProfileStats } from './components/UserProfileStats';\r\nimport { UserProfileInfo } from './components/UserProfileInfo';\r\nimport { UserProfileTabs } from './components/UserProfileTabs';\r\nimport { CollectionItem } from '../../types';\r\n\r\ninterface UserProfileViewProps {\r\n    author?: { name: string; avatar?: string; id?: string } | null;\r\n    authorName?: string;\r\n    onBack: () => void;\r\n    onItemSelect: (id: string, type: 'portfolio' | 'blog' | 'course' | 'asset') => void;\r\n    onOpenChat?: (authorName: string) => void;\r\n}\r\n\r\nexport const UserProfileView: React.FC<UserProfileViewProps> = ({ author, authorName, onBack, onItemSelect, onOpenChat }) => {\r\n    const { state, actions } = useAppStore();\r\n    const navigate = useNavigate();\r\n    const { isOwnProfile, displayUser, fetchedUser } = useUserProfileData(author, authorName);\r\n\r\n    const sanitizeName = (val: any) => {\r\n        if (!val) return 'Unknown User';\r\n        if (typeof val === 'string' && val === '[object Object]') return 'Unknown User';\r\n        if (typeof val === 'object') {\r\n            return val.name || val.displayName || val.userName || 'Unknown User';\r\n        }\r\n        return String(val);\r\n    };\r\n\r\n    const name = sanitizeName(displayUser.name);\r\n\r\n    const [activeTab, setActiveTab] = useState<'portfolio' | 'blog' | 'collections'>('portfolio');\r\n    const [isFollowing, setIsFollowing] = useState(false);\r\n    const [isFollowLoading, setIsFollowLoading] = useState(false);\r\n\r\n    // Check initial subscription status\r\n    useEffect(() => {\r\n        const checkStatus = async () => {\r\n            if (state.user && displayUser.id && displayUser.id !== 'unknown') {\r\n                setIsFollowLoading(true);\r\n                try {\r\n                    const status = await usersService.getSubscriptionStatus(displayUser.id, state.user.id);\r\n                    setIsFollowing(status);\r\n                } catch (error) {\r\n                    console.error(\"Failed to check subscription status:\", error);\r\n                } finally {\r\n                    setIsFollowLoading(false);\r\n                }\r\n            }\r\n        };\r\n        checkStatus();\r\n    }, [state.user, displayUser.id]);\r\n\r\n    const handleFollowToggle = async () => {\r\n        if (!state.user) {\r\n            actions.showToast(\"Inicia sesi├│n para seguir a creadores\", \"info\");\r\n            return;\r\n        }\r\n\r\n        // Prevent rapid clicks\r\n        if (isFollowLoading) return;\r\n\r\n        const targetId = displayUser.id;\r\n        if (!targetId || targetId === 'unknown') {\r\n            console.error(\"No user ID found for follow\");\r\n            return;\r\n        }\r\n\r\n        setIsFollowLoading(true);\r\n        const previousState = isFollowing;\r\n        setIsFollowing(!previousState); // Optimistic UI\r\n\r\n        try {\r\n            if (previousState) {\r\n                await usersService.unsubscribeFromUser(targetId, state.user.id);\r\n            } else {\r\n                await usersService.subscribeToUser(targetId, state.user.id);\r\n            }\r\n            actions.triggerSubscriptionUpdate(); // To update sidebar, etc.\r\n        } catch (error) {\r\n            console.error(\"Follow toggle error:\", error);\r\n            setIsFollowing(previousState); // Rollback on error\r\n            actions.showToast(\"Error al actualizar seguimiento\", \"error\");\r\n        } finally {\r\n            setIsFollowLoading(false);\r\n        }\r\n    };\r\n\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n\r\n    const userIdForQuery = isOwnProfile ? state.user?.id : fetchedUser?.id;\r\n    const { projects: userPortfolio, loading: projectsLoading, removeProject: removeProjectFromList } = useUserProjects(userIdForQuery, undefined);\r\n\r\n    const { deleteProject, loading: isDeleting } = useDeleteProject();\r\n    const [projectToDelete, setProjectToDelete] = useState<string | null>(null);\r\n\r\n    const handleDeleteProject = (projectId: string) => {\r\n        setProjectToDelete(projectId);\r\n    };\r\n\r\n    const handleConfirmDelete = async () => {\r\n        if (!projectToDelete) return;\r\n\r\n        try {\r\n            // Optimistic UI update first\r\n            removeProjectFromList(projectToDelete);\r\n            setProjectToDelete(null); // Close modal immediately\r\n\r\n            // Then perform DB deletion\r\n            await deleteProject(projectToDelete);\r\n\r\n            actions.showToast('Proyecto eliminado correctamente', 'success');\r\n        } catch (error) {\r\n            console.error(\"Error deleting project:\", error);\r\n            actions.showToast('Error al eliminar el proyecto', 'error');\r\n            // Here you might want to add the project back to the list if deletion fails\r\n            // For now, we just show an error.\r\n            setProjectToDelete(null); // Ensure modal is closed on error too\r\n        }\r\n    };\r\n\r\n    // --- Dynamic Data for Own Profile vs Demo Profile ---\r\n    // DISABLED: We want real data or empty state\r\n    // const showMockData = false; \r\n\r\n    // Stats state\r\n    const [totalLikes, setTotalLikes] = useState<number>(0);\r\n\r\n    // Effect: Increment profile views (only for visitors, not own profile, once per 24h)\r\n    useEffect(() => {\r\n        if (displayUser.id && displayUser.id !== 'unknown' && !isOwnProfile) {\r\n            if (shouldCountView('profile', displayUser.id)) {\r\n                usersService.incrementProfileViews(displayUser.id);\r\n            }\r\n        }\r\n    }, [displayUser.id, isOwnProfile]);\r\n\r\n    // Effect: Calculate total likes from all user's projects\r\n    useEffect(() => {\r\n        const loadTotalLikes = async () => {\r\n            const userId = isOwnProfile ? state.user?.id : fetchedUser?.id;\r\n            if (userId) {\r\n                const likes = await usersService.getTotalProjectLikes(userId);\r\n                setTotalLikes(likes);\r\n            }\r\n        };\r\n        loadTotalLikes();\r\n    }, [isOwnProfile, state.user?.id, fetchedUser?.id]);\r\n\r\n    // Stats - combine stored stats with computed totalLikes\r\n    const storedStats = (displayUser['stats'] as any) || {};\r\n    const stats = {\r\n        views: storedStats.views || 0,\r\n        likes: totalLikes || storedStats.likes || 0,\r\n        followers: storedStats.followers || 0\r\n    };\r\n\r\n\r\n\r\n    // 4. Blog\r\n    const { articles: userArticles, loading: articlesLoading, error: articlesError } = useUserArticles(name, userIdForQuery);\r\n\r\n\r\n    // 5. Saved Items (Likes)\r\n    const savedItems = useMemo(() => {\r\n        // NOTE: Not implemented - saved items feature pending product decision\r\n        return [];\r\n    }, []);\r\n\r\n    // 6. Collections\r\n    const [otherUserCollections, setOtherUserCollections] = useState<CollectionItem[]>([]);\r\n\r\n    // Fetch own collections when tab is selected (from store)\r\n    useEffect(() => {\r\n        if (activeTab === 'collections' && isOwnProfile && state.user) {\r\n            actions.fetchCollections();\r\n        }\r\n    }, [activeTab, isOwnProfile, state.user, actions]);\r\n\r\n    // Fetch other user's PUBLIC collections when viewing their profile (on load, not just tab click)\r\n    useEffect(() => {\r\n        const fetchPublicCollections = async () => {\r\n            if (!isOwnProfile && fetchedUser?.id) {\r\n                try {\r\n                    const publicCols = await collectionsService.getPublicUserCollections(fetchedUser.id);\r\n                    setOtherUserCollections(publicCols);\r\n                } catch (error) {\r\n                    console.error('Error fetching public collections:', error);\r\n                }\r\n            }\r\n        };\r\n        // Fetch immediately when viewing another user's profile\r\n        if (!isOwnProfile && fetchedUser?.id) {\r\n            fetchPublicCollections();\r\n        }\r\n    }, [isOwnProfile, fetchedUser?.id]);\r\n\r\n    const userCollections = useMemo(() => {\r\n        if (isOwnProfile) return state.collections;\r\n        return otherUserCollections;\r\n    }, [isOwnProfile, state.collections, otherUserCollections]);\r\n\r\n    return (\r\n        <div className=\"w-full max-w-[2560px] mx-auto animate-fade-in pb-20\">\r\n\r\n            {/* Edit Modal */}\r\n            <ConfirmationModal\r\n                isOpen={!!projectToDelete}\r\n                onClose={() => setProjectToDelete(null)}\r\n                onConfirm={handleConfirmDelete}\r\n                title=\"Eliminar Proyecto\"\r\n                message=\"┬┐Est├ís seguro de que deseas eliminar este proyecto? Esta acci├│n es permanente y tambi├®n eliminar├í todas las im├ígenes asociadas.\"\r\n                confirmText=\"S├¡, eliminar\"\r\n                cancelText=\"Cancelar\"\r\n                type=\"danger\"\r\n                loading={isDeleting}\r\n            />\r\n\r\n            <EditProfileModal isOpen={isEditModalOpen} onClose={() => setIsEditModalOpen(false)} />\r\n\r\n            {/* Navigation */}\r\n            <div className=\"fixed top-0 left-0 right-0 z-40 px-6 py-4 pointer-events-none\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"pointer-events-auto flex items-center gap-2 px-4 py-2.5 rounded-full bg-black/50 backdrop-blur-md text-white hover:bg-black/70 transition-colors font-medium text-sm border border-white/10\"\r\n                >\r\n                    <ArrowLeft className=\"h-4 w-4\" />\r\n                    <span>Volver</span>\r\n                </button>\r\n            </div>\r\n\r\n            <UserProfileHeader\r\n                displayUser={displayUser}\r\n                isOwnProfile={isOwnProfile}\r\n                isFollowing={isFollowing}\r\n                isFollowLoading={isFollowLoading}\r\n                onFollowToggle={handleFollowToggle}\r\n                onOpenChat={onOpenChat}\r\n                onEditProfile={() => setIsEditModalOpen(true)}\r\n            />\r\n\r\n            {/* Content Layout - Fixed Sidebar Width for Large Screens */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-[380px_1fr] 2xl:grid-cols-[450px_1fr] gap-12 px-6 md:px-12 2xl:px-20\">\r\n\r\n                {/* Left Sidebar (Stats, About, Experience) */}\r\n                <div className=\"space-y-10 order-2 lg:order-1\">\r\n                    <UserProfileStats stats={stats} />\r\n                    <UserProfileInfo displayUser={displayUser} isOwnProfile={isOwnProfile} />\r\n                </div>\r\n\r\n                {/* Main Content (Tabs & Grid) */}\r\n                <div className=\"order-1 lg:order-2\">\r\n                    <UserProfileTabs\r\n                        activeTab={activeTab}\r\n                        setActiveTab={setActiveTab}\r\n                        isOwnProfile={isOwnProfile}\r\n                        profileUserId={displayUser.id}\r\n                        userPortfolio={userPortfolio}\r\n                        userArticles={userArticles}\r\n                        savedItems={savedItems}\r\n                        userCollections={userCollections}\r\n                        projectsLoading={projectsLoading}\r\n                        articlesError={articlesError}\r\n                        onDeleteProject={handleDeleteProject}\r\n                        onSaveItem={actions.openSaveModal}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\components\\UserProfileHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[200,203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[200,203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { MapPin, Link as LinkIcon, Calendar, CheckCircle2, UserPlus, MessageSquare, Settings } from 'lucide-react';\r\n\r\ninterface UserProfileHeaderProps {\r\n    displayUser: any;\r\n    isOwnProfile: boolean;\r\n    isFollowing: boolean;\r\n    isFollowLoading: boolean;\r\n    onFollowToggle: () => void;\r\n    onOpenChat?: (name: string) => void;\r\n    onEditProfile: () => void;\r\n}\r\n\r\nexport const UserProfileHeader: React.FC<UserProfileHeaderProps> = ({\r\n    displayUser,\r\n    isOwnProfile,\r\n    isFollowing,\r\n    isFollowLoading,\r\n    onFollowToggle,\r\n    onOpenChat,\r\n    onEditProfile\r\n}) => {\r\n    const name = displayUser.name || 'Unknown User';\r\n    const availableForWork = displayUser.availableForWork;\r\n    const socialLinks = displayUser.socialLinks || {};\r\n\r\n    // Simplified Level Logic for pure display (can be prop if needed dynamic)\r\n    const getLevelFrameClass = (role?: string) => {\r\n        // Simple logic based on role for now as per previous implementation\r\n        if (role === 'Creative Member') return 'bg-slate-200 dark:bg-slate-700';\r\n        return 'bg-gradient-to-tr from-amber-400 to-orange-600 shadow-2xl shadow-amber-500/30';\r\n    };\r\n\r\n    const levelFrameClass = getLevelFrameClass(displayUser.role);\r\n\r\n    return (\r\n        <>\r\n            {/* Banner Area */}\r\n            <div className=\"relative h-[250px] md:h-[350px] 2xl:h-[450px] w-full overflow-hidden\">\r\n                <img\r\n                    src={displayUser.coverImage || \"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2000&auto=format&fit=crop\"}\r\n                    alt=\"Cover\"\r\n                    className=\"w-full h-full object-cover\"\r\n                />\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-[#0d0d0f] via-[#0d0d0f]/40 to-transparent\"></div>\r\n            </div>\r\n\r\n            {/* Profile Header Info */}\r\n            <div className=\"px-6 md:px-12 2xl:px-20 relative -mt-20 md:-mt-24 z-10 mb-16\">\r\n                <div className=\"flex flex-col md:flex-row items-end gap-6 md:gap-8\">\r\n\r\n                    {/* Avatar with Level Frame */}\r\n                    <div className=\"relative group\">\r\n                        <div className={`h-32 w-32 md:h-40 md:w-40 2xl:h-48 2xl:w-48 rounded-3xl p-[4px] ${levelFrameClass}`}>\r\n                            <div className=\"h-full w-full rounded-2xl overflow-hidden bg-[#0d0d0f] border-4 border-[#0d0d0f]\">\r\n                                <img\r\n                                    src={displayUser.avatar}\r\n                                    alt={name}\r\n                                    className=\"w-full h-full object-cover bg-slate-800\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Info Text */}\r\n                    <div className=\"flex-1 pb-2 w-full\">\r\n                        <div className=\"flex flex-wrap items-center gap-2 mb-1\">\r\n                            <h1 className=\"text-3xl md:text-4xl 2xl:text-5xl font-bold text-white tracking-tight\">{name}</h1>\r\n                            {availableForWork && (\r\n                                <span className=\"px-3 py-1 rounded-full bg-green-500/10 text-green-500 border border-green-500/20 text-xs font-bold uppercase tracking-wider flex items-center gap-1.5 ml-3\">\r\n                                    <span className=\"relative flex h-2 w-2\">\r\n                                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\r\n                                        <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\r\n                                    </span>\r\n                                    Disponible\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <p className=\"text-lg md:text-xl 2xl:text-2xl text-slate-300 font-light mb-4\">{displayUser.role}</p>\r\n\r\n                        <div className=\"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm 2xl:text-base text-slate-400\">\r\n                            {displayUser.location && (\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                    <MapPin className=\"h-4 w-4 text-slate-500\" />\r\n                                    {displayUser.location}\r\n                                </div>\r\n                            )}\r\n                            {(socialLinks.website || socialLinks.artstation) && (\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                    <LinkIcon className=\"h-4 w-4 text-slate-500\" />\r\n                                    <a\r\n                                        href={socialLinks.website ? (socialLinks.website.startsWith('http') ? socialLinks.website : `https://${socialLinks.website}`) : `https://artstation.com/${socialLinks.artstation}`}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                        className=\"hover:text-amber-500 transition-colors truncate max-w-[200px] md:max-w-none\"\r\n                                    >\r\n                                        {socialLinks.website\r\n                                            ? socialLinks.website.replace(/^https?:\\/\\/(www\\.)?/, '').replace(/\\/$/, '')\r\n                                            : `artstation.com/${socialLinks.artstation}`\r\n                                        }\r\n                                    </a>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"flex items-center gap-1.5 hidden sm:flex\">\r\n                                <Calendar className=\"h-4 w-4 text-slate-500\" />\r\n                                Se uni├│ en {displayUser.createdAt ? new Date(displayUser.createdAt).toLocaleDateString('es-ES', { month: 'long', year: 'numeric' }) : 'Mayo 2021'}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex flex-wrap items-center gap-3 pb-2 w-full md:w-auto mt-2 md:mt-0\">\r\n                        {!isOwnProfile && (\r\n                            <>\r\n                                <button\r\n                                    onClick={onFollowToggle}\r\n                                    disabled={isFollowLoading}\r\n                                    className={`flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all ${isFollowing\r\n                                        ? 'bg-white/10 text-white hover:bg-white/20'\r\n                                        : 'bg-amber-500 text-white hover:bg-amber-600 shadow-lg shadow-amber-500/20'\r\n                                        } ${isFollowLoading ? 'opacity-70 cursor-wait' : ''}`}\r\n                                >\r\n                                    {isFollowing ? <CheckCircle2 className=\"h-4 w-4\" /> : <UserPlus className=\"h-4 w-4\" />}\r\n                                    {isFollowLoading ? 'Procesando...' : (isFollowing ? 'Siguiendo' : 'Seguir')}\r\n                                </button>\r\n\r\n                                <button\r\n                                    onClick={() => onOpenChat?.(name)}\r\n                                    className=\"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all border bg-transparent border-white/20 text-white hover:bg-white/10\"\r\n                                >\r\n                                    <MessageSquare className=\"h-4 w-4\" />\r\n                                    Mensaje\r\n                                </button>\r\n                            </>\r\n                        )}\r\n\r\n                        {isOwnProfile && (\r\n                            <button\r\n                                onClick={onEditProfile}\r\n                                className=\"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-white/10 text-white hover:bg-white/20 font-semibold border border-white/10 transition-colors\"\r\n                            >\r\n                                <Settings className=\"h-4 w-4\" />\r\n                                Editar Perfil\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\components\\UserProfileInfo.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[193,196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[193,196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6202,6205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6202,6205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7718,7721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7718,7721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Palette, Linkedin, Twitter, Instagram, Github, Globe, Briefcase, GraduationCap } from 'lucide-react';\r\n\r\ninterface UserProfileInfoProps {\r\n    displayUser: any;\r\n    isOwnProfile: boolean;\r\n}\r\n\r\nexport const UserProfileInfo: React.FC<UserProfileInfoProps> = ({ displayUser, isOwnProfile }) => {\r\n    const aboutText = displayUser.bio || \"┬íHola! Soy un miembro de la comunidad creativa.\";\r\n    const socialLinks = displayUser.socialLinks || {};\r\n    const skills = displayUser.skills || [];\r\n    const experienceList = displayUser.experience || [];\r\n    const educationList = displayUser.education || [];\r\n\r\n    return (\r\n        <div className=\"space-y-10\">\r\n            {/* About */}\r\n            <div>\r\n                <h3 className=\"text-base font-bold text-white uppercase tracking-widest mb-4\">Sobre m├¡</h3>\r\n                <p className=\"text-base 2xl:text-lg text-slate-400 leading-relaxed mb-6\">\r\n                    {aboutText}\r\n                </p>\r\n                <div className=\"flex gap-3 flex-wrap\">\r\n                    {(() => {\r\n                        const getSocialUrl = (baseUrl: string, handle: string) => {\r\n                            if (!handle) return '';\r\n                            if (handle.startsWith('http://') || handle.startsWith('https://')) return handle;\r\n                            return `${baseUrl}${handle.replace(/^@/, '')}`;\r\n                        };\r\n\r\n                        return (\r\n                            <>\r\n                                {socialLinks.artstation && (\r\n                                    <a href={getSocialUrl('https://artstation.com/', socialLinks.artstation)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-[#13AFF0] hover:bg-[#13AFF0]/10 transition-colors\" title=\"ArtStation\">\r\n                                        <Palette className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                                {socialLinks.linkedin && (\r\n                                    <a href={getSocialUrl('https://linkedin.com/in/', socialLinks.linkedin)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-[#0A66C2] hover:bg-[#0A66C2]/10 transition-colors\" title=\"LinkedIn\">\r\n                                        <Linkedin className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                                {socialLinks.twitter && (\r\n                                    <a href={getSocialUrl('https://twitter.com/', socialLinks.twitter)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-[#1DA1F2] hover:bg-[#1DA1F2]/10 transition-colors\" title=\"Twitter\">\r\n                                        <Twitter className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                                {socialLinks.instagram && (\r\n                                    <a href={getSocialUrl('https://instagram.com/', socialLinks.instagram)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-[#E4405F] hover:bg-[#E4405F]/10 transition-colors\" title=\"Instagram\">\r\n                                        <Instagram className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                                {socialLinks.github && (\r\n                                    <a href={getSocialUrl('https://github.com/', socialLinks.github)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-colors\" title=\"GitHub\">\r\n                                        <Github className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                                {socialLinks.website && (\r\n                                    <a href={socialLinks.website.startsWith('http') ? socialLinks.website : `https://${socialLinks.website}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 rounded-xl bg-white/5 text-slate-400 hover:text-amber-500 hover:bg-amber-500/10 transition-colors\" title=\"Website\">\r\n                                        <Globe className=\"h-5 w-5\" />\r\n                                    </a>\r\n                                )}\r\n                            </>\r\n                        );\r\n                    })()}\r\n\r\n                    {/* Show defaults if no links and it's own profile */}\r\n                    {isOwnProfile && Object.values(socialLinks).every(v => !v) && (\r\n                        <p className=\"text-sm text-slate-500 italic\">No has a├▒adido redes sociales.</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Skills Section */}\r\n                {skills.length > 0 && (\r\n                    <div className=\"mt-8 pt-8 border-t border-white/5\">\r\n                        <h3 className=\"text-base font-bold text-white uppercase tracking-widest mb-4\">Habilidades</h3>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {skills.map((skill: string) => (\r\n                                <span key={skill} className=\"px-3 py-1.5 rounded-lg bg-white/5 border border-white/5 text-slate-300 text-sm font-medium hover:border-amber-500/30 transition-colors\">\r\n                                    {skill}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Experience Section */}\r\n            <div className=\"pt-8 border-t border-white/5\">\r\n                <h3 className=\"text-base font-bold text-white uppercase tracking-widest mb-8 flex items-center gap-2\">\r\n                    <Briefcase className=\"h-5 w-5 text-amber-500\" /> Experiencia\r\n                </h3>\r\n                <div className=\"space-y-10 relative border-l border-white/10 ml-2 pl-8\">\r\n                    {experienceList.length > 0 ? experienceList.map((job: any) => (\r\n                        <div key={job.id} className=\"relative\">\r\n                            <div className=\"absolute -left-[37px] top-1.5 h-3 w-3 rounded-full bg-[#0d0d0f] border-2 border-amber-500\"></div>\r\n\r\n                            <h4 className=\"text-lg 2xl:text-xl font-bold text-white leading-tight mb-1\">{job.role}</h4>\r\n                            <div className=\"text-sm 2xl:text-base text-amber-500 font-medium mb-1\">{job.company}</div>\r\n                            <div className=\"text-xs text-slate-500 mb-3 uppercase tracking-wide\">{job.period} ÔÇó {job.location}</div>\r\n\r\n                            <p className=\"text-sm 2xl:text-base text-slate-400 leading-relaxed\">\r\n                                {job.description}\r\n                            </p>\r\n                        </div>\r\n                    )) : (\r\n                        <div className=\"text-sm text-slate-600 italic\">No hay experiencia registrada a├║n.</div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Education Section */}\r\n            <div className=\"pt-8 border-t border-white/5 mt-8\">\r\n                <h3 className=\"text-base font-bold text-white uppercase tracking-widest mb-8 flex items-center gap-2\">\r\n                    <GraduationCap className=\"h-5 w-5 text-blue-500\" /> Educaci├│n\r\n                </h3>\r\n                <div className=\"space-y-10 relative border-l border-white/10 ml-2 pl-8\">\r\n                    {educationList.length > 0 ? educationList.map((edu: any) => (\r\n                        <div key={edu.id} className=\"relative\">\r\n                            <div className=\"absolute -left-[37px] top-1.5 h-3 w-3 rounded-full bg-[#0d0d0f] border-2 border-blue-500\"></div>\r\n\r\n                            <h4 className=\"text-lg 2xl:text-xl font-bold text-white leading-tight mb-1\">{edu.degree}</h4>\r\n                            <div className=\"text-sm 2xl:text-base text-blue-400 font-medium mb-1\">{edu.school}</div>\r\n                            <div className=\"text-xs text-slate-500 mb-2 uppercase tracking-wide\">{edu.period}</div>\r\n                            <p className=\"text-sm 2xl:text-base text-slate-400 leading-relaxed\">\r\n                                {edu.description}\r\n                            </p>\r\n                        </div>\r\n                    )) : (\r\n                        <div className=\"text-sm text-slate-600 italic\">No hay educaci├│n registrada a├║n.</div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\components\\UserProfileStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\views\\user\\components\\UserProfileTabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'savedItems' is defined but never used. Allowed unused args must match /^_/u.","line":52,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Layers, Newspaper, Plus, Trash2, Bookmark, Lock } from 'lucide-react';\r\nimport { PortfolioCard } from '../../../components/cards/PortfolioCard';\r\nimport { BlogCard } from '../../../components/cards/BlogCard';\r\nimport { PortfolioItem, ArticleItem, CollectionItem } from '../../../types';\r\n\r\n/** Identificadores v├ílidos para las tabs del perfil */\r\ntype ProfileTab = 'portfolio' | 'blog' | 'collections';\r\n\r\n/** Tipo uni├│n para cualquier item que puede aparecer en la tab \"guardados\" */\r\ntype SavedItem = PortfolioItem | ArticleItem;\r\n\r\n/**\r\n * Props para el componente UserProfileTabs\r\n */\r\ninterface UserProfileTabsProps {\r\n    /** Tab activa actualmente */\r\n    activeTab: ProfileTab;\r\n    /** Callback para cambiar la tab activa */\r\n    setActiveTab: (tab: ProfileTab) => void;\r\n    /** Si est├í viendo su propio perfil (habilita acciones de editar/eliminar) */\r\n    isOwnProfile: boolean;\r\n    /** ID del usuario cuyo perfil se est├í viendo */\r\n    profileUserId: string;\r\n    /** Proyectos del portafolio del usuario */\r\n    userPortfolio: PortfolioItem[];\r\n    /** Art├¡culos del blog del usuario */\r\n    userArticles: ArticleItem[];\r\n    /** Items guardados/marcados por el usuario */\r\n    savedItems: SavedItem[];\r\n    /** Colecciones del usuario */\r\n    userCollections: CollectionItem[];\r\n    /** Si los proyectos est├ín cargando */\r\n    projectsLoading: boolean;\r\n    /** Mensaje de error cuando falla la carga de art├¡culos */\r\n    articlesError: string | null;\r\n    /** Callback para eliminar un proyecto */\r\n    onDeleteProject: (id: string) => void;\r\n    /** Callback para guardar/marcar un item */\r\n    onSaveItem: (id: string, image: string, type?: string) => void;\r\n}\r\n\r\n\r\nexport const UserProfileTabs: React.FC<UserProfileTabsProps> = ({\r\n    activeTab,\r\n    setActiveTab,\r\n    isOwnProfile,\r\n    profileUserId,\r\n    userPortfolio,\r\n    userArticles,\r\n    savedItems,\r\n    userCollections,\r\n    projectsLoading,\r\n    articlesError,\r\n    onDeleteProject,\r\n    onSaveItem\r\n}) => {\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div>\r\n            {/* Tabs */}\r\n            <div className=\"flex items-center gap-6 md:gap-10 border-b border-white/10 mb-10 overflow-x-auto scrollbar-hide pb-2\">\r\n                <button\r\n                    onClick={() => setActiveTab('portfolio')}\r\n                    className={`pb-4 text-sm font-bold uppercase tracking-widest border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'portfolio'\r\n                        ? 'text-amber-500 border-amber-500'\r\n                        : 'text-slate-500 border-transparent hover:text-white'\r\n                        }`}\r\n                >\r\n                    <Layers className=\"h-4 w-4\" /> Portafolio <span className=\"text-xs bg-white/10 px-2 py-0.5 rounded-full text-slate-300 ml-1\">{userPortfolio.length}</span>\r\n                </button>\r\n\r\n                <button\r\n                    onClick={() => setActiveTab('blog')}\r\n                    className={`pb-4 text-sm font-bold uppercase tracking-widest border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'blog'\r\n                        ? 'text-amber-500 border-amber-500'\r\n                        : 'text-slate-500 border-transparent hover:text-white'\r\n                        }`}\r\n                >\r\n                    <Newspaper className=\"h-4 w-4\" /> Blog <span className=\"text-xs bg-white/10 px-2 py-0.5 rounded-full text-slate-300 ml-1\">{userArticles.length}</span>\r\n                </button>\r\n\r\n                {/* Show collections tab: always for own profile, or if other user has public collections */}\r\n                {(isOwnProfile || userCollections.length > 0) && (\r\n                    <button\r\n                        onClick={() => setActiveTab('collections')}\r\n                        className={`pb-4 text-sm font-bold uppercase tracking-widest border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${activeTab === 'collections'\r\n                            ? 'text-amber-500 border-amber-500'\r\n                            : 'text-slate-500 border-transparent hover:text-white'\r\n                            }`}\r\n                    >\r\n                        <Bookmark className=\"h-4 w-4\" /> Colecciones <span className=\"text-xs bg-white/10 px-2 py-0.5 rounded-full text-slate-300 ml-1\">{userCollections.length}</span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* TAB: PORTFOLIO */}\r\n            {activeTab === 'portfolio' && (\r\n                <>\r\n                    {/* 1. Show existing projects */}\r\n                    {userPortfolio.length > 0 && (\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-slide-up\">\r\n                            {userPortfolio.map((item) => (\r\n                                <div key={item.id} className=\"relative group\">\r\n                                    <PortfolioCard\r\n                                        item={item}\r\n                                        onClick={() => navigate(`/portfolio/${item.id}`)}\r\n                                        onSave={onSaveItem}\r\n                                        extraAction={\r\n                                            isOwnProfile ? (\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={(e) => {\r\n                                                        e.stopPropagation();\r\n                                                        onDeleteProject(item.id);\r\n                                                    }}\r\n                                                    className=\"pointer-events-auto p-2 bg-red-500/90 text-white rounded-full transition-all hover:bg-red-600 hover:scale-110 shadow-lg\"\r\n                                                    title=\"Eliminar proyecto\"\r\n                                                >\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </button>\r\n                                            ) : undefined\r\n                                        }\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* 2. Loading state */}\r\n                    {projectsLoading && userPortfolio.length === 0 && (\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                            {Array.from({ length: 5 }).map((_, i) => (\r\n                                <div key={i} className=\"aspect-[3/4] bg-white/5 rounded-2xl animate-pulse\"></div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* 3. Empty state */}\r\n                    {!projectsLoading && userPortfolio.length === 0 && (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 bg-white/5 rounded-2xl border border-white/5 text-center animate-fade-in\">\r\n                            <div className=\"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4\">\r\n                                <Layers className=\"h-8 w-8 text-slate-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-white mb-2\">Sin proyectos publicados</h3>\r\n                            <p className=\"text-slate-400 max-w-md mb-6\">Comparte tus creaciones con la comunidad.</p>\r\n                            {isOwnProfile && (\r\n                                <button onClick={() => navigate('/create/portfolio')} className=\"px-6 py-2 bg-amber-500 text-white font-bold rounded-xl hover:bg-amber-600 transition-colors flex items-center gap-2\">\r\n                                    <Plus className=\"h-4 w-4\" /> Crear Proyecto\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n            {/* TAB: BLOG */}\r\n            {activeTab === 'blog' && (\r\n                <>\r\n                    {articlesError && (\r\n                        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl text-red-500 flex items-center gap-3\">\r\n                            <div className=\"shrink-0 p-2 bg-red-500/20 rounded-lg\">\r\n                                <Lock className=\"h-5 w-5\" />\r\n                            </div>\r\n                            <div className=\"text-sm break-words flex-1\">\r\n                                <p className=\"font-bold\">Error cargando art├¡culos</p>\r\n                                <p className=\"opacity-80\">\r\n                                    {articlesError.split(/(https?:\\/\\/[^\\s]+)/g).map((part, i) =>\r\n                                        part.match(/^https?:\\/\\//) ? (\r\n                                            <a key={i} href={part} target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline font-bold hover:text-red-400 block mt-1\">\r\n                                                Ô×í´©Å Haz clic aqu├¡ para crear el ├¡ndice necesario\r\n                                            </a>\r\n                                        ) : part\r\n                                    )}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {userArticles.length > 0 ? (\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-slide-up\">\r\n                            {userArticles.map((item) => (\r\n                                <BlogCard\r\n                                    key={item.id}\r\n                                    article={item}\r\n                                    onClick={() => navigate(`/blog/${item.id}`)}\r\n                                    onSave={onSaveItem}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 bg-white/5 rounded-2xl border border-white/5 text-center animate-fade-in\">\r\n                            <div className=\"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4\">\r\n                                <Newspaper className=\"h-8 w-8 text-slate-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-white mb-2\">Sin art├¡culos publicados</h3>\r\n                            <p className=\"text-slate-400 max-w-md\">Este usuario a├║n no ha escrito art├¡culos.</p>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n            {/* TAB: COLLECTIONS */}\r\n            {activeTab === 'collections' && (\r\n                <>\r\n                    {userCollections.length > 0 ? (\r\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 animate-slide-up\">\r\n                            {userCollections.map((collection) => (\r\n                                <button\r\n                                    key={collection.id}\r\n                                    onClick={() => navigate(`/collections/${collection.id}?owner=${profileUserId}`)}\r\n                                    className=\"group relative rounded-2xl overflow-hidden bg-[#1a1a1e] ring-1 ring-white/10 hover:ring-amber-500/50 transition-all hover:shadow-xl hover:shadow-amber-500/10 text-left\"\r\n                                >\r\n                                    {/* Thumbnails Grid */}\r\n                                    <div className=\"aspect-square grid grid-cols-2 gap-0.5 bg-black/50\">\r\n                                        {(collection.thumbnails || []).slice(0, 4).map((thumb, i) => (\r\n                                            <div key={i} className=\"bg-slate-800 overflow-hidden\">\r\n                                                <img\r\n                                                    src={thumb}\r\n                                                    alt=\"\"\r\n                                                    loading=\"lazy\"\r\n                                                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n                                        {/* Fill empty slots */}\r\n                                        {Array.from({ length: Math.max(0, 4 - (collection.thumbnails?.length || 0)) }).map((_, i) => (\r\n                                            <div key={`empty-${i}`} className=\"bg-slate-800/50 flex items-center justify-center\">\r\n                                                <Bookmark className=\"h-6 w-6 text-slate-600\" />\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n\r\n                                    {/* Info */}\r\n                                    <div className=\"p-4\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <h3 className=\"font-bold text-white text-sm group-hover:text-amber-400 transition-colors truncate\">\r\n                                                {collection.title}\r\n                                            </h3>\r\n                                            {collection.isPrivate && <Lock className=\"h-3 w-3 text-slate-500 shrink-0\" />}\r\n                                        </div>\r\n                                        <p className=\"text-xs text-slate-500\">\r\n                                            {collection.itemCount || 0} {(collection.itemCount || 0) === 1 ? 'item' : 'items'}\r\n                                        </p>\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 bg-white/5 rounded-2xl border border-white/5 text-center animate-fade-in\">\r\n                            <div className=\"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4\">\r\n                                <Bookmark className=\"h-8 w-8 text-slate-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-white mb-2\">Sin colecciones</h3>\r\n                            <p className=\"text-slate-400 max-w-md\">\r\n                                Guarda proyectos y art├¡culos en colecciones para organizarlos.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Documentos\\Experiencia Creativa\\Latam Creativa\\WebSite\\LatamCreativa-Prototipo\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
